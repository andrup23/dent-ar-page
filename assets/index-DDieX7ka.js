var QM=Object.defineProperty;var JM=(e,n,t)=>n in e?QM(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var eL=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var qn=(e,n,t)=>JM(e,typeof n!="symbol"?n+"":n,t);import{MindARThree as tL}from"https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-face-three.prod.js";import{GLTFLoader as nL}from"https://unpkg.com/three@0.160.0/examples/jsm/loaders/GLTFLoader.js";var lQ=eL((yQ,L4)=>{function rL(e,n){for(var t=0;t<n.length;t++){const r=n[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();window.MindARThree=tL;window.GLTFLoader=nL;function aL(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Cg={exports:{}},_c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA;function iL(){if(XA)return _c;XA=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var u in a)u!=="key"&&(i[u]=a[u])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return _c.Fragment=n,_c.jsx=t,_c.jsxs=t,_c}var ZA;function oL(){return ZA||(ZA=1,Cg.exports=iL()),Cg.exports}var nt=oL(),Ng={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QA;function sL(){if(QA)return Ye;QA=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function m(L){return L===null||typeof L!="object"?null:(L=p&&L[p]||L["@@iterator"],typeof L=="function"?L:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function E(L,Y,Q){this.props=L,this.context=Y,this.refs=b,this.updater=Q||g}E.prototype.isReactComponent={},E.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},E.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function _(){}_.prototype=E.prototype;function w(L,Y,Q){this.props=L,this.context=Y,this.refs=b,this.updater=Q||g}var I=w.prototype=new _;I.constructor=w,y(I,E.prototype),I.isPureReactComponent=!0;var R=Array.isArray,C={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function D(L,Y,Q,de,he,Se){return Q=Se.ref,{$$typeof:e,type:L,key:Y,ref:Q!==void 0?Q:null,props:Se}}function P(L,Y){return D(L.type,Y,void 0,void 0,void 0,L.props)}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function N(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Q){return Y[Q]})}var U=/\/+/g;function V(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?N(""+L.key):Y.toString(36)}function ee(){}function re(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(ee,ee):(L.status="pending",L.then(function(Y){L.status==="pending"&&(L.status="fulfilled",L.value=Y)},function(Y){L.status==="pending"&&(L.status="rejected",L.reason=Y)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ne(L,Y,Q,de,he){var Se=typeof L;(Se==="undefined"||Se==="boolean")&&(L=null);var be=!1;if(L===null)be=!0;else switch(Se){case"bigint":case"string":case"number":be=!0;break;case"object":switch(L.$$typeof){case e:case n:be=!0;break;case h:return be=L._init,ne(be(L._payload),Y,Q,de,he)}}if(be)return he=he(L),be=de===""?"."+V(L,0):de,R(he)?(Q="",be!=null&&(Q=be.replace(U,"$&/")+"/"),ne(he,Y,Q,"",function(Ce){return Ce})):he!=null&&(k(he)&&(he=P(he,Q+(he.key==null||L&&L.key===he.key?"":(""+he.key).replace(U,"$&/")+"/")+be)),Y.push(he)),1;be=0;var Pe=de===""?".":de+":";if(R(L))for(var _e=0;_e<L.length;_e++)de=L[_e],Se=Pe+V(de,_e),be+=ne(de,Y,Q,Se,he);else if(_e=m(L),typeof _e=="function")for(L=_e.call(L),_e=0;!(de=L.next()).done;)de=de.value,Se=Pe+V(de,_e++),be+=ne(de,Y,Q,Se,he);else if(Se==="object"){if(typeof L.then=="function")return ne(re(L),Y,Q,de,he);throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return be}function z(L,Y,Q){if(L==null)return L;var de=[],he=0;return ne(L,de,"","",function(Se){return Y.call(Q,Se,he++)}),de}function Z(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(Q){(L._status===0||L._status===-1)&&(L._status=1,L._result=Q)},function(Q){(L._status===0||L._status===-1)&&(L._status=2,L._result=Q)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var $=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function oe(){}return Ye.Children={map:z,forEach:function(L,Y,Q){z(L,function(){Y.apply(this,arguments)},Q)},count:function(L){var Y=0;return z(L,function(){Y++}),Y},toArray:function(L){return z(L,function(Y){return Y})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ye.Component=E,Ye.Fragment=t,Ye.Profiler=a,Ye.PureComponent=w,Ye.StrictMode=r,Ye.Suspense=c,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ye.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ye.cache=function(L){return function(){return L.apply(null,arguments)}},Ye.cloneElement=function(L,Y,Q){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var de=y({},L.props),he=L.key,Se=void 0;if(Y!=null)for(be in Y.ref!==void 0&&(Se=void 0),Y.key!==void 0&&(he=""+Y.key),Y)!O.call(Y,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&Y.ref===void 0||(de[be]=Y[be]);var be=arguments.length-2;if(be===1)de.children=Q;else if(1<be){for(var Pe=Array(be),_e=0;_e<be;_e++)Pe[_e]=arguments[_e+2];de.children=Pe}return D(L.type,he,void 0,void 0,Se,de)},Ye.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:i,_context:L},L},Ye.createElement=function(L,Y,Q){var de,he={},Se=null;if(Y!=null)for(de in Y.key!==void 0&&(Se=""+Y.key),Y)O.call(Y,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(he[de]=Y[de]);var be=arguments.length-2;if(be===1)he.children=Q;else if(1<be){for(var Pe=Array(be),_e=0;_e<be;_e++)Pe[_e]=arguments[_e+2];he.children=Pe}if(L&&L.defaultProps)for(de in be=L.defaultProps,be)he[de]===void 0&&(he[de]=be[de]);return D(L,Se,void 0,void 0,null,he)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(L){return{$$typeof:u,render:L}},Ye.isValidElement=k,Ye.lazy=function(L){return{$$typeof:h,_payload:{_status:-1,_result:L},_init:Z}},Ye.memo=function(L,Y){return{$$typeof:f,type:L,compare:Y===void 0?null:Y}},Ye.startTransition=function(L){var Y=C.T,Q={};C.T=Q;try{var de=L(),he=C.S;he!==null&&he(Q,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(oe,$)}catch(Se){$(Se)}finally{C.T=Y}},Ye.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ye.use=function(L){return C.H.use(L)},Ye.useActionState=function(L,Y,Q){return C.H.useActionState(L,Y,Q)},Ye.useCallback=function(L,Y){return C.H.useCallback(L,Y)},Ye.useContext=function(L){return C.H.useContext(L)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(L,Y){return C.H.useDeferredValue(L,Y)},Ye.useEffect=function(L,Y){return C.H.useEffect(L,Y)},Ye.useId=function(){return C.H.useId()},Ye.useImperativeHandle=function(L,Y,Q){return C.H.useImperativeHandle(L,Y,Q)},Ye.useInsertionEffect=function(L,Y){return C.H.useInsertionEffect(L,Y)},Ye.useLayoutEffect=function(L,Y){return C.H.useLayoutEffect(L,Y)},Ye.useMemo=function(L,Y){return C.H.useMemo(L,Y)},Ye.useOptimistic=function(L,Y){return C.H.useOptimistic(L,Y)},Ye.useReducer=function(L,Y,Q){return C.H.useReducer(L,Y,Q)},Ye.useRef=function(L){return C.H.useRef(L)},Ye.useState=function(L){return C.H.useState(L)},Ye.useSyncExternalStore=function(L,Y,Q){return C.H.useSyncExternalStore(L,Y,Q)},Ye.useTransition=function(){return C.H.useTransition()},Ye.version="19.0.0",Ye}var JA;function Zy(){return JA||(JA=1,Ng.exports=sL()),Ng.exports}var J=Zy();const uL=aL(J),ew=rL({__proto__:null,default:uL},[J]);var Tg={exports:{}},Ac={},Og={exports:{}},kg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function lL(){return tw||(tw=1,function(e){function n(z,Z){var $=z.length;z.push(Z);e:for(;0<$;){var oe=$-1>>>1,L=z[oe];if(0<a(L,Z))z[oe]=Z,z[$]=L,$=oe;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Z=z[0],$=z.pop();if($!==Z){z[0]=$;e:for(var oe=0,L=z.length,Y=L>>>1;oe<Y;){var Q=2*(oe+1)-1,de=z[Q],he=Q+1,Se=z[he];if(0>a(de,$))he<L&&0>a(Se,de)?(z[oe]=Se,z[he]=$,oe=he):(z[oe]=de,z[Q]=$,oe=Q);else if(he<L&&0>a(Se,$))z[oe]=Se,z[he]=$,oe=he;else break e}}return Z}function a(z,Z){var $=z.sortIndex-Z.sortIndex;return $!==0?$:z.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();e.unstable_now=function(){return o.now()-u}}var c=[],f=[],h=1,p=null,m=3,g=!1,y=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function I(z){for(var Z=t(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=z)r(f),Z.sortIndex=Z.expirationTime,n(c,Z);else break;Z=t(f)}}function R(z){if(b=!1,I(z),!y)if(t(c)!==null)y=!0,re();else{var Z=t(f);Z!==null&&ne(R,Z.startTime-z)}}var C=!1,O=-1,D=5,P=-1;function k(){return!(e.unstable_now()-P<D)}function N(){if(C){var z=e.unstable_now();P=z;var Z=!0;try{e:{y=!1,b&&(b=!1,_(O),O=-1),g=!0;var $=m;try{t:{for(I(z),p=t(c);p!==null&&!(p.expirationTime>z&&k());){var oe=p.callback;if(typeof oe=="function"){p.callback=null,m=p.priorityLevel;var L=oe(p.expirationTime<=z);if(z=e.unstable_now(),typeof L=="function"){p.callback=L,I(z),Z=!0;break t}p===t(c)&&r(c),I(z)}else r(c);p=t(c)}if(p!==null)Z=!0;else{var Y=t(f);Y!==null&&ne(R,Y.startTime-z),Z=!1}}break e}finally{p=null,m=$,g=!1}Z=void 0}}finally{Z?U():C=!1}}}var U;if(typeof w=="function")U=function(){w(N)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ee=V.port2;V.port1.onmessage=N,U=function(){ee.postMessage(null)}}else U=function(){E(N,0)};function re(){C||(C=!0,U())}function ne(z,Z){O=E(function(){z(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){y||g||(y=!0,re())},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return t(c)},e.unstable_next=function(z){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var $=m;m=Z;try{return z()}finally{m=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,Z){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var $=m;m=z;try{return Z()}finally{m=$}},e.unstable_scheduleCallback=function(z,Z,$){var oe=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?oe+$:oe):$=oe,z){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=$+L,z={id:h++,callback:Z,priorityLevel:z,startTime:$,expirationTime:L,sortIndex:-1},$>oe?(z.sortIndex=$,n(f,z),t(c)===null&&z===t(f)&&(b?(_(O),O=-1):b=!0,ne(R,$-oe))):(z.sortIndex=L,n(c,z),y||g||(y=!0,re())),z},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(z){var Z=m;return function(){var $=m;m=Z;try{return z.apply(this,arguments)}finally{m=$}}}}(kg)),kg}var nw;function cL(){return nw||(nw=1,Og.exports=lL()),Og.exports}var xg={exports:{}},Yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function fL(){if(rw)return Yn;rw=1;var e=Zy();function n(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(n(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(c,f,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:f,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Yn.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(n(299));return i(c,f,null,h)},Yn.flushSync=function(c){var f=o.T,h=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=f,r.p=h,r.d.f()}},Yn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},Yn.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Yn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,p=u(h,f.crossOrigin),m=typeof f.integrity=="string"?f.integrity:void 0,g=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:g}):h==="script"&&r.d.X(c,{crossOrigin:p,integrity:m,fetchPriority:g,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Yn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=u(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},Yn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,p=u(h,f.crossOrigin);r.d.L(c,h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Yn.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=u(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},Yn.requestFormReset=function(c){r.d.r(c)},Yn.unstable_batchedUpdates=function(c,f){return c(f)},Yn.useFormState=function(c,f,h){return o.H.useFormState(c,f,h)},Yn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Yn.version="19.0.0",Yn}var aw;function dL(){if(aw)return xg.exports;aw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),xg.exports=fL(),xg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw;function hL(){if(iw)return Ac;iw=1;var e=cL(),n=Zy(),t=dL();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var i=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),R=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function O(s){return s===null||typeof s!="object"?null:(s=C&&s[C]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function P(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case b:return"Suspense";case E:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case g:return(s.displayName||"Context")+".Provider";case m:return(s._context.displayName||"Context")+".Consumer";case y:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case _:return l=s.displayName||null,l!==null?l:P(s.type)||"Memo";case w:l=s._payload,s=s._init;try{return P(s(l))}catch{}}return null}var k=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=Object.assign,U,V;function ee(s){if(U===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);U=l&&l[1]||"",V=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+U+s+V}var re=!1;function ne(s,l){if(!s||re)return"";re=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(l){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(ce){var ae=ce}Reflect.construct(s,[],ve)}else{try{ve.call()}catch(ce){ae=ce}s.call(ve.prototype)}}else{try{throw Error()}catch(ce){ae=ce}(ve=s())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(ce){if(ce&&ae&&typeof ce.stack=="string")return[ce.stack,ae.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=v.DetermineComponentFrameRoot(),T=A[0],x=A[1];if(T&&x){var G=T.split(`
`),q=x.split(`
`);for(S=v=0;v<G.length&&!G[v].includes("DetermineComponentFrameRoot");)v++;for(;S<q.length&&!q[S].includes("DetermineComponentFrameRoot");)S++;if(v===G.length||S===q.length)for(v=G.length-1,S=q.length-1;1<=v&&0<=S&&G[v]!==q[S];)S--;for(;1<=v&&0<=S;v--,S--)if(G[v]!==q[S]){if(v!==1||S!==1)do if(v--,S--,0>S||G[v]!==q[S]){var fe=`
`+G[v].replace(" at new "," at ");return s.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",s.displayName)),fe}while(1<=v&&0<=S);break}}}finally{re=!1,Error.prepareStackTrace=d}return(d=s?s.displayName||s.name:"")?ee(d):""}function z(s){switch(s.tag){case 26:case 27:case 5:return ee(s.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return s=ne(s.type,!1),s;case 11:return s=ne(s.type.render,!1),s;case 1:return s=ne(s.type,!0),s;default:return""}}function Z(s){try{var l="";do l+=z(s),s=s.return;while(s);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function $(s){var l=s,d=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(d=l.return),s=l.return;while(s)}return l.tag===3?d:null}function oe(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function L(s){if($(s)!==s)throw Error(r(188))}function Y(s){var l=s.alternate;if(!l){if(l=$(s),l===null)throw Error(r(188));return l!==s?null:s}for(var d=s,v=l;;){var S=d.return;if(S===null)break;var A=S.alternate;if(A===null){if(v=S.return,v!==null){d=v;continue}break}if(S.child===A.child){for(A=S.child;A;){if(A===d)return L(S),s;if(A===v)return L(S),l;A=A.sibling}throw Error(r(188))}if(d.return!==v.return)d=S,v=A;else{for(var T=!1,x=S.child;x;){if(x===d){T=!0,d=S,v=A;break}if(x===v){T=!0,v=S,d=A;break}x=x.sibling}if(!T){for(x=A.child;x;){if(x===d){T=!0,d=A,v=S;break}if(x===v){T=!0,v=A,d=S;break}x=x.sibling}if(!T)throw Error(r(189))}}if(d.alternate!==v)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?s:l}function Q(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=Q(s),l!==null)return l;s=s.sibling}return null}var de=Array.isArray,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},be=[],Pe=-1;function _e(s){return{current:s}}function Ce(s){0>Pe||(s.current=be[Pe],be[Pe]=null,Pe--)}function Be(s,l){Pe++,be[Pe]=s.current,s.current=l}var Le=_e(null),qe=_e(null),ge=_e(null),ht=_e(null);function pt(s,l){switch(Be(ge,l),Be(qe,s),Be(Le,null),s=l.nodeType,s){case 9:case 11:l=(l=l.documentElement)&&(l=l.namespaceURI)?IA(l):0;break;default:if(s=s===8?l.parentNode:l,l=s.tagName,s=s.namespaceURI)s=IA(s),l=RA(s,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Ce(Le),Be(Le,l)}function at(){Ce(Le),Ce(qe),Ce(ge)}function _n(s){s.memoizedState!==null&&Be(ht,s);var l=Le.current,d=RA(l,s.type);l!==d&&(Be(qe,s),Be(Le,d))}function yt(s){qe.current===s&&(Ce(Le),Ce(qe)),ht.current===s&&(Ce(ht),gc._currentValue=Se)}var Mt=Object.prototype.hasOwnProperty,zn=e.unstable_scheduleCallback,rr=e.unstable_cancelCallback,Nr=e.unstable_shouldYield,dr=e.unstable_requestPaint,tn=e.unstable_now,hr=e.unstable_getCurrentPriorityLevel,pi=e.unstable_ImmediatePriority,Zr=e.unstable_UserBlockingPriority,lt=e.unstable_NormalPriority,nn=e.unstable_LowPriority,An=e.unstable_IdlePriority,mi=e.log,ar=e.unstable_setDisableYieldValue,cn=null,xn=null;function Rl(s){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(cn,s,void 0,(s.current.flags&128)===128)}catch{}}function to(s){if(typeof mi=="function"&&ar(s),xn&&typeof xn.setStrictMode=="function")try{xn.setStrictMode(cn,s)}catch{}}var Tr=Math.clz32?Math.clz32:F4,B4=Math.log,U4=Math.LN2;function F4(s){return s>>>=0,s===0?32:31-(B4(s)/U4|0)|0}var Pf=128,Mf=4194304;function Xo(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Lf(s,l){var d=s.pendingLanes;if(d===0)return 0;var v=0,S=s.suspendedLanes,A=s.pingedLanes,T=s.warmLanes;s=s.finishedLanes!==0;var x=d&134217727;return x!==0?(d=x&~S,d!==0?v=Xo(d):(A&=x,A!==0?v=Xo(A):s||(T=x&~T,T!==0&&(v=Xo(T))))):(x=d&~S,x!==0?v=Xo(x):A!==0?v=Xo(A):s||(T=d&~T,T!==0&&(v=Xo(T)))),v===0?0:l!==0&&l!==v&&(l&S)===0&&(S=v&-v,T=l&-l,S>=T||S===32&&(T&4194176)!==0)?l:v}function Cl(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function V4(s,l){switch(s){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gS(){var s=Pf;return Pf<<=1,(Pf&4194176)===0&&(Pf=128),s}function yS(){var s=Mf;return Mf<<=1,(Mf&62914560)===0&&(Mf=4194304),s}function _v(s){for(var l=[],d=0;31>d;d++)l.push(s);return l}function Nl(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function G4(s,l,d,v,S,A){var T=s.pendingLanes;s.pendingLanes=d,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=d,s.entangledLanes&=d,s.errorRecoveryDisabledLanes&=d,s.shellSuspendCounter=0;var x=s.entanglements,G=s.expirationTimes,q=s.hiddenUpdates;for(d=T&~d;0<d;){var fe=31-Tr(d),ve=1<<fe;x[fe]=0,G[fe]=-1;var ae=q[fe];if(ae!==null)for(q[fe]=null,fe=0;fe<ae.length;fe++){var ce=ae[fe];ce!==null&&(ce.lane&=-536870913)}d&=~ve}v!==0&&bS(s,v,0),A!==0&&S===0&&s.tag!==0&&(s.suspendedLanes|=A&~(T&~l))}function bS(s,l,d){s.pendingLanes|=l,s.suspendedLanes&=~l;var v=31-Tr(l);s.entangledLanes|=l,s.entanglements[v]=s.entanglements[v]|1073741824|d&4194218}function SS(s,l){var d=s.entangledLanes|=l;for(s=s.entanglements;d;){var v=31-Tr(d),S=1<<v;S&l|s[v]&l&&(s[v]|=l),d&=~S}}function ES(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function _S(){var s=he.p;return s!==0?s:(s=window.event,s===void 0?32:WA(s.type))}function H4(s,l){var d=he.p;try{return he.p=s,l()}finally{he.p=d}}var no=Math.random().toString(36).slice(2),Wn="__reactFiber$"+no,pr="__reactProps$"+no,Js="__reactContainer$"+no,Av="__reactEvents$"+no,z4="__reactListeners$"+no,W4="__reactHandles$"+no,AS="__reactResources$"+no,Tl="__reactMarker$"+no;function wv(s){delete s[Wn],delete s[pr],delete s[Av],delete s[z4],delete s[W4]}function Zo(s){var l=s[Wn];if(l)return l;for(var d=s.parentNode;d;){if(l=d[Js]||d[Wn]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(s=TA(s);s!==null;){if(d=s[Wn])return d;s=TA(s)}return l}s=d,d=s.parentNode}return null}function eu(s){if(s=s[Wn]||s[Js]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function Ol(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function tu(s){var l=s[AS];return l||(l=s[AS]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function wn(s){s[Tl]=!0}var wS=new Set,IS={};function Qo(s,l){nu(s,l),nu(s+"Capture",l)}function nu(s,l){for(IS[s]=l,s=0;s<l.length;s++)wS.add(l[s])}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),K4=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),RS={},CS={};function q4(s){return Mt.call(CS,s)?!0:Mt.call(RS,s)?!1:K4.test(s)?CS[s]=!0:(RS[s]=!0,!1)}function Bf(s,l,d){if(q4(l))if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var v=l.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+d)}}function Uf(s,l,d){if(d===null)s.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+d)}}function gi(s,l,d,v){if(v===null)s.removeAttribute(d);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(d);return}s.setAttributeNS(l,d,""+v)}}function Qr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function NS(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Y4(s){var l=NS(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),v=""+s[l];if(!s.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var S=d.get,A=d.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return S.call(this)},set:function(T){v=""+T,A.call(this,T)}}),Object.defineProperty(s,l,{enumerable:d.enumerable}),{getValue:function(){return v},setValue:function(T){v=""+T},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Ff(s){s._valueTracker||(s._valueTracker=Y4(s))}function TS(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var d=l.getValue(),v="";return s&&(v=NS(s)?s.checked?"true":"false":s.value),s=v,s!==d?(l.setValue(s),!0):!1}function Vf(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var $4=/[\n"\\]/g;function Jr(s){return s.replace($4,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Iv(s,l,d,v,S,A,T,x){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),l!=null?T==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Qr(l)):s.value!==""+Qr(l)&&(s.value=""+Qr(l)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),l!=null?Rv(s,T,Qr(l)):d!=null?Rv(s,T,Qr(d)):v!=null&&s.removeAttribute("value"),S==null&&A!=null&&(s.defaultChecked=!!A),S!=null&&(s.checked=S&&typeof S!="function"&&typeof S!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.name=""+Qr(x):s.removeAttribute("name")}function OS(s,l,d,v,S,A,T,x){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.type=A),l!=null||d!=null){if(!(A!=="submit"&&A!=="reset"||l!=null))return;d=d!=null?""+Qr(d):"",l=l!=null?""+Qr(l):d,x||l===s.value||(s.value=l),s.defaultValue=l}v=v??S,v=typeof v!="function"&&typeof v!="symbol"&&!!v,s.checked=x?s.checked:!!v,s.defaultChecked=!!v,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T)}function Rv(s,l,d){l==="number"&&Vf(s.ownerDocument)===s||s.defaultValue===""+d||(s.defaultValue=""+d)}function ru(s,l,d,v){if(s=s.options,l){l={};for(var S=0;S<d.length;S++)l["$"+d[S]]=!0;for(d=0;d<s.length;d++)S=l.hasOwnProperty("$"+s[d].value),s[d].selected!==S&&(s[d].selected=S),S&&v&&(s[d].defaultSelected=!0)}else{for(d=""+Qr(d),l=null,S=0;S<s.length;S++){if(s[S].value===d){s[S].selected=!0,v&&(s[S].defaultSelected=!0);return}l!==null||s[S].disabled||(l=s[S])}l!==null&&(l.selected=!0)}}function kS(s,l,d){if(l!=null&&(l=""+Qr(l),l!==s.value&&(s.value=l),d==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=d!=null?""+Qr(d):""}function xS(s,l,d,v){if(l==null){if(v!=null){if(d!=null)throw Error(r(92));if(de(v)){if(1<v.length)throw Error(r(93));v=v[0]}d=v}d==null&&(d=""),l=d}d=Qr(l),s.defaultValue=d,v=s.textContent,v===d&&v!==""&&v!==null&&(s.value=v)}function au(s,l){if(l){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=l;return}}s.textContent=l}var j4=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function DS(s,l,d){var v=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?v?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":v?s.setProperty(l,d):typeof d!="number"||d===0||j4.has(l)?l==="float"?s.cssFloat=d:s[l]=(""+d).trim():s[l]=d+"px"}function PS(s,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,d!=null){for(var v in d)!d.hasOwnProperty(v)||l!=null&&l.hasOwnProperty(v)||(v.indexOf("--")===0?s.setProperty(v,""):v==="float"?s.cssFloat="":s[v]="");for(var S in l)v=l[S],l.hasOwnProperty(S)&&d[S]!==v&&DS(s,S,v)}else for(var A in l)l.hasOwnProperty(A)&&DS(s,A,l[A])}function Cv(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X4=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Z4=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gf(s){return Z4.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Nv=null;function Tv(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var iu=null,ou=null;function MS(s){var l=eu(s);if(l&&(s=l.stateNode)){var d=s[pr]||null;e:switch(s=l.stateNode,l.type){case"input":if(Iv(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Jr(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var v=d[l];if(v!==s&&v.form===s.form){var S=v[pr]||null;if(!S)throw Error(r(90));Iv(v,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(l=0;l<d.length;l++)v=d[l],v.form===s.form&&TS(v)}break e;case"textarea":kS(s,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&ru(s,!!d.multiple,l,!1)}}}var Ov=!1;function LS(s,l,d){if(Ov)return s(l,d);Ov=!0;try{var v=s(l);return v}finally{if(Ov=!1,(iu!==null||ou!==null)&&(wd(),iu&&(l=iu,s=ou,ou=iu=null,MS(l),s)))for(l=0;l<s.length;l++)MS(s[l])}}function kl(s,l){var d=s.stateNode;if(d===null)return null;var v=d[pr]||null;if(v===null)return null;d=v[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var kv=!1;if(vi)try{var xl={};Object.defineProperty(xl,"passive",{get:function(){kv=!0}}),window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{kv=!1}var ro=null,xv=null,Hf=null;function BS(){if(Hf)return Hf;var s,l=xv,d=l.length,v,S="value"in ro?ro.value:ro.textContent,A=S.length;for(s=0;s<d&&l[s]===S[s];s++);var T=d-s;for(v=1;v<=T&&l[d-v]===S[A-v];v++);return Hf=S.slice(s,1<v?1-v:void 0)}function zf(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Wf(){return!0}function US(){return!1}function mr(s){function l(d,v,S,A,T){this._reactName=d,this._targetInst=S,this.type=v,this.nativeEvent=A,this.target=T,this.currentTarget=null;for(var x in s)s.hasOwnProperty(x)&&(d=s[x],this[x]=d?d(A):A[x]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Wf:US,this.isPropagationStopped=US,this}return N(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Wf)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Wf)},persist:function(){},isPersistent:Wf}),l}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kf=mr(Jo),Dl=N({},Jo,{view:0,detail:0}),Q4=mr(Dl),Dv,Pv,Pl,qf=N({},Dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lv,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Pl&&(Pl&&s.type==="mousemove"?(Dv=s.screenX-Pl.screenX,Pv=s.screenY-Pl.screenY):Pv=Dv=0,Pl=s),Dv)},movementY:function(s){return"movementY"in s?s.movementY:Pv}}),FS=mr(qf),J4=N({},qf,{dataTransfer:0}),eP=mr(J4),tP=N({},Dl,{relatedTarget:0}),Mv=mr(tP),nP=N({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),rP=mr(nP),aP=N({},Jo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),iP=mr(aP),oP=N({},Jo,{data:0}),VS=mr(oP),sP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cP(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=lP[s])?!!l[s]:!1}function Lv(){return cP}var fP=N({},Dl,{key:function(s){if(s.key){var l=sP[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=zf(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?uP[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lv,charCode:function(s){return s.type==="keypress"?zf(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?zf(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),dP=mr(fP),hP=N({},qf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GS=mr(hP),pP=N({},Dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lv}),mP=mr(pP),vP=N({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),gP=mr(vP),yP=N({},qf,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),bP=mr(yP),SP=N({},Jo,{newState:0,oldState:0}),EP=mr(SP),_P=[9,13,27,32],Bv=vi&&"CompositionEvent"in window,Ml=null;vi&&"documentMode"in document&&(Ml=document.documentMode);var AP=vi&&"TextEvent"in window&&!Ml,HS=vi&&(!Bv||Ml&&8<Ml&&11>=Ml),zS=" ",WS=!1;function KS(s,l){switch(s){case"keyup":return _P.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qS(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var su=!1;function wP(s,l){switch(s){case"compositionend":return qS(l);case"keypress":return l.which!==32?null:(WS=!0,zS);case"textInput":return s=l.data,s===zS&&WS?null:s;default:return null}}function IP(s,l){if(su)return s==="compositionend"||!Bv&&KS(s,l)?(s=BS(),Hf=xv=ro=null,su=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return HS&&l.locale!=="ko"?null:l.data;default:return null}}var RP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YS(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!RP[s.type]:l==="textarea"}function $S(s,l,d,v){iu?ou?ou.push(v):ou=[v]:iu=v,l=Td(l,"onChange"),0<l.length&&(d=new Kf("onChange","change",null,d,v),s.push({event:d,listeners:l}))}var Ll=null,Bl=null;function CP(s){SA(s,0)}function Yf(s){var l=Ol(s);if(TS(l))return s}function jS(s,l){if(s==="change")return l}var XS=!1;if(vi){var Uv;if(vi){var Fv="oninput"in document;if(!Fv){var ZS=document.createElement("div");ZS.setAttribute("oninput","return;"),Fv=typeof ZS.oninput=="function"}Uv=Fv}else Uv=!1;XS=Uv&&(!document.documentMode||9<document.documentMode)}function QS(){Ll&&(Ll.detachEvent("onpropertychange",JS),Bl=Ll=null)}function JS(s){if(s.propertyName==="value"&&Yf(Bl)){var l=[];$S(l,Bl,s,Tv(s)),LS(CP,l)}}function NP(s,l,d){s==="focusin"?(QS(),Ll=l,Bl=d,Ll.attachEvent("onpropertychange",JS)):s==="focusout"&&QS()}function TP(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Yf(Bl)}function OP(s,l){if(s==="click")return Yf(l)}function kP(s,l){if(s==="input"||s==="change")return Yf(l)}function xP(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Or=typeof Object.is=="function"?Object.is:xP;function Ul(s,l){if(Or(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var d=Object.keys(s),v=Object.keys(l);if(d.length!==v.length)return!1;for(v=0;v<d.length;v++){var S=d[v];if(!Mt.call(l,S)||!Or(s[S],l[S]))return!1}return!0}function eE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function tE(s,l){var d=eE(s);s=0;for(var v;d;){if(d.nodeType===3){if(v=s+d.textContent.length,s<=l&&v>=l)return{node:d,offset:l-s};s=v}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=eE(d)}}function nE(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?nE(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function rE(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Vf(s.document);l instanceof s.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)s=l.contentWindow;else break;l=Vf(s.document)}return l}function Vv(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}function DP(s,l){var d=rE(l);l=s.focusedElem;var v=s.selectionRange;if(d!==l&&l&&l.ownerDocument&&nE(l.ownerDocument.documentElement,l)){if(v!==null&&Vv(l)){if(s=v.start,d=v.end,d===void 0&&(d=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(d,l.value.length);else if(d=(s=l.ownerDocument||document)&&s.defaultView||window,d.getSelection){d=d.getSelection();var S=l.textContent.length,A=Math.min(v.start,S);v=v.end===void 0?A:Math.min(v.end,S),!d.extend&&A>v&&(S=v,v=A,A=S),S=tE(l,A);var T=tE(l,v);S&&T&&(d.rangeCount!==1||d.anchorNode!==S.node||d.anchorOffset!==S.offset||d.focusNode!==T.node||d.focusOffset!==T.offset)&&(s=s.createRange(),s.setStart(S.node,S.offset),d.removeAllRanges(),A>v?(d.addRange(s),d.extend(T.node,T.offset)):(s.setEnd(T.node,T.offset),d.addRange(s)))}}for(s=[],d=l;d=d.parentNode;)d.nodeType===1&&s.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)d=s[l],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var PP=vi&&"documentMode"in document&&11>=document.documentMode,uu=null,Gv=null,Fl=null,Hv=!1;function aE(s,l,d){var v=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Hv||uu==null||uu!==Vf(v)||(v=uu,"selectionStart"in v&&Vv(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Fl&&Ul(Fl,v)||(Fl=v,v=Td(Gv,"onSelect"),0<v.length&&(l=new Kf("onSelect","select",null,l,d),s.push({event:l,listeners:v}),l.target=uu)))}function es(s,l){var d={};return d[s.toLowerCase()]=l.toLowerCase(),d["Webkit"+s]="webkit"+l,d["Moz"+s]="moz"+l,d}var lu={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},zv={},iE={};vi&&(iE=document.createElement("div").style,"AnimationEvent"in window||(delete lu.animationend.animation,delete lu.animationiteration.animation,delete lu.animationstart.animation),"TransitionEvent"in window||delete lu.transitionend.transition);function ts(s){if(zv[s])return zv[s];if(!lu[s])return s;var l=lu[s],d;for(d in l)if(l.hasOwnProperty(d)&&d in iE)return zv[s]=l[d];return s}var oE=ts("animationend"),sE=ts("animationiteration"),uE=ts("animationstart"),MP=ts("transitionrun"),LP=ts("transitionstart"),BP=ts("transitioncancel"),lE=ts("transitionend"),cE=new Map,fE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Aa(s,l){cE.set(s,l),Qo(l,[s])}var ea=[],cu=0,Wv=0;function $f(){for(var s=cu,l=Wv=cu=0;l<s;){var d=ea[l];ea[l++]=null;var v=ea[l];ea[l++]=null;var S=ea[l];ea[l++]=null;var A=ea[l];if(ea[l++]=null,v!==null&&S!==null){var T=v.pending;T===null?S.next=S:(S.next=T.next,T.next=S),v.pending=S}A!==0&&dE(d,S,A)}}function jf(s,l,d,v){ea[cu++]=s,ea[cu++]=l,ea[cu++]=d,ea[cu++]=v,Wv|=v,s.lanes|=v,s=s.alternate,s!==null&&(s.lanes|=v)}function Kv(s,l,d,v){return jf(s,l,d,v),Xf(s)}function ao(s,l){return jf(s,null,null,l),Xf(s)}function dE(s,l,d){s.lanes|=d;var v=s.alternate;v!==null&&(v.lanes|=d);for(var S=!1,A=s.return;A!==null;)A.childLanes|=d,v=A.alternate,v!==null&&(v.childLanes|=d),A.tag===22&&(s=A.stateNode,s===null||s._visibility&1||(S=!0)),s=A,A=A.return;S&&l!==null&&s.tag===3&&(A=s.stateNode,S=31-Tr(d),A=A.hiddenUpdates,s=A[S],s===null?A[S]=[l]:s.push(l),l.lane=d|536870912)}function Xf(s){if(50<cc)throw cc=0,Z0=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var fu={},hE=new WeakMap;function ta(s,l){if(typeof s=="object"&&s!==null){var d=hE.get(s);return d!==void 0?d:(l={value:s,source:l,stack:Z(l)},hE.set(s,l),l)}return{value:s,source:l,stack:Z(l)}}var du=[],hu=0,Zf=null,Qf=0,na=[],ra=0,ns=null,yi=1,bi="";function rs(s,l){du[hu++]=Qf,du[hu++]=Zf,Zf=s,Qf=l}function pE(s,l,d){na[ra++]=yi,na[ra++]=bi,na[ra++]=ns,ns=s;var v=yi;s=bi;var S=32-Tr(v)-1;v&=~(1<<S),d+=1;var A=32-Tr(l)+S;if(30<A){var T=S-S%5;A=(v&(1<<T)-1).toString(32),v>>=T,S-=T,yi=1<<32-Tr(l)+S|d<<S|v,bi=A+s}else yi=1<<A|d<<S|v,bi=s}function qv(s){s.return!==null&&(rs(s,1),pE(s,1,0))}function Yv(s){for(;s===Zf;)Zf=du[--hu],du[hu]=null,Qf=du[--hu],du[hu]=null;for(;s===ns;)ns=na[--ra],na[ra]=null,bi=na[--ra],na[ra]=null,yi=na[--ra],na[ra]=null}var ir=null,Dn=null,st=!1,wa=null,Ma=!1,$v=Error(r(519));function as(s){var l=Error(r(418,""));throw Hl(ta(l,s)),$v}function mE(s){var l=s.stateNode,d=s.type,v=s.memoizedProps;switch(l[Wn]=s,l[pr]=v,d){case"dialog":et("cancel",l),et("close",l);break;case"iframe":case"object":case"embed":et("load",l);break;case"video":case"audio":for(d=0;d<dc.length;d++)et(dc[d],l);break;case"source":et("error",l);break;case"img":case"image":case"link":et("error",l),et("load",l);break;case"details":et("toggle",l);break;case"input":et("invalid",l),OS(l,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Ff(l);break;case"select":et("invalid",l);break;case"textarea":et("invalid",l),xS(l,v.value,v.defaultValue,v.children),Ff(l)}d=v.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||v.suppressHydrationWarning===!0||wA(l.textContent,d)?(v.popover!=null&&(et("beforetoggle",l),et("toggle",l)),v.onScroll!=null&&et("scroll",l),v.onScrollEnd!=null&&et("scrollend",l),v.onClick!=null&&(l.onclick=Od),l=!0):l=!1,l||as(s)}function vE(s){for(ir=s.return;ir;)switch(ir.tag){case 3:case 27:Ma=!0;return;case 5:case 13:Ma=!1;return;default:ir=ir.return}}function Vl(s){if(s!==ir)return!1;if(!st)return vE(s),st=!0,!1;var l=!1,d;if((d=s.tag!==3&&s.tag!==27)&&((d=s.tag===5)&&(d=s.type,d=!(d!=="form"&&d!=="button")||pg(s.type,s.memoizedProps)),d=!d),d&&(l=!0),l&&Dn&&as(s),vE(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(d=s.data,d==="/$"){if(l===0){Dn=Ra(s.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;s=s.nextSibling}Dn=null}}else Dn=ir?Ra(s.stateNode.nextSibling):null;return!0}function Gl(){Dn=ir=null,st=!1}function Hl(s){wa===null?wa=[s]:wa.push(s)}var zl=Error(r(460)),gE=Error(r(474)),jv={then:function(){}};function yE(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Jf(){}function bE(s,l,d){switch(d=s[d],d===void 0?s.push(l):d!==l&&(l.then(Jf,Jf),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===zl?Error(r(483)):s;default:if(typeof l.status=="string")l.then(Jf,Jf);else{if(s=Ct,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(v){if(l.status==="pending"){var S=l;S.status="fulfilled",S.value=v}},function(v){if(l.status==="pending"){var S=l;S.status="rejected",S.reason=v}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,s===zl?Error(r(483)):s}throw Wl=l,zl}}var Wl=null;function SE(){if(Wl===null)throw Error(r(459));var s=Wl;return Wl=null,s}var pu=null,Kl=0;function ed(s){var l=Kl;return Kl+=1,pu===null&&(pu=[]),bE(pu,s,l)}function ql(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function td(s,l){throw l.$$typeof===i?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function EE(s){var l=s._init;return l(s._payload)}function _E(s){function l(j,K){if(s){var te=j.deletions;te===null?(j.deletions=[K],j.flags|=16):te.push(K)}}function d(j,K){if(!s)return null;for(;K!==null;)l(j,K),K=K.sibling;return null}function v(j){for(var K=new Map;j!==null;)j.key!==null?K.set(j.key,j):K.set(j.index,j),j=j.sibling;return K}function S(j,K){return j=go(j,K),j.index=0,j.sibling=null,j}function A(j,K,te){return j.index=te,s?(te=j.alternate,te!==null?(te=te.index,te<K?(j.flags|=33554434,K):te):(j.flags|=33554434,K)):(j.flags|=1048576,K)}function T(j){return s&&j.alternate===null&&(j.flags|=33554434),j}function x(j,K,te,pe){return K===null||K.tag!==6?(K=z0(te,j.mode,pe),K.return=j,K):(K=S(K,te),K.return=j,K)}function G(j,K,te,pe){var we=te.type;return we===c?fe(j,K,te.props.children,pe,te.key):K!==null&&(K.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===w&&EE(we)===K.type)?(K=S(K,te.props),ql(K,te),K.return=j,K):(K=bd(te.type,te.key,te.props,null,j.mode,pe),ql(K,te),K.return=j,K)}function q(j,K,te,pe){return K===null||K.tag!==4||K.stateNode.containerInfo!==te.containerInfo||K.stateNode.implementation!==te.implementation?(K=W0(te,j.mode,pe),K.return=j,K):(K=S(K,te.children||[]),K.return=j,K)}function fe(j,K,te,pe,we){return K===null||K.tag!==7?(K=ps(te,j.mode,pe,we),K.return=j,K):(K=S(K,te),K.return=j,K)}function ve(j,K,te){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=z0(""+K,j.mode,te),K.return=j,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case o:return te=bd(K.type,K.key,K.props,null,j.mode,te),ql(te,K),te.return=j,te;case u:return K=W0(K,j.mode,te),K.return=j,K;case w:var pe=K._init;return K=pe(K._payload),ve(j,K,te)}if(de(K)||O(K))return K=ps(K,j.mode,te,null),K.return=j,K;if(typeof K.then=="function")return ve(j,ed(K),te);if(K.$$typeof===g)return ve(j,vd(j,K),te);td(j,K)}return null}function ae(j,K,te,pe){var we=K!==null?K.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return we!==null?null:x(j,K,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case o:return te.key===we?G(j,K,te,pe):null;case u:return te.key===we?q(j,K,te,pe):null;case w:return we=te._init,te=we(te._payload),ae(j,K,te,pe)}if(de(te)||O(te))return we!==null?null:fe(j,K,te,pe,null);if(typeof te.then=="function")return ae(j,K,ed(te),pe);if(te.$$typeof===g)return ae(j,K,vd(j,te),pe);td(j,te)}return null}function ce(j,K,te,pe,we){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return j=j.get(te)||null,x(K,j,""+pe,we);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case o:return j=j.get(pe.key===null?te:pe.key)||null,G(K,j,pe,we);case u:return j=j.get(pe.key===null?te:pe.key)||null,q(K,j,pe,we);case w:var Xe=pe._init;return pe=Xe(pe._payload),ce(j,K,te,pe,we)}if(de(pe)||O(pe))return j=j.get(te)||null,fe(K,j,pe,we,null);if(typeof pe.then=="function")return ce(j,K,te,ed(pe),we);if(pe.$$typeof===g)return ce(j,K,te,vd(K,pe),we);td(K,pe)}return null}function xe(j,K,te,pe){for(var we=null,Xe=null,Me=K,Ue=K=0,Cn=null;Me!==null&&Ue<te.length;Ue++){Me.index>Ue?(Cn=Me,Me=null):Cn=Me.sibling;var ut=ae(j,Me,te[Ue],pe);if(ut===null){Me===null&&(Me=Cn);break}s&&Me&&ut.alternate===null&&l(j,Me),K=A(ut,K,Ue),Xe===null?we=ut:Xe.sibling=ut,Xe=ut,Me=Cn}if(Ue===te.length)return d(j,Me),st&&rs(j,Ue),we;if(Me===null){for(;Ue<te.length;Ue++)Me=ve(j,te[Ue],pe),Me!==null&&(K=A(Me,K,Ue),Xe===null?we=Me:Xe.sibling=Me,Xe=Me);return st&&rs(j,Ue),we}for(Me=v(Me);Ue<te.length;Ue++)Cn=ce(Me,j,Ue,te[Ue],pe),Cn!==null&&(s&&Cn.alternate!==null&&Me.delete(Cn.key===null?Ue:Cn.key),K=A(Cn,K,Ue),Xe===null?we=Cn:Xe.sibling=Cn,Xe=Cn);return s&&Me.forEach(function(wo){return l(j,wo)}),st&&rs(j,Ue),we}function ze(j,K,te,pe){if(te==null)throw Error(r(151));for(var we=null,Xe=null,Me=K,Ue=K=0,Cn=null,ut=te.next();Me!==null&&!ut.done;Ue++,ut=te.next()){Me.index>Ue?(Cn=Me,Me=null):Cn=Me.sibling;var wo=ae(j,Me,ut.value,pe);if(wo===null){Me===null&&(Me=Cn);break}s&&Me&&wo.alternate===null&&l(j,Me),K=A(wo,K,Ue),Xe===null?we=wo:Xe.sibling=wo,Xe=wo,Me=Cn}if(ut.done)return d(j,Me),st&&rs(j,Ue),we;if(Me===null){for(;!ut.done;Ue++,ut=te.next())ut=ve(j,ut.value,pe),ut!==null&&(K=A(ut,K,Ue),Xe===null?we=ut:Xe.sibling=ut,Xe=ut);return st&&rs(j,Ue),we}for(Me=v(Me);!ut.done;Ue++,ut=te.next())ut=ce(Me,j,Ue,ut.value,pe),ut!==null&&(s&&ut.alternate!==null&&Me.delete(ut.key===null?Ue:ut.key),K=A(ut,K,Ue),Xe===null?we=ut:Xe.sibling=ut,Xe=ut);return s&&Me.forEach(function(ZM){return l(j,ZM)}),st&&rs(j,Ue),we}function Wt(j,K,te,pe){if(typeof te=="object"&&te!==null&&te.type===c&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case o:e:{for(var we=te.key;K!==null;){if(K.key===we){if(we=te.type,we===c){if(K.tag===7){d(j,K.sibling),pe=S(K,te.props.children),pe.return=j,j=pe;break e}}else if(K.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===w&&EE(we)===K.type){d(j,K.sibling),pe=S(K,te.props),ql(pe,te),pe.return=j,j=pe;break e}d(j,K);break}else l(j,K);K=K.sibling}te.type===c?(pe=ps(te.props.children,j.mode,pe,te.key),pe.return=j,j=pe):(pe=bd(te.type,te.key,te.props,null,j.mode,pe),ql(pe,te),pe.return=j,j=pe)}return T(j);case u:e:{for(we=te.key;K!==null;){if(K.key===we)if(K.tag===4&&K.stateNode.containerInfo===te.containerInfo&&K.stateNode.implementation===te.implementation){d(j,K.sibling),pe=S(K,te.children||[]),pe.return=j,j=pe;break e}else{d(j,K);break}else l(j,K);K=K.sibling}pe=W0(te,j.mode,pe),pe.return=j,j=pe}return T(j);case w:return we=te._init,te=we(te._payload),Wt(j,K,te,pe)}if(de(te))return xe(j,K,te,pe);if(O(te)){if(we=O(te),typeof we!="function")throw Error(r(150));return te=we.call(te),ze(j,K,te,pe)}if(typeof te.then=="function")return Wt(j,K,ed(te),pe);if(te.$$typeof===g)return Wt(j,K,vd(j,te),pe);td(j,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,K!==null&&K.tag===6?(d(j,K.sibling),pe=S(K,te),pe.return=j,j=pe):(d(j,K),pe=z0(te,j.mode,pe),pe.return=j,j=pe),T(j)):d(j,K)}return function(j,K,te,pe){try{Kl=0;var we=Wt(j,K,te,pe);return pu=null,we}catch(Me){if(Me===zl)throw Me;var Xe=sa(29,Me,null,j.mode);return Xe.lanes=pe,Xe.return=j,Xe}finally{}}}var is=_E(!0),AE=_E(!1),mu=_e(null),nd=_e(0);function wE(s,l){s=Oi,Be(nd,s),Be(mu,l),Oi=s|l.baseLanes}function Xv(){Be(nd,Oi),Be(mu,mu.current)}function Zv(){Oi=nd.current,Ce(mu),Ce(nd)}var aa=_e(null),La=null;function io(s){var l=s.alternate;Be(fn,fn.current&1),Be(aa,s),La===null&&(l===null||mu.current!==null||l.memoizedState!==null)&&(La=s)}function IE(s){if(s.tag===22){if(Be(fn,fn.current),Be(aa,s),La===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(La=s)}}else oo()}function oo(){Be(fn,fn.current),Be(aa,aa.current)}function Si(s){Ce(aa),La===s&&(La=null),Ce(fn)}var fn=_e(0);function rd(s){for(var l=s;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var UP=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(d,v){s.push(v)}};this.abort=function(){l.aborted=!0,s.forEach(function(d){return d()})}},FP=e.unstable_scheduleCallback,VP=e.unstable_NormalPriority,dn={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qv(){return{controller:new UP,data:new Map,refCount:0}}function Yl(s){s.refCount--,s.refCount===0&&FP(VP,function(){s.controller.abort()})}var $l=null,Jv=0,vu=0,gu=null;function GP(s,l){if($l===null){var d=$l=[];Jv=0,vu=ig(),gu={status:"pending",value:void 0,then:function(v){d.push(v)}}}return Jv++,l.then(RE,RE),l}function RE(){if(--Jv===0&&$l!==null){gu!==null&&(gu.status="fulfilled");var s=$l;$l=null,vu=0,gu=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function HP(s,l){var d=[],v={status:"pending",value:null,reason:null,then:function(S){d.push(S)}};return s.then(function(){v.status="fulfilled",v.value=l;for(var S=0;S<d.length;S++)(0,d[S])(l)},function(S){for(v.status="rejected",v.reason=S,S=0;S<d.length;S++)(0,d[S])(void 0)}),v}var CE=k.S;k.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&GP(s,l),CE!==null&&CE(s,l)};var os=_e(null);function e0(){var s=os.current;return s!==null?s:Ct.pooledCache}function ad(s,l){l===null?Be(os,os.current):Be(os,l.pool)}function NE(){var s=e0();return s===null?null:{parent:dn._currentValue,pool:s}}var so=0,je=null,bt=null,rn=null,id=!1,yu=!1,ss=!1,od=0,jl=0,bu=null,zP=0;function $t(){throw Error(r(321))}function t0(s,l){if(l===null)return!1;for(var d=0;d<l.length&&d<s.length;d++)if(!Or(s[d],l[d]))return!1;return!0}function n0(s,l,d,v,S,A){return so=A,je=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,k.H=s===null||s.memoizedState===null?us:uo,ss=!1,A=d(v,S),ss=!1,yu&&(A=OE(l,d,v,S)),TE(s),A}function TE(s){k.H=Ba;var l=bt!==null&&bt.next!==null;if(so=0,rn=bt=je=null,id=!1,jl=0,bu=null,l)throw Error(r(300));s===null||In||(s=s.dependencies,s!==null&&md(s)&&(In=!0))}function OE(s,l,d,v){je=s;var S=0;do{if(yu&&(bu=null),jl=0,yu=!1,25<=S)throw Error(r(301));if(S+=1,rn=bt=null,s.updateQueue!=null){var A=s.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}k.H=ls,A=l(d,v)}while(yu);return A}function WP(){var s=k.H,l=s.useState()[0];return l=typeof l.then=="function"?Xl(l):l,s=s.useState()[0],(bt!==null?bt.memoizedState:null)!==s&&(je.flags|=1024),l}function r0(){var s=od!==0;return od=0,s}function a0(s,l,d){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~d}function i0(s){if(id){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}id=!1}so=0,rn=bt=je=null,yu=!1,jl=od=0,bu=null}function vr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?je.memoizedState=rn=s:rn=rn.next=s,rn}function an(){if(bt===null){var s=je.alternate;s=s!==null?s.memoizedState:null}else s=bt.next;var l=rn===null?je.memoizedState:rn.next;if(l!==null)rn=l,bt=s;else{if(s===null)throw je.alternate===null?Error(r(467)):Error(r(310));bt=s,s={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},rn===null?je.memoizedState=rn=s:rn=rn.next=s}return rn}var sd;sd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Xl(s){var l=jl;return jl+=1,bu===null&&(bu=[]),s=bE(bu,s,l),l=je,(rn===null?l.memoizedState:rn.next)===null&&(l=l.alternate,k.H=l===null||l.memoizedState===null?us:uo),s}function ud(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Xl(s);if(s.$$typeof===g)return Kn(s)}throw Error(r(438,String(s)))}function o0(s){var l=null,d=je.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var v=je.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(l={data:v.data.map(function(S){return S.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=sd(),je.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(s),v=0;v<s;v++)d[v]=R;return l.index++,d}function Ei(s,l){return typeof l=="function"?l(s):l}function ld(s){var l=an();return s0(l,bt,s)}function s0(s,l,d){var v=s.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=d;var S=s.baseQueue,A=v.pending;if(A!==null){if(S!==null){var T=S.next;S.next=A.next,A.next=T}l.baseQueue=S=A,v.pending=null}if(A=s.baseState,S===null)s.memoizedState=A;else{l=S.next;var x=T=null,G=null,q=l,fe=!1;do{var ve=q.lane&-536870913;if(ve!==q.lane?(tt&ve)===ve:(so&ve)===ve){var ae=q.revertLane;if(ae===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ve===vu&&(fe=!0);else if((so&ae)===ae){q=q.next,ae===vu&&(fe=!0);continue}else ve={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},G===null?(x=G=ve,T=A):G=G.next=ve,je.lanes|=ae,yo|=ae;ve=q.action,ss&&d(A,ve),A=q.hasEagerState?q.eagerState:d(A,ve)}else ae={lane:ve,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},G===null?(x=G=ae,T=A):G=G.next=ae,je.lanes|=ve,yo|=ve;q=q.next}while(q!==null&&q!==l);if(G===null?T=A:G.next=x,!Or(A,s.memoizedState)&&(In=!0,fe&&(d=gu,d!==null)))throw d;s.memoizedState=A,s.baseState=T,s.baseQueue=G,v.lastRenderedState=A}return S===null&&(v.lanes=0),[s.memoizedState,v.dispatch]}function u0(s){var l=an(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=s;var v=d.dispatch,S=d.pending,A=l.memoizedState;if(S!==null){d.pending=null;var T=S=S.next;do A=s(A,T.action),T=T.next;while(T!==S);Or(A,l.memoizedState)||(In=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),d.lastRenderedState=A}return[A,v]}function kE(s,l,d){var v=je,S=an(),A=st;if(A){if(d===void 0)throw Error(r(407));d=d()}else d=l();var T=!Or((bt||S).memoizedState,d);if(T&&(S.memoizedState=d,In=!0),S=S.queue,f0(PE.bind(null,v,S,s),[s]),S.getSnapshot!==l||T||rn!==null&&rn.memoizedState.tag&1){if(v.flags|=2048,Su(9,DE.bind(null,v,S,d,l),{destroy:void 0},null),Ct===null)throw Error(r(349));A||(so&60)!==0||xE(v,l,d)}return d}function xE(s,l,d){s.flags|=16384,s={getSnapshot:l,value:d},l=je.updateQueue,l===null?(l=sd(),je.updateQueue=l,l.stores=[s]):(d=l.stores,d===null?l.stores=[s]:d.push(s))}function DE(s,l,d,v){l.value=d,l.getSnapshot=v,ME(l)&&LE(s)}function PE(s,l,d){return d(function(){ME(l)&&LE(s)})}function ME(s){var l=s.getSnapshot;s=s.value;try{var d=l();return!Or(s,d)}catch{return!0}}function LE(s){var l=ao(s,2);l!==null&&or(l,s,2)}function l0(s){var l=vr();if(typeof s=="function"){var d=s;if(s=d(),ss){to(!0);try{d()}finally{to(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:s},l}function BE(s,l,d,v){return s.baseState=d,s0(s,bt,typeof v=="function"?v:Ei)}function KP(s,l,d,v,S){if(dd(s))throw Error(r(485));if(s=l.action,s!==null){var A={payload:S,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){A.listeners.push(T)}};k.T!==null?d(!0):A.isTransition=!1,v(A),d=l.pending,d===null?(A.next=l.pending=A,UE(l,A)):(A.next=d.next,l.pending=d.next=A)}}function UE(s,l){var d=l.action,v=l.payload,S=s.state;if(l.isTransition){var A=k.T,T={};k.T=T;try{var x=d(S,v),G=k.S;G!==null&&G(T,x),FE(s,l,x)}catch(q){c0(s,l,q)}finally{k.T=A}}else try{A=d(S,v),FE(s,l,A)}catch(q){c0(s,l,q)}}function FE(s,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(v){VE(s,l,v)},function(v){return c0(s,l,v)}):VE(s,l,d)}function VE(s,l,d){l.status="fulfilled",l.value=d,GE(l),s.state=d,l=s.pending,l!==null&&(d=l.next,d===l?s.pending=null:(d=d.next,l.next=d,UE(s,d)))}function c0(s,l,d){var v=s.pending;if(s.pending=null,v!==null){v=v.next;do l.status="rejected",l.reason=d,GE(l),l=l.next;while(l!==v)}s.action=null}function GE(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function HE(s,l){return l}function zE(s,l){if(st){var d=Ct.formState;if(d!==null){e:{var v=je;if(st){if(Dn){t:{for(var S=Dn,A=Ma;S.nodeType!==8;){if(!A){S=null;break t}if(S=Ra(S.nextSibling),S===null){S=null;break t}}A=S.data,S=A==="F!"||A==="F"?S:null}if(S){Dn=Ra(S.nextSibling),v=S.data==="F!";break e}}as(v)}v=!1}v&&(l=d[0])}}return d=vr(),d.memoizedState=d.baseState=l,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:HE,lastRenderedState:l},d.queue=v,d=s_.bind(null,je,v),v.dispatch=d,v=l0(!1),A=v0.bind(null,je,!1,v.queue),v=vr(),S={state:l,dispatch:null,action:s,pending:null},v.queue=S,d=KP.bind(null,je,S,A,d),S.dispatch=d,v.memoizedState=s,[l,d,!1]}function WE(s){var l=an();return KE(l,bt,s)}function KE(s,l,d){l=s0(s,l,HE)[0],s=ld(Ei)[0],l=typeof l=="object"&&l!==null&&typeof l.then=="function"?Xl(l):l;var v=an(),S=v.queue,A=S.dispatch;return d!==v.memoizedState&&(je.flags|=2048,Su(9,qP.bind(null,S,d),{destroy:void 0},null)),[l,A,s]}function qP(s,l){s.action=l}function qE(s){var l=an(),d=bt;if(d!==null)return KE(l,d,s);an(),l=l.memoizedState,d=an();var v=d.queue.dispatch;return d.memoizedState=s,[l,v,!1]}function Su(s,l,d,v){return s={tag:s,create:l,inst:d,deps:v,next:null},l=je.updateQueue,l===null&&(l=sd(),je.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=s.next=s:(v=d.next,d.next=s,s.next=v,l.lastEffect=s),s}function YE(){return an().memoizedState}function cd(s,l,d,v){var S=vr();je.flags|=s,S.memoizedState=Su(1|l,d,{destroy:void 0},v===void 0?null:v)}function fd(s,l,d,v){var S=an();v=v===void 0?null:v;var A=S.memoizedState.inst;bt!==null&&v!==null&&t0(v,bt.memoizedState.deps)?S.memoizedState=Su(l,d,A,v):(je.flags|=s,S.memoizedState=Su(1|l,d,A,v))}function $E(s,l){cd(8390656,8,s,l)}function f0(s,l){fd(2048,8,s,l)}function jE(s,l){return fd(4,2,s,l)}function XE(s,l){return fd(4,4,s,l)}function ZE(s,l){if(typeof l=="function"){s=s();var d=l(s);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function QE(s,l,d){d=d!=null?d.concat([s]):null,fd(4,4,ZE.bind(null,l,s),d)}function d0(){}function JE(s,l){var d=an();l=l===void 0?null:l;var v=d.memoizedState;return l!==null&&t0(l,v[1])?v[0]:(d.memoizedState=[s,l],s)}function e_(s,l){var d=an();l=l===void 0?null:l;var v=d.memoizedState;if(l!==null&&t0(l,v[1]))return v[0];if(v=s(),ss){to(!0);try{s()}finally{to(!1)}}return d.memoizedState=[v,l],v}function h0(s,l,d){return d===void 0||(so&1073741824)!==0?s.memoizedState=l:(s.memoizedState=d,s=nA(),je.lanes|=s,yo|=s,d)}function t_(s,l,d,v){return Or(d,l)?d:mu.current!==null?(s=h0(s,d,v),Or(s,l)||(In=!0),s):(so&42)===0?(In=!0,s.memoizedState=d):(s=nA(),je.lanes|=s,yo|=s,l)}function n_(s,l,d,v,S){var A=he.p;he.p=A!==0&&8>A?A:8;var T=k.T,x={};k.T=x,v0(s,!1,l,d);try{var G=S(),q=k.S;if(q!==null&&q(x,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var fe=HP(G,v);Zl(s,l,fe,Pr(s))}else Zl(s,l,v,Pr(s))}catch(ve){Zl(s,l,{then:function(){},status:"rejected",reason:ve},Pr())}finally{he.p=A,k.T=T}}function YP(){}function p0(s,l,d,v){if(s.tag!==5)throw Error(r(476));var S=r_(s).queue;n_(s,S,l,Se,d===null?YP:function(){return a_(s),d(v)})}function r_(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:Se},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:d},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function a_(s){var l=r_(s).next.queue;Zl(s,l,{},Pr())}function m0(){return Kn(gc)}function i_(){return an().memoizedState}function o_(){return an().memoizedState}function $P(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var d=Pr();s=fo(d);var v=ho(l,s,d);v!==null&&(or(v,l,d),ec(v,l,d)),l={cache:Qv()},s.payload=l;return}l=l.return}}function jP(s,l,d){var v=Pr();d={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},dd(s)?u_(l,d):(d=Kv(s,l,d,v),d!==null&&(or(d,s,v),l_(d,l,v)))}function s_(s,l,d){var v=Pr();Zl(s,l,d,v)}function Zl(s,l,d,v){var S={lane:v,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(dd(s))u_(l,S);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var T=l.lastRenderedState,x=A(T,d);if(S.hasEagerState=!0,S.eagerState=x,Or(x,T))return jf(s,l,S,0),Ct===null&&$f(),!1}catch{}finally{}if(d=Kv(s,l,S,v),d!==null)return or(d,s,v),l_(d,l,v),!0}return!1}function v0(s,l,d,v){if(v={lane:2,revertLane:ig(),action:v,hasEagerState:!1,eagerState:null,next:null},dd(s)){if(l)throw Error(r(479))}else l=Kv(s,d,v,2),l!==null&&or(l,s,2)}function dd(s){var l=s.alternate;return s===je||l!==null&&l===je}function u_(s,l){yu=id=!0;var d=s.pending;d===null?l.next=l:(l.next=d.next,d.next=l),s.pending=l}function l_(s,l,d){if((d&4194176)!==0){var v=l.lanes;v&=s.pendingLanes,d|=v,l.lanes=d,SS(s,d)}}var Ba={readContext:Kn,use:ud,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t};Ba.useCacheRefresh=$t,Ba.useMemoCache=$t,Ba.useHostTransitionStatus=$t,Ba.useFormState=$t,Ba.useActionState=$t,Ba.useOptimistic=$t;var us={readContext:Kn,use:ud,useCallback:function(s,l){return vr().memoizedState=[s,l===void 0?null:l],s},useContext:Kn,useEffect:$E,useImperativeHandle:function(s,l,d){d=d!=null?d.concat([s]):null,cd(4194308,4,ZE.bind(null,l,s),d)},useLayoutEffect:function(s,l){return cd(4194308,4,s,l)},useInsertionEffect:function(s,l){cd(4,2,s,l)},useMemo:function(s,l){var d=vr();l=l===void 0?null:l;var v=s();if(ss){to(!0);try{s()}finally{to(!1)}}return d.memoizedState=[v,l],v},useReducer:function(s,l,d){var v=vr();if(d!==void 0){var S=d(l);if(ss){to(!0);try{d(l)}finally{to(!1)}}}else S=l;return v.memoizedState=v.baseState=S,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:S},v.queue=s,s=s.dispatch=jP.bind(null,je,s),[v.memoizedState,s]},useRef:function(s){var l=vr();return s={current:s},l.memoizedState=s},useState:function(s){s=l0(s);var l=s.queue,d=s_.bind(null,je,l);return l.dispatch=d,[s.memoizedState,d]},useDebugValue:d0,useDeferredValue:function(s,l){var d=vr();return h0(d,s,l)},useTransition:function(){var s=l0(!1);return s=n_.bind(null,je,s.queue,!0,!1),vr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,d){var v=je,S=vr();if(st){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Ct===null)throw Error(r(349));(tt&60)!==0||xE(v,l,d)}S.memoizedState=d;var A={value:d,getSnapshot:l};return S.queue=A,$E(PE.bind(null,v,A,s),[s]),v.flags|=2048,Su(9,DE.bind(null,v,A,d,l),{destroy:void 0},null),d},useId:function(){var s=vr(),l=Ct.identifierPrefix;if(st){var d=bi,v=yi;d=(v&~(1<<32-Tr(v)-1)).toString(32)+d,l=":"+l+"R"+d,d=od++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=zP++,l=":"+l+"r"+d.toString(32)+":";return s.memoizedState=l},useCacheRefresh:function(){return vr().memoizedState=$P.bind(null,je)}};us.useMemoCache=o0,us.useHostTransitionStatus=m0,us.useFormState=zE,us.useActionState=zE,us.useOptimistic=function(s){var l=vr();l.memoizedState=l.baseState=s;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=v0.bind(null,je,!0,d),d.dispatch=l,[s,l]};var uo={readContext:Kn,use:ud,useCallback:JE,useContext:Kn,useEffect:f0,useImperativeHandle:QE,useInsertionEffect:jE,useLayoutEffect:XE,useMemo:e_,useReducer:ld,useRef:YE,useState:function(){return ld(Ei)},useDebugValue:d0,useDeferredValue:function(s,l){var d=an();return t_(d,bt.memoizedState,s,l)},useTransition:function(){var s=ld(Ei)[0],l=an().memoizedState;return[typeof s=="boolean"?s:Xl(s),l]},useSyncExternalStore:kE,useId:i_};uo.useCacheRefresh=o_,uo.useMemoCache=o0,uo.useHostTransitionStatus=m0,uo.useFormState=WE,uo.useActionState=WE,uo.useOptimistic=function(s,l){var d=an();return BE(d,bt,s,l)};var ls={readContext:Kn,use:ud,useCallback:JE,useContext:Kn,useEffect:f0,useImperativeHandle:QE,useInsertionEffect:jE,useLayoutEffect:XE,useMemo:e_,useReducer:u0,useRef:YE,useState:function(){return u0(Ei)},useDebugValue:d0,useDeferredValue:function(s,l){var d=an();return bt===null?h0(d,s,l):t_(d,bt.memoizedState,s,l)},useTransition:function(){var s=u0(Ei)[0],l=an().memoizedState;return[typeof s=="boolean"?s:Xl(s),l]},useSyncExternalStore:kE,useId:i_};ls.useCacheRefresh=o_,ls.useMemoCache=o0,ls.useHostTransitionStatus=m0,ls.useFormState=qE,ls.useActionState=qE,ls.useOptimistic=function(s,l){var d=an();return bt!==null?BE(d,bt,s,l):(d.baseState=s,[s,d.queue.dispatch])};function g0(s,l,d,v){l=s.memoizedState,d=d(v,l),d=d==null?l:N({},l,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var y0={isMounted:function(s){return(s=s._reactInternals)?$(s)===s:!1},enqueueSetState:function(s,l,d){s=s._reactInternals;var v=Pr(),S=fo(v);S.payload=l,d!=null&&(S.callback=d),l=ho(s,S,v),l!==null&&(or(l,s,v),ec(l,s,v))},enqueueReplaceState:function(s,l,d){s=s._reactInternals;var v=Pr(),S=fo(v);S.tag=1,S.payload=l,d!=null&&(S.callback=d),l=ho(s,S,v),l!==null&&(or(l,s,v),ec(l,s,v))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var d=Pr(),v=fo(d);v.tag=2,l!=null&&(v.callback=l),l=ho(s,v,d),l!==null&&(or(l,s,d),ec(l,s,d))}};function c_(s,l,d,v,S,A,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,A,T):l.prototype&&l.prototype.isPureReactComponent?!Ul(d,v)||!Ul(S,A):!0}function f_(s,l,d,v){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,v),l.state!==s&&y0.enqueueReplaceState(l,l.state,null)}function cs(s,l){var d=l;if("ref"in l){d={};for(var v in l)v!=="ref"&&(d[v]=l[v])}if(s=s.defaultProps){d===l&&(d=N({},d));for(var S in s)d[S]===void 0&&(d[S]=s[S])}return d}var hd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function d_(s){hd(s)}function h_(s){console.error(s)}function p_(s){hd(s)}function pd(s,l){try{var d=s.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(v){setTimeout(function(){throw v})}}function m_(s,l,d){try{var v=s.onCaughtError;v(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function b0(s,l,d){return d=fo(d),d.tag=3,d.payload={element:null},d.callback=function(){pd(s,l)},d}function v_(s){return s=fo(s),s.tag=3,s}function g_(s,l,d,v){var S=d.type.getDerivedStateFromError;if(typeof S=="function"){var A=v.value;s.payload=function(){return S(A)},s.callback=function(){m_(l,d,v)}}var T=d.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){m_(l,d,v),typeof S!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var x=v.stack;this.componentDidCatch(v.value,{componentStack:x!==null?x:""})})}function XP(s,l,d,v,S){if(d.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(l=d.alternate,l!==null&&Jl(l,d,S,!0),d=aa.current,d!==null){switch(d.tag){case 13:return La===null?eg():d.alternate===null&&zt===0&&(zt=3),d.flags&=-257,d.flags|=65536,d.lanes=S,v===jv?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([v]):l.add(v),ng(s,v,S)),!1;case 22:return d.flags|=65536,v===jv?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([v])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([v]):d.add(v)),ng(s,v,S)),!1}throw Error(r(435,d.tag))}return ng(s,v,S),eg(),!1}if(st)return l=aa.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=S,v!==$v&&(s=Error(r(422),{cause:v}),Hl(ta(s,d)))):(v!==$v&&(l=Error(r(423),{cause:v}),Hl(ta(l,d))),s=s.current.alternate,s.flags|=65536,S&=-S,s.lanes|=S,v=ta(v,d),S=b0(s.stateNode,v,S),P0(s,S),zt!==4&&(zt=2)),!1;var A=Error(r(520),{cause:v});if(A=ta(A,d),uc===null?uc=[A]:uc.push(A),zt!==4&&(zt=2),l===null)return!0;v=ta(v,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,s=S&-S,d.lanes|=s,s=b0(d.stateNode,v,s),P0(d,s),!1;case 1:if(l=d.type,A=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(bo===null||!bo.has(A))))return d.flags|=65536,S&=-S,d.lanes|=S,S=v_(S),g_(S,s,d,v),P0(d,S),!1}d=d.return}while(d!==null);return!1}var y_=Error(r(461)),In=!1;function Pn(s,l,d,v){l.child=s===null?AE(l,null,d,v):is(l,s.child,d,v)}function b_(s,l,d,v,S){d=d.render;var A=l.ref;if("ref"in v){var T={};for(var x in v)x!=="ref"&&(T[x]=v[x])}else T=v;return ds(l),v=n0(s,l,d,T,A,S),x=r0(),s!==null&&!In?(a0(s,l,S),_i(s,l,S)):(st&&x&&qv(l),l.flags|=1,Pn(s,l,v,S),l.child)}function S_(s,l,d,v,S){if(s===null){var A=d.type;return typeof A=="function"&&!H0(A)&&A.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=A,E_(s,l,A,v,S)):(s=bd(d.type,null,v,l,l.mode,S),s.ref=l.ref,s.return=l,l.child=s)}if(A=s.child,!N0(s,S)){var T=A.memoizedProps;if(d=d.compare,d=d!==null?d:Ul,d(T,v)&&s.ref===l.ref)return _i(s,l,S)}return l.flags|=1,s=go(A,v),s.ref=l.ref,s.return=l,l.child=s}function E_(s,l,d,v,S){if(s!==null){var A=s.memoizedProps;if(Ul(A,v)&&s.ref===l.ref)if(In=!1,l.pendingProps=v=A,N0(s,S))(s.flags&131072)!==0&&(In=!0);else return l.lanes=s.lanes,_i(s,l,S)}return S0(s,l,d,v,S)}function __(s,l,d){var v=l.pendingProps,S=v.children,A=(l.stateNode._pendingVisibility&2)!==0,T=s!==null?s.memoizedState:null;if(Ql(s,l),v.mode==="hidden"||A){if((l.flags&128)!==0){if(v=T!==null?T.baseLanes|d:d,s!==null){for(S=l.child=s.child,A=0;S!==null;)A=A|S.lanes|S.childLanes,S=S.sibling;l.childLanes=A&~v}else l.childLanes=0,l.child=null;return A_(s,l,v,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&ad(l,T!==null?T.cachePool:null),T!==null?wE(l,T):Xv(),IE(l);else return l.lanes=l.childLanes=536870912,A_(s,l,T!==null?T.baseLanes|d:d,d)}else T!==null?(ad(l,T.cachePool),wE(l,T),oo(),l.memoizedState=null):(s!==null&&ad(l,null),Xv(),oo());return Pn(s,l,S,d),l.child}function A_(s,l,d,v){var S=e0();return S=S===null?null:{parent:dn._currentValue,pool:S},l.memoizedState={baseLanes:d,cachePool:S},s!==null&&ad(l,null),Xv(),IE(l),s!==null&&Jl(s,l,v,!0),null}function Ql(s,l){var d=l.ref;if(d===null)s!==null&&s.ref!==null&&(l.flags|=2097664);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(s===null||s.ref!==d)&&(l.flags|=2097664)}}function S0(s,l,d,v,S){return ds(l),d=n0(s,l,d,v,void 0,S),v=r0(),s!==null&&!In?(a0(s,l,S),_i(s,l,S)):(st&&v&&qv(l),l.flags|=1,Pn(s,l,d,S),l.child)}function w_(s,l,d,v,S,A){return ds(l),l.updateQueue=null,d=OE(l,v,d,S),TE(s),v=r0(),s!==null&&!In?(a0(s,l,A),_i(s,l,A)):(st&&v&&qv(l),l.flags|=1,Pn(s,l,d,A),l.child)}function I_(s,l,d,v,S){if(ds(l),l.stateNode===null){var A=fu,T=d.contextType;typeof T=="object"&&T!==null&&(A=Kn(T)),A=new d(v,A),l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=y0,l.stateNode=A,A._reactInternals=l,A=l.stateNode,A.props=v,A.state=l.memoizedState,A.refs={},x0(l),T=d.contextType,A.context=typeof T=="object"&&T!==null?Kn(T):fu,A.state=l.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(g0(l,d,T,v),A.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(T=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),T!==A.state&&y0.enqueueReplaceState(A,A.state,null),nc(l,v,A,S),tc(),A.state=l.memoizedState),typeof A.componentDidMount=="function"&&(l.flags|=4194308),v=!0}else if(s===null){A=l.stateNode;var x=l.memoizedProps,G=cs(d,x);A.props=G;var q=A.context,fe=d.contextType;T=fu,typeof fe=="object"&&fe!==null&&(T=Kn(fe));var ve=d.getDerivedStateFromProps;fe=typeof ve=="function"||typeof A.getSnapshotBeforeUpdate=="function",x=l.pendingProps!==x,fe||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(x||q!==T)&&f_(l,A,v,T),co=!1;var ae=l.memoizedState;A.state=ae,nc(l,v,A,S),tc(),q=l.memoizedState,x||ae!==q||co?(typeof ve=="function"&&(g0(l,d,ve,v),q=l.memoizedState),(G=co||c_(l,d,G,v,ae,q,T))?(fe||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=q),A.props=v,A.state=q,A.context=T,v=G):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{A=l.stateNode,D0(s,l),T=l.memoizedProps,fe=cs(d,T),A.props=fe,ve=l.pendingProps,ae=A.context,q=d.contextType,G=fu,typeof q=="object"&&q!==null&&(G=Kn(q)),x=d.getDerivedStateFromProps,(q=typeof x=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(T!==ve||ae!==G)&&f_(l,A,v,G),co=!1,ae=l.memoizedState,A.state=ae,nc(l,v,A,S),tc();var ce=l.memoizedState;T!==ve||ae!==ce||co||s!==null&&s.dependencies!==null&&md(s.dependencies)?(typeof x=="function"&&(g0(l,d,x,v),ce=l.memoizedState),(fe=co||c_(l,d,fe,v,ae,ce,G)||s!==null&&s.dependencies!==null&&md(s.dependencies))?(q||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(v,ce,G),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(v,ce,G)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||T===s.memoizedProps&&ae===s.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&ae===s.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=ce),A.props=v,A.state=ce,A.context=G,v=fe):(typeof A.componentDidUpdate!="function"||T===s.memoizedProps&&ae===s.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&ae===s.memoizedState||(l.flags|=1024),v=!1)}return A=v,Ql(s,l),v=(l.flags&128)!==0,A||v?(A=l.stateNode,d=v&&typeof d.getDerivedStateFromError!="function"?null:A.render(),l.flags|=1,s!==null&&v?(l.child=is(l,s.child,null,S),l.child=is(l,null,d,S)):Pn(s,l,d,S),l.memoizedState=A.state,s=l.child):s=_i(s,l,S),s}function R_(s,l,d,v){return Gl(),l.flags|=256,Pn(s,l,d,v),l.child}var E0={dehydrated:null,treeContext:null,retryLane:0};function _0(s){return{baseLanes:s,cachePool:NE()}}function A0(s,l,d){return s=s!==null?s.childLanes&~d:0,l&&(s|=ua),s}function C_(s,l,d){var v=l.pendingProps,S=!1,A=(l.flags&128)!==0,T;if((T=A)||(T=s!==null&&s.memoizedState===null?!1:(fn.current&2)!==0),T&&(S=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,s===null){if(st){if(S?io(l):oo(),st){var x=Dn,G;if(G=x){e:{for(G=x,x=Ma;G.nodeType!==8;){if(!x){x=null;break e}if(G=Ra(G.nextSibling),G===null){x=null;break e}}x=G}x!==null?(l.memoizedState={dehydrated:x,treeContext:ns!==null?{id:yi,overflow:bi}:null,retryLane:536870912},G=sa(18,null,null,0),G.stateNode=x,G.return=l,l.child=G,ir=l,Dn=null,G=!0):G=!1}G||as(l)}if(x=l.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return x.data==="$!"?l.lanes=16:l.lanes=536870912,null;Si(l)}return x=v.children,v=v.fallback,S?(oo(),S=l.mode,x=I0({mode:"hidden",children:x},S),v=ps(v,S,d,null),x.return=l,v.return=l,x.sibling=v,l.child=x,S=l.child,S.memoizedState=_0(d),S.childLanes=A0(s,T,d),l.memoizedState=E0,v):(io(l),w0(l,x))}if(G=s.memoizedState,G!==null&&(x=G.dehydrated,x!==null)){if(A)l.flags&256?(io(l),l.flags&=-257,l=R0(s,l,d)):l.memoizedState!==null?(oo(),l.child=s.child,l.flags|=128,l=null):(oo(),S=v.fallback,x=l.mode,v=I0({mode:"visible",children:v.children},x),S=ps(S,x,d,null),S.flags|=2,v.return=l,S.return=l,v.sibling=S,l.child=v,is(l,s.child,null,d),v=l.child,v.memoizedState=_0(d),v.childLanes=A0(s,T,d),l.memoizedState=E0,l=S);else if(io(l),x.data==="$!"){if(T=x.nextSibling&&x.nextSibling.dataset,T)var q=T.dgst;T=q,v=Error(r(419)),v.stack="",v.digest=T,Hl({value:v,source:null,stack:null}),l=R0(s,l,d)}else if(In||Jl(s,l,d,!1),T=(d&s.childLanes)!==0,In||T){if(T=Ct,T!==null){if(v=d&-d,(v&42)!==0)v=1;else switch(v){case 2:v=1;break;case 8:v=4;break;case 32:v=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:v=64;break;case 268435456:v=134217728;break;default:v=0}if(v=(v&(T.suspendedLanes|d))!==0?0:v,v!==0&&v!==G.retryLane)throw G.retryLane=v,ao(s,v),or(T,s,v),y_}x.data==="$?"||eg(),l=R0(s,l,d)}else x.data==="$?"?(l.flags|=128,l.child=s.child,l=fM.bind(null,s),x._reactRetry=l,l=null):(s=G.treeContext,Dn=Ra(x.nextSibling),ir=l,st=!0,wa=null,Ma=!1,s!==null&&(na[ra++]=yi,na[ra++]=bi,na[ra++]=ns,yi=s.id,bi=s.overflow,ns=l),l=w0(l,v.children),l.flags|=4096);return l}return S?(oo(),S=v.fallback,x=l.mode,G=s.child,q=G.sibling,v=go(G,{mode:"hidden",children:v.children}),v.subtreeFlags=G.subtreeFlags&31457280,q!==null?S=go(q,S):(S=ps(S,x,d,null),S.flags|=2),S.return=l,v.return=l,v.sibling=S,l.child=v,v=S,S=l.child,x=s.child.memoizedState,x===null?x=_0(d):(G=x.cachePool,G!==null?(q=dn._currentValue,G=G.parent!==q?{parent:q,pool:q}:G):G=NE(),x={baseLanes:x.baseLanes|d,cachePool:G}),S.memoizedState=x,S.childLanes=A0(s,T,d),l.memoizedState=E0,v):(io(l),d=s.child,s=d.sibling,d=go(d,{mode:"visible",children:v.children}),d.return=l,d.sibling=null,s!==null&&(T=l.deletions,T===null?(l.deletions=[s],l.flags|=16):T.push(s)),l.child=d,l.memoizedState=null,d)}function w0(s,l){return l=I0({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function I0(s,l){return J_(s,l,0,null)}function R0(s,l,d){return is(l,s.child,null,d),s=w0(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function N_(s,l,d){s.lanes|=l;var v=s.alternate;v!==null&&(v.lanes|=l),O0(s.return,l,d)}function C0(s,l,d,v,S){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:d,tailMode:S}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=v,A.tail=d,A.tailMode=S)}function T_(s,l,d){var v=l.pendingProps,S=v.revealOrder,A=v.tail;if(Pn(s,l,v.children,d),v=fn.current,(v&2)!==0)v=v&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&N_(s,d,l);else if(s.tag===19)N_(s,d,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}v&=1}switch(Be(fn,v),S){case"forwards":for(d=l.child,S=null;d!==null;)s=d.alternate,s!==null&&rd(s)===null&&(S=d),d=d.sibling;d=S,d===null?(S=l.child,l.child=null):(S=d.sibling,d.sibling=null),C0(l,!1,S,d,A);break;case"backwards":for(d=null,S=l.child,l.child=null;S!==null;){if(s=S.alternate,s!==null&&rd(s)===null){l.child=S;break}s=S.sibling,S.sibling=d,d=S,S=s}C0(l,!0,d,null,A);break;case"together":C0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function _i(s,l,d){if(s!==null&&(l.dependencies=s.dependencies),yo|=l.lanes,(d&l.childLanes)===0)if(s!==null){if(Jl(s,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,d=go(s,s.pendingProps),l.child=d,d.return=l;s.sibling!==null;)s=s.sibling,d=d.sibling=go(s,s.pendingProps),d.return=l;d.sibling=null}return l.child}function N0(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&md(s)))}function ZP(s,l,d){switch(l.tag){case 3:pt(l,l.stateNode.containerInfo),lo(l,dn,s.memoizedState.cache),Gl();break;case 27:case 5:_n(l);break;case 4:pt(l,l.stateNode.containerInfo);break;case 10:lo(l,l.type,l.memoizedProps.value);break;case 13:var v=l.memoizedState;if(v!==null)return v.dehydrated!==null?(io(l),l.flags|=128,null):(d&l.child.childLanes)!==0?C_(s,l,d):(io(l),s=_i(s,l,d),s!==null?s.sibling:null);io(l);break;case 19:var S=(s.flags&128)!==0;if(v=(d&l.childLanes)!==0,v||(Jl(s,l,d,!1),v=(d&l.childLanes)!==0),S){if(v)return T_(s,l,d);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Be(fn,fn.current),v)break;return null;case 22:case 23:return l.lanes=0,__(s,l,d);case 24:lo(l,dn,s.memoizedState.cache)}return _i(s,l,d)}function O_(s,l,d){if(s!==null)if(s.memoizedProps!==l.pendingProps)In=!0;else{if(!N0(s,d)&&(l.flags&128)===0)return In=!1,ZP(s,l,d);In=(s.flags&131072)!==0}else In=!1,st&&(l.flags&1048576)!==0&&pE(l,Qf,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var v=l.elementType,S=v._init;if(v=S(v._payload),l.type=v,typeof v=="function")H0(v)?(s=cs(v,s),l.tag=1,l=I_(null,l,v,s,d)):(l.tag=0,l=S0(null,l,v,s,d));else{if(v!=null){if(S=v.$$typeof,S===y){l.tag=11,l=b_(null,l,v,s,d);break e}else if(S===_){l.tag=14,l=S_(null,l,v,s,d);break e}}throw l=P(v)||v,Error(r(306,l,""))}}return l;case 0:return S0(s,l,l.type,l.pendingProps,d);case 1:return v=l.type,S=cs(v,l.pendingProps),I_(s,l,v,S,d);case 3:e:{if(pt(l,l.stateNode.containerInfo),s===null)throw Error(r(387));var A=l.pendingProps;S=l.memoizedState,v=S.element,D0(s,l),nc(l,A,null,d);var T=l.memoizedState;if(A=T.cache,lo(l,dn,A),A!==S.cache&&k0(l,[dn],d,!0),tc(),A=T.element,S.isDehydrated)if(S={element:A,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){l=R_(s,l,A,d);break e}else if(A!==v){v=ta(Error(r(424)),l),Hl(v),l=R_(s,l,A,d);break e}else for(Dn=Ra(l.stateNode.containerInfo.firstChild),ir=l,st=!0,wa=null,Ma=!0,d=AE(l,null,A,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Gl(),A===v){l=_i(s,l,d);break e}Pn(s,l,A,d)}l=l.child}return l;case 26:return Ql(s,l),s===null?(d=DA(l.type,null,l.pendingProps,null))?l.memoizedState=d:st||(d=l.type,s=l.pendingProps,v=kd(ge.current).createElement(d),v[Wn]=l,v[pr]=s,Mn(v,d,s),wn(v),l.stateNode=v):l.memoizedState=DA(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return _n(l),s===null&&st&&(v=l.stateNode=OA(l.type,l.pendingProps,ge.current),ir=l,Ma=!0,Dn=Ra(v.firstChild)),v=l.pendingProps.children,s!==null||st?Pn(s,l,v,d):l.child=is(l,null,v,d),Ql(s,l),l.child;case 5:return s===null&&st&&((S=v=Dn)&&(v=CM(v,l.type,l.pendingProps,Ma),v!==null?(l.stateNode=v,ir=l,Dn=Ra(v.firstChild),Ma=!1,S=!0):S=!1),S||as(l)),_n(l),S=l.type,A=l.pendingProps,T=s!==null?s.memoizedProps:null,v=A.children,pg(S,A)?v=null:T!==null&&pg(S,T)&&(l.flags|=32),l.memoizedState!==null&&(S=n0(s,l,WP,null,null,d),gc._currentValue=S),Ql(s,l),Pn(s,l,v,d),l.child;case 6:return s===null&&st&&((s=d=Dn)&&(d=NM(d,l.pendingProps,Ma),d!==null?(l.stateNode=d,ir=l,Dn=null,s=!0):s=!1),s||as(l)),null;case 13:return C_(s,l,d);case 4:return pt(l,l.stateNode.containerInfo),v=l.pendingProps,s===null?l.child=is(l,null,v,d):Pn(s,l,v,d),l.child;case 11:return b_(s,l,l.type,l.pendingProps,d);case 7:return Pn(s,l,l.pendingProps,d),l.child;case 8:return Pn(s,l,l.pendingProps.children,d),l.child;case 12:return Pn(s,l,l.pendingProps.children,d),l.child;case 10:return v=l.pendingProps,lo(l,l.type,v.value),Pn(s,l,v.children,d),l.child;case 9:return S=l.type._context,v=l.pendingProps.children,ds(l),S=Kn(S),v=v(S),l.flags|=1,Pn(s,l,v,d),l.child;case 14:return S_(s,l,l.type,l.pendingProps,d);case 15:return E_(s,l,l.type,l.pendingProps,d);case 19:return T_(s,l,d);case 22:return __(s,l,d);case 24:return ds(l),v=Kn(dn),s===null?(S=e0(),S===null&&(S=Ct,A=Qv(),S.pooledCache=A,A.refCount++,A!==null&&(S.pooledCacheLanes|=d),S=A),l.memoizedState={parent:v,cache:S},x0(l),lo(l,dn,S)):((s.lanes&d)!==0&&(D0(s,l),nc(l,null,null,d),tc()),S=s.memoizedState,A=l.memoizedState,S.parent!==v?(S={parent:v,cache:v},l.memoizedState=S,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=S),lo(l,dn,v)):(v=A.cache,lo(l,dn,v),v!==S.cache&&k0(l,[dn],d,!0))),Pn(s,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}var T0=_e(null),fs=null,Ai=null;function lo(s,l,d){Be(T0,l._currentValue),l._currentValue=d}function wi(s){s._currentValue=T0.current,Ce(T0)}function O0(s,l,d){for(;s!==null;){var v=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),s===d)break;s=s.return}}function k0(s,l,d,v){var S=s.child;for(S!==null&&(S.return=s);S!==null;){var A=S.dependencies;if(A!==null){var T=S.child;A=A.firstContext;e:for(;A!==null;){var x=A;A=S;for(var G=0;G<l.length;G++)if(x.context===l[G]){A.lanes|=d,x=A.alternate,x!==null&&(x.lanes|=d),O0(A.return,d,s),v||(T=null);break e}A=x.next}}else if(S.tag===18){if(T=S.return,T===null)throw Error(r(341));T.lanes|=d,A=T.alternate,A!==null&&(A.lanes|=d),O0(T,d,s),T=null}else T=S.child;if(T!==null)T.return=S;else for(T=S;T!==null;){if(T===s){T=null;break}if(S=T.sibling,S!==null){S.return=T.return,T=S;break}T=T.return}S=T}}function Jl(s,l,d,v){s=null;for(var S=l,A=!1;S!==null;){if(!A){if((S.flags&524288)!==0)A=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var T=S.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var x=S.type;Or(S.pendingProps.value,T.value)||(s!==null?s.push(x):s=[x])}}else if(S===ht.current){if(T=S.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(s!==null?s.push(gc):s=[gc])}S=S.return}s!==null&&k0(l,s,d,v),l.flags|=262144}function md(s){for(s=s.firstContext;s!==null;){if(!Or(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ds(s){fs=s,Ai=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Kn(s){return k_(fs,s)}function vd(s,l){return fs===null&&ds(s),k_(s,l)}function k_(s,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Ai===null){if(s===null)throw Error(r(308));Ai=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Ai=Ai.next=l;return d}var co=!1;function x0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function D0(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function fo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ho(s,l,d){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(Bt&2)!==0){var S=v.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),v.pending=l,l=Xf(s),dE(s,null,d),l}return jf(s,v,l,d),Xf(s)}function ec(s,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194176)!==0)){var v=l.lanes;v&=s.pendingLanes,d|=v,l.lanes=d,SS(s,d)}}function P0(s,l){var d=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,d===v)){var S=null,A=null;if(d=d.firstBaseUpdate,d!==null){do{var T={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};A===null?S=A=T:A=A.next=T,d=d.next}while(d!==null);A===null?S=A=l:A=A.next=l}else S=A=l;d={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:A,shared:v.shared,callbacks:v.callbacks},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=l:s.next=l,d.lastBaseUpdate=l}var M0=!1;function tc(){if(M0){var s=gu;if(s!==null)throw s}}function nc(s,l,d,v){M0=!1;var S=s.updateQueue;co=!1;var A=S.firstBaseUpdate,T=S.lastBaseUpdate,x=S.shared.pending;if(x!==null){S.shared.pending=null;var G=x,q=G.next;G.next=null,T===null?A=q:T.next=q,T=G;var fe=s.alternate;fe!==null&&(fe=fe.updateQueue,x=fe.lastBaseUpdate,x!==T&&(x===null?fe.firstBaseUpdate=q:x.next=q,fe.lastBaseUpdate=G))}if(A!==null){var ve=S.baseState;T=0,fe=q=G=null,x=A;do{var ae=x.lane&-536870913,ce=ae!==x.lane;if(ce?(tt&ae)===ae:(v&ae)===ae){ae!==0&&ae===vu&&(M0=!0),fe!==null&&(fe=fe.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var xe=s,ze=x;ae=l;var Wt=d;switch(ze.tag){case 1:if(xe=ze.payload,typeof xe=="function"){ve=xe.call(Wt,ve,ae);break e}ve=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=ze.payload,ae=typeof xe=="function"?xe.call(Wt,ve,ae):xe,ae==null)break e;ve=N({},ve,ae);break e;case 2:co=!0}}ae=x.callback,ae!==null&&(s.flags|=64,ce&&(s.flags|=8192),ce=S.callbacks,ce===null?S.callbacks=[ae]:ce.push(ae))}else ce={lane:ae,tag:x.tag,payload:x.payload,callback:x.callback,next:null},fe===null?(q=fe=ce,G=ve):fe=fe.next=ce,T|=ae;if(x=x.next,x===null){if(x=S.shared.pending,x===null)break;ce=x,x=ce.next,ce.next=null,S.lastBaseUpdate=ce,S.shared.pending=null}}while(!0);fe===null&&(G=ve),S.baseState=G,S.firstBaseUpdate=q,S.lastBaseUpdate=fe,A===null&&(S.shared.lanes=0),yo|=T,s.lanes=T,s.memoizedState=ve}}function x_(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function D_(s,l){var d=s.callbacks;if(d!==null)for(s.callbacks=null,s=0;s<d.length;s++)x_(d[s],l)}function rc(s,l){try{var d=l.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var S=v.next;d=S;do{if((d.tag&s)===s){v=void 0;var A=d.create,T=d.inst;v=A(),T.destroy=v}d=d.next}while(d!==S)}}catch(x){At(l,l.return,x)}}function po(s,l,d){try{var v=l.updateQueue,S=v!==null?v.lastEffect:null;if(S!==null){var A=S.next;v=A;do{if((v.tag&s)===s){var T=v.inst,x=T.destroy;if(x!==void 0){T.destroy=void 0,S=l;var G=d;try{x()}catch(q){At(S,G,q)}}}v=v.next}while(v!==A)}}catch(q){At(l,l.return,q)}}function P_(s){var l=s.updateQueue;if(l!==null){var d=s.stateNode;try{D_(l,d)}catch(v){At(s,s.return,v)}}}function M_(s,l,d){d.props=cs(s.type,s.memoizedProps),d.state=s.memoizedState;try{d.componentWillUnmount()}catch(v){At(s,l,v)}}function hs(s,l){try{var d=s.ref;if(d!==null){var v=s.stateNode;switch(s.tag){case 26:case 27:case 5:var S=v;break;default:S=v}typeof d=="function"?s.refCleanup=d(S):d.current=S}}catch(A){At(s,l,A)}}function kr(s,l){var d=s.ref,v=s.refCleanup;if(d!==null)if(typeof v=="function")try{v()}catch(S){At(s,l,S)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(S){At(s,l,S)}else d.current=null}function L_(s){var l=s.type,d=s.memoizedProps,v=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&v.focus();break e;case"img":d.src?v.src=d.src:d.srcSet&&(v.srcset=d.srcSet)}}catch(S){At(s,s.return,S)}}function B_(s,l,d){try{var v=s.stateNode;_M(v,s.type,d,l),v[pr]=l}catch(S){At(s,s.return,S)}}function U_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function L0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||U_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function B0(s,l,d){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(s,l):d.insertBefore(s,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(s,d)):(l=d,l.appendChild(s)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Od));else if(v!==4&&v!==27&&(s=s.child,s!==null))for(B0(s,l,d),s=s.sibling;s!==null;)B0(s,l,d),s=s.sibling}function gd(s,l,d){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?d.insertBefore(s,l):d.appendChild(s);else if(v!==4&&v!==27&&(s=s.child,s!==null))for(gd(s,l,d),s=s.sibling;s!==null;)gd(s,l,d),s=s.sibling}var Ii=!1,Ht=!1,U0=!1,F_=typeof WeakSet=="function"?WeakSet:Set,Rn=null,V_=!1;function QP(s,l){if(s=s.containerInfo,dg=Bd,s=rE(s),Vv(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var v=d.getSelection&&d.getSelection();if(v&&v.rangeCount!==0){d=v.anchorNode;var S=v.anchorOffset,A=v.focusNode;v=v.focusOffset;try{d.nodeType,A.nodeType}catch{d=null;break e}var T=0,x=-1,G=-1,q=0,fe=0,ve=s,ae=null;t:for(;;){for(var ce;ve!==d||S!==0&&ve.nodeType!==3||(x=T+S),ve!==A||v!==0&&ve.nodeType!==3||(G=T+v),ve.nodeType===3&&(T+=ve.nodeValue.length),(ce=ve.firstChild)!==null;)ae=ve,ve=ce;for(;;){if(ve===s)break t;if(ae===d&&++q===S&&(x=T),ae===A&&++fe===v&&(G=T),(ce=ve.nextSibling)!==null)break;ve=ae,ae=ve.parentNode}ve=ce}d=x===-1||G===-1?null:{start:x,end:G}}else d=null}d=d||{start:0,end:0}}else d=null;for(hg={focusedElem:s,selectionRange:d},Bd=!1,Rn=l;Rn!==null;)if(l=Rn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Rn=s;else for(;Rn!==null;){switch(l=Rn,A=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&A!==null){s=void 0,d=l,S=A.memoizedProps,A=A.memoizedState,v=d.stateNode;try{var xe=cs(d.type,S,d.elementType===d.type);s=v.getSnapshotBeforeUpdate(xe,A),v.__reactInternalSnapshotBeforeUpdate=s}catch(ze){At(d,d.return,ze)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,d=s.nodeType,d===9)gg(s);else if(d===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":gg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Rn=s;break}Rn=l.return}return xe=V_,V_=!1,xe}function G_(s,l,d){var v=d.flags;switch(d.tag){case 0:case 11:case 15:Ci(s,d),v&4&&rc(5,d);break;case 1:if(Ci(s,d),v&4)if(s=d.stateNode,l===null)try{s.componentDidMount()}catch(x){At(d,d.return,x)}else{var S=cs(d.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(S,l,s.__reactInternalSnapshotBeforeUpdate)}catch(x){At(d,d.return,x)}}v&64&&P_(d),v&512&&hs(d,d.return);break;case 3:if(Ci(s,d),v&64&&(v=d.updateQueue,v!==null)){if(s=null,d.child!==null)switch(d.child.tag){case 27:case 5:s=d.child.stateNode;break;case 1:s=d.child.stateNode}try{D_(v,s)}catch(x){At(d,d.return,x)}}break;case 26:Ci(s,d),v&512&&hs(d,d.return);break;case 27:case 5:Ci(s,d),l===null&&v&4&&L_(d),v&512&&hs(d,d.return);break;case 12:Ci(s,d);break;case 13:Ci(s,d),v&4&&W_(s,d);break;case 22:if(S=d.memoizedState!==null||Ii,!S){l=l!==null&&l.memoizedState!==null||Ht;var A=Ii,T=Ht;Ii=S,(Ht=l)&&!T?mo(s,d,(d.subtreeFlags&8772)!==0):Ci(s,d),Ii=A,Ht=T}v&512&&(d.memoizedProps.mode==="manual"?hs(d,d.return):kr(d,d.return));break;default:Ci(s,d)}}function H_(s){var l=s.alternate;l!==null&&(s.alternate=null,H_(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&wv(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var on=null,xr=!1;function Ri(s,l,d){for(d=d.child;d!==null;)z_(s,l,d),d=d.sibling}function z_(s,l,d){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(cn,d)}catch{}switch(d.tag){case 26:Ht||kr(d,l),Ri(s,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Ht||kr(d,l);var v=on,S=xr;for(on=d.stateNode,Ri(s,l,d),d=d.stateNode,l=d.attributes;l.length;)d.removeAttributeNode(l[0]);wv(d),on=v,xr=S;break;case 5:Ht||kr(d,l);case 6:S=on;var A=xr;if(on=null,Ri(s,l,d),on=S,xr=A,on!==null)if(xr)try{s=on,v=d.stateNode,s.nodeType===8?s.parentNode.removeChild(v):s.removeChild(v)}catch(T){At(d,l,T)}else try{on.removeChild(d.stateNode)}catch(T){At(d,l,T)}break;case 18:on!==null&&(xr?(l=on,d=d.stateNode,l.nodeType===8?vg(l.parentNode,d):l.nodeType===1&&vg(l,d),Ec(l)):vg(on,d.stateNode));break;case 4:v=on,S=xr,on=d.stateNode.containerInfo,xr=!0,Ri(s,l,d),on=v,xr=S;break;case 0:case 11:case 14:case 15:Ht||po(2,d,l),Ht||po(4,d,l),Ri(s,l,d);break;case 1:Ht||(kr(d,l),v=d.stateNode,typeof v.componentWillUnmount=="function"&&M_(d,l,v)),Ri(s,l,d);break;case 21:Ri(s,l,d);break;case 22:Ht||kr(d,l),Ht=(v=Ht)||d.memoizedState!==null,Ri(s,l,d),Ht=v;break;default:Ri(s,l,d)}}function W_(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Ec(s)}catch(d){At(l,l.return,d)}}function JP(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new F_),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new F_),l;default:throw Error(r(435,s.tag))}}function F0(s,l){var d=JP(s);l.forEach(function(v){var S=dM.bind(null,s,v);d.has(v)||(d.add(v),v.then(S,S))})}function ia(s,l){var d=l.deletions;if(d!==null)for(var v=0;v<d.length;v++){var S=d[v],A=s,T=l,x=T;e:for(;x!==null;){switch(x.tag){case 27:case 5:on=x.stateNode,xr=!1;break e;case 3:on=x.stateNode.containerInfo,xr=!0;break e;case 4:on=x.stateNode.containerInfo,xr=!0;break e}x=x.return}if(on===null)throw Error(r(160));z_(A,T,S),on=null,xr=!1,A=S.alternate,A!==null&&(A.return=null),S.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)K_(l,s),l=l.sibling}var Ia=null;function K_(s,l){var d=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ia(l,s),oa(s),v&4&&(po(3,s,s.return),rc(3,s),po(5,s,s.return));break;case 1:ia(l,s),oa(s),v&512&&(Ht||d===null||kr(d,d.return)),v&64&&Ii&&(s=s.updateQueue,s!==null&&(v=s.callbacks,v!==null&&(d=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=d===null?v:d.concat(v))));break;case 26:var S=Ia;if(ia(l,s),oa(s),v&512&&(Ht||d===null||kr(d,d.return)),v&4){var A=d!==null?d.memoizedState:null;if(v=s.memoizedState,d===null)if(v===null)if(s.stateNode===null){e:{v=s.type,d=s.memoizedProps,S=S.ownerDocument||S;t:switch(v){case"title":A=S.getElementsByTagName("title")[0],(!A||A[Tl]||A[Wn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=S.createElement(v),S.head.insertBefore(A,S.querySelector("head > title"))),Mn(A,v,d),A[Wn]=s,wn(A),v=A;break e;case"link":var T=LA("link","href",S).get(v+(d.href||""));if(T){for(var x=0;x<T.length;x++)if(A=T[x],A.getAttribute("href")===(d.href==null?null:d.href)&&A.getAttribute("rel")===(d.rel==null?null:d.rel)&&A.getAttribute("title")===(d.title==null?null:d.title)&&A.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){T.splice(x,1);break t}}A=S.createElement(v),Mn(A,v,d),S.head.appendChild(A);break;case"meta":if(T=LA("meta","content",S).get(v+(d.content||""))){for(x=0;x<T.length;x++)if(A=T[x],A.getAttribute("content")===(d.content==null?null:""+d.content)&&A.getAttribute("name")===(d.name==null?null:d.name)&&A.getAttribute("property")===(d.property==null?null:d.property)&&A.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&A.getAttribute("charset")===(d.charSet==null?null:d.charSet)){T.splice(x,1);break t}}A=S.createElement(v),Mn(A,v,d),S.head.appendChild(A);break;default:throw Error(r(468,v))}A[Wn]=s,wn(A),v=A}s.stateNode=v}else BA(S,s.type,s.stateNode);else s.stateNode=MA(S,v,s.memoizedProps);else A!==v?(A===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):A.count--,v===null?BA(S,s.type,s.stateNode):MA(S,v,s.memoizedProps)):v===null&&s.stateNode!==null&&B_(s,s.memoizedProps,d.memoizedProps)}break;case 27:if(v&4&&s.alternate===null){S=s.stateNode,A=s.memoizedProps;try{for(var G=S.firstChild;G;){var q=G.nextSibling,fe=G.nodeName;G[Tl]||fe==="HEAD"||fe==="BODY"||fe==="SCRIPT"||fe==="STYLE"||fe==="LINK"&&G.rel.toLowerCase()==="stylesheet"||S.removeChild(G),G=q}for(var ve=s.type,ae=S.attributes;ae.length;)S.removeAttributeNode(ae[0]);Mn(S,ve,A),S[Wn]=s,S[pr]=A}catch(xe){At(s,s.return,xe)}}case 5:if(ia(l,s),oa(s),v&512&&(Ht||d===null||kr(d,d.return)),s.flags&32){S=s.stateNode;try{au(S,"")}catch(xe){At(s,s.return,xe)}}v&4&&s.stateNode!=null&&(S=s.memoizedProps,B_(s,S,d!==null?d.memoizedProps:S)),v&1024&&(U0=!0);break;case 6:if(ia(l,s),oa(s),v&4){if(s.stateNode===null)throw Error(r(162));v=s.memoizedProps,d=s.stateNode;try{d.nodeValue=v}catch(xe){At(s,s.return,xe)}}break;case 3:if(Pd=null,S=Ia,Ia=xd(l.containerInfo),ia(l,s),Ia=S,oa(s),v&4&&d!==null&&d.memoizedState.isDehydrated)try{Ec(l.containerInfo)}catch(xe){At(s,s.return,xe)}U0&&(U0=!1,q_(s));break;case 4:v=Ia,Ia=xd(s.stateNode.containerInfo),ia(l,s),oa(s),Ia=v;break;case 12:ia(l,s),oa(s);break;case 13:ia(l,s),oa(s),s.child.flags&8192&&s.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&($0=tn()),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,F0(s,v)));break;case 22:if(v&512&&(Ht||d===null||kr(d,d.return)),G=s.memoizedState!==null,q=d!==null&&d.memoizedState!==null,fe=Ii,ve=Ht,Ii=fe||G,Ht=ve||q,ia(l,s),Ht=ve,Ii=fe,oa(s),l=s.stateNode,l._current=s,l._visibility&=-3,l._visibility|=l._pendingVisibility&2,v&8192&&(l._visibility=G?l._visibility&-2:l._visibility|1,G&&(l=Ii||Ht,d===null||q||l||Eu(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))e:for(d=null,l=s;;){if(l.tag===5||l.tag===26||l.tag===27){if(d===null){q=d=l;try{if(S=q.stateNode,G)A=S.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{T=q.stateNode,x=q.memoizedProps.style;var ce=x!=null&&x.hasOwnProperty("display")?x.display:null;T.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(xe){At(q,q.return,xe)}}}else if(l.tag===6){if(d===null){q=l;try{q.stateNode.nodeValue=G?"":q.memoizedProps}catch(xe){At(q,q.return,xe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}v&4&&(v=s.updateQueue,v!==null&&(d=v.retryQueue,d!==null&&(v.retryQueue=null,F0(s,d))));break;case 19:ia(l,s),oa(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,F0(s,v)));break;case 21:break;default:ia(l,s),oa(s)}}function oa(s){var l=s.flags;if(l&2){try{if(s.tag!==27){e:{for(var d=s.return;d!==null;){if(U_(d)){var v=d;break e}d=d.return}throw Error(r(160))}switch(v.tag){case 27:var S=v.stateNode,A=L0(s);gd(s,A,S);break;case 5:var T=v.stateNode;v.flags&32&&(au(T,""),v.flags&=-33);var x=L0(s);gd(s,x,T);break;case 3:case 4:var G=v.stateNode.containerInfo,q=L0(s);B0(s,q,G);break;default:throw Error(r(161))}}}catch(fe){At(s,s.return,fe)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function q_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;q_(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Ci(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)G_(s,l.alternate,l),l=l.sibling}function Eu(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:po(4,l,l.return),Eu(l);break;case 1:kr(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&M_(l,l.return,d),Eu(l);break;case 26:case 27:case 5:kr(l,l.return),Eu(l);break;case 22:kr(l,l.return),l.memoizedState===null&&Eu(l);break;default:Eu(l)}s=s.sibling}}function mo(s,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var v=l.alternate,S=s,A=l,T=A.flags;switch(A.tag){case 0:case 11:case 15:mo(S,A,d),rc(4,A);break;case 1:if(mo(S,A,d),v=A,S=v.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(q){At(v,v.return,q)}if(v=A,S=v.updateQueue,S!==null){var x=v.stateNode;try{var G=S.shared.hiddenCallbacks;if(G!==null)for(S.shared.hiddenCallbacks=null,S=0;S<G.length;S++)x_(G[S],x)}catch(q){At(v,v.return,q)}}d&&T&64&&P_(A),hs(A,A.return);break;case 26:case 27:case 5:mo(S,A,d),d&&v===null&&T&4&&L_(A),hs(A,A.return);break;case 12:mo(S,A,d);break;case 13:mo(S,A,d),d&&T&4&&W_(S,A);break;case 22:A.memoizedState===null&&mo(S,A,d),hs(A,A.return);break;default:mo(S,A,d)}l=l.sibling}}function V0(s,l){var d=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==d&&(s!=null&&s.refCount++,d!=null&&Yl(d))}function G0(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Yl(s))}function vo(s,l,d,v){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Y_(s,l,d,v),l=l.sibling}function Y_(s,l,d,v){var S=l.flags;switch(l.tag){case 0:case 11:case 15:vo(s,l,d,v),S&2048&&rc(9,l);break;case 3:vo(s,l,d,v),S&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Yl(s)));break;case 12:if(S&2048){vo(s,l,d,v),s=l.stateNode;try{var A=l.memoizedProps,T=A.id,x=A.onPostCommit;typeof x=="function"&&x(T,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){At(l,l.return,G)}}else vo(s,l,d,v);break;case 23:break;case 22:A=l.stateNode,l.memoizedState!==null?A._visibility&4?vo(s,l,d,v):ac(s,l):A._visibility&4?vo(s,l,d,v):(A._visibility|=4,_u(s,l,d,v,(l.subtreeFlags&10256)!==0)),S&2048&&V0(l.alternate,l);break;case 24:vo(s,l,d,v),S&2048&&G0(l.alternate,l);break;default:vo(s,l,d,v)}}function _u(s,l,d,v,S){for(S=S&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var A=s,T=l,x=d,G=v,q=T.flags;switch(T.tag){case 0:case 11:case 15:_u(A,T,x,G,S),rc(8,T);break;case 23:break;case 22:var fe=T.stateNode;T.memoizedState!==null?fe._visibility&4?_u(A,T,x,G,S):ac(A,T):(fe._visibility|=4,_u(A,T,x,G,S)),S&&q&2048&&V0(T.alternate,T);break;case 24:_u(A,T,x,G,S),S&&q&2048&&G0(T.alternate,T);break;default:_u(A,T,x,G,S)}l=l.sibling}}function ac(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=s,v=l,S=v.flags;switch(v.tag){case 22:ac(d,v),S&2048&&V0(v.alternate,v);break;case 24:ac(d,v),S&2048&&G0(v.alternate,v);break;default:ac(d,v)}l=l.sibling}}var ic=8192;function Au(s){if(s.subtreeFlags&ic)for(s=s.child;s!==null;)$_(s),s=s.sibling}function $_(s){switch(s.tag){case 26:Au(s),s.flags&ic&&s.memoizedState!==null&&GM(Ia,s.memoizedState,s.memoizedProps);break;case 5:Au(s);break;case 3:case 4:var l=Ia;Ia=xd(s.stateNode.containerInfo),Au(s),Ia=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=ic,ic=16777216,Au(s),ic=l):Au(s));break;default:Au(s)}}function j_(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function oc(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var v=l[d];Rn=v,Z_(v,s)}j_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)X_(s),s=s.sibling}function X_(s){switch(s.tag){case 0:case 11:case 15:oc(s),s.flags&2048&&po(9,s,s.return);break;case 3:oc(s);break;case 12:oc(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&4&&(s.return===null||s.return.tag!==13)?(l._visibility&=-5,yd(s)):oc(s);break;default:oc(s)}}function yd(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var v=l[d];Rn=v,Z_(v,s)}j_(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:po(8,l,l.return),yd(l);break;case 22:d=l.stateNode,d._visibility&4&&(d._visibility&=-5,yd(l));break;default:yd(l)}s=s.sibling}}function Z_(s,l){for(;Rn!==null;){var d=Rn;switch(d.tag){case 0:case 11:case 15:po(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var v=d.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Yl(d.memoizedState.cache)}if(v=d.child,v!==null)v.return=d,Rn=v;else e:for(d=s;Rn!==null;){v=Rn;var S=v.sibling,A=v.return;if(H_(v),v===d){Rn=null;break e}if(S!==null){S.return=A,Rn=S;break e}Rn=A}}}function eM(s,l,d,v){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sa(s,l,d,v){return new eM(s,l,d,v)}function H0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function go(s,l){var d=s.alternate;return d===null?(d=sa(s.tag,l,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=l,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&31457280,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,l=s.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d.refCleanup=s.refCleanup,d}function Q_(s,l){s.flags&=31457282;var d=s.alternate;return d===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=d.childLanes,s.lanes=d.lanes,s.child=d.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=d.memoizedProps,s.memoizedState=d.memoizedState,s.updateQueue=d.updateQueue,s.type=d.type,l=d.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function bd(s,l,d,v,S,A){var T=0;if(v=s,typeof s=="function")H0(s)&&(T=1);else if(typeof s=="string")T=FM(s,d,Le.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case c:return ps(d.children,S,A,l);case f:T=8,S|=24;break;case h:return s=sa(12,d,l,S|2),s.elementType=h,s.lanes=A,s;case b:return s=sa(13,d,l,S),s.elementType=b,s.lanes=A,s;case E:return s=sa(19,d,l,S),s.elementType=E,s.lanes=A,s;case I:return J_(d,S,A,l);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case p:case g:T=10;break e;case m:T=9;break e;case y:T=11;break e;case _:T=14;break e;case w:T=16,v=null;break e}T=29,d=Error(r(130,s===null?"null":typeof s,"")),v=null}return l=sa(T,d,l,S),l.elementType=s,l.type=v,l.lanes=A,l}function ps(s,l,d,v){return s=sa(7,s,v,l),s.lanes=d,s}function J_(s,l,d,v){s=sa(22,s,v,l),s.elementType=I,s.lanes=d;var S={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var A=S._current;if(A===null)throw Error(r(456));if((S._pendingVisibility&2)===0){var T=ao(A,2);T!==null&&(S._pendingVisibility|=2,or(T,A,2))}},attach:function(){var A=S._current;if(A===null)throw Error(r(456));if((S._pendingVisibility&2)!==0){var T=ao(A,2);T!==null&&(S._pendingVisibility&=-3,or(T,A,2))}}};return s.stateNode=S,s}function z0(s,l,d){return s=sa(6,s,null,l),s.lanes=d,s}function W0(s,l,d){return l=sa(4,s.children!==null?s.children:[],s.key,l),l.lanes=d,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}function Ni(s){s.flags|=4}function eA(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!UA(l)){if(l=aa.current,l!==null&&((tt&4194176)===tt?La!==null:(tt&62914560)!==tt&&(tt&536870912)===0||l!==La))throw Wl=jv,gE;s.flags|=8192}}function Sd(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?yS():536870912,s.lanes|=l,Iu|=l)}function sc(s,l){if(!st)switch(s.tailMode){case"hidden":l=s.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function Lt(s){var l=s.alternate!==null&&s.alternate.child===s.child,d=0,v=0;if(l)for(var S=s.child;S!==null;)d|=S.lanes|S.childLanes,v|=S.subtreeFlags&31457280,v|=S.flags&31457280,S.return=s,S=S.sibling;else for(S=s.child;S!==null;)d|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=s,S=S.sibling;return s.subtreeFlags|=v,s.childLanes=d,l}function tM(s,l,d){var v=l.pendingProps;switch(Yv(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(l),null;case 1:return Lt(l),null;case 3:return d=l.stateNode,v=null,s!==null&&(v=s.memoizedState.cache),l.memoizedState.cache!==v&&(l.flags|=2048),wi(dn),at(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Vl(l)?Ni(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,wa!==null&&(Q0(wa),wa=null))),Lt(l),null;case 26:return d=l.memoizedState,s===null?(Ni(l),d!==null?(Lt(l),eA(l,d)):(Lt(l),l.flags&=-16777217)):d?d!==s.memoizedState?(Ni(l),Lt(l),eA(l,d)):(Lt(l),l.flags&=-16777217):(s.memoizedProps!==v&&Ni(l),Lt(l),l.flags&=-16777217),null;case 27:yt(l),d=ge.current;var S=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==v&&Ni(l);else{if(!v){if(l.stateNode===null)throw Error(r(166));return Lt(l),null}s=Le.current,Vl(l)?mE(l):(s=OA(S,v,d),l.stateNode=s,Ni(l))}return Lt(l),null;case 5:if(yt(l),d=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==v&&Ni(l);else{if(!v){if(l.stateNode===null)throw Error(r(166));return Lt(l),null}if(s=Le.current,Vl(l))mE(l);else{switch(S=kd(ge.current),s){case 1:s=S.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:s=S.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":s=S.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":s=S.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof v.is=="string"?S.createElement("select",{is:v.is}):S.createElement("select"),v.multiple?s.multiple=!0:v.size&&(s.size=v.size);break;default:s=typeof v.is=="string"?S.createElement(d,{is:v.is}):S.createElement(d)}}s[Wn]=l,s[pr]=v;e:for(S=l.child;S!==null;){if(S.tag===5||S.tag===6)s.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===l)break e;for(;S.sibling===null;){if(S.return===null||S.return===l)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}l.stateNode=s;e:switch(Mn(s,d,v),d){case"button":case"input":case"select":case"textarea":s=!!v.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ni(l)}}return Lt(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==v&&Ni(l);else{if(typeof v!="string"&&l.stateNode===null)throw Error(r(166));if(s=ge.current,Vl(l)){if(s=l.stateNode,d=l.memoizedProps,v=null,S=ir,S!==null)switch(S.tag){case 27:case 5:v=S.memoizedProps}s[Wn]=l,s=!!(s.nodeValue===d||v!==null&&v.suppressHydrationWarning===!0||wA(s.nodeValue,d)),s||as(l)}else s=kd(s).createTextNode(v),s[Wn]=l,l.stateNode=s}return Lt(l),null;case 13:if(v=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(S=Vl(l),v!==null&&v.dehydrated!==null){if(s===null){if(!S)throw Error(r(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[Wn]=l}else Gl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Lt(l),S=!1}else wa!==null&&(Q0(wa),wa=null),S=!0;if(!S)return l.flags&256?(Si(l),l):(Si(l),null)}if(Si(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=v!==null,s=s!==null&&s.memoizedState!==null,d){v=l.child,S=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(S=v.alternate.memoizedState.cachePool.pool);var A=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(A=v.memoizedState.cachePool.pool),A!==S&&(v.flags|=2048)}return d!==s&&d&&(l.child.flags|=8192),Sd(l,l.updateQueue),Lt(l),null;case 4:return at(),s===null&&lg(l.stateNode.containerInfo),Lt(l),null;case 10:return wi(l.type),Lt(l),null;case 19:if(Ce(fn),S=l.memoizedState,S===null)return Lt(l),null;if(v=(l.flags&128)!==0,A=S.rendering,A===null)if(v)sc(S,!1);else{if(zt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(A=rd(s),A!==null){for(l.flags|=128,sc(S,!1),s=A.updateQueue,l.updateQueue=s,Sd(l,s),l.subtreeFlags=0,s=d,d=l.child;d!==null;)Q_(d,s),d=d.sibling;return Be(fn,fn.current&1|2),l.child}s=s.sibling}S.tail!==null&&tn()>Ed&&(l.flags|=128,v=!0,sc(S,!1),l.lanes=4194304)}else{if(!v)if(s=rd(A),s!==null){if(l.flags|=128,v=!0,s=s.updateQueue,l.updateQueue=s,Sd(l,s),sc(S,!0),S.tail===null&&S.tailMode==="hidden"&&!A.alternate&&!st)return Lt(l),null}else 2*tn()-S.renderingStartTime>Ed&&d!==536870912&&(l.flags|=128,v=!0,sc(S,!1),l.lanes=4194304);S.isBackwards?(A.sibling=l.child,l.child=A):(s=S.last,s!==null?s.sibling=A:l.child=A,S.last=A)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=tn(),l.sibling=null,s=fn.current,Be(fn,v?s&1|2:s&1),l):(Lt(l),null);case 22:case 23:return Si(l),Zv(),v=l.memoizedState!==null,s!==null?s.memoizedState!==null!==v&&(l.flags|=8192):v&&(l.flags|=8192),v?(d&536870912)!==0&&(l.flags&128)===0&&(Lt(l),l.subtreeFlags&6&&(l.flags|=8192)):Lt(l),d=l.updateQueue,d!==null&&Sd(l,d.retryQueue),d=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==d&&(l.flags|=2048),s!==null&&Ce(os),null;case 24:return d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),wi(dn),Lt(l),null;case 25:return null}throw Error(r(156,l.tag))}function nM(s,l){switch(Yv(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return wi(dn),at(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return yt(l),null;case 13:if(Si(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Gl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return Ce(fn),null;case 4:return at(),null;case 10:return wi(l.type),null;case 22:case 23:return Si(l),Zv(),s!==null&&Ce(os),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return wi(dn),null;case 25:return null;default:return null}}function tA(s,l){switch(Yv(l),l.tag){case 3:wi(dn),at();break;case 26:case 27:case 5:yt(l);break;case 4:at();break;case 13:Si(l);break;case 19:Ce(fn);break;case 10:wi(l.type);break;case 22:case 23:Si(l),Zv(),s!==null&&Ce(os);break;case 24:wi(dn)}}var rM={getCacheForType:function(s){var l=Kn(dn),d=l.data.get(s);return d===void 0&&(d=s(),l.data.set(s,d)),d}},aM=typeof WeakMap=="function"?WeakMap:Map,Bt=0,Ct=null,Qe=null,tt=0,Nt=0,Dr=null,Ti=!1,wu=!1,K0=!1,Oi=0,zt=0,yo=0,ms=0,q0=0,ua=0,Iu=0,uc=null,Ua=null,Y0=!1,$0=0,Ed=1/0,_d=null,bo=null,Ad=!1,vs=null,lc=0,j0=0,X0=null,cc=0,Z0=null;function Pr(){if((Bt&2)!==0&&tt!==0)return tt&-tt;if(k.T!==null){var s=vu;return s!==0?s:ig()}return _S()}function nA(){ua===0&&(ua=(tt&536870912)===0||st?gS():536870912);var s=aa.current;return s!==null&&(s.flags|=32),ua}function or(s,l,d){(s===Ct&&Nt===2||s.cancelPendingCommit!==null)&&(Ru(s,0),ki(s,tt,ua,!1)),Nl(s,d),((Bt&2)===0||s!==Ct)&&(s===Ct&&((Bt&2)===0&&(ms|=d),zt===4&&ki(s,tt,ua,!1)),Fa(s))}function rA(s,l,d){if((Bt&6)!==0)throw Error(r(327));var v=!d&&(l&60)===0&&(l&s.expiredLanes)===0||Cl(s,l),S=v?sM(s,l):tg(s,l,!0),A=v;do{if(S===0){wu&&!v&&ki(s,l,0,!1);break}else if(S===6)ki(s,l,0,!Ti);else{if(d=s.current.alternate,A&&!iM(d)){S=tg(s,l,!1),A=!1;continue}if(S===2){if(A=l,s.errorRecoveryDisabledLanes&A)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var x=s;S=uc;var G=x.current.memoizedState.isDehydrated;if(G&&(Ru(x,T).flags|=256),T=tg(x,T,!1),T!==2){if(K0&&!G){x.errorRecoveryDisabledLanes|=A,ms|=A,S=4;break e}A=Ua,Ua=S,A!==null&&Q0(A)}S=T}if(A=!1,S!==2)continue}}if(S===1){Ru(s,0),ki(s,l,0,!0);break}e:{switch(v=s,S){case 0:case 1:throw Error(r(345));case 4:if((l&4194176)===l){ki(v,l,ua,!Ti);break e}break;case 2:Ua=null;break;case 3:case 5:break;default:throw Error(r(329))}if(v.finishedWork=d,v.finishedLanes=l,(l&62914560)===l&&(A=$0+300-tn(),10<A)){if(ki(v,l,ua,!Ti),Lf(v,0)!==0)break e;v.timeoutHandle=CA(aA.bind(null,v,d,Ua,_d,Y0,l,ua,ms,Iu,Ti,2,-0,0),A);break e}aA(v,d,Ua,_d,Y0,l,ua,ms,Iu,Ti,0,-0,0)}}break}while(!0);Fa(s)}function Q0(s){Ua===null?Ua=s:Ua.push.apply(Ua,s)}function aA(s,l,d,v,S,A,T,x,G,q,fe,ve,ae){var ce=l.subtreeFlags;if((ce&8192||(ce&16785408)===16785408)&&(vc={stylesheets:null,count:0,unsuspend:VM},$_(l),l=HM(),l!==null)){s.cancelPendingCommit=l(fA.bind(null,s,d,v,S,T,x,G,1,ve,ae)),ki(s,A,T,!q);return}fA(s,d,v,S,T,x,G,fe,ve,ae)}function iM(s){for(var l=s;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var v=0;v<d.length;v++){var S=d[v],A=S.getSnapshot;S=S.value;try{if(!Or(A(),S))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ki(s,l,d,v){l&=~q0,l&=~ms,s.suspendedLanes|=l,s.pingedLanes&=~l,v&&(s.warmLanes|=l),v=s.expirationTimes;for(var S=l;0<S;){var A=31-Tr(S),T=1<<A;v[A]=-1,S&=~T}d!==0&&bS(s,d,l)}function wd(){return(Bt&6)===0?(fc(0),!1):!0}function J0(){if(Qe!==null){if(Nt===0)var s=Qe.return;else s=Qe,Ai=fs=null,i0(s),pu=null,Kl=0,s=Qe;for(;s!==null;)tA(s.alternate,s),s=s.return;Qe=null}}function Ru(s,l){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;d!==-1&&(s.timeoutHandle=-1,wM(d)),d=s.cancelPendingCommit,d!==null&&(s.cancelPendingCommit=null,d()),J0(),Ct=s,Qe=d=go(s.current,null),tt=l,Nt=0,Dr=null,Ti=!1,wu=Cl(s,l),K0=!1,Iu=ua=q0=ms=yo=zt=0,Ua=uc=null,Y0=!1,(l&8)!==0&&(l|=l&32);var v=s.entangledLanes;if(v!==0)for(s=s.entanglements,v&=l;0<v;){var S=31-Tr(v),A=1<<S;l|=s[S],v&=~A}return Oi=l,$f(),d}function iA(s,l){je=null,k.H=Ba,l===zl?(l=SE(),Nt=3):l===gE?(l=SE(),Nt=4):Nt=l===y_?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Dr=l,Qe===null&&(zt=1,pd(s,ta(l,s.current)))}function oA(){var s=k.H;return k.H=Ba,s===null?Ba:s}function sA(){var s=k.A;return k.A=rM,s}function eg(){zt=4,Ti||(tt&4194176)!==tt&&aa.current!==null||(wu=!0),(yo&134217727)===0&&(ms&134217727)===0||Ct===null||ki(Ct,tt,ua,!1)}function tg(s,l,d){var v=Bt;Bt|=2;var S=oA(),A=sA();(Ct!==s||tt!==l)&&(_d=null,Ru(s,l)),l=!1;var T=zt;e:do try{if(Nt!==0&&Qe!==null){var x=Qe,G=Dr;switch(Nt){case 8:J0(),T=6;break e;case 3:case 2:case 6:aa.current===null&&(l=!0);var q=Nt;if(Nt=0,Dr=null,Cu(s,x,G,q),d&&wu){T=0;break e}break;default:q=Nt,Nt=0,Dr=null,Cu(s,x,G,q)}}oM(),T=zt;break}catch(fe){iA(s,fe)}while(!0);return l&&s.shellSuspendCounter++,Ai=fs=null,Bt=v,k.H=S,k.A=A,Qe===null&&(Ct=null,tt=0,$f()),T}function oM(){for(;Qe!==null;)uA(Qe)}function sM(s,l){var d=Bt;Bt|=2;var v=oA(),S=sA();Ct!==s||tt!==l?(_d=null,Ed=tn()+500,Ru(s,l)):wu=Cl(s,l);e:do try{if(Nt!==0&&Qe!==null){l=Qe;var A=Dr;t:switch(Nt){case 1:Nt=0,Dr=null,Cu(s,l,A,1);break;case 2:if(yE(A)){Nt=0,Dr=null,lA(l);break}l=function(){Nt===2&&Ct===s&&(Nt=7),Fa(s)},A.then(l,l);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:yE(A)?(Nt=0,Dr=null,lA(l)):(Nt=0,Dr=null,Cu(s,l,A,7));break;case 5:var T=null;switch(Qe.tag){case 26:T=Qe.memoizedState;case 5:case 27:var x=Qe;if(!T||UA(T)){Nt=0,Dr=null;var G=x.sibling;if(G!==null)Qe=G;else{var q=x.return;q!==null?(Qe=q,Id(q)):Qe=null}break t}}Nt=0,Dr=null,Cu(s,l,A,5);break;case 6:Nt=0,Dr=null,Cu(s,l,A,6);break;case 8:J0(),zt=6;break e;default:throw Error(r(462))}}uM();break}catch(fe){iA(s,fe)}while(!0);return Ai=fs=null,k.H=v,k.A=S,Bt=d,Qe!==null?0:(Ct=null,tt=0,$f(),zt)}function uM(){for(;Qe!==null&&!Nr();)uA(Qe)}function uA(s){var l=O_(s.alternate,s,Oi);s.memoizedProps=s.pendingProps,l===null?Id(s):Qe=l}function lA(s){var l=s,d=l.alternate;switch(l.tag){case 15:case 0:l=w_(d,l,l.pendingProps,l.type,void 0,tt);break;case 11:l=w_(d,l,l.pendingProps,l.type.render,l.ref,tt);break;case 5:i0(l);default:tA(d,l),l=Qe=Q_(l,Oi),l=O_(d,l,Oi)}s.memoizedProps=s.pendingProps,l===null?Id(s):Qe=l}function Cu(s,l,d,v){Ai=fs=null,i0(l),pu=null,Kl=0;var S=l.return;try{if(XP(s,S,l,d,tt)){zt=1,pd(s,ta(d,s.current)),Qe=null;return}}catch(A){if(S!==null)throw Qe=S,A;zt=1,pd(s,ta(d,s.current)),Qe=null;return}l.flags&32768?(st||v===1?s=!0:wu||(tt&536870912)!==0?s=!1:(Ti=s=!0,(v===2||v===3||v===6)&&(v=aa.current,v!==null&&v.tag===13&&(v.flags|=16384))),cA(l,s)):Id(l)}function Id(s){var l=s;do{if((l.flags&32768)!==0){cA(l,Ti);return}s=l.return;var d=tM(l.alternate,l,Oi);if(d!==null){Qe=d;return}if(l=l.sibling,l!==null){Qe=l;return}Qe=l=s}while(l!==null);zt===0&&(zt=5)}function cA(s,l){do{var d=nM(s.alternate,s);if(d!==null){d.flags&=32767,Qe=d;return}if(d=s.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(s=s.sibling,s!==null)){Qe=s;return}Qe=s=d}while(s!==null);zt=6,Qe=null}function fA(s,l,d,v,S,A,T,x,G,q){var fe=k.T,ve=he.p;try{he.p=2,k.T=null,lM(s,l,d,v,ve,S,A,T,x,G,q)}finally{k.T=fe,he.p=ve}}function lM(s,l,d,v,S,A,T,x){do Nu();while(vs!==null);if((Bt&6)!==0)throw Error(r(327));var G=s.finishedWork;if(v=s.finishedLanes,G===null)return null;if(s.finishedWork=null,s.finishedLanes=0,G===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var q=G.lanes|G.childLanes;if(q|=Wv,G4(s,v,q,A,T,x),s===Ct&&(Qe=Ct=null,tt=0),(G.subtreeFlags&10256)===0&&(G.flags&10256)===0||Ad||(Ad=!0,j0=q,X0=d,hM(lt,function(){return Nu(),null})),d=(G.flags&15990)!==0,(G.subtreeFlags&15990)!==0||d?(d=k.T,k.T=null,A=he.p,he.p=2,T=Bt,Bt|=4,QP(s,G),K_(G,s),DP(hg,s.containerInfo),Bd=!!dg,hg=dg=null,s.current=G,G_(s,G.alternate,G),dr(),Bt=T,he.p=A,k.T=d):s.current=G,Ad?(Ad=!1,vs=s,lc=v):dA(s,q),q=s.pendingLanes,q===0&&(bo=null),Rl(G.stateNode),Fa(s),l!==null)for(S=s.onRecoverableError,G=0;G<l.length;G++)q=l[G],S(q.value,{componentStack:q.stack});return(lc&3)!==0&&Nu(),q=s.pendingLanes,(v&4194218)!==0&&(q&42)!==0?s===Z0?cc++:(cc=0,Z0=s):cc=0,fc(0),null}function dA(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Yl(l)))}function Nu(){if(vs!==null){var s=vs,l=j0;j0=0;var d=ES(lc),v=k.T,S=he.p;try{if(he.p=32>d?32:d,k.T=null,vs===null)var A=!1;else{d=X0,X0=null;var T=vs,x=lc;if(vs=null,lc=0,(Bt&6)!==0)throw Error(r(331));var G=Bt;if(Bt|=4,X_(T.current),Y_(T,T.current,x,d),Bt=G,fc(0,!1),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(cn,T)}catch{}A=!0}return A}finally{he.p=S,k.T=v,dA(s,l)}}return!1}function hA(s,l,d){l=ta(d,l),l=b0(s.stateNode,l,2),s=ho(s,l,2),s!==null&&(Nl(s,2),Fa(s))}function At(s,l,d){if(s.tag===3)hA(s,s,d);else for(;l!==null;){if(l.tag===3){hA(l,s,d);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(bo===null||!bo.has(v))){s=ta(d,s),d=v_(2),v=ho(l,d,2),v!==null&&(g_(d,v,l,s),Nl(v,2),Fa(v));break}}l=l.return}}function ng(s,l,d){var v=s.pingCache;if(v===null){v=s.pingCache=new aM;var S=new Set;v.set(l,S)}else S=v.get(l),S===void 0&&(S=new Set,v.set(l,S));S.has(d)||(K0=!0,S.add(d),s=cM.bind(null,s,l,d),l.then(s,s))}function cM(s,l,d){var v=s.pingCache;v!==null&&v.delete(l),s.pingedLanes|=s.suspendedLanes&d,s.warmLanes&=~d,Ct===s&&(tt&d)===d&&(zt===4||zt===3&&(tt&62914560)===tt&&300>tn()-$0?(Bt&2)===0&&Ru(s,0):q0|=d,Iu===tt&&(Iu=0)),Fa(s)}function pA(s,l){l===0&&(l=yS()),s=ao(s,l),s!==null&&(Nl(s,l),Fa(s))}function fM(s){var l=s.memoizedState,d=0;l!==null&&(d=l.retryLane),pA(s,d)}function dM(s,l){var d=0;switch(s.tag){case 13:var v=s.stateNode,S=s.memoizedState;S!==null&&(d=S.retryLane);break;case 19:v=s.stateNode;break;case 22:v=s.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(l),pA(s,d)}function hM(s,l){return zn(s,l)}var Rd=null,Tu=null,rg=!1,Cd=!1,ag=!1,gs=0;function Fa(s){s!==Tu&&s.next===null&&(Tu===null?Rd=Tu=s:Tu=Tu.next=s),Cd=!0,rg||(rg=!0,mM(pM))}function fc(s,l){if(!ag&&Cd){ag=!0;do for(var d=!1,v=Rd;v!==null;){if(s!==0){var S=v.pendingLanes;if(S===0)var A=0;else{var T=v.suspendedLanes,x=v.pingedLanes;A=(1<<31-Tr(42|s)+1)-1,A&=S&~(T&~x),A=A&201326677?A&201326677|1:A?A|2:0}A!==0&&(d=!0,gA(v,A))}else A=tt,A=Lf(v,v===Ct?A:0),(A&3)===0||Cl(v,A)||(d=!0,gA(v,A));v=v.next}while(d);ag=!1}}function pM(){Cd=rg=!1;var s=0;gs!==0&&(AM()&&(s=gs),gs=0);for(var l=tn(),d=null,v=Rd;v!==null;){var S=v.next,A=mA(v,l);A===0?(v.next=null,d===null?Rd=S:d.next=S,S===null&&(Tu=d)):(d=v,(s!==0||(A&3)!==0)&&(Cd=!0)),v=S}fc(s)}function mA(s,l){for(var d=s.suspendedLanes,v=s.pingedLanes,S=s.expirationTimes,A=s.pendingLanes&-62914561;0<A;){var T=31-Tr(A),x=1<<T,G=S[T];G===-1?((x&d)===0||(x&v)!==0)&&(S[T]=V4(x,l)):G<=l&&(s.expiredLanes|=x),A&=~x}if(l=Ct,d=tt,d=Lf(s,s===l?d:0),v=s.callbackNode,d===0||s===l&&Nt===2||s.cancelPendingCommit!==null)return v!==null&&v!==null&&rr(v),s.callbackNode=null,s.callbackPriority=0;if((d&3)===0||Cl(s,d)){if(l=d&-d,l===s.callbackPriority)return l;switch(v!==null&&rr(v),ES(d)){case 2:case 8:d=Zr;break;case 32:d=lt;break;case 268435456:d=An;break;default:d=lt}return v=vA.bind(null,s),d=zn(d,v),s.callbackPriority=l,s.callbackNode=d,l}return v!==null&&v!==null&&rr(v),s.callbackPriority=2,s.callbackNode=null,2}function vA(s,l){var d=s.callbackNode;if(Nu()&&s.callbackNode!==d)return null;var v=tt;return v=Lf(s,s===Ct?v:0),v===0?null:(rA(s,v,l),mA(s,tn()),s.callbackNode!=null&&s.callbackNode===d?vA.bind(null,s):null)}function gA(s,l){if(Nu())return null;rA(s,l,!0)}function mM(s){IM(function(){(Bt&6)!==0?zn(pi,s):s()})}function ig(){return gs===0&&(gs=gS()),gs}function yA(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Gf(""+s)}function bA(s,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,s.id&&d.setAttribute("form",s.id),l.parentNode.insertBefore(d,l),s=new FormData(s),d.parentNode.removeChild(d),s}function vM(s,l,d,v,S){if(l==="submit"&&d&&d.stateNode===S){var A=yA((S[pr]||null).action),T=v.submitter;T&&(l=(l=T[pr]||null)?yA(l.formAction):T.getAttribute("formAction"),l!==null&&(A=l,T=null));var x=new Kf("action","action",null,v,S);s.push({event:x,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(gs!==0){var G=T?bA(S,T):new FormData(S);p0(d,{pending:!0,data:G,method:S.method,action:A},null,G)}}else typeof A=="function"&&(x.preventDefault(),G=T?bA(S,T):new FormData(S),p0(d,{pending:!0,data:G,method:S.method,action:A},A,G))},currentTarget:S}]})}}for(var og=0;og<fE.length;og++){var sg=fE[og],gM=sg.toLowerCase(),yM=sg[0].toUpperCase()+sg.slice(1);Aa(gM,"on"+yM)}Aa(oE,"onAnimationEnd"),Aa(sE,"onAnimationIteration"),Aa(uE,"onAnimationStart"),Aa("dblclick","onDoubleClick"),Aa("focusin","onFocus"),Aa("focusout","onBlur"),Aa(MP,"onTransitionRun"),Aa(LP,"onTransitionStart"),Aa(BP,"onTransitionCancel"),Aa(lE,"onTransitionEnd"),nu("onMouseEnter",["mouseout","mouseover"]),nu("onMouseLeave",["mouseout","mouseover"]),nu("onPointerEnter",["pointerout","pointerover"]),nu("onPointerLeave",["pointerout","pointerover"]),Qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dc));function SA(s,l){l=(l&4)!==0;for(var d=0;d<s.length;d++){var v=s[d],S=v.event;v=v.listeners;e:{var A=void 0;if(l)for(var T=v.length-1;0<=T;T--){var x=v[T],G=x.instance,q=x.currentTarget;if(x=x.listener,G!==A&&S.isPropagationStopped())break e;A=x,S.currentTarget=q;try{A(S)}catch(fe){hd(fe)}S.currentTarget=null,A=G}else for(T=0;T<v.length;T++){if(x=v[T],G=x.instance,q=x.currentTarget,x=x.listener,G!==A&&S.isPropagationStopped())break e;A=x,S.currentTarget=q;try{A(S)}catch(fe){hd(fe)}S.currentTarget=null,A=G}}}}function et(s,l){var d=l[Av];d===void 0&&(d=l[Av]=new Set);var v=s+"__bubble";d.has(v)||(EA(l,s,2,!1),d.add(v))}function ug(s,l,d){var v=0;l&&(v|=4),EA(d,s,v,l)}var Nd="_reactListening"+Math.random().toString(36).slice(2);function lg(s){if(!s[Nd]){s[Nd]=!0,wS.forEach(function(d){d!=="selectionchange"&&(bM.has(d)||ug(d,!1,s),ug(d,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Nd]||(l[Nd]=!0,ug("selectionchange",!1,l))}}function EA(s,l,d,v){switch(WA(l)){case 2:var S=KM;break;case 8:S=qM;break;default:S=_g}d=S.bind(null,l,d,s),S=void 0,!kv||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),v?S!==void 0?s.addEventListener(l,d,{capture:!0,passive:S}):s.addEventListener(l,d,!0):S!==void 0?s.addEventListener(l,d,{passive:S}):s.addEventListener(l,d,!1)}function cg(s,l,d,v,S){var A=v;if((l&1)===0&&(l&2)===0&&v!==null)e:for(;;){if(v===null)return;var T=v.tag;if(T===3||T===4){var x=v.stateNode.containerInfo;if(x===S||x.nodeType===8&&x.parentNode===S)break;if(T===4)for(T=v.return;T!==null;){var G=T.tag;if((G===3||G===4)&&(G=T.stateNode.containerInfo,G===S||G.nodeType===8&&G.parentNode===S))return;T=T.return}for(;x!==null;){if(T=Zo(x),T===null)return;if(G=T.tag,G===5||G===6||G===26||G===27){v=A=T;continue e}x=x.parentNode}}v=v.return}LS(function(){var q=A,fe=Tv(d),ve=[];e:{var ae=cE.get(s);if(ae!==void 0){var ce=Kf,xe=s;switch(s){case"keypress":if(zf(d)===0)break e;case"keydown":case"keyup":ce=dP;break;case"focusin":xe="focus",ce=Mv;break;case"focusout":xe="blur",ce=Mv;break;case"beforeblur":case"afterblur":ce=Mv;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=FS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=eP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=mP;break;case oE:case sE:case uE:ce=rP;break;case lE:ce=gP;break;case"scroll":case"scrollend":ce=Q4;break;case"wheel":ce=bP;break;case"copy":case"cut":case"paste":ce=iP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=GS;break;case"toggle":case"beforetoggle":ce=EP}var ze=(l&4)!==0,Wt=!ze&&(s==="scroll"||s==="scrollend"),j=ze?ae!==null?ae+"Capture":null:ae;ze=[];for(var K=q,te;K!==null;){var pe=K;if(te=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||te===null||j===null||(pe=kl(K,j),pe!=null&&ze.push(hc(K,pe,te))),Wt)break;K=K.return}0<ze.length&&(ae=new ce(ae,xe,null,d,fe),ve.push({event:ae,listeners:ze}))}}if((l&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",ae&&d!==Nv&&(xe=d.relatedTarget||d.fromElement)&&(Zo(xe)||xe[Js]))break e;if((ce||ae)&&(ae=fe.window===fe?fe:(ae=fe.ownerDocument)?ae.defaultView||ae.parentWindow:window,ce?(xe=d.relatedTarget||d.toElement,ce=q,xe=xe?Zo(xe):null,xe!==null&&(Wt=$(xe),ze=xe.tag,xe!==Wt||ze!==5&&ze!==27&&ze!==6)&&(xe=null)):(ce=null,xe=q),ce!==xe)){if(ze=FS,pe="onMouseLeave",j="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(ze=GS,pe="onPointerLeave",j="onPointerEnter",K="pointer"),Wt=ce==null?ae:Ol(ce),te=xe==null?ae:Ol(xe),ae=new ze(pe,K+"leave",ce,d,fe),ae.target=Wt,ae.relatedTarget=te,pe=null,Zo(fe)===q&&(ze=new ze(j,K+"enter",xe,d,fe),ze.target=te,ze.relatedTarget=Wt,pe=ze),Wt=pe,ce&&xe)t:{for(ze=ce,j=xe,K=0,te=ze;te;te=Ou(te))K++;for(te=0,pe=j;pe;pe=Ou(pe))te++;for(;0<K-te;)ze=Ou(ze),K--;for(;0<te-K;)j=Ou(j),te--;for(;K--;){if(ze===j||j!==null&&ze===j.alternate)break t;ze=Ou(ze),j=Ou(j)}ze=null}else ze=null;ce!==null&&_A(ve,ae,ce,ze,!1),xe!==null&&Wt!==null&&_A(ve,Wt,xe,ze,!0)}}e:{if(ae=q?Ol(q):window,ce=ae.nodeName&&ae.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ae.type==="file")var we=jS;else if(YS(ae))if(XS)we=kP;else{we=TP;var Xe=NP}else ce=ae.nodeName,!ce||ce.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?q&&Cv(q.elementType)&&(we=jS):we=OP;if(we&&(we=we(s,q))){$S(ve,we,d,fe);break e}Xe&&Xe(s,ae,q),s==="focusout"&&q&&ae.type==="number"&&q.memoizedProps.value!=null&&Rv(ae,"number",ae.value)}switch(Xe=q?Ol(q):window,s){case"focusin":(YS(Xe)||Xe.contentEditable==="true")&&(uu=Xe,Gv=q,Fl=null);break;case"focusout":Fl=Gv=uu=null;break;case"mousedown":Hv=!0;break;case"contextmenu":case"mouseup":case"dragend":Hv=!1,aE(ve,d,fe);break;case"selectionchange":if(PP)break;case"keydown":case"keyup":aE(ve,d,fe)}var Me;if(Bv)e:{switch(s){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else su?KS(s,d)&&(Ue="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Ue="onCompositionStart");Ue&&(HS&&d.locale!=="ko"&&(su||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&su&&(Me=BS()):(ro=fe,xv="value"in ro?ro.value:ro.textContent,su=!0)),Xe=Td(q,Ue),0<Xe.length&&(Ue=new VS(Ue,s,null,d,fe),ve.push({event:Ue,listeners:Xe}),Me?Ue.data=Me:(Me=qS(d),Me!==null&&(Ue.data=Me)))),(Me=AP?wP(s,d):IP(s,d))&&(Ue=Td(q,"onBeforeInput"),0<Ue.length&&(Xe=new VS("onBeforeInput","beforeinput",null,d,fe),ve.push({event:Xe,listeners:Ue}),Xe.data=Me)),vM(ve,s,q,d,fe)}SA(ve,l)})}function hc(s,l,d){return{instance:s,listener:l,currentTarget:d}}function Td(s,l){for(var d=l+"Capture",v=[];s!==null;){var S=s,A=S.stateNode;S=S.tag,S!==5&&S!==26&&S!==27||A===null||(S=kl(s,d),S!=null&&v.unshift(hc(s,S,A)),S=kl(s,l),S!=null&&v.push(hc(s,S,A))),s=s.return}return v}function Ou(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function _A(s,l,d,v,S){for(var A=l._reactName,T=[];d!==null&&d!==v;){var x=d,G=x.alternate,q=x.stateNode;if(x=x.tag,G!==null&&G===v)break;x!==5&&x!==26&&x!==27||q===null||(G=q,S?(q=kl(d,A),q!=null&&T.unshift(hc(d,q,G))):S||(q=kl(d,A),q!=null&&T.push(hc(d,q,G)))),d=d.return}T.length!==0&&s.push({event:l,listeners:T})}var SM=/\r\n?/g,EM=/\u0000|\uFFFD/g;function AA(s){return(typeof s=="string"?s:""+s).replace(SM,`
`).replace(EM,"")}function wA(s,l){return l=AA(l),AA(s)===l}function Od(){}function St(s,l,d,v,S,A){switch(d){case"children":typeof v=="string"?l==="body"||l==="textarea"&&v===""||au(s,v):(typeof v=="number"||typeof v=="bigint")&&l!=="body"&&au(s,""+v);break;case"className":Uf(s,"class",v);break;case"tabIndex":Uf(s,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Uf(s,d,v);break;case"style":PS(s,v,A);break;case"data":if(l!=="object"){Uf(s,"data",v);break}case"src":case"href":if(v===""&&(l!=="a"||d!=="href")){s.removeAttribute(d);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(d);break}v=Gf(""+v),s.setAttribute(d,v);break;case"action":case"formAction":if(typeof v=="function"){s.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(d==="formAction"?(l!=="input"&&St(s,l,"name",S.name,S,null),St(s,l,"formEncType",S.formEncType,S,null),St(s,l,"formMethod",S.formMethod,S,null),St(s,l,"formTarget",S.formTarget,S,null)):(St(s,l,"encType",S.encType,S,null),St(s,l,"method",S.method,S,null),St(s,l,"target",S.target,S,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(d);break}v=Gf(""+v),s.setAttribute(d,v);break;case"onClick":v!=null&&(s.onclick=Od);break;case"onScroll":v!=null&&et("scroll",s);break;case"onScrollEnd":v!=null&&et("scrollend",s);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(d=v.__html,d!=null){if(S.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"multiple":s.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":s.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){s.removeAttribute("xlink:href");break}d=Gf(""+v),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(d,""+v):s.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(d,""):s.removeAttribute(d);break;case"capture":case"download":v===!0?s.setAttribute(d,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(d,v):s.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?s.setAttribute(d,v):s.removeAttribute(d);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?s.removeAttribute(d):s.setAttribute(d,v);break;case"popover":et("beforetoggle",s),et("toggle",s),Bf(s,"popover",v);break;case"xlinkActuate":gi(s,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":gi(s,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":gi(s,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":gi(s,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":gi(s,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":gi(s,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":gi(s,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":gi(s,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":gi(s,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Bf(s,"is",v);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=X4.get(d)||d,Bf(s,d,v))}}function fg(s,l,d,v,S,A){switch(d){case"style":PS(s,v,A);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(d=v.__html,d!=null){if(S.children!=null)throw Error(r(60));s.innerHTML=d}}break;case"children":typeof v=="string"?au(s,v):(typeof v=="number"||typeof v=="bigint")&&au(s,""+v);break;case"onScroll":v!=null&&et("scroll",s);break;case"onScrollEnd":v!=null&&et("scrollend",s);break;case"onClick":v!=null&&(s.onclick=Od);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!IS.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(S=d.endsWith("Capture"),l=d.slice(2,S?d.length-7:void 0),A=s[pr]||null,A=A!=null?A[d]:null,typeof A=="function"&&s.removeEventListener(l,A,S),typeof v=="function")){typeof A!="function"&&A!==null&&(d in s?s[d]=null:s.hasAttribute(d)&&s.removeAttribute(d)),s.addEventListener(l,v,S);break e}d in s?s[d]=v:v===!0?s.setAttribute(d,""):Bf(s,d,v)}}}function Mn(s,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",s),et("load",s);var v=!1,S=!1,A;for(A in d)if(d.hasOwnProperty(A)){var T=d[A];if(T!=null)switch(A){case"src":v=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:St(s,l,A,T,d,null)}}S&&St(s,l,"srcSet",d.srcSet,d,null),v&&St(s,l,"src",d.src,d,null);return;case"input":et("invalid",s);var x=A=T=S=null,G=null,q=null;for(v in d)if(d.hasOwnProperty(v)){var fe=d[v];if(fe!=null)switch(v){case"name":S=fe;break;case"type":T=fe;break;case"checked":G=fe;break;case"defaultChecked":q=fe;break;case"value":A=fe;break;case"defaultValue":x=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,l));break;default:St(s,l,v,fe,d,null)}}OS(s,A,x,G,q,T,S,!1),Ff(s);return;case"select":et("invalid",s),v=T=A=null;for(S in d)if(d.hasOwnProperty(S)&&(x=d[S],x!=null))switch(S){case"value":A=x;break;case"defaultValue":T=x;break;case"multiple":v=x;default:St(s,l,S,x,d,null)}l=A,d=T,s.multiple=!!v,l!=null?ru(s,!!v,l,!1):d!=null&&ru(s,!!v,d,!0);return;case"textarea":et("invalid",s),A=S=v=null;for(T in d)if(d.hasOwnProperty(T)&&(x=d[T],x!=null))switch(T){case"value":v=x;break;case"defaultValue":S=x;break;case"children":A=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:St(s,l,T,x,d,null)}xS(s,v,S,A),Ff(s);return;case"option":for(G in d)if(d.hasOwnProperty(G)&&(v=d[G],v!=null))switch(G){case"selected":s.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:St(s,l,G,v,d,null)}return;case"dialog":et("cancel",s),et("close",s);break;case"iframe":case"object":et("load",s);break;case"video":case"audio":for(v=0;v<dc.length;v++)et(dc[v],s);break;case"image":et("error",s),et("load",s);break;case"details":et("toggle",s);break;case"embed":case"source":case"link":et("error",s),et("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in d)if(d.hasOwnProperty(q)&&(v=d[q],v!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:St(s,l,q,v,d,null)}return;default:if(Cv(l)){for(fe in d)d.hasOwnProperty(fe)&&(v=d[fe],v!==void 0&&fg(s,l,fe,v,d,void 0));return}}for(x in d)d.hasOwnProperty(x)&&(v=d[x],v!=null&&St(s,l,x,v,d,null))}function _M(s,l,d,v){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,A=null,T=null,x=null,G=null,q=null,fe=null;for(ce in d){var ve=d[ce];if(d.hasOwnProperty(ce)&&ve!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":G=ve;default:v.hasOwnProperty(ce)||St(s,l,ce,null,v,ve)}}for(var ae in v){var ce=v[ae];if(ve=d[ae],v.hasOwnProperty(ae)&&(ce!=null||ve!=null))switch(ae){case"type":A=ce;break;case"name":S=ce;break;case"checked":q=ce;break;case"defaultChecked":fe=ce;break;case"value":T=ce;break;case"defaultValue":x=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,l));break;default:ce!==ve&&St(s,l,ae,ce,v,ve)}}Iv(s,T,x,G,q,fe,A,S);return;case"select":ce=T=x=ae=null;for(A in d)if(G=d[A],d.hasOwnProperty(A)&&G!=null)switch(A){case"value":break;case"multiple":ce=G;default:v.hasOwnProperty(A)||St(s,l,A,null,v,G)}for(S in v)if(A=v[S],G=d[S],v.hasOwnProperty(S)&&(A!=null||G!=null))switch(S){case"value":ae=A;break;case"defaultValue":x=A;break;case"multiple":T=A;default:A!==G&&St(s,l,S,A,v,G)}l=x,d=T,v=ce,ae!=null?ru(s,!!d,ae,!1):!!v!=!!d&&(l!=null?ru(s,!!d,l,!0):ru(s,!!d,d?[]:"",!1));return;case"textarea":ce=ae=null;for(x in d)if(S=d[x],d.hasOwnProperty(x)&&S!=null&&!v.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:St(s,l,x,null,v,S)}for(T in v)if(S=v[T],A=d[T],v.hasOwnProperty(T)&&(S!=null||A!=null))switch(T){case"value":ae=S;break;case"defaultValue":ce=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:S!==A&&St(s,l,T,S,v,A)}kS(s,ae,ce);return;case"option":for(var xe in d)if(ae=d[xe],d.hasOwnProperty(xe)&&ae!=null&&!v.hasOwnProperty(xe))switch(xe){case"selected":s.selected=!1;break;default:St(s,l,xe,null,v,ae)}for(G in v)if(ae=v[G],ce=d[G],v.hasOwnProperty(G)&&ae!==ce&&(ae!=null||ce!=null))switch(G){case"selected":s.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:St(s,l,G,ae,v,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in d)ae=d[ze],d.hasOwnProperty(ze)&&ae!=null&&!v.hasOwnProperty(ze)&&St(s,l,ze,null,v,ae);for(q in v)if(ae=v[q],ce=d[q],v.hasOwnProperty(q)&&ae!==ce&&(ae!=null||ce!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,l));break;default:St(s,l,q,ae,v,ce)}return;default:if(Cv(l)){for(var Wt in d)ae=d[Wt],d.hasOwnProperty(Wt)&&ae!==void 0&&!v.hasOwnProperty(Wt)&&fg(s,l,Wt,void 0,v,ae);for(fe in v)ae=v[fe],ce=d[fe],!v.hasOwnProperty(fe)||ae===ce||ae===void 0&&ce===void 0||fg(s,l,fe,ae,v,ce);return}}for(var j in d)ae=d[j],d.hasOwnProperty(j)&&ae!=null&&!v.hasOwnProperty(j)&&St(s,l,j,null,v,ae);for(ve in v)ae=v[ve],ce=d[ve],!v.hasOwnProperty(ve)||ae===ce||ae==null&&ce==null||St(s,l,ve,ae,v,ce)}var dg=null,hg=null;function kd(s){return s.nodeType===9?s:s.ownerDocument}function IA(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function RA(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function pg(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var mg=null;function AM(){var s=window.event;return s&&s.type==="popstate"?s===mg?!1:(mg=s,!0):(mg=null,!1)}var CA=typeof setTimeout=="function"?setTimeout:void 0,wM=typeof clearTimeout=="function"?clearTimeout:void 0,NA=typeof Promise=="function"?Promise:void 0,IM=typeof queueMicrotask=="function"?queueMicrotask:typeof NA<"u"?function(s){return NA.resolve(null).then(s).catch(RM)}:CA;function RM(s){setTimeout(function(){throw s})}function vg(s,l){var d=l,v=0;do{var S=d.nextSibling;if(s.removeChild(d),S&&S.nodeType===8)if(d=S.data,d==="/$"){if(v===0){s.removeChild(S),Ec(l);return}v--}else d!=="$"&&d!=="$?"&&d!=="$!"||v++;d=S}while(d);Ec(l)}function gg(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":gg(d),wv(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}s.removeChild(d)}}function CM(s,l,d,v){for(;s.nodeType===1;){var S=d;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!v&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(v){if(!s[Tl])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(A=s.getAttribute("rel"),A==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(A!==S.rel||s.getAttribute("href")!==(S.href==null?null:S.href)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||s.getAttribute("title")!==(S.title==null?null:S.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(A=s.getAttribute("src"),(A!==(S.src==null?null:S.src)||s.getAttribute("type")!==(S.type==null?null:S.type)||s.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&A&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var A=S.name==null?null:""+S.name;if(S.type==="hidden"&&s.getAttribute("name")===A)return s}else return s;if(s=Ra(s.nextSibling),s===null)break}return null}function NM(s,l,d){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!d||(s=Ra(s.nextSibling),s===null))return null;return s}function Ra(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}function TA(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return s;l--}else d==="/$"&&l++}s=s.previousSibling}return null}function OA(s,l,d){switch(l=kd(d),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}var la=new Map,kA=new Set;function xd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var xi=he.d;he.d={f:TM,r:OM,D:kM,C:xM,L:DM,m:PM,X:LM,S:MM,M:BM};function TM(){var s=xi.f(),l=wd();return s||l}function OM(s){var l=eu(s);l!==null&&l.tag===5&&l.type==="form"?a_(l):xi.r(s)}var ku=typeof document>"u"?null:document;function xA(s,l,d){var v=ku;if(v&&typeof l=="string"&&l){var S=Jr(l);S='link[rel="'+s+'"][href="'+S+'"]',typeof d=="string"&&(S+='[crossorigin="'+d+'"]'),kA.has(S)||(kA.add(S),s={rel:s,crossOrigin:d,href:l},v.querySelector(S)===null&&(l=v.createElement("link"),Mn(l,"link",s),wn(l),v.head.appendChild(l)))}}function kM(s){xi.D(s),xA("dns-prefetch",s,null)}function xM(s,l){xi.C(s,l),xA("preconnect",s,l)}function DM(s,l,d){xi.L(s,l,d);var v=ku;if(v&&s&&l){var S='link[rel="preload"][as="'+Jr(l)+'"]';l==="image"&&d&&d.imageSrcSet?(S+='[imagesrcset="'+Jr(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(S+='[imagesizes="'+Jr(d.imageSizes)+'"]')):S+='[href="'+Jr(s)+'"]';var A=S;switch(l){case"style":A=xu(s);break;case"script":A=Du(s)}la.has(A)||(s=N({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:s,as:l},d),la.set(A,s),v.querySelector(S)!==null||l==="style"&&v.querySelector(pc(A))||l==="script"&&v.querySelector(mc(A))||(l=v.createElement("link"),Mn(l,"link",s),wn(l),v.head.appendChild(l)))}}function PM(s,l){xi.m(s,l);var d=ku;if(d&&s){var v=l&&typeof l.as=="string"?l.as:"script",S='link[rel="modulepreload"][as="'+Jr(v)+'"][href="'+Jr(s)+'"]',A=S;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Du(s)}if(!la.has(A)&&(s=N({rel:"modulepreload",href:s},l),la.set(A,s),d.querySelector(S)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(mc(A)))return}v=d.createElement("link"),Mn(v,"link",s),wn(v),d.head.appendChild(v)}}}function MM(s,l,d){xi.S(s,l,d);var v=ku;if(v&&s){var S=tu(v).hoistableStyles,A=xu(s);l=l||"default";var T=S.get(A);if(!T){var x={loading:0,preload:null};if(T=v.querySelector(pc(A)))x.loading=5;else{s=N({rel:"stylesheet",href:s,"data-precedence":l},d),(d=la.get(A))&&yg(s,d);var G=T=v.createElement("link");wn(G),Mn(G,"link",s),G._p=new Promise(function(q,fe){G.onload=q,G.onerror=fe}),G.addEventListener("load",function(){x.loading|=1}),G.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Dd(T,l,v)}T={type:"stylesheet",instance:T,count:1,state:x},S.set(A,T)}}}function LM(s,l){xi.X(s,l);var d=ku;if(d&&s){var v=tu(d).hoistableScripts,S=Du(s),A=v.get(S);A||(A=d.querySelector(mc(S)),A||(s=N({src:s,async:!0},l),(l=la.get(S))&&bg(s,l),A=d.createElement("script"),wn(A),Mn(A,"link",s),d.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(S,A))}}function BM(s,l){xi.M(s,l);var d=ku;if(d&&s){var v=tu(d).hoistableScripts,S=Du(s),A=v.get(S);A||(A=d.querySelector(mc(S)),A||(s=N({src:s,async:!0,type:"module"},l),(l=la.get(S))&&bg(s,l),A=d.createElement("script"),wn(A),Mn(A,"link",s),d.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(S,A))}}function DA(s,l,d,v){var S=(S=ge.current)?xd(S):null;if(!S)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=xu(d.href),d=tu(S).hoistableStyles,v=d.get(l),v||(v={type:"style",instance:null,count:0,state:null},d.set(l,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){s=xu(d.href);var A=tu(S).hoistableStyles,T=A.get(s);if(T||(S=S.ownerDocument||S,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(s,T),(A=S.querySelector(pc(s)))&&!A._p&&(T.instance=A,T.state.loading=5),la.has(s)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},la.set(s,d),A||UM(S,s,d,T.state))),l&&v===null)throw Error(r(528,""));return T}if(l&&v!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Du(d),d=tu(S).hoistableScripts,v=d.get(l),v||(v={type:"script",instance:null,count:0,state:null},d.set(l,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function xu(s){return'href="'+Jr(s)+'"'}function pc(s){return'link[rel="stylesheet"]['+s+"]"}function PA(s){return N({},s,{"data-precedence":s.precedence,precedence:null})}function UM(s,l,d,v){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?v.loading=1:(l=s.createElement("link"),v.preload=l,l.addEventListener("load",function(){return v.loading|=1}),l.addEventListener("error",function(){return v.loading|=2}),Mn(l,"link",d),wn(l),s.head.appendChild(l))}function Du(s){return'[src="'+Jr(s)+'"]'}function mc(s){return"script[async]"+s}function MA(s,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var v=s.querySelector('style[data-href~="'+Jr(d.href)+'"]');if(v)return l.instance=v,wn(v),v;var S=N({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return v=(s.ownerDocument||s).createElement("style"),wn(v),Mn(v,"style",S),Dd(v,d.precedence,s),l.instance=v;case"stylesheet":S=xu(d.href);var A=s.querySelector(pc(S));if(A)return l.state.loading|=4,l.instance=A,wn(A),A;v=PA(d),(S=la.get(S))&&yg(v,S),A=(s.ownerDocument||s).createElement("link"),wn(A);var T=A;return T._p=new Promise(function(x,G){T.onload=x,T.onerror=G}),Mn(A,"link",v),l.state.loading|=4,Dd(A,d.precedence,s),l.instance=A;case"script":return A=Du(d.src),(S=s.querySelector(mc(A)))?(l.instance=S,wn(S),S):(v=d,(S=la.get(A))&&(v=N({},d),bg(v,S)),s=s.ownerDocument||s,S=s.createElement("script"),wn(S),Mn(S,"link",v),s.head.appendChild(S),l.instance=S);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(v=l.instance,l.state.loading|=4,Dd(v,d.precedence,s));return l.instance}function Dd(s,l,d){for(var v=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=v.length?v[v.length-1]:null,A=S,T=0;T<v.length;T++){var x=v[T];if(x.dataset.precedence===l)A=x;else if(A!==S)break}A?A.parentNode.insertBefore(s,A.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(s,l.firstChild))}function yg(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function bg(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Pd=null;function LA(s,l,d){if(Pd===null){var v=new Map,S=Pd=new Map;S.set(d,v)}else S=Pd,v=S.get(d),v||(v=new Map,S.set(d,v));if(v.has(s))return v;for(v.set(s,null),d=d.getElementsByTagName(s),S=0;S<d.length;S++){var A=d[S];if(!(A[Tl]||A[Wn]||s==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var T=A.getAttribute(l)||"";T=s+T;var x=v.get(T);x?x.push(A):v.set(T,[A])}}return v}function BA(s,l,d){s=s.ownerDocument||s,s.head.insertBefore(d,l==="title"?s.querySelector("head > title"):null)}function FM(s,l,d){if(d===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function UA(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var vc=null;function VM(){}function GM(s,l,d){if(vc===null)throw Error(r(475));var v=vc;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var S=xu(d.href),A=s.querySelector(pc(S));if(A){s=A._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(v.count++,v=Md.bind(v),s.then(v,v)),l.state.loading|=4,l.instance=A,wn(A);return}A=s.ownerDocument||s,d=PA(d),(S=la.get(S))&&yg(d,S),A=A.createElement("link"),wn(A);var T=A;T._p=new Promise(function(x,G){T.onload=x,T.onerror=G}),Mn(A,"link",d),l.instance=A}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(v.count++,l=Md.bind(v),s.addEventListener("load",l),s.addEventListener("error",l))}}function HM(){if(vc===null)throw Error(r(475));var s=vc;return s.stylesheets&&s.count===0&&Sg(s,s.stylesheets),0<s.count?function(l){var d=setTimeout(function(){if(s.stylesheets&&Sg(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(d)}}:null}function Md(){if(this.count--,this.count===0){if(this.stylesheets)Sg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ld=null;function Sg(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ld=new Map,l.forEach(zM,s),Ld=null,Md.call(s))}function zM(s,l){if(!(l.state.loading&4)){var d=Ld.get(s);if(d)var v=d.get(null);else{d=new Map,Ld.set(s,d);for(var S=s.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<S.length;A++){var T=S[A];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(d.set(T.dataset.precedence,T),v=T)}v&&d.set(null,v)}S=l.instance,T=S.getAttribute("data-precedence"),A=d.get(T)||v,A===v&&d.set(null,S),d.set(T,S),this.count++,v=Md.bind(this),S.addEventListener("load",v),S.addEventListener("error",v),A?A.parentNode.insertBefore(S,A.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(S,s.firstChild)),l.state.loading|=4}}var gc={$$typeof:g,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function WM(s,l,d,v,S,A,T,x){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_v(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_v(0),this.hiddenUpdates=_v(null),this.identifierPrefix=v,this.onUncaughtError=S,this.onCaughtError=A,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function FA(s,l,d,v,S,A,T,x,G,q,fe,ve){return s=new WM(s,l,d,T,x,G,q,ve),l=1,A===!0&&(l|=24),A=sa(3,null,null,l),s.current=A,A.stateNode=s,l=Qv(),l.refCount++,s.pooledCache=l,l.refCount++,A.memoizedState={element:v,isDehydrated:d,cache:l},x0(A),s}function VA(s){return s?(s=fu,s):fu}function GA(s,l,d,v,S,A){S=VA(S),v.context===null?v.context=S:v.pendingContext=S,v=fo(l),v.payload={element:d},A=A===void 0?null:A,A!==null&&(v.callback=A),d=ho(s,v,l),d!==null&&(or(d,s,l),ec(d,s,l))}function HA(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<l?d:l}}function Eg(s,l){HA(s,l),(s=s.alternate)&&HA(s,l)}function zA(s){if(s.tag===13){var l=ao(s,67108864);l!==null&&or(l,s,67108864),Eg(s,67108864)}}var Bd=!0;function KM(s,l,d,v){var S=k.T;k.T=null;var A=he.p;try{he.p=2,_g(s,l,d,v)}finally{he.p=A,k.T=S}}function qM(s,l,d,v){var S=k.T;k.T=null;var A=he.p;try{he.p=8,_g(s,l,d,v)}finally{he.p=A,k.T=S}}function _g(s,l,d,v){if(Bd){var S=Ag(v);if(S===null)cg(s,l,v,Ud,d),KA(s,v);else if($M(S,s,l,d,v))v.stopPropagation();else if(KA(s,v),l&4&&-1<YM.indexOf(s)){for(;S!==null;){var A=eu(S);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var T=Xo(A.pendingLanes);if(T!==0){var x=A;for(x.pendingLanes|=2,x.entangledLanes|=2;T;){var G=1<<31-Tr(T);x.entanglements[1]|=G,T&=~G}Fa(A),(Bt&6)===0&&(Ed=tn()+500,fc(0))}}break;case 13:x=ao(A,2),x!==null&&or(x,A,2),wd(),Eg(A,2)}if(A=Ag(v),A===null&&cg(s,l,v,Ud,d),A===S)break;S=A}S!==null&&v.stopPropagation()}else cg(s,l,v,null,d)}}function Ag(s){return s=Tv(s),wg(s)}var Ud=null;function wg(s){if(Ud=null,s=Zo(s),s!==null){var l=$(s);if(l===null)s=null;else{var d=l.tag;if(d===13){if(s=oe(l),s!==null)return s;s=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Ud=s,null}function WA(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hr()){case pi:return 2;case Zr:return 8;case lt:case nn:return 32;case An:return 268435456;default:return 32}default:return 32}}var Ig=!1,So=null,Eo=null,_o=null,yc=new Map,bc=new Map,Ao=[],YM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function KA(s,l){switch(s){case"focusin":case"focusout":So=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":_o=null;break;case"pointerover":case"pointerout":yc.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(l.pointerId)}}function Sc(s,l,d,v,S,A){return s===null||s.nativeEvent!==A?(s={blockedOn:l,domEventName:d,eventSystemFlags:v,nativeEvent:A,targetContainers:[S]},l!==null&&(l=eu(l),l!==null&&zA(l)),s):(s.eventSystemFlags|=v,l=s.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),s)}function $M(s,l,d,v,S){switch(l){case"focusin":return So=Sc(So,s,l,d,v,S),!0;case"dragenter":return Eo=Sc(Eo,s,l,d,v,S),!0;case"mouseover":return _o=Sc(_o,s,l,d,v,S),!0;case"pointerover":var A=S.pointerId;return yc.set(A,Sc(yc.get(A)||null,s,l,d,v,S)),!0;case"gotpointercapture":return A=S.pointerId,bc.set(A,Sc(bc.get(A)||null,s,l,d,v,S)),!0}return!1}function qA(s){var l=Zo(s.target);if(l!==null){var d=$(l);if(d!==null){if(l=d.tag,l===13){if(l=oe(d),l!==null){s.blockedOn=l,H4(s.priority,function(){if(d.tag===13){var v=Pr(),S=ao(d,v);S!==null&&or(S,d,v),Eg(d,v)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Fd(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var d=Ag(s.nativeEvent);if(d===null){d=s.nativeEvent;var v=new d.constructor(d.type,d);Nv=v,d.target.dispatchEvent(v),Nv=null}else return l=eu(d),l!==null&&zA(l),s.blockedOn=d,!1;l.shift()}return!0}function YA(s,l,d){Fd(s)&&d.delete(l)}function jM(){Ig=!1,So!==null&&Fd(So)&&(So=null),Eo!==null&&Fd(Eo)&&(Eo=null),_o!==null&&Fd(_o)&&(_o=null),yc.forEach(YA),bc.forEach(YA)}function Vd(s,l){s.blockedOn===l&&(s.blockedOn=null,Ig||(Ig=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jM)))}var Gd=null;function $A(s){Gd!==s&&(Gd=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Gd===s&&(Gd=null);for(var l=0;l<s.length;l+=3){var d=s[l],v=s[l+1],S=s[l+2];if(typeof v!="function"){if(wg(v||d)===null)continue;break}var A=eu(d);A!==null&&(s.splice(l,3),l-=3,p0(A,{pending:!0,data:S,method:d.method,action:v},v,S))}}))}function Ec(s){function l(G){return Vd(G,s)}So!==null&&Vd(So,s),Eo!==null&&Vd(Eo,s),_o!==null&&Vd(_o,s),yc.forEach(l),bc.forEach(l);for(var d=0;d<Ao.length;d++){var v=Ao[d];v.blockedOn===s&&(v.blockedOn=null)}for(;0<Ao.length&&(d=Ao[0],d.blockedOn===null);)qA(d),d.blockedOn===null&&Ao.shift();if(d=(s.ownerDocument||s).$$reactFormReplay,d!=null)for(v=0;v<d.length;v+=3){var S=d[v],A=d[v+1],T=S[pr]||null;if(typeof A=="function")T||$A(d);else if(T){var x=null;if(A&&A.hasAttribute("formAction")){if(S=A,T=A[pr]||null)x=T.formAction;else if(wg(S)!==null)continue}else x=T.action;typeof x=="function"?d[v+1]=x:(d.splice(v,3),v-=3),$A(d)}}}function Rg(s){this._internalRoot=s}Hd.prototype.render=Rg.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,v=Pr();GA(d,v,s,l,null,null)},Hd.prototype.unmount=Rg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;s.tag===0&&Nu(),GA(s.current,2,null,s,null,null),wd(),l[Js]=null}};function Hd(s){this._internalRoot=s}Hd.prototype.unstable_scheduleHydration=function(s){if(s){var l=_S();s={blockedOn:null,target:s,priority:l};for(var d=0;d<Ao.length&&l!==0&&l<Ao[d].priority;d++);Ao.splice(d,0,s),d===0&&qA(s)}};var jA=n.version;if(jA!=="19.0.0")throw Error(r(527,jA,"19.0.0"));he.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=Y(l),s=s!==null?Q(s):null,s=s===null?null:s.stateNode,s};var XM={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:k,findFiberByHostInstance:Zo,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{cn=zd.inject(XM),xn=zd}catch{}}return Ac.createRoot=function(s,l){if(!a(s))throw Error(r(299));var d=!1,v="",S=d_,A=h_,T=p_,x=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(S=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(x=l.unstable_transitionCallbacks)),l=FA(s,1,!1,null,null,d,v,S,A,T,x,null),s[Js]=l.current,lg(s.nodeType===8?s.parentNode:s),new Rg(l)},Ac.hydrateRoot=function(s,l,d){if(!a(s))throw Error(r(299));var v=!1,S="",A=d_,T=h_,x=p_,G=null,q=null;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onUncaughtError!==void 0&&(A=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(x=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(G=d.unstable_transitionCallbacks),d.formState!==void 0&&(q=d.formState)),l=FA(s,1,!0,l,d??null,v,S,A,T,x,G,q),l.context=VA(null),d=l.current,v=Pr(),S=fo(v),S.callback=null,ho(d,S,v),l.current.lanes=v,Nl(l,v),Fa(l),s[Js]=l.current,lg(s),new Hd(l)},Ac.version="19.0.0",Ac}var ow;function pL(){if(ow)return Tg.exports;ow=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Tg.exports=hL(),Tg.exports}var mL=pL(),wc={},sw;function vL(){if(sw)return wc;sw=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.parse=o,wc.serialize=f;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,i=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function o(m,g){const y=new i,b=m.length;if(b<2)return y;const E=(g==null?void 0:g.decode)||h;let _=0;do{const w=m.indexOf("=",_);if(w===-1)break;const I=m.indexOf(";",_),R=I===-1?b:I;if(w>R){_=m.lastIndexOf(";",w-1)+1;continue}const C=u(m,_,w),O=c(m,w,C),D=m.slice(C,O);if(y[D]===void 0){let P=u(m,w+1,R),k=c(m,R,P);const N=E(m.slice(P,k));y[D]=N}_=R+1}while(_<b);return y}function u(m,g,y){do{const b=m.charCodeAt(g);if(b!==32&&b!==9)return g}while(++g<y);return y}function c(m,g,y){for(;g>y;){const b=m.charCodeAt(--g);if(b!==32&&b!==9)return g+1}return y}function f(m,g,y){const b=(y==null?void 0:y.encode)||encodeURIComponent;if(!e.test(m))throw new TypeError(`argument name is invalid: ${m}`);const E=b(g);if(!n.test(E))throw new TypeError(`argument val is invalid: ${g}`);let _=m+"="+E;if(!y)return _;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);_+="; Max-Age="+y.maxAge}if(y.domain){if(!t.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);_+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);_+="; Path="+y.path}if(y.expires){if(!p(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);_+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(_+="; HttpOnly"),y.secure&&(_+="; Secure"),y.partitioned&&(_+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return _}function h(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function p(m){return a.call(m)==="[object Date]"}return wc}vL();var uw="popstate";function gL(e={}){function n(r,a){let{pathname:i,search:o,hash:u}=r.location;return B1("",{pathname:i,search:o,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:jc(a)}return bL(n,t,null,e)}function Vt(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function oi(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function yL(){return Math.random().toString(36).substring(2,10)}function lw(e,n){return{usr:e.state,key:e.key,idx:n}}function B1(e,n,t=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof n=="string"?yl(n):n,state:t,key:n&&n.key||r||yL()}}function jc({pathname:e="/",search:n="",hash:t=""}){return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),t&&t!=="#"&&(e+=t.charAt(0)==="#"?t:"#"+t),e}function yl(e){let n={};if(e){let t=e.indexOf("#");t>=0&&(n.hash=e.substring(t),e=e.substring(0,t));let r=e.indexOf("?");r>=0&&(n.search=e.substring(r),e=e.substring(0,r)),e&&(n.pathname=e)}return n}function bL(e,n,t,r={}){let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,u="POP",c=null,f=h();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function h(){return(o.state||{idx:null}).idx}function p(){u="POP";let E=h(),_=E==null?null:E-f;f=E,c&&c({action:u,location:b.location,delta:_})}function m(E,_){u="PUSH";let w=B1(b.location,E,_);f=h()+1;let I=lw(w,f),R=b.createHref(w);try{o.pushState(I,"",R)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(R)}i&&c&&c({action:u,location:b.location,delta:1})}function g(E,_){u="REPLACE";let w=B1(b.location,E,_);f=h();let I=lw(w,f),R=b.createHref(w);o.replaceState(I,"",R),i&&c&&c({action:u,location:b.location,delta:0})}function y(E){return SL(E)}let b={get action(){return u},get location(){return e(a,o)},listen(E){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(uw,p),c=E,()=>{a.removeEventListener(uw,p),c=null}},createHref(E){return n(a,E)},createURL:y,encodeLocation(E){let _=y(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:g,go(E){return o.go(E)}};return b}function SL(e,n=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Vt(t,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:jc(e);return r=r.replace(/ $/,"%20"),!n&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function wT(e,n,t="/"){return EL(e,n,t,!1)}function EL(e,n,t,r){let a=typeof n=="string"?yl(n):n,i=Vi(a.pathname||"/",t);if(i==null)return null;let o=IT(e);_L(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let f=DL(i);u=kL(o[c],f,r)}return u}function IT(e,n=[],t=[],r=""){let a=(i,o,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Vt(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let f=Fi([r,c.relativePath]),h=t.concat(c);i.children&&i.children.length>0&&(Vt(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),IT(i.children,n,h,f)),!(i.path==null&&!i.index)&&n.push({path:f,score:TL(f,i.index),routesMeta:h})};return e.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))a(i,o);else for(let c of RT(i.path))a(i,o,c)}),n}function RT(e){let n=e.split("/");if(n.length===0)return[];let[t,...r]=n,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=RT(r.join("/")),u=[];return u.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&u.push(...o),u.map(c=>e.startsWith("/")&&c===""?"/":c)}function _L(e){e.sort((n,t)=>n.score!==t.score?t.score-n.score:OL(n.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var AL=/^:[\w-]+$/,wL=3,IL=2,RL=1,CL=10,NL=-2,cw=e=>e==="*";function TL(e,n){let t=e.split("/"),r=t.length;return t.some(cw)&&(r+=NL),n&&(r+=IL),t.filter(a=>!cw(a)).reduce((a,i)=>a+(AL.test(i)?wL:i===""?RL:CL),r)}function OL(e,n){return e.length===n.length&&e.slice(0,-1).every((r,a)=>r===n[a])?e[e.length-1]-n[n.length-1]:0}function kL(e,n,t=!1){let{routesMeta:r}=e,a={},i="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,h=i==="/"?n:n.slice(i.length)||"/",p=jp({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),m=c.route;if(!p&&f&&t&&!r[r.length-1].route.index&&(p=jp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Fi([i,p.pathname]),pathnameBase:BL(Fi([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Fi([i,p.pathnameBase]))}return o}function jp(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,r]=xL(e.path,e.caseSensitive,e.end),a=n.match(t);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:p},m)=>{if(h==="*"){let y=u[m]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=u[m];return p&&!g?f[h]=void 0:f[h]=(g||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:o,pattern:e}}function xL(e,n=!1,t=!0){oi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),r]}function DL(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return oi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),e}}function Vi(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let t=n.endsWith("/")?n.length-1:n.length,r=e.charAt(t);return r&&r!=="/"?null:e.slice(t)||"/"}function PL(e,n="/"){let{pathname:t,search:r="",hash:a=""}=typeof e=="string"?yl(e):e;return{pathname:t?t.startsWith("/")?t:ML(t,n):n,search:UL(r),hash:FL(a)}}function ML(e,n){let t=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Dg(e,n,t,r){return`Cannot include a '${e}' character in a manually specified \`to.${n}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LL(e){return e.filter((n,t)=>t===0||n.route.path&&n.route.path.length>0)}function CT(e){let n=LL(e);return n.map((t,r)=>r===n.length-1?t.pathname:t.pathnameBase)}function NT(e,n,t,r=!1){let a;typeof e=="string"?a=yl(e):(a={...e},Vt(!a.pathname||!a.pathname.includes("?"),Dg("?","pathname","search",a)),Vt(!a.pathname||!a.pathname.includes("#"),Dg("#","pathname","hash",a)),Vt(!a.search||!a.search.includes("#"),Dg("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,u;if(o==null)u=t;else{let p=n.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;a.pathname=m.join("/")}u=p>=0?n[p]:"/"}let c=PL(a,u),f=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}var Fi=e=>e.join("/").replace(/\/\/+/g,"/"),BL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),UL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,FL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function VL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var TT=["POST","PUT","PATCH","DELETE"];new Set(TT);var GL=["GET",...TT];new Set(GL);var bl=J.createContext(null);bl.displayName="DataRouter";var xm=J.createContext(null);xm.displayName="DataRouterState";var OT=J.createContext({isTransitioning:!1});OT.displayName="ViewTransition";var HL=J.createContext(new Map);HL.displayName="Fetchers";var zL=J.createContext(null);zL.displayName="Await";var ui=J.createContext(null);ui.displayName="Navigation";var hf=J.createContext(null);hf.displayName="Location";var qi=J.createContext({outlet:null,matches:[],isDataRoute:!1});qi.displayName="Route";var Qy=J.createContext(null);Qy.displayName="RouteError";function WL(e,{relative:n}={}){Vt(pf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=J.useContext(ui),{hash:a,pathname:i,search:o}=mf(e,{relative:n}),u=i;return t!=="/"&&(u=i==="/"?t:Fi([t,i])),r.createHref({pathname:u,search:o,hash:a})}function pf(){return J.useContext(hf)!=null}function Ks(){return Vt(pf(),"useLocation() may be used only in the context of a <Router> component."),J.useContext(hf).location}var kT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xT(e){J.useContext(ui).static||J.useLayoutEffect(e)}function KL(){let{isDataRoute:e}=J.useContext(qi);return e?aB():qL()}function qL(){Vt(pf(),"useNavigate() may be used only in the context of a <Router> component.");let e=J.useContext(bl),{basename:n,navigator:t}=J.useContext(ui),{matches:r}=J.useContext(qi),{pathname:a}=Ks(),i=JSON.stringify(CT(r)),o=J.useRef(!1);return xT(()=>{o.current=!0}),J.useCallback((c,f={})=>{if(oi(o.current,kT),!o.current)return;if(typeof c=="number"){t.go(c);return}let h=NT(c,JSON.parse(i),a,f.relative==="path");e==null&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Fi([n,h.pathname])),(f.replace?t.replace:t.push)(h,f.state,f)},[n,t,i,a,e])}J.createContext(null);function mf(e,{relative:n}={}){let{matches:t}=J.useContext(qi),{pathname:r}=Ks(),a=JSON.stringify(CT(t));return J.useMemo(()=>NT(e,JSON.parse(a),r,n==="path"),[e,a,r,n])}function YL(e,n){return DT(e,n)}function DT(e,n,t,r){var _;Vt(pf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=J.useContext(ui),{matches:i}=J.useContext(qi),o=i[i.length-1],u=o?o.params:{},c=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let w=h&&h.path||"";PT(c,!h||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=Ks(),m;if(n){let w=typeof n=="string"?yl(n):n;Vt(f==="/"||((_=w.pathname)==null?void 0:_.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${w.pathname}" was given in the \`location\` prop.`),m=w}else m=p;let g=m.pathname||"/",y=g;if(f!=="/"){let w=f.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=wT(e,{pathname:y});oi(h||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),oi(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=QL(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:Fi([f,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?f:Fi([f,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,r);return n&&E?J.createElement(hf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},E):E}function $L(){let e=rB(),n=VL(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=J.createElement(J.Fragment,null,J.createElement("p",null," Hey developer "),J.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",J.createElement("code",{style:i},"ErrorBoundary")," or"," ",J.createElement("code",{style:i},"errorElement")," prop on your route.")),J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},n),t?J.createElement("pre",{style:a},t):null,o)}var jL=J.createElement($L,null),XL=class extends J.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?J.createElement(qi.Provider,{value:this.props.routeContext},J.createElement(Qy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZL({routeContext:e,match:n,children:t}){let r=J.useContext(bl);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),J.createElement(qi.Provider,{value:e},t)}function QL(e,n=[],t=null,r=null){if(e==null){if(!t)return null;if(t.errors)e=t.matches;else if(n.length===0&&!t.initialized&&t.matches.length>0)e=t.matches;else return null}let a=e,i=t==null?void 0:t.errors;if(i!=null){let c=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);Vt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,u=-1;if(t)for(let c=0;c<a.length;c++){let f=a[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:h,errors:p}=t,m=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||m){o=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,f,h)=>{let p,m=!1,g=null,y=null;t&&(p=i&&f.route.id?i[f.route.id]:void 0,g=f.route.errorElement||jL,o&&(u<0&&h===0?(PT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):u===h&&(m=!0,y=f.route.hydrateFallbackElement||null)));let b=n.concat(a.slice(0,h+1)),E=()=>{let _;return p?_=g:m?_=y:f.route.Component?_=J.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,J.createElement(ZL,{match:f,routeContext:{outlet:c,matches:b,isDataRoute:t!=null},children:_})};return t&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?J.createElement(XL,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:E(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):E()},null)}function Jy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JL(e){let n=J.useContext(bl);return Vt(n,Jy(e)),n}function eB(e){let n=J.useContext(xm);return Vt(n,Jy(e)),n}function tB(e){let n=J.useContext(qi);return Vt(n,Jy(e)),n}function e2(e){let n=tB(e),t=n.matches[n.matches.length-1];return Vt(t.route.id,`${e} can only be used on routes that contain a unique "id"`),t.route.id}function nB(){return e2("useRouteId")}function rB(){var r;let e=J.useContext(Qy),n=eB("useRouteError"),t=e2("useRouteError");return e!==void 0?e:(r=n.errors)==null?void 0:r[t]}function aB(){let{router:e}=JL("useNavigate"),n=e2("useNavigate"),t=J.useRef(!1);return xT(()=>{t.current=!0}),J.useCallback(async(a,i={})=>{oi(t.current,kT),t.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:n,...i}))},[e,n])}var fw={};function PT(e,n,t){!n&&!fw[e]&&(fw[e]=!0,oi(!1,t))}J.memo(iB);function iB({routes:e,future:n,state:t}){return DT(e,void 0,t,n)}function MT(e){Vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oB({basename:e="/",children:n=null,location:t,navigationType:r="POP",navigator:a,static:i=!1}){Vt(!pf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),u=J.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof t=="string"&&(t=yl(t));let{pathname:c="/",search:f="",hash:h="",state:p=null,key:m="default"}=t,g=J.useMemo(()=>{let y=Vi(c,o);return y==null?null:{location:{pathname:y,search:f,hash:h,state:p,key:m},navigationType:r}},[o,c,f,h,p,m,r]);return oi(g!=null,`<Router basename="${o}"> is not able to match the URL "${c}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:J.createElement(ui.Provider,{value:u},J.createElement(hf.Provider,{children:n,value:g}))}function sB({children:e,location:n}){return YL(U1(e),n)}function U1(e,n=[]){let t=[];return J.Children.forEach(e,(r,a)=>{if(!J.isValidElement(r))return;let i=[...n,a];if(r.type===J.Fragment){t.push.apply(t,U1(r.props.children,i));return}Vt(r.type===MT,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=U1(r.props.children,i)),t.push(o)}),t}var hh="get",ph="application/x-www-form-urlencoded";function Dm(e){return e!=null&&typeof e.tagName=="string"}function uB(e){return Dm(e)&&e.tagName.toLowerCase()==="button"}function lB(e){return Dm(e)&&e.tagName.toLowerCase()==="form"}function cB(e){return Dm(e)&&e.tagName.toLowerCase()==="input"}function fB(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function dB(e,n){return e.button===0&&(!n||n==="_self")&&!fB(e)}var Wd=null;function hB(){if(Wd===null)try{new FormData(document.createElement("form"),0),Wd=!1}catch{Wd=!0}return Wd}var pB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pg(e){return e!=null&&!pB.has(e)?(oi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ph}"`),null):e}function mB(e,n){let t,r,a,i,o;if(lB(e)){let u=e.getAttribute("action");r=u?Vi(u,n):null,t=e.getAttribute("method")||hh,a=Pg(e.getAttribute("enctype"))||ph,i=new FormData(e)}else if(uB(e)||cB(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||u.getAttribute("action");if(r=c?Vi(c,n):null,t=e.getAttribute("formmethod")||u.getAttribute("method")||hh,a=Pg(e.getAttribute("formenctype"))||Pg(u.getAttribute("enctype"))||ph,i=new FormData(u,e),!hB()){let{name:f,type:h,value:p}=e;if(h==="image"){let m=f?`${f}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else f&&i.append(f,p)}}else{if(Dm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hh,r=null,a=ph,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:i,body:o}}function t2(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}async function vB(e,n){if(e.id in n)return n[e.id];try{let t=await import(e.module);return n[e.id]=t,t}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gB(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function yB(e,n,t){let r=await Promise.all(e.map(async a=>{let i=n.routes[a.route.id];if(i){let o=await vB(i,t);return o.links?o.links():[]}return[]}));return _B(r.flat(1).filter(gB).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function dw(e,n,t,r,a,i){let o=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,u=(c,f)=>{var h;return t[f].pathname!==c.pathname||((h=t[f].route.path)==null?void 0:h.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return i==="assets"?n.filter((c,f)=>o(c,f)||u(c,f)):i==="data"?n.filter((c,f)=>{var p;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,f)||u(c,f))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function bB(e,n,{includeHydrateFallback:t}={}){return SB(e.map(r=>{let a=n.routes[r.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function SB(e){return[...new Set(e)]}function EB(e){let n={},t=Object.keys(e).sort();for(let r of t)n[r]=e[r];return n}function _B(e,n){let t=new Set;return new Set(n),e.reduce((r,a)=>{let i=JSON.stringify(EB(a));return t.has(i)||(t.add(i),r.push({key:i,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var AB=new Set([100,101,204,205]);function wB(e,n){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":n&&Vi(t.pathname,n)==="/"?t.pathname=`${n.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function LT(){let e=J.useContext(bl);return t2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function IB(){let e=J.useContext(xm);return t2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var n2=J.createContext(void 0);n2.displayName="FrameworkContext";function BT(){let e=J.useContext(n2);return t2(e,"You must render this element inside a <HydratedRouter> element"),e}function RB(e,n){let t=J.useContext(n2),[r,a]=J.useState(!1),[i,o]=J.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:f,onMouseLeave:h,onTouchStart:p}=n,m=J.useRef(null);J.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let b=_=>{_.forEach(w=>{o(w.isIntersecting)})},E=new IntersectionObserver(b,{threshold:.5});return m.current&&E.observe(m.current),()=>{E.disconnect()}}},[e]),J.useEffect(()=>{if(r){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[r]);let g=()=>{a(!0)},y=()=>{a(!1),o(!1)};return t?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Ic(u,g),onBlur:Ic(c,y),onMouseEnter:Ic(f,g),onMouseLeave:Ic(h,y),onTouchStart:Ic(p,g)}]:[!1,m,{}]}function Ic(e,n){return t=>{e&&e(t),t.defaultPrevented||n(t)}}function CB({page:e,...n}){let{router:t}=LT(),r=J.useMemo(()=>wT(t.routes,e,t.basename),[t.routes,e,t.basename]);return r?J.createElement(TB,{page:e,matches:r,...n}):null}function NB(e){let{manifest:n,routeModules:t}=BT(),[r,a]=J.useState([]);return J.useEffect(()=>{let i=!1;return yB(e,n,t).then(o=>{i||a(o)}),()=>{i=!0}},[e,n,t]),r}function TB({page:e,matches:n,...t}){let r=Ks(),{manifest:a,routeModules:i}=BT(),{basename:o}=LT(),{loaderData:u,matches:c}=IB(),f=J.useMemo(()=>dw(e,n,c,a,r,"data"),[e,n,c,a,r]),h=J.useMemo(()=>dw(e,n,c,a,r,"assets"),[e,n,c,a,r]),p=J.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let y=new Set,b=!1;if(n.forEach(_=>{var I;let w=a.routes[_.route.id];!w||!w.hasLoader||(!f.some(R=>R.route.id===_.route.id)&&_.route.id in u&&((I=i[_.route.id])!=null&&I.shouldRevalidate)||w.hasClientLoader?b=!0:y.add(_.route.id))}),y.size===0)return[];let E=wB(e,o);return b&&y.size>0&&E.searchParams.set("_routes",n.filter(_=>y.has(_.route.id)).map(_=>_.route.id).join(",")),[E.pathname+E.search]},[o,u,r,a,f,n,e,i]),m=J.useMemo(()=>bB(h,a),[h,a]),g=NB(h);return J.createElement(J.Fragment,null,p.map(y=>J.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),m.map(y=>J.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),g.map(({key:y,link:b})=>J.createElement("link",{key:y,...b})))}function OB(...e){return n=>{e.forEach(t=>{typeof t=="function"?t(n):t!=null&&(t.current=n)})}}var UT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{UT&&(window.__reactRouterVersion="7.6.2")}catch{}function kB({basename:e,children:n,window:t}){let r=J.useRef();r.current==null&&(r.current=gL({window:t,v5Compat:!0}));let a=r.current,[i,o]=J.useState({action:a.action,location:a.location}),u=J.useCallback(c=>{J.startTransition(()=>o(c))},[o]);return J.useLayoutEffect(()=>a.listen(u),[a,u]),J.createElement(oB,{basename:e,children:n,location:i.location,navigationType:i.action,navigator:a})}var FT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VT=J.forwardRef(function({onClick:n,discover:t="render",prefetch:r="none",relative:a,reloadDocument:i,replace:o,state:u,target:c,to:f,preventScrollReset:h,viewTransition:p,...m},g){let{basename:y}=J.useContext(ui),b=typeof f=="string"&&FT.test(f),E,_=!1;if(typeof f=="string"&&b&&(E=f,UT))try{let k=new URL(window.location.href),N=f.startsWith("//")?new URL(k.protocol+f):new URL(f),U=Vi(N.pathname,y);N.origin===k.origin&&U!=null?f=U+N.search+N.hash:_=!0}catch{oi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=WL(f,{relative:a}),[I,R,C]=RB(r,m),O=MB(f,{replace:o,state:u,target:c,preventScrollReset:h,relative:a,viewTransition:p});function D(k){n&&n(k),k.defaultPrevented||O(k)}let P=J.createElement("a",{...m,...C,href:E||w,onClick:_||i?n:D,ref:OB(g,R),target:c,"data-discover":!b&&t==="render"?"true":void 0});return I&&!b?J.createElement(J.Fragment,null,P,J.createElement(CB,{page:w})):P});VT.displayName="Link";var xB=J.forwardRef(function({"aria-current":n="page",caseSensitive:t=!1,className:r="",end:a=!1,style:i,to:o,viewTransition:u,children:c,...f},h){let p=mf(o,{relative:f.relative}),m=Ks(),g=J.useContext(xm),{navigator:y,basename:b}=J.useContext(ui),E=g!=null&&VB(p)&&u===!0,_=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,w=m.pathname,I=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(w=w.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&b&&(I=Vi(I,b)||I);const R=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let C=w===_||!a&&w.startsWith(_)&&w.charAt(R)==="/",O=I!=null&&(I===_||!a&&I.startsWith(_)&&I.charAt(_.length)==="/"),D={isActive:C,isPending:O,isTransitioning:E},P=C?n:void 0,k;typeof r=="function"?k=r(D):k=[r,C?"active":null,O?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let N=typeof i=="function"?i(D):i;return J.createElement(VT,{...f,"aria-current":P,className:k,ref:h,style:N,to:o,viewTransition:u},typeof c=="function"?c(D):c)});xB.displayName="NavLink";var DB=J.forwardRef(({discover:e="render",fetcherKey:n,navigate:t,reloadDocument:r,replace:a,state:i,method:o=hh,action:u,onSubmit:c,relative:f,preventScrollReset:h,viewTransition:p,...m},g)=>{let y=UB(),b=FB(u,{relative:f}),E=o.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&FT.test(u),w=I=>{if(c&&c(I),I.defaultPrevented)return;I.preventDefault();let R=I.nativeEvent.submitter,C=(R==null?void 0:R.getAttribute("formmethod"))||o;y(R||I.currentTarget,{fetcherKey:n,method:C,navigate:t,replace:a,state:i,relative:f,preventScrollReset:h,viewTransition:p})};return J.createElement("form",{ref:g,method:E,action:b,onSubmit:r?c:w,...m,"data-discover":!_&&e==="render"?"true":void 0})});DB.displayName="Form";function PB(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GT(e){let n=J.useContext(bl);return Vt(n,PB(e)),n}function MB(e,{target:n,replace:t,state:r,preventScrollReset:a,relative:i,viewTransition:o}={}){let u=KL(),c=Ks(),f=mf(e,{relative:i});return J.useCallback(h=>{if(dB(h,n)){h.preventDefault();let p=t!==void 0?t:jc(c)===jc(f);u(e,{replace:p,state:r,preventScrollReset:a,relative:i,viewTransition:o})}},[c,u,f,t,r,n,e,a,i,o])}var LB=0,BB=()=>`__${String(++LB)}__`;function UB(){let{router:e}=GT("useSubmit"),{basename:n}=J.useContext(ui),t=nB();return J.useCallback(async(r,a={})=>{let{action:i,method:o,encType:u,formData:c,body:f}=mB(r,n);if(a.navigate===!1){let h=a.fetcherKey||BB();await e.fetch(h,t,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||o,formEncType:a.encType||u,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:f,formMethod:a.method||o,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,n,t])}function FB(e,{relative:n}={}){let{basename:t}=J.useContext(ui),r=J.useContext(qi);Vt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),i={...mf(e||".",{relative:n})},o=Ks();if(e==null){i.search=o.search;let u=new URLSearchParams(i.search),c=u.getAll("index");if(c.some(h=>h==="")){u.delete("index"),c.filter(p=>p).forEach(p=>u.append("index",p));let h=u.toString();i.search=h?`?${h}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Fi([t,i.pathname])),jc(i)}function VB(e,n={}){let t=J.useContext(OT);Vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=GT("useViewTransitionState"),a=mf(e,{relative:n.relative});if(!t.isTransitioning)return!1;let i=Vi(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Vi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return jp(a.pathname,o)!=null||jp(a.pathname,i)!=null}[...AB];const Xc={black:"#000",white:"#fff"},Pu={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Mu={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Lu={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Bu={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Uu={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Rc={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},GB={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Us(e,...n){const t=new URL(`https://mui.com/production-error/?code=${e}`);return n.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${e}; visit ${t} for the full message.`}const Is="$$material";function HB(e){if(e.sheet)return e.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===e)return document.styleSheets[n]}function zB(e){var n=document.createElement("style");return n.setAttribute("data-emotion",e.key),e.nonce!==void 0&&n.setAttribute("nonce",e.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var WB=function(){function e(t){var r=this;this._insertTag=function(a){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(a,i),r.tags.push(a)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var n=e.prototype;return n.hydrate=function(r){r.forEach(this._insertTag)},n.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(zB(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var i=HB(a);try{i.insertRule(r,i.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},n.flush=function(){this.tags.forEach(function(r){var a;return(a=r.parentNode)==null?void 0:a.removeChild(r)}),this.tags=[],this.ctr=0},e}(),$n="-ms-",Xp="-moz-",ct="-webkit-",HT="comm",r2="rule",a2="decl",KB="@import",zT="@keyframes",qB="@layer",YB=Math.abs,Pm=String.fromCharCode,$B=Object.assign;function jB(e,n){return Vn(e,0)^45?(((n<<2^Vn(e,0))<<2^Vn(e,1))<<2^Vn(e,2))<<2^Vn(e,3):0}function WT(e){return e.trim()}function XB(e,n){return(e=n.exec(e))?e[0]:e}function ft(e,n,t){return e.replace(n,t)}function F1(e,n){return e.indexOf(n)}function Vn(e,n){return e.charCodeAt(n)|0}function Zc(e,n,t){return e.slice(n,t)}function Ka(e){return e.length}function i2(e){return e.length}function Kd(e,n){return n.push(e),e}function ZB(e,n){return e.map(n).join("")}var Mm=1,sl=1,KT=0,wr=0,sn=0,Sl="";function Lm(e,n,t,r,a,i,o){return{value:e,root:n,parent:t,type:r,props:a,children:i,line:Mm,column:sl,length:o,return:""}}function Cc(e,n){return $B(Lm("",null,null,"",null,null,0),e,{length:-e.length},n)}function QB(){return sn}function JB(){return sn=wr>0?Vn(Sl,--wr):0,sl--,sn===10&&(sl=1,Mm--),sn}function Wr(){return sn=wr<KT?Vn(Sl,wr++):0,sl++,sn===10&&(sl=1,Mm++),sn}function ti(){return Vn(Sl,wr)}function mh(){return wr}function vf(e,n){return Zc(Sl,e,n)}function Qc(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function qT(e){return Mm=sl=1,KT=Ka(Sl=e),wr=0,[]}function YT(e){return Sl="",e}function vh(e){return WT(vf(wr-1,V1(e===91?e+2:e===40?e+1:e)))}function eU(e){for(;(sn=ti())&&sn<33;)Wr();return Qc(e)>2||Qc(sn)>3?"":" "}function tU(e,n){for(;--n&&Wr()&&!(sn<48||sn>102||sn>57&&sn<65||sn>70&&sn<97););return vf(e,mh()+(n<6&&ti()==32&&Wr()==32))}function V1(e){for(;Wr();)switch(sn){case e:return wr;case 34:case 39:e!==34&&e!==39&&V1(sn);break;case 40:e===41&&V1(e);break;case 92:Wr();break}return wr}function nU(e,n){for(;Wr()&&e+sn!==57;)if(e+sn===84&&ti()===47)break;return"/*"+vf(n,wr-1)+"*"+Pm(e===47?e:Wr())}function rU(e){for(;!Qc(ti());)Wr();return vf(e,wr)}function aU(e){return YT(gh("",null,null,null,[""],e=qT(e),0,[0],e))}function gh(e,n,t,r,a,i,o,u,c){for(var f=0,h=0,p=o,m=0,g=0,y=0,b=1,E=1,_=1,w=0,I="",R=a,C=i,O=r,D=I;E;)switch(y=w,w=Wr()){case 40:if(y!=108&&Vn(D,p-1)==58){F1(D+=ft(vh(w),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:D+=vh(w);break;case 9:case 10:case 13:case 32:D+=eU(y);break;case 92:D+=tU(mh()-1,7);continue;case 47:switch(ti()){case 42:case 47:Kd(iU(nU(Wr(),mh()),n,t),c);break;default:D+="/"}break;case 123*b:u[f++]=Ka(D)*_;case 125*b:case 59:case 0:switch(w){case 0:case 125:E=0;case 59+h:_==-1&&(D=ft(D,/\f/g,"")),g>0&&Ka(D)-p&&Kd(g>32?pw(D+";",r,t,p-1):pw(ft(D," ","")+";",r,t,p-2),c);break;case 59:D+=";";default:if(Kd(O=hw(D,n,t,f,h,a,u,I,R=[],C=[],p),i),w===123)if(h===0)gh(D,n,O,O,R,i,p,u,C);else switch(m===99&&Vn(D,3)===110?100:m){case 100:case 108:case 109:case 115:gh(e,O,O,r&&Kd(hw(e,O,O,0,0,a,u,I,a,R=[],p),C),a,C,p,u,r?R:C);break;default:gh(D,O,O,O,[""],C,0,u,C)}}f=h=g=0,b=_=1,I=D="",p=o;break;case 58:p=1+Ka(D),g=y;default:if(b<1){if(w==123)--b;else if(w==125&&b++==0&&JB()==125)continue}switch(D+=Pm(w),w*b){case 38:_=h>0?1:(D+="\f",-1);break;case 44:u[f++]=(Ka(D)-1)*_,_=1;break;case 64:ti()===45&&(D+=vh(Wr())),m=ti(),h=p=Ka(I=D+=rU(mh())),w++;break;case 45:y===45&&Ka(D)==2&&(b=0)}}return i}function hw(e,n,t,r,a,i,o,u,c,f,h){for(var p=a-1,m=a===0?i:[""],g=i2(m),y=0,b=0,E=0;y<r;++y)for(var _=0,w=Zc(e,p+1,p=YB(b=o[y])),I=e;_<g;++_)(I=WT(b>0?m[_]+" "+w:ft(w,/&\f/g,m[_])))&&(c[E++]=I);return Lm(e,n,t,a===0?r2:u,c,f,h)}function iU(e,n,t){return Lm(e,n,t,HT,Pm(QB()),Zc(e,2,-2),0)}function pw(e,n,t,r){return Lm(e,n,t,a2,Zc(e,0,r),Zc(e,r+1,-1),r)}function Yu(e,n){for(var t="",r=i2(e),a=0;a<r;a++)t+=n(e[a],a,e,n)||"";return t}function oU(e,n,t,r){switch(e.type){case qB:if(e.children.length)break;case KB:case a2:return e.return=e.return||e.value;case HT:return"";case zT:return e.return=e.value+"{"+Yu(e.children,r)+"}";case r2:e.value=e.props.join(",")}return Ka(t=Yu(e.children,r))?e.return=e.value+"{"+t+"}":""}function sU(e){var n=i2(e);return function(t,r,a,i){for(var o="",u=0;u<n;u++)o+=e[u](t,r,a,i)||"";return o}}function uU(e){return function(n){n.root||(n=n.return)&&e(n)}}function lU(e){var n=Object.create(null);return function(t){return n[t]===void 0&&(n[t]=e(t)),n[t]}}var cU=function(n,t,r){for(var a=0,i=0;a=i,i=ti(),a===38&&i===12&&(t[r]=1),!Qc(i);)Wr();return vf(n,wr)},fU=function(n,t){var r=-1,a=44;do switch(Qc(a)){case 0:a===38&&ti()===12&&(t[r]=1),n[r]+=cU(wr-1,t,r);break;case 2:n[r]+=vh(a);break;case 4:if(a===44){n[++r]=ti()===58?"&\f":"",t[r]=n[r].length;break}default:n[r]+=Pm(a)}while(a=Wr());return n},dU=function(n,t){return YT(fU(qT(n),t))},mw=new WeakMap,hU=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var t=n.value,r=n.parent,a=n.column===r.column&&n.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(n.props.length===1&&t.charCodeAt(0)!==58&&!mw.get(r))&&!a){mw.set(n,!0);for(var i=[],o=dU(t,i),u=r.props,c=0,f=0;c<o.length;c++)for(var h=0;h<u.length;h++,f++)n.props[f]=i[c]?o[c].replace(/&\f/g,u[h]):u[h]+" "+o[c]}}},pU=function(n){if(n.type==="decl"){var t=n.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(n.return="",n.value="")}};function $T(e,n){switch(jB(e,n)){case 5103:return ct+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ct+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ct+e+Xp+e+$n+e+e;case 6828:case 4268:return ct+e+$n+e+e;case 6165:return ct+e+$n+"flex-"+e+e;case 5187:return ct+e+ft(e,/(\w+).+(:[^]+)/,ct+"box-$1$2"+$n+"flex-$1$2")+e;case 5443:return ct+e+$n+"flex-item-"+ft(e,/flex-|-self/,"")+e;case 4675:return ct+e+$n+"flex-line-pack"+ft(e,/align-content|flex-|-self/,"")+e;case 5548:return ct+e+$n+ft(e,"shrink","negative")+e;case 5292:return ct+e+$n+ft(e,"basis","preferred-size")+e;case 6060:return ct+"box-"+ft(e,"-grow","")+ct+e+$n+ft(e,"grow","positive")+e;case 4554:return ct+ft(e,/([^-])(transform)/g,"$1"+ct+"$2")+e;case 6187:return ft(ft(ft(e,/(zoom-|grab)/,ct+"$1"),/(image-set)/,ct+"$1"),e,"")+e;case 5495:case 3959:return ft(e,/(image-set\([^]*)/,ct+"$1$`$1");case 4968:return ft(ft(e,/(.+:)(flex-)?(.*)/,ct+"box-pack:$3"+$n+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ct+e+e;case 4095:case 3583:case 4068:case 2532:return ft(e,/(.+)-inline(.+)/,ct+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ka(e)-1-n>6)switch(Vn(e,n+1)){case 109:if(Vn(e,n+4)!==45)break;case 102:return ft(e,/(.+:)(.+)-([^]+)/,"$1"+ct+"$2-$3$1"+Xp+(Vn(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~F1(e,"stretch")?$T(ft(e,"stretch","fill-available"),n)+e:e}break;case 4949:if(Vn(e,n+1)!==115)break;case 6444:switch(Vn(e,Ka(e)-3-(~F1(e,"!important")&&10))){case 107:return ft(e,":",":"+ct)+e;case 101:return ft(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ct+(Vn(e,14)===45?"inline-":"")+"box$3$1"+ct+"$2$3$1"+$n+"$2box$3")+e}break;case 5936:switch(Vn(e,n+11)){case 114:return ct+e+$n+ft(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ct+e+$n+ft(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ct+e+$n+ft(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ct+e+$n+e+e}return e}var mU=function(n,t,r,a){if(n.length>-1&&!n.return)switch(n.type){case a2:n.return=$T(n.value,n.length);break;case zT:return Yu([Cc(n,{value:ft(n.value,"@","@"+ct)})],a);case r2:if(n.length)return ZB(n.props,function(i){switch(XB(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Yu([Cc(n,{props:[ft(i,/:(read-\w+)/,":"+Xp+"$1")]})],a);case"::placeholder":return Yu([Cc(n,{props:[ft(i,/:(plac\w+)/,":"+ct+"input-$1")]}),Cc(n,{props:[ft(i,/:(plac\w+)/,":"+Xp+"$1")]}),Cc(n,{props:[ft(i,/:(plac\w+)/,$n+"input-$1")]})],a)}return""})}},vU=[mU],gU=function(n){var t=n.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var E=b.getAttribute("data-emotion");E.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var a=n.stylisPlugins||vU,i={},o,u=[];o=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(b){for(var E=b.getAttribute("data-emotion").split(" "),_=1;_<E.length;_++)i[E[_]]=!0;u.push(b)});var c,f=[hU,pU];{var h,p=[oU,uU(function(b){h.insert(b)})],m=sU(f.concat(a,p)),g=function(E){return Yu(aU(E),m)};c=function(E,_,w,I){h=w,g(E?E+"{"+_.styles+"}":_.styles),I&&(y.inserted[_.name]=!0)}}var y={key:t,sheet:new WB({key:t,container:o,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:i,registered:{},insert:c};return y.sheet.hydrate(u),y},Mg={exports:{}},mt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw;function yU(){if(vw)return mt;vw=1;var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,t=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,h=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,g=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116,b=e?Symbol.for("react.block"):60121,E=e?Symbol.for("react.fundamental"):60117,_=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function I(C){if(typeof C=="object"&&C!==null){var O=C.$$typeof;switch(O){case n:switch(C=C.type,C){case c:case f:case r:case i:case a:case p:return C;default:switch(C=C&&C.$$typeof,C){case u:case h:case y:case g:case o:return C;default:return O}}case t:return O}}}function R(C){return I(C)===f}return mt.AsyncMode=c,mt.ConcurrentMode=f,mt.ContextConsumer=u,mt.ContextProvider=o,mt.Element=n,mt.ForwardRef=h,mt.Fragment=r,mt.Lazy=y,mt.Memo=g,mt.Portal=t,mt.Profiler=i,mt.StrictMode=a,mt.Suspense=p,mt.isAsyncMode=function(C){return R(C)||I(C)===c},mt.isConcurrentMode=R,mt.isContextConsumer=function(C){return I(C)===u},mt.isContextProvider=function(C){return I(C)===o},mt.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===n},mt.isForwardRef=function(C){return I(C)===h},mt.isFragment=function(C){return I(C)===r},mt.isLazy=function(C){return I(C)===y},mt.isMemo=function(C){return I(C)===g},mt.isPortal=function(C){return I(C)===t},mt.isProfiler=function(C){return I(C)===i},mt.isStrictMode=function(C){return I(C)===a},mt.isSuspense=function(C){return I(C)===p},mt.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===r||C===f||C===i||C===a||C===p||C===m||typeof C=="object"&&C!==null&&(C.$$typeof===y||C.$$typeof===g||C.$$typeof===o||C.$$typeof===u||C.$$typeof===h||C.$$typeof===E||C.$$typeof===_||C.$$typeof===w||C.$$typeof===b)},mt.typeOf=I,mt}var gw;function bU(){return gw||(gw=1,Mg.exports=yU()),Mg.exports}var Lg,yw;function SU(){if(yw)return Lg;yw=1;var e=bU(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=r,i[e.Memo]=a;function o(y){return e.isMemo(y)?a:i[y.$$typeof]||n}var u=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;function g(y,b,E){if(typeof b!="string"){if(m){var _=p(b);_&&_!==m&&g(y,_,E)}var w=c(b);f&&(w=w.concat(f(b)));for(var I=o(y),R=o(b),C=0;C<w.length;++C){var O=w[C];if(!t[O]&&!(E&&E[O])&&!(R&&R[O])&&!(I&&I[O])){var D=h(b,O);try{u(y,O,D)}catch{}}}}return y}return Lg=g,Lg}SU();var EU=!0;function _U(e,n,t){var r="";return t.split(" ").forEach(function(a){e[a]!==void 0?n.push(e[a]+";"):a&&(r+=a+" ")}),r}var jT=function(n,t,r){var a=n.key+"-"+t.name;(r===!1||EU===!1)&&n.registered[a]===void 0&&(n.registered[a]=t.styles)},XT=function(n,t,r){jT(n,t,r);var a=n.key+"-"+t.name;if(n.inserted[t.name]===void 0){var i=t;do n.insert(t===i?"."+a:"",i,n.sheet,!0),i=i.next;while(i!==void 0)}};function AU(e){for(var n=0,t,r=0,a=e.length;a>=4;++r,a-=4)t=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,n=(t&65535)*1540483477+((t>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(a){case 3:n^=(e.charCodeAt(r+2)&255)<<16;case 2:n^=(e.charCodeAt(r+1)&255)<<8;case 1:n^=e.charCodeAt(r)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var wU={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},IU=/[A-Z]|^ms/g,RU=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ZT=function(n){return n.charCodeAt(1)===45},bw=function(n){return n!=null&&typeof n!="boolean"},Bg=lU(function(e){return ZT(e)?e:e.replace(IU,"-$&").toLowerCase()}),Sw=function(n,t){switch(n){case"animation":case"animationName":if(typeof t=="string")return t.replace(RU,function(r,a,i){return qa={name:a,styles:i,next:qa},a})}return wU[n]!==1&&!ZT(n)&&typeof t=="number"&&t!==0?t+"px":t};function Jc(e,n,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var a=t;if(a.anim===1)return qa={name:a.name,styles:a.styles,next:qa},a.name;var i=t;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)qa={name:o.name,styles:o.styles,next:qa},o=o.next;var u=i.styles+";";return u}return CU(e,n,t)}case"function":{if(e!==void 0){var c=qa,f=t(e);return qa=c,Jc(e,n,f)}break}}var h=t;return h}function CU(e,n,t){var r="";if(Array.isArray(t))for(var a=0;a<t.length;a++)r+=Jc(e,n,t[a])+";";else for(var i in t){var o=t[i];if(typeof o!="object"){var u=o;bw(u)&&(r+=Bg(i)+":"+Sw(i,u)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&n==null)for(var c=0;c<o.length;c++)bw(o[c])&&(r+=Bg(i)+":"+Sw(i,o[c])+";");else{var f=Jc(e,n,o);switch(i){case"animation":case"animationName":{r+=Bg(i)+":"+f+";";break}default:r+=i+"{"+f+"}"}}}return r}var Ew=/label:\s*([^\s;{]+)\s*(;|$)/g,qa;function QT(e,n,t){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,a="";qa=void 0;var i=e[0];if(i==null||i.raw===void 0)r=!1,a+=Jc(t,n,i);else{var o=i;a+=o[0]}for(var u=1;u<e.length;u++)if(a+=Jc(t,n,e[u]),r){var c=i;a+=c[u]}Ew.lastIndex=0;for(var f="",h;(h=Ew.exec(a))!==null;)f+="-"+h[1];var p=AU(a)+f;return{name:p,styles:a,next:qa}}var NU=function(n){return n()},JT=ew.useInsertionEffect?ew.useInsertionEffect:!1,TU=JT||NU,_w=JT||J.useLayoutEffect,eO=J.createContext(typeof HTMLElement<"u"?gU({key:"css"}):null);eO.Provider;var tO=function(n){return J.forwardRef(function(t,r){var a=J.useContext(eO);return n(t,a,r)})},Bm=J.createContext({}),o2={}.hasOwnProperty,G1="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",OU=function(n,t){var r={};for(var a in t)o2.call(t,a)&&(r[a]=t[a]);return r[G1]=n,r},kU=function(n){var t=n.cache,r=n.serialized,a=n.isStringTag;return jT(t,r,a),TU(function(){return XT(t,r,a)}),null},xU=tO(function(e,n,t){var r=e.css;typeof r=="string"&&n.registered[r]!==void 0&&(r=n.registered[r]);var a=e[G1],i=[r],o="";typeof e.className=="string"?o=_U(n.registered,i,e.className):e.className!=null&&(o=e.className+" ");var u=QT(i,void 0,J.useContext(Bm));o+=n.key+"-"+u.name;var c={};for(var f in e)o2.call(e,f)&&f!=="css"&&f!==G1&&(c[f]=e[f]);return c.className=o,t&&(c.ref=t),J.createElement(J.Fragment,null,J.createElement(kU,{cache:n,serialized:u,isStringTag:typeof a=="string"}),J.createElement(a,c))}),DU=xU,Aw=function(n,t){var r=arguments;if(t==null||!o2.call(t,"css"))return J.createElement.apply(void 0,r);var a=r.length,i=new Array(a);i[0]=DU,i[1]=OU(n,t);for(var o=2;o<a;o++)i[o]=r[o];return J.createElement.apply(null,i)};(function(e){var n;n||(n=e.JSX||(e.JSX={}))})(Aw||(Aw={}));var PU=tO(function(e,n){var t=e.styles,r=QT([t],void 0,J.useContext(Bm)),a=J.useRef();return _w(function(){var i=n.key+"-global",o=new n.sheet.constructor({key:i,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),u=!1,c=document.querySelector('style[data-emotion="'+i+" "+r.name+'"]');return n.sheet.tags.length&&(o.before=n.sheet.tags[0]),c!==null&&(u=!0,c.setAttribute("data-emotion",i),o.hydrate([c])),a.current=[o,u],function(){o.flush()}},[n]),_w(function(){var i=a.current,o=i[0],u=i[1];if(u){i[1]=!1;return}if(r.next!==void 0&&XT(n,r.next,!0),o.tags.length){var c=o.tags[o.tags.length-1].nextElementSibling;o.before=c,o.flush()}n.insert("",r,o,!1)},[n,r.name]),null});function MU(e){return e==null||Object.keys(e).length===0}function nO(e){const{styles:n,defaultTheme:t={}}=e,r=typeof n=="function"?a=>n(MU(a)?t:a):n;return nt.jsx(PU,{styles:r})}var Ug={exports:{}},Et={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function LU(){if(ww)return Et;ww=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),g=Symbol.for("react.client.reference");function y(b){if(typeof b=="object"&&b!==null){var E=b.$$typeof;switch(E){case e:switch(b=b.type,b){case t:case a:case r:case c:case f:return b;default:switch(b=b&&b.$$typeof,b){case o:case u:case p:case h:return b;case i:return b;default:return E}}case n:return E}}}return Et.ContextConsumer=i,Et.ContextProvider=o,Et.Element=e,Et.ForwardRef=u,Et.Fragment=t,Et.Lazy=p,Et.Memo=h,Et.Portal=n,Et.Profiler=a,Et.StrictMode=r,Et.Suspense=c,Et.SuspenseList=f,Et.isContextConsumer=function(b){return y(b)===i},Et.isContextProvider=function(b){return y(b)===o},Et.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},Et.isForwardRef=function(b){return y(b)===u},Et.isFragment=function(b){return y(b)===t},Et.isLazy=function(b){return y(b)===p},Et.isMemo=function(b){return y(b)===h},Et.isPortal=function(b){return y(b)===n},Et.isProfiler=function(b){return y(b)===a},Et.isStrictMode=function(b){return y(b)===r},Et.isSuspense=function(b){return y(b)===c},Et.isSuspenseList=function(b){return y(b)===f},Et.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===t||b===a||b===r||b===c||b===f||b===m||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===h||b.$$typeof===o||b.$$typeof===i||b.$$typeof===u||b.$$typeof===g||b.getModuleId!==void 0)},Et.typeOf=y,Et}var Iw;function BU(){return Iw||(Iw=1,Ug.exports=LU()),Ug.exports}var rO=BU();function No(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function aO(e){if(J.isValidElement(e)||rO.isValidElementType(e)||!No(e))return e;const n={};return Object.keys(e).forEach(t=>{n[t]=aO(e[t])}),n}function Kr(e,n,t={clone:!0}){const r=t.clone?{...e}:e;return No(e)&&No(n)&&Object.keys(n).forEach(a=>{J.isValidElement(n[a])||rO.isValidElementType(n[a])?r[a]=n[a]:No(n[a])&&Object.prototype.hasOwnProperty.call(e,a)&&No(e[a])?r[a]=Kr(e[a],n[a],t):t.clone?r[a]=No(n[a])?aO(n[a]):n[a]:r[a]=n[a]}),r}const UU=e=>{const n=Object.keys(e).map(t=>({key:t,val:e[t]}))||[];return n.sort((t,r)=>t.val-r.val),n.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function FU(e){const{values:n={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...a}=e,i=UU(n),o=Object.keys(i);function u(m){return`@media (min-width:${typeof n[m]=="number"?n[m]:m}${t})`}function c(m){return`@media (max-width:${(typeof n[m]=="number"?n[m]:m)-r/100}${t})`}function f(m,g){const y=o.indexOf(g);return`@media (min-width:${typeof n[m]=="number"?n[m]:m}${t}) and (max-width:${(y!==-1&&typeof n[o[y]]=="number"?n[o[y]]:g)-r/100}${t})`}function h(m){return o.indexOf(m)+1<o.length?f(m,o[o.indexOf(m)+1]):u(m)}function p(m){const g=o.indexOf(m);return g===0?u(o[1]):g===o.length-1?c(o[g]):f(m,o[o.indexOf(m)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:u,down:c,between:f,only:h,not:p,unit:t,...a}}function VU(e,n){if(!e.containerQueries)return n;const t=Object.keys(n).filter(r=>r.startsWith("@container")).sort((r,a)=>{var o,u;const i=/min-width:\s*([0-9.]+)/;return+(((o=r.match(i))==null?void 0:o[1])||0)-+(((u=a.match(i))==null?void 0:u[1])||0)});return t.length?t.reduce((r,a)=>{const i=n[a];return delete r[a],r[a]=i,r},{...n}):n}function GU(e,n){return n==="@"||n.startsWith("@")&&(e.some(t=>n.startsWith(`@${t}`))||!!n.match(/^@\d/))}function HU(e,n){const t=n.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,a]=t,i=Number.isNaN(+r)?r||0:+r;return e.containerQueries(a).up(i)}function zU(e){const n=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function t(i,o){i.up=(...u)=>n(e.breakpoints.up(...u),o),i.down=(...u)=>n(e.breakpoints.down(...u),o),i.between=(...u)=>n(e.breakpoints.between(...u),o),i.only=(...u)=>n(e.breakpoints.only(...u),o),i.not=(...u)=>{const c=n(e.breakpoints.not(...u),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const r={},a=i=>(t(r,i),r);return t(a),{...e,containerQueries:a}}const WU={borderRadius:4};function Uc(e,n){return n?Kr(e,n,{clone:!1}):e}const Um={xs:0,sm:600,md:900,lg:1200,xl:1536},Rw={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Um[e]}px)`},KU={containerQueries:e=>({up:n=>{let t=typeof n=="number"?n:Um[n]||n;return typeof t=="number"&&(t=`${t}px`),e?`@container ${e} (min-width:${t})`:`@container (min-width:${t})`}})};function Gi(e,n,t){const r=e.theme||{};if(Array.isArray(n)){const i=r.breakpoints||Rw;return n.reduce((o,u,c)=>(o[i.up(i.keys[c])]=t(n[c]),o),{})}if(typeof n=="object"){const i=r.breakpoints||Rw;return Object.keys(n).reduce((o,u)=>{if(GU(i.keys,u)){const c=HU(r.containerQueries?r:KU,u);c&&(o[c]=t(n[u],u))}else if(Object.keys(i.values||Um).includes(u)){const c=i.up(u);o[c]=t(n[u],u)}else{const c=u;o[c]=n[c]}return o},{})}return t(n)}function qU(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,a)=>{const i=e.up(a);return r[i]={},r},{}))||{}}function YU(e,n){return e.reduce((t,r)=>{const a=t[r];return(!a||Object.keys(a).length===0)&&delete t[r],t},n)}function iO(e){if(typeof e!="string")throw new Error(Us(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Fm(e,n,t=!0){if(!n||typeof n!="string")return null;if(e&&e.vars&&t){const r=`vars.${n}`.split(".").reduce((a,i)=>a&&a[i]?a[i]:null,e);if(r!=null)return r}return n.split(".").reduce((r,a)=>r&&r[a]!=null?r[a]:null,e)}function Zp(e,n,t,r=t){let a;return typeof e=="function"?a=e(t):Array.isArray(e)?a=e[t]||r:a=Fm(e,t)||r,n&&(a=n(a,r,e)),a}function Jt(e){const{prop:n,cssProperty:t=e.prop,themeKey:r,transform:a}=e,i=o=>{if(o[n]==null)return null;const u=o[n],c=o.theme,f=Fm(c,r)||{};return Gi(o,u,p=>{let m=Zp(f,a,p);return p===m&&typeof p=="string"&&(m=Zp(f,a,`${n}${p==="default"?"":iO(p)}`,p)),t===!1?m:{[t]:m}})};return i.propTypes={},i.filterProps=[n],i}function $U(e){const n={};return t=>(n[t]===void 0&&(n[t]=e(t)),n[t])}const jU={m:"margin",p:"padding"},XU={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Cw={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ZU=$U(e=>{if(e.length>2)if(Cw[e])e=Cw[e];else return[e];const[n,t]=e.split(""),r=jU[n],a=XU[t]||"";return Array.isArray(a)?a.map(i=>r+i):[r+a]}),s2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],u2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...s2,...u2];function gf(e,n,t,r){const a=Fm(e,n,!0)??t;return typeof a=="number"||typeof a=="string"?i=>typeof i=="string"?i:typeof a=="string"?`calc(${i} * ${a})`:a*i:Array.isArray(a)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),u=a[o];return i>=0?u:typeof u=="number"?-u:`-${u}`}:typeof a=="function"?a:()=>{}}function l2(e){return gf(e,"spacing",8)}function yf(e,n){return typeof n=="string"||n==null?n:e(n)}function QU(e,n){return t=>e.reduce((r,a)=>(r[a]=yf(n,t),r),{})}function JU(e,n,t,r){if(!n.includes(t))return null;const a=ZU(t),i=QU(a,r),o=e[t];return Gi(e,o,i)}function oO(e,n){const t=l2(e.theme);return Object.keys(e).map(r=>JU(e,n,r,t)).reduce(Uc,{})}function qt(e){return oO(e,s2)}qt.propTypes={};qt.filterProps=s2;function Yt(e){return oO(e,u2)}Yt.propTypes={};Yt.filterProps=u2;function sO(e=8,n=l2({spacing:e})){if(e.mui)return e;const t=(...r)=>(r.length===0?[1]:r).map(i=>{const o=n(i);return typeof o=="number"?`${o}px`:o}).join(" ");return t.mui=!0,t}function Vm(...e){const n=e.reduce((r,a)=>(a.filterProps.forEach(i=>{r[i]=a}),r),{}),t=r=>Object.keys(r).reduce((a,i)=>n[i]?Uc(a,n[i](r)):a,{});return t.propTypes={},t.filterProps=e.reduce((r,a)=>r.concat(a.filterProps),[]),t}function ca(e){return typeof e!="number"?e:`${e}px solid`}function ba(e,n){return Jt({prop:e,themeKey:"borders",transform:n})}const eF=ba("border",ca),tF=ba("borderTop",ca),nF=ba("borderRight",ca),rF=ba("borderBottom",ca),aF=ba("borderLeft",ca),iF=ba("borderColor"),oF=ba("borderTopColor"),sF=ba("borderRightColor"),uF=ba("borderBottomColor"),lF=ba("borderLeftColor"),cF=ba("outline",ca),fF=ba("outlineColor"),Gm=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const n=gf(e.theme,"shape.borderRadius",4),t=r=>({borderRadius:yf(n,r)});return Gi(e,e.borderRadius,t)}return null};Gm.propTypes={};Gm.filterProps=["borderRadius"];Vm(eF,tF,nF,rF,aF,iF,oF,sF,uF,lF,Gm,cF,fF);const Hm=e=>{if(e.gap!==void 0&&e.gap!==null){const n=gf(e.theme,"spacing",8),t=r=>({gap:yf(n,r)});return Gi(e,e.gap,t)}return null};Hm.propTypes={};Hm.filterProps=["gap"];const zm=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const n=gf(e.theme,"spacing",8),t=r=>({columnGap:yf(n,r)});return Gi(e,e.columnGap,t)}return null};zm.propTypes={};zm.filterProps=["columnGap"];const Wm=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const n=gf(e.theme,"spacing",8),t=r=>({rowGap:yf(n,r)});return Gi(e,e.rowGap,t)}return null};Wm.propTypes={};Wm.filterProps=["rowGap"];const dF=Jt({prop:"gridColumn"}),hF=Jt({prop:"gridRow"}),pF=Jt({prop:"gridAutoFlow"}),mF=Jt({prop:"gridAutoColumns"}),vF=Jt({prop:"gridAutoRows"}),gF=Jt({prop:"gridTemplateColumns"}),yF=Jt({prop:"gridTemplateRows"}),bF=Jt({prop:"gridTemplateAreas"}),SF=Jt({prop:"gridArea"});Vm(Hm,zm,Wm,dF,hF,pF,mF,vF,gF,yF,bF,SF);function $u(e,n){return n==="grey"?n:e}const EF=Jt({prop:"color",themeKey:"palette",transform:$u}),_F=Jt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:$u}),AF=Jt({prop:"backgroundColor",themeKey:"palette",transform:$u});Vm(EF,_F,AF);function Ur(e){return e<=1&&e!==0?`${e*100}%`:e}const wF=Jt({prop:"width",transform:Ur}),c2=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const n=t=>{var a,i,o,u,c;const r=((o=(i=(a=e.theme)==null?void 0:a.breakpoints)==null?void 0:i.values)==null?void 0:o[t])||Um[t];return r?((c=(u=e.theme)==null?void 0:u.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Ur(t)}};return Gi(e,e.maxWidth,n)}return null};c2.filterProps=["maxWidth"];const IF=Jt({prop:"minWidth",transform:Ur}),RF=Jt({prop:"height",transform:Ur}),CF=Jt({prop:"maxHeight",transform:Ur}),NF=Jt({prop:"minHeight",transform:Ur});Jt({prop:"size",cssProperty:"width",transform:Ur});Jt({prop:"size",cssProperty:"height",transform:Ur});const TF=Jt({prop:"boxSizing"});Vm(wF,c2,IF,RF,CF,NF,TF);const Km={border:{themeKey:"borders",transform:ca},borderTop:{themeKey:"borders",transform:ca},borderRight:{themeKey:"borders",transform:ca},borderBottom:{themeKey:"borders",transform:ca},borderLeft:{themeKey:"borders",transform:ca},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ca},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Gm},color:{themeKey:"palette",transform:$u},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:$u},backgroundColor:{themeKey:"palette",transform:$u},p:{style:Yt},pt:{style:Yt},pr:{style:Yt},pb:{style:Yt},pl:{style:Yt},px:{style:Yt},py:{style:Yt},padding:{style:Yt},paddingTop:{style:Yt},paddingRight:{style:Yt},paddingBottom:{style:Yt},paddingLeft:{style:Yt},paddingX:{style:Yt},paddingY:{style:Yt},paddingInline:{style:Yt},paddingInlineStart:{style:Yt},paddingInlineEnd:{style:Yt},paddingBlock:{style:Yt},paddingBlockStart:{style:Yt},paddingBlockEnd:{style:Yt},m:{style:qt},mt:{style:qt},mr:{style:qt},mb:{style:qt},ml:{style:qt},mx:{style:qt},my:{style:qt},margin:{style:qt},marginTop:{style:qt},marginRight:{style:qt},marginBottom:{style:qt},marginLeft:{style:qt},marginX:{style:qt},marginY:{style:qt},marginInline:{style:qt},marginInlineStart:{style:qt},marginInlineEnd:{style:qt},marginBlock:{style:qt},marginBlockStart:{style:qt},marginBlockEnd:{style:qt},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Hm},rowGap:{style:Wm},columnGap:{style:zm},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ur},maxWidth:{style:c2},minWidth:{transform:Ur},height:{transform:Ur},maxHeight:{transform:Ur},minHeight:{transform:Ur},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function OF(...e){const n=e.reduce((r,a)=>r.concat(Object.keys(a)),[]),t=new Set(n);return e.every(r=>t.size===Object.keys(r).length)}function kF(e,n){return typeof e=="function"?e(n):e}function xF(){function e(t,r,a,i){const o={[t]:r,theme:a},u=i[t];if(!u)return{[t]:r};const{cssProperty:c=t,themeKey:f,transform:h,style:p}=u;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[t]:r};const m=Fm(a,f)||{};return p?p(o):Gi(o,r,y=>{let b=Zp(m,h,y);return y===b&&typeof y=="string"&&(b=Zp(m,h,`${t}${y==="default"?"":iO(y)}`,y)),c===!1?b:{[c]:b}})}function n(t){const{sx:r,theme:a={}}=t||{};if(!r)return null;const i=a.unstable_sxConfig??Km;function o(u){let c=u;if(typeof u=="function")c=u(a);else if(typeof u!="object")return u;if(!c)return null;const f=qU(a.breakpoints),h=Object.keys(f);let p=f;return Object.keys(c).forEach(m=>{const g=kF(c[m],a);if(g!=null)if(typeof g=="object")if(i[m])p=Uc(p,e(m,g,a,i));else{const y=Gi({theme:a},g,b=>({[m]:b}));OF(y,g)?p[m]=n({sx:g,theme:a}):p=Uc(p,y)}else p=Uc(p,e(m,g,a,i))}),VU(a,YU(h,p))}return Array.isArray(r)?r.map(o):o(r)}return n}const bf=xF();bf.filterProps=["sx"];function DF(e,n){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[e])||typeof t.getColorSchemeSelector!="function")return{};let a=t.getColorSchemeSelector(e);return a==="&"?n:((a.includes("data-")||a.includes("."))&&(a=`*:where(${a.replace(/\s*&$/,"")}) &`),{[a]:n})}return t.palette.mode===e?n:{}}function uO(e={},...n){const{breakpoints:t={},palette:r={},spacing:a,shape:i={},...o}=e,u=FU(t),c=sO(a);let f=Kr({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:c,shape:{...WU,...i}},o);return f=zU(f),f.applyStyles=DF,f=n.reduce((h,p)=>Kr(h,p),f),f.unstable_sxConfig={...Km,...o==null?void 0:o.unstable_sxConfig},f.unstable_sx=function(p){return bf({sx:p,theme:this})},f}function PF(e){return Object.keys(e).length===0}function lO(e=null){const n=J.useContext(Bm);return!n||PF(n)?e:n}const MF=uO();function LF(e=MF){return lO(e)}function BF({styles:e,themeId:n,defaultTheme:t={}}){const r=LF(t),a=typeof e=="function"?e(n&&r[n]||r):e;return nt.jsx(nO,{styles:a})}function H1(e,n){const t={...n};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const a=r;if(a==="components"||a==="slots")t[a]={...e[a],...t[a]};else if(a==="componentsProps"||a==="slotProps"){const i=e[a],o=n[a];if(!o)t[a]=i||{};else if(!i)t[a]=o;else{t[a]={...o};for(const u in i)if(Object.prototype.hasOwnProperty.call(i,u)){const c=u;t[a][c]=H1(i[c],o[c])}}}else t[a]===void 0&&(t[a]=e[a])}return t}const UF=typeof window<"u"?J.useLayoutEffect:J.useEffect;function FF(e,n=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(n,Math.min(e,t))}function f2(e,n=0,t=1){return FF(e,n,t)}function VF(e){e=e.slice(1);const n=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let t=e.match(n);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,a)=>a<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Fo(e){if(e.type)return e;if(e.charAt(0)==="#")return Fo(VF(e));const n=e.indexOf("("),t=e.substring(0,n);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(Us(9,e));let r=e.substring(n+1,e.length-1),a;if(t==="color"){if(r=r.split(" "),a=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(a))throw new Error(Us(10,a))}else r=r.split(",");return r=r.map(i=>parseFloat(i)),{type:t,values:r,colorSpace:a}}const GF=e=>{const n=Fo(e);return n.values.slice(0,3).map((t,r)=>n.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},Mc=(e,n)=>{try{return GF(e)}catch{return e}};function qm(e){const{type:n,colorSpace:t}=e;let{values:r}=e;return n.includes("rgb")?r=r.map((a,i)=>i<3?parseInt(a,10):a):n.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),n.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${n}(${r})`}function cO(e){e=Fo(e);const{values:n}=e,t=n[0],r=n[1]/100,a=n[2]/100,i=r*Math.min(a,1-a),o=(f,h=(f+t/30)%12)=>a-i*Math.max(Math.min(h-3,9-h,1),-1);let u="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(u+="a",c.push(n[3])),qm({type:u,values:c})}function z1(e){e=Fo(e);let n=e.type==="hsl"||e.type==="hsla"?Fo(cO(e)).values:e.values;return n=n.map(t=>(e.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}function HF(e,n){const t=z1(e),r=z1(n);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function zF(e,n){return e=Fo(e),n=f2(n),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${n}`:e.values[3]=n,qm(e)}function qd(e,n,t){try{return zF(e,n)}catch{return e}}function d2(e,n){if(e=Fo(e),n=f2(n),e.type.includes("hsl"))e.values[2]*=1-n;else if(e.type.includes("rgb")||e.type.includes("color"))for(let t=0;t<3;t+=1)e.values[t]*=1-n;return qm(e)}function wt(e,n,t){try{return d2(e,n)}catch{return e}}function h2(e,n){if(e=Fo(e),n=f2(n),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*n;else if(e.type.includes("rgb"))for(let t=0;t<3;t+=1)e.values[t]+=(255-e.values[t])*n;else if(e.type.includes("color"))for(let t=0;t<3;t+=1)e.values[t]+=(1-e.values[t])*n;return qm(e)}function It(e,n,t){try{return h2(e,n)}catch{return e}}function WF(e,n=.15){return z1(e)>.5?d2(e,n):h2(e,n)}function Yd(e,n,t){try{return WF(e,n)}catch{return e}}const fO=J.createContext(null);function p2(){return J.useContext(fO)}const KF=typeof Symbol=="function"&&Symbol.for,qF=KF?Symbol.for("mui.nested"):"__THEME_NESTED__";function YF(e,n){return typeof n=="function"?n(e):{...e,...n}}function $F(e){const{children:n,theme:t}=e,r=p2(),a=J.useMemo(()=>{const i=r===null?{...t}:YF(r,t);return i!=null&&(i[qF]=r!==null),i},[t,r]);return nt.jsx(fO.Provider,{value:a,children:n})}const jF=J.createContext();function XF({value:e,...n}){return nt.jsx(jF.Provider,{value:e??!0,...n})}const dO=J.createContext(void 0);function ZF({value:e,children:n}){return nt.jsx(dO.Provider,{value:e,children:n})}function QF(e){const{theme:n,name:t,props:r}=e;if(!n||!n.components||!n.components[t])return r;const a=n.components[t];return a.defaultProps?H1(a.defaultProps,r):!a.styleOverrides&&!a.variants?H1(a,r):r}function JF({props:e,name:n}){const t=J.useContext(dO);return QF({props:e,name:n,theme:{components:t}})}const Nw={};function Tw(e,n,t,r=!1){return J.useMemo(()=>{const a=e&&n[e]||n;if(typeof t=="function"){const i=t(a),o=e?{...n,[e]:i}:i;return r?()=>o:o}return e?{...n,[e]:t}:{...n,...t}},[e,n,t,r])}function hO(e){const{children:n,theme:t,themeId:r}=e,a=lO(Nw),i=p2()||Nw,o=Tw(r,a,t),u=Tw(r,i,t,!0),c=(r?o[r]:o).direction==="rtl";return nt.jsx($F,{theme:u,children:nt.jsx(Bm.Provider,{value:o,children:nt.jsx(XF,{value:c,children:nt.jsx(ZF,{value:r?o[r].components:o.components,children:n})})})})}const m2="mode",v2="color-scheme",e6="data-color-scheme";function t6(e){const{defaultMode:n="system",defaultLightColorScheme:t="light",defaultDarkColorScheme:r="dark",modeStorageKey:a=m2,colorSchemeStorageKey:i=v2,attribute:o=e6,colorSchemeNode:u="document.documentElement",nonce:c}=e||{};let f="",h=o;if(o==="class"&&(h=".%s"),o==="data"&&(h="[data-%s]"),h.startsWith(".")){const m=h.substring(1);f+=`${u}.classList.remove('${m}'.replace('%s', light), '${m}'.replace('%s', dark));
      ${u}.classList.add('${m}'.replace('%s', colorScheme));`}const p=h.match(/\[([^\]]+)\]/);if(p){const[m,g]=p[1].split("=");g||(f+=`${u}.removeAttribute('${m}'.replace('%s', light));
      ${u}.removeAttribute('${m}'.replace('%s', dark));`),f+=`
      ${u}.setAttribute('${m}'.replace('%s', colorScheme), ${g?`${g}.replace('%s', colorScheme)`:'""'});`}else f+=`${u}.setAttribute('${h}', colorScheme);`;return nt.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${a}') || '${n}';
  const dark = localStorage.getItem('${i}-dark') || '${r}';
  const light = localStorage.getItem('${i}-light') || '${t}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${f}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function n6(){}const r6=({key:e,storageWindow:n})=>(!n&&typeof window<"u"&&(n=window),{get(t){if(typeof window>"u")return;if(!n)return t;let r;try{r=n.localStorage.getItem(e)}catch{}return r||t},set:t=>{if(n)try{n.localStorage.setItem(e,t)}catch{}},subscribe:t=>{if(!n)return n6;const r=a=>{const i=a.newValue;a.key===e&&t(i)};return n.addEventListener("storage",r),()=>{n.removeEventListener("storage",r)}}});function Fg(){}function Ow(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function pO(e,n){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return n("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return n("dark")}function a6(e){return pO(e,n=>{if(n==="light")return e.lightColorScheme;if(n==="dark")return e.darkColorScheme})}function i6(e){const{defaultMode:n="light",defaultLightColorScheme:t,defaultDarkColorScheme:r,supportedColorSchemes:a=[],modeStorageKey:i=m2,colorSchemeStorageKey:o=v2,storageWindow:u=typeof window>"u"?void 0:window,storageManager:c=r6,noSsr:f=!1}=e,h=a.join(","),p=a.length>1,m=J.useMemo(()=>c==null?void 0:c({key:i,storageWindow:u}),[c,i,u]),g=J.useMemo(()=>c==null?void 0:c({key:`${o}-light`,storageWindow:u}),[c,o,u]),y=J.useMemo(()=>c==null?void 0:c({key:`${o}-dark`,storageWindow:u}),[c,o,u]),[b,E]=J.useState(()=>{const P=(m==null?void 0:m.get(n))||n,k=(g==null?void 0:g.get(t))||t,N=(y==null?void 0:y.get(r))||r;return{mode:P,systemMode:Ow(P),lightColorScheme:k,darkColorScheme:N}}),[_,w]=J.useState(f||!p);J.useEffect(()=>{w(!0)},[]);const I=a6(b),R=J.useCallback(P=>{E(k=>{if(P===k.mode)return k;const N=P??n;return m==null||m.set(N),{...k,mode:N,systemMode:Ow(N)}})},[m,n]),C=J.useCallback(P=>{P?typeof P=="string"?P&&!h.includes(P)?console.error(`\`${P}\` does not exist in \`theme.colorSchemes\`.`):E(k=>{const N={...k};return pO(k,U=>{U==="light"&&(g==null||g.set(P),N.lightColorScheme=P),U==="dark"&&(y==null||y.set(P),N.darkColorScheme=P)}),N}):E(k=>{const N={...k},U=P.light===null?t:P.light,V=P.dark===null?r:P.dark;return U&&(h.includes(U)?(N.lightColorScheme=U,g==null||g.set(U)):console.error(`\`${U}\` does not exist in \`theme.colorSchemes\`.`)),V&&(h.includes(V)?(N.darkColorScheme=V,y==null||y.set(V)):console.error(`\`${V}\` does not exist in \`theme.colorSchemes\`.`)),N}):E(k=>(g==null||g.set(t),y==null||y.set(r),{...k,lightColorScheme:t,darkColorScheme:r}))},[h,g,y,t,r]),O=J.useCallback(P=>{b.mode==="system"&&E(k=>{const N=P!=null&&P.matches?"dark":"light";return k.systemMode===N?k:{...k,systemMode:N}})},[b.mode]),D=J.useRef(O);return D.current=O,J.useEffect(()=>{if(typeof window.matchMedia!="function"||!p)return;const P=(...N)=>D.current(...N),k=window.matchMedia("(prefers-color-scheme: dark)");return k.addListener(P),P(k),()=>{k.removeListener(P)}},[p]),J.useEffect(()=>{if(p){const P=(m==null?void 0:m.subscribe(U=>{(!U||["light","dark","system"].includes(U))&&R(U||n)}))||Fg,k=(g==null?void 0:g.subscribe(U=>{(!U||h.match(U))&&C({light:U})}))||Fg,N=(y==null?void 0:y.subscribe(U=>{(!U||h.match(U))&&C({dark:U})}))||Fg;return()=>{P(),k(),N()}}},[C,R,h,n,u,p,m,g,y]),{...b,mode:_?b.mode:void 0,systemMode:_?b.systemMode:void 0,colorScheme:_?I:void 0,setMode:R,setColorScheme:C}}const o6="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function s6(e){const{themeId:n,theme:t={},modeStorageKey:r=m2,colorSchemeStorageKey:a=v2,disableTransitionOnChange:i=!1,defaultColorScheme:o,resolveTheme:u}=e,c={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},f=J.createContext(void 0),h=()=>J.useContext(f)||c,p={},m={};function g(_){var tn,hr,pi,Zr;const{children:w,theme:I,modeStorageKey:R=r,colorSchemeStorageKey:C=a,disableTransitionOnChange:O=i,storageManager:D,storageWindow:P=typeof window>"u"?void 0:window,documentNode:k=typeof document>"u"?void 0:document,colorSchemeNode:N=typeof document>"u"?void 0:document.documentElement,disableNestedContext:U=!1,disableStyleSheetGeneration:V=!1,defaultMode:ee="system",noSsr:re}=_,ne=J.useRef(!1),z=p2(),Z=J.useContext(f),$=!!Z&&!U,oe=J.useMemo(()=>I||(typeof t=="function"?t():t),[I]),L=oe[n],Y=L||oe,{colorSchemes:Q=p,components:de=m,cssVarPrefix:he}=Y,Se=Object.keys(Q).filter(lt=>!!Q[lt]).join(","),be=J.useMemo(()=>Se.split(","),[Se]),Pe=typeof o=="string"?o:o.light,_e=typeof o=="string"?o:o.dark,Ce=Q[Pe]&&Q[_e]?ee:((hr=(tn=Q[Y.defaultColorScheme])==null?void 0:tn.palette)==null?void 0:hr.mode)||((pi=Y.palette)==null?void 0:pi.mode),{mode:Be,setMode:Le,systemMode:qe,lightColorScheme:ge,darkColorScheme:ht,colorScheme:pt,setColorScheme:at}=i6({supportedColorSchemes:be,defaultLightColorScheme:Pe,defaultDarkColorScheme:_e,modeStorageKey:R,colorSchemeStorageKey:C,defaultMode:Ce,storageManager:D,storageWindow:P,noSsr:re});let _n=Be,yt=pt;$&&(_n=Z.mode,yt=Z.colorScheme);const Mt=J.useMemo(()=>{var mi;const lt=yt||Y.defaultColorScheme,nn=((mi=Y.generateThemeVars)==null?void 0:mi.call(Y))||Y.vars,An={...Y,components:de,colorSchemes:Q,cssVarPrefix:he,vars:nn};if(typeof An.generateSpacing=="function"&&(An.spacing=An.generateSpacing()),lt){const ar=Q[lt];ar&&typeof ar=="object"&&Object.keys(ar).forEach(cn=>{ar[cn]&&typeof ar[cn]=="object"?An[cn]={...An[cn],...ar[cn]}:An[cn]=ar[cn]})}return u?u(An):An},[Y,yt,de,Q,he]),zn=Y.colorSchemeSelector;UF(()=>{if(yt&&N&&zn&&zn!=="media"){const lt=zn;let nn=zn;if(lt==="class"&&(nn=".%s"),lt==="data"&&(nn="[data-%s]"),lt!=null&&lt.startsWith("data-")&&!lt.includes("%s")&&(nn=`[${lt}="%s"]`),nn.startsWith("."))N.classList.remove(...be.map(An=>nn.substring(1).replace("%s",An))),N.classList.add(nn.substring(1).replace("%s",yt));else{const An=nn.replace("%s",yt).match(/\[([^\]]+)\]/);if(An){const[mi,ar]=An[1].split("=");ar||be.forEach(cn=>{N.removeAttribute(mi.replace(yt,cn))}),N.setAttribute(mi,ar?ar.replace(/"|'/g,""):"")}else N.setAttribute(nn,yt)}}},[yt,zn,N,be]),J.useEffect(()=>{let lt;if(O&&ne.current&&k){const nn=k.createElement("style");nn.appendChild(k.createTextNode(o6)),k.head.appendChild(nn),window.getComputedStyle(k.body),lt=setTimeout(()=>{k.head.removeChild(nn)},1)}return()=>{clearTimeout(lt)}},[yt,O,k]),J.useEffect(()=>(ne.current=!0,()=>{ne.current=!1}),[]);const rr=J.useMemo(()=>({allColorSchemes:be,colorScheme:yt,darkColorScheme:ht,lightColorScheme:ge,mode:_n,setColorScheme:at,setMode:Le,systemMode:qe}),[be,yt,ht,ge,_n,at,Le,qe,Mt.colorSchemeSelector]);let Nr=!0;(V||Y.cssVariables===!1||$&&(z==null?void 0:z.cssVarPrefix)===he)&&(Nr=!1);const dr=nt.jsxs(J.Fragment,{children:[nt.jsx(hO,{themeId:L?n:void 0,theme:Mt,children:w}),Nr&&nt.jsx(nO,{styles:((Zr=Mt.generateStyleSheets)==null?void 0:Zr.call(Mt))||[]})]});return $?dr:nt.jsx(f.Provider,{value:rr,children:dr})}const y=typeof o=="string"?o:o.light,b=typeof o=="string"?o:o.dark;return{CssVarsProvider:g,useColorScheme:h,getInitColorSchemeScript:_=>t6({colorSchemeStorageKey:a,defaultLightColorScheme:y,defaultDarkColorScheme:b,modeStorageKey:r,..._})}}function u6(e=""){function n(...r){if(!r.length)return"";const a=r[0];return typeof a=="string"&&!a.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${a}${n(...r.slice(1))})`:`, ${a}`}return(r,...a)=>`var(--${e?`${e}-`:""}${r}${n(...a)})`}const kw=(e,n,t,r=[])=>{let a=e;n.forEach((i,o)=>{o===n.length-1?Array.isArray(a)?a[Number(i)]=t:a&&typeof a=="object"&&(a[i]=t):a&&typeof a=="object"&&(a[i]||(a[i]=r.includes(i)?[]:{}),a=a[i])})},l6=(e,n,t)=>{function r(a,i=[],o=[]){Object.entries(a).forEach(([u,c])=>{(!t||t&&!t([...i,u]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?r(c,[...i,u],Array.isArray(c)?[...o,u]:o):n([...i,u],c,o))})}r(e)},c6=(e,n)=>typeof n=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().includes("opacity")?n:`${n}px`:n;function Vg(e,n){const{prefix:t,shouldSkipGeneratingVar:r}=n||{},a={},i={},o={};return l6(e,(u,c,f)=>{if((typeof c=="string"||typeof c=="number")&&(!r||!r(u,c))){const h=`--${t?`${t}-`:""}${u.join("-")}`,p=c6(u,c);Object.assign(a,{[h]:p}),kw(i,u,`var(${h})`,f),kw(o,u,`var(${h}, ${p})`,f)}},u=>u[0]==="vars"),{css:a,vars:i,varsWithDefaults:o}}function f6(e,n={}){const{getSelector:t=E,disableCssColorScheme:r,colorSchemeSelector:a}=n,{colorSchemes:i={},components:o,defaultColorScheme:u="light",...c}=e,{vars:f,css:h,varsWithDefaults:p}=Vg(c,n);let m=p;const g={},{[u]:y,...b}=i;if(Object.entries(b||{}).forEach(([I,R])=>{const{vars:C,css:O,varsWithDefaults:D}=Vg(R,n);m=Kr(m,D),g[I]={css:O,vars:C}}),y){const{css:I,vars:R,varsWithDefaults:C}=Vg(y,n);m=Kr(m,C),g[u]={css:I,vars:R}}function E(I,R){var O,D;let C=a;if(a==="class"&&(C=".%s"),a==="data"&&(C="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(C=`[${a}="%s"]`),I){if(C==="media")return e.defaultColorScheme===I?":root":{[`@media (prefers-color-scheme: ${((D=(O=i[I])==null?void 0:O.palette)==null?void 0:D.mode)||I})`]:{":root":R}};if(C)return e.defaultColorScheme===I?`:root, ${C.replace("%s",String(I))}`:C.replace("%s",String(I))}return":root"}return{vars:m,generateThemeVars:()=>{let I={...f};return Object.entries(g).forEach(([,{vars:R}])=>{I=Kr(I,R)}),I},generateStyleSheets:()=>{var P,k;const I=[],R=e.defaultColorScheme||"light";function C(N,U){Object.keys(U).length&&I.push(typeof N=="string"?{[N]:{...U}}:N)}C(t(void 0,{...h}),h);const{[R]:O,...D}=g;if(O){const{css:N}=O,U=(k=(P=i[R])==null?void 0:P.palette)==null?void 0:k.mode,V=!r&&U?{colorScheme:U,...N}:{...N};C(t(R,{...V}),V)}return Object.entries(D).forEach(([N,{css:U}])=>{var re,ne;const V=(ne=(re=i[N])==null?void 0:re.palette)==null?void 0:ne.mode,ee=!r&&V?{colorScheme:V,...U}:{...U};C(t(N,{...ee}),ee)}),I}}}function d6(e){return function(t){return e==="media"?`@media (prefers-color-scheme: ${t})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${t}"] &`:e==="class"?`.${t} &`:e==="data"?`[data-${t}] &`:`${e.replace("%s",t)} &`:"&"}}function mO(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Xc.white,default:Xc.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const h6=mO();function vO(){return{text:{primary:Xc.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Xc.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const xw=vO();function Dw(e,n,t,r){const a=r.light||r,i=r.dark||r*1.5;e[n]||(e.hasOwnProperty(t)?e[n]=e[t]:n==="light"?e.light=h2(e.main,a):n==="dark"&&(e.dark=d2(e.main,i)))}function p6(e="light"){return e==="dark"?{main:Lu[200],light:Lu[50],dark:Lu[400]}:{main:Lu[700],light:Lu[400],dark:Lu[800]}}function m6(e="light"){return e==="dark"?{main:Mu[200],light:Mu[50],dark:Mu[400]}:{main:Mu[500],light:Mu[300],dark:Mu[700]}}function v6(e="light"){return e==="dark"?{main:Pu[500],light:Pu[300],dark:Pu[700]}:{main:Pu[700],light:Pu[400],dark:Pu[800]}}function g6(e="light"){return e==="dark"?{main:Bu[400],light:Bu[300],dark:Bu[700]}:{main:Bu[700],light:Bu[500],dark:Bu[900]}}function y6(e="light"){return e==="dark"?{main:Uu[400],light:Uu[300],dark:Uu[700]}:{main:Uu[800],light:Uu[500],dark:Uu[900]}}function b6(e="light"){return e==="dark"?{main:Rc[400],light:Rc[300],dark:Rc[700]}:{main:"#ed6c02",light:Rc[500],dark:Rc[900]}}function g2(e){const{mode:n="light",contrastThreshold:t=3,tonalOffset:r=.2,...a}=e,i=e.primary||p6(n),o=e.secondary||m6(n),u=e.error||v6(n),c=e.info||g6(n),f=e.success||y6(n),h=e.warning||b6(n);function p(b){return HF(b,xw.text.primary)>=t?xw.text.primary:h6.text.primary}const m=({color:b,name:E,mainShade:_=500,lightShade:w=300,darkShade:I=700})=>{if(b={...b},!b.main&&b[_]&&(b.main=b[_]),!b.hasOwnProperty("main"))throw new Error(Us(11,E?` (${E})`:"",_));if(typeof b.main!="string")throw new Error(Us(12,E?` (${E})`:"",JSON.stringify(b.main)));return Dw(b,"light",w,r),Dw(b,"dark",I,r),b.contrastText||(b.contrastText=p(b.main)),b};let g;return n==="light"?g=mO():n==="dark"&&(g=vO()),Kr({common:{...Xc},mode:n,primary:m({color:i,name:"primary"}),secondary:m({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:u,name:"error"}),warning:m({color:h,name:"warning"}),info:m({color:c,name:"info"}),success:m({color:f,name:"success"}),grey:GB,contrastThreshold:t,getContrastText:p,augmentColor:m,tonalOffset:r,...g},a)}function S6(e){const n={};return Object.entries(e).forEach(r=>{const[a,i]=r;typeof i=="object"&&(n[a]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),n}function E6(e,n){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...n}}function _6(e){return Math.round(e*1e5)/1e5}const Pw={textTransform:"uppercase"},Mw='"Roboto", "Helvetica", "Arial", sans-serif';function gO(e,n){const{fontFamily:t=Mw,fontSize:r=14,fontWeightLight:a=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:u=700,htmlFontSize:c=16,allVariants:f,pxToRem:h,...p}=typeof n=="function"?n(e):n,m=r/14,g=h||(E=>`${E/c*m}rem`),y=(E,_,w,I,R)=>({fontFamily:t,fontWeight:E,fontSize:g(_),lineHeight:w,...t===Mw?{letterSpacing:`${_6(I/_)}em`}:{},...R,...f}),b={h1:y(a,96,1.167,-1.5),h2:y(a,60,1.2,-.5),h3:y(i,48,1.167,0),h4:y(i,34,1.235,.25),h5:y(i,24,1.334,0),h6:y(o,20,1.6,.15),subtitle1:y(i,16,1.75,.15),subtitle2:y(o,14,1.57,.1),body1:y(i,16,1.5,.15),body2:y(i,14,1.43,.15),button:y(o,14,1.75,.4,Pw),caption:y(i,12,1.66,.4),overline:y(i,12,2.66,1,Pw),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Kr({htmlFontSize:c,pxToRem:g,fontFamily:t,fontSize:r,fontWeightLight:a,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:u,...b},p,{clone:!1})}const A6=.2,w6=.14,I6=.12;function Dt(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${A6})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${w6})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${I6})`].join(",")}const R6=["none",Dt(0,2,1,-1,0,1,1,0,0,1,3,0),Dt(0,3,1,-2,0,2,2,0,0,1,5,0),Dt(0,3,3,-2,0,3,4,0,0,1,8,0),Dt(0,2,4,-1,0,4,5,0,0,1,10,0),Dt(0,3,5,-1,0,5,8,0,0,1,14,0),Dt(0,3,5,-1,0,6,10,0,0,1,18,0),Dt(0,4,5,-2,0,7,10,1,0,2,16,1),Dt(0,5,5,-3,0,8,10,1,0,3,14,2),Dt(0,5,6,-3,0,9,12,1,0,3,16,2),Dt(0,6,6,-3,0,10,14,1,0,4,18,3),Dt(0,6,7,-4,0,11,15,1,0,4,20,3),Dt(0,7,8,-4,0,12,17,2,0,5,22,4),Dt(0,7,8,-4,0,13,19,2,0,5,24,4),Dt(0,7,9,-4,0,14,21,2,0,5,26,4),Dt(0,8,9,-5,0,15,22,2,0,6,28,5),Dt(0,8,10,-5,0,16,24,2,0,6,30,5),Dt(0,8,11,-5,0,17,26,2,0,6,32,5),Dt(0,9,11,-5,0,18,28,2,0,7,34,6),Dt(0,9,12,-6,0,19,29,2,0,7,36,6),Dt(0,10,13,-6,0,20,31,3,0,8,38,7),Dt(0,10,13,-6,0,21,33,3,0,8,40,7),Dt(0,10,14,-6,0,22,35,3,0,8,42,7),Dt(0,11,14,-7,0,23,36,3,0,9,44,8),Dt(0,11,15,-7,0,24,38,3,0,9,46,8)],C6={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},N6={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Lw(e){return`${Math.round(e)}ms`}function T6(e){if(!e)return 0;const n=e/36;return Math.min(Math.round((4+15*n**.25+n/5)*10),3e3)}function O6(e){const n={...C6,...e.easing},t={...N6,...e.duration};return{getAutoHeightDuration:T6,create:(a=["all"],i={})=>{const{duration:o=t.standard,easing:u=n.easeInOut,delay:c=0,...f}=i;return(Array.isArray(a)?a:[a]).map(h=>`${h} ${typeof o=="string"?o:Lw(o)} ${u} ${typeof c=="string"?c:Lw(c)}`).join(",")},...e,easing:n,duration:t}}const k6={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function x6(e){return No(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function yO(e={}){const n={...e};function t(r){const a=Object.entries(r);for(let i=0;i<a.length;i++){const[o,u]=a[i];!x6(u)||o.startsWith("unstable_")?delete r[o]:No(u)&&(r[o]={...u},t(r[o]))}}return t(n),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(n,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function W1(e={},...n){const{breakpoints:t,mixins:r={},spacing:a,palette:i={},transitions:o={},typography:u={},shape:c,...f}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Us(20));const h=g2(i),p=uO(e);let m=Kr(p,{mixins:E6(p.breakpoints,r),palette:h,shadows:R6.slice(),typography:gO(h,u),transitions:O6(o),zIndex:{...k6}});return m=Kr(m,f),m=n.reduce((g,y)=>Kr(g,y),m),m.unstable_sxConfig={...Km,...f==null?void 0:f.unstable_sxConfig},m.unstable_sx=function(y){return bf({sx:y,theme:this})},m.toRuntimeSource=yO,m}function D6(e){let n;return e<1?n=5.11916*e**2:n=4.5*Math.log(e+1)+2,Math.round(n*10)/1e3}const P6=[...Array(25)].map((e,n)=>{if(n===0)return"none";const t=D6(n);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function bO(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function SO(e){return e==="dark"?P6:[]}function M6(e){const{palette:n={mode:"light"},opacity:t,overlays:r,...a}=e,i=g2(n);return{palette:i,opacity:{...bO(i.mode),...t},overlays:r||SO(i.mode),...a}}function L6(e){var n;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((n=e[1])!=null&&n.match(/(mode|contrastThreshold|tonalOffset)/))}const B6=e=>[...[...Array(25)].map((n,t)=>`--${e?`${e}-`:""}overlays-${t}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],U6=e=>(n,t)=>{const r=e.rootSelector||":root",a=e.colorSchemeSelector;let i=a;if(a==="class"&&(i=".%s"),a==="data"&&(i="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(i=`[${a}="%s"]`),e.defaultColorScheme===n){if(n==="dark"){const o={};return B6(e.cssVarPrefix).forEach(u=>{o[u]=t[u],delete t[u]}),i==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:o}}:i?{[i.replace("%s",n)]:o,[`${r}, ${i.replace("%s",n)}`]:t}:{[r]:{...t,...o}}}if(i&&i!=="media")return`${r}, ${i.replace("%s",String(n))}`}else if(n){if(i==="media")return{[`@media (prefers-color-scheme: ${String(n)})`]:{[r]:t}};if(i)return i.replace("%s",String(n))}return r};function F6(e,n){n.forEach(t=>{e[t]||(e[t]={})})}function ue(e,n,t){!e[n]&&t&&(e[n]=t)}function Lc(e){return typeof e!="string"||!e.startsWith("hsl")?e:cO(e)}function Di(e,n){`${n}Channel`in e||(e[`${n}Channel`]=Mc(Lc(e[n])))}function V6(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Va=e=>{try{return e()}catch{}},G6=(e="mui")=>u6(e);function Gg(e,n,t,r){if(!n)return;n=n===!0?{}:n;const a=r==="dark"?"dark":"light";if(!t){e[r]=M6({...n,palette:{mode:a,...n==null?void 0:n.palette}});return}const{palette:i,...o}=W1({...t,palette:{mode:a,...n==null?void 0:n.palette}});return e[r]={...n,palette:i,opacity:{...bO(a),...n==null?void 0:n.opacity},overlays:(n==null?void 0:n.overlays)||SO(a)},o}function H6(e={},...n){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:a=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:o=L6,colorSchemeSelector:u=t.light&&t.dark?"media":void 0,rootSelector:c=":root",...f}=e,h=Object.keys(t)[0],p=r||(t.light&&h!=="light"?"light":h),m=G6(i),{[p]:g,light:y,dark:b,...E}=t,_={...E};let w=g;if((p==="dark"&&!("dark"in t)||p==="light"&&!("light"in t))&&(w=!0),!w)throw new Error(Us(21,p));const I=Gg(_,w,f,p);y&&!_.light&&Gg(_,y,void 0,"light"),b&&!_.dark&&Gg(_,b,void 0,"dark");let R={defaultColorScheme:p,...I,cssVarPrefix:i,colorSchemeSelector:u,rootSelector:c,getCssVar:m,colorSchemes:_,font:{...S6(I.typography),...I.font},spacing:V6(f.spacing)};Object.keys(R.colorSchemes).forEach(k=>{const N=R.colorSchemes[k].palette,U=V=>{const ee=V.split("-"),re=ee[1],ne=ee[2];return m(V,N[re][ne])};if(N.mode==="light"&&(ue(N.common,"background","#fff"),ue(N.common,"onBackground","#000")),N.mode==="dark"&&(ue(N.common,"background","#000"),ue(N.common,"onBackground","#fff")),F6(N,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),N.mode==="light"){ue(N.Alert,"errorColor",wt(N.error.light,.6)),ue(N.Alert,"infoColor",wt(N.info.light,.6)),ue(N.Alert,"successColor",wt(N.success.light,.6)),ue(N.Alert,"warningColor",wt(N.warning.light,.6)),ue(N.Alert,"errorFilledBg",U("palette-error-main")),ue(N.Alert,"infoFilledBg",U("palette-info-main")),ue(N.Alert,"successFilledBg",U("palette-success-main")),ue(N.Alert,"warningFilledBg",U("palette-warning-main")),ue(N.Alert,"errorFilledColor",Va(()=>N.getContrastText(N.error.main))),ue(N.Alert,"infoFilledColor",Va(()=>N.getContrastText(N.info.main))),ue(N.Alert,"successFilledColor",Va(()=>N.getContrastText(N.success.main))),ue(N.Alert,"warningFilledColor",Va(()=>N.getContrastText(N.warning.main))),ue(N.Alert,"errorStandardBg",It(N.error.light,.9)),ue(N.Alert,"infoStandardBg",It(N.info.light,.9)),ue(N.Alert,"successStandardBg",It(N.success.light,.9)),ue(N.Alert,"warningStandardBg",It(N.warning.light,.9)),ue(N.Alert,"errorIconColor",U("palette-error-main")),ue(N.Alert,"infoIconColor",U("palette-info-main")),ue(N.Alert,"successIconColor",U("palette-success-main")),ue(N.Alert,"warningIconColor",U("palette-warning-main")),ue(N.AppBar,"defaultBg",U("palette-grey-100")),ue(N.Avatar,"defaultBg",U("palette-grey-400")),ue(N.Button,"inheritContainedBg",U("palette-grey-300")),ue(N.Button,"inheritContainedHoverBg",U("palette-grey-A100")),ue(N.Chip,"defaultBorder",U("palette-grey-400")),ue(N.Chip,"defaultAvatarColor",U("palette-grey-700")),ue(N.Chip,"defaultIconColor",U("palette-grey-700")),ue(N.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ue(N.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ue(N.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ue(N.LinearProgress,"primaryBg",It(N.primary.main,.62)),ue(N.LinearProgress,"secondaryBg",It(N.secondary.main,.62)),ue(N.LinearProgress,"errorBg",It(N.error.main,.62)),ue(N.LinearProgress,"infoBg",It(N.info.main,.62)),ue(N.LinearProgress,"successBg",It(N.success.main,.62)),ue(N.LinearProgress,"warningBg",It(N.warning.main,.62)),ue(N.Skeleton,"bg",`rgba(${U("palette-text-primaryChannel")} / 0.11)`),ue(N.Slider,"primaryTrack",It(N.primary.main,.62)),ue(N.Slider,"secondaryTrack",It(N.secondary.main,.62)),ue(N.Slider,"errorTrack",It(N.error.main,.62)),ue(N.Slider,"infoTrack",It(N.info.main,.62)),ue(N.Slider,"successTrack",It(N.success.main,.62)),ue(N.Slider,"warningTrack",It(N.warning.main,.62));const V=Yd(N.background.default,.8);ue(N.SnackbarContent,"bg",V),ue(N.SnackbarContent,"color",Va(()=>N.getContrastText(V))),ue(N.SpeedDialAction,"fabHoverBg",Yd(N.background.paper,.15)),ue(N.StepConnector,"border",U("palette-grey-400")),ue(N.StepContent,"border",U("palette-grey-400")),ue(N.Switch,"defaultColor",U("palette-common-white")),ue(N.Switch,"defaultDisabledColor",U("palette-grey-100")),ue(N.Switch,"primaryDisabledColor",It(N.primary.main,.62)),ue(N.Switch,"secondaryDisabledColor",It(N.secondary.main,.62)),ue(N.Switch,"errorDisabledColor",It(N.error.main,.62)),ue(N.Switch,"infoDisabledColor",It(N.info.main,.62)),ue(N.Switch,"successDisabledColor",It(N.success.main,.62)),ue(N.Switch,"warningDisabledColor",It(N.warning.main,.62)),ue(N.TableCell,"border",It(qd(N.divider,1),.88)),ue(N.Tooltip,"bg",qd(N.grey[700],.92))}if(N.mode==="dark"){ue(N.Alert,"errorColor",It(N.error.light,.6)),ue(N.Alert,"infoColor",It(N.info.light,.6)),ue(N.Alert,"successColor",It(N.success.light,.6)),ue(N.Alert,"warningColor",It(N.warning.light,.6)),ue(N.Alert,"errorFilledBg",U("palette-error-dark")),ue(N.Alert,"infoFilledBg",U("palette-info-dark")),ue(N.Alert,"successFilledBg",U("palette-success-dark")),ue(N.Alert,"warningFilledBg",U("palette-warning-dark")),ue(N.Alert,"errorFilledColor",Va(()=>N.getContrastText(N.error.dark))),ue(N.Alert,"infoFilledColor",Va(()=>N.getContrastText(N.info.dark))),ue(N.Alert,"successFilledColor",Va(()=>N.getContrastText(N.success.dark))),ue(N.Alert,"warningFilledColor",Va(()=>N.getContrastText(N.warning.dark))),ue(N.Alert,"errorStandardBg",wt(N.error.light,.9)),ue(N.Alert,"infoStandardBg",wt(N.info.light,.9)),ue(N.Alert,"successStandardBg",wt(N.success.light,.9)),ue(N.Alert,"warningStandardBg",wt(N.warning.light,.9)),ue(N.Alert,"errorIconColor",U("palette-error-main")),ue(N.Alert,"infoIconColor",U("palette-info-main")),ue(N.Alert,"successIconColor",U("palette-success-main")),ue(N.Alert,"warningIconColor",U("palette-warning-main")),ue(N.AppBar,"defaultBg",U("palette-grey-900")),ue(N.AppBar,"darkBg",U("palette-background-paper")),ue(N.AppBar,"darkColor",U("palette-text-primary")),ue(N.Avatar,"defaultBg",U("palette-grey-600")),ue(N.Button,"inheritContainedBg",U("palette-grey-800")),ue(N.Button,"inheritContainedHoverBg",U("palette-grey-700")),ue(N.Chip,"defaultBorder",U("palette-grey-700")),ue(N.Chip,"defaultAvatarColor",U("palette-grey-300")),ue(N.Chip,"defaultIconColor",U("palette-grey-300")),ue(N.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ue(N.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ue(N.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ue(N.LinearProgress,"primaryBg",wt(N.primary.main,.5)),ue(N.LinearProgress,"secondaryBg",wt(N.secondary.main,.5)),ue(N.LinearProgress,"errorBg",wt(N.error.main,.5)),ue(N.LinearProgress,"infoBg",wt(N.info.main,.5)),ue(N.LinearProgress,"successBg",wt(N.success.main,.5)),ue(N.LinearProgress,"warningBg",wt(N.warning.main,.5)),ue(N.Skeleton,"bg",`rgba(${U("palette-text-primaryChannel")} / 0.13)`),ue(N.Slider,"primaryTrack",wt(N.primary.main,.5)),ue(N.Slider,"secondaryTrack",wt(N.secondary.main,.5)),ue(N.Slider,"errorTrack",wt(N.error.main,.5)),ue(N.Slider,"infoTrack",wt(N.info.main,.5)),ue(N.Slider,"successTrack",wt(N.success.main,.5)),ue(N.Slider,"warningTrack",wt(N.warning.main,.5));const V=Yd(N.background.default,.98);ue(N.SnackbarContent,"bg",V),ue(N.SnackbarContent,"color",Va(()=>N.getContrastText(V))),ue(N.SpeedDialAction,"fabHoverBg",Yd(N.background.paper,.15)),ue(N.StepConnector,"border",U("palette-grey-600")),ue(N.StepContent,"border",U("palette-grey-600")),ue(N.Switch,"defaultColor",U("palette-grey-300")),ue(N.Switch,"defaultDisabledColor",U("palette-grey-600")),ue(N.Switch,"primaryDisabledColor",wt(N.primary.main,.55)),ue(N.Switch,"secondaryDisabledColor",wt(N.secondary.main,.55)),ue(N.Switch,"errorDisabledColor",wt(N.error.main,.55)),ue(N.Switch,"infoDisabledColor",wt(N.info.main,.55)),ue(N.Switch,"successDisabledColor",wt(N.success.main,.55)),ue(N.Switch,"warningDisabledColor",wt(N.warning.main,.55)),ue(N.TableCell,"border",wt(qd(N.divider,1),.68)),ue(N.Tooltip,"bg",qd(N.grey[700],.92))}Di(N.background,"default"),Di(N.background,"paper"),Di(N.common,"background"),Di(N.common,"onBackground"),Di(N,"divider"),Object.keys(N).forEach(V=>{const ee=N[V];V!=="tonalOffset"&&ee&&typeof ee=="object"&&(ee.main&&ue(N[V],"mainChannel",Mc(Lc(ee.main))),ee.light&&ue(N[V],"lightChannel",Mc(Lc(ee.light))),ee.dark&&ue(N[V],"darkChannel",Mc(Lc(ee.dark))),ee.contrastText&&ue(N[V],"contrastTextChannel",Mc(Lc(ee.contrastText))),V==="text"&&(Di(N[V],"primary"),Di(N[V],"secondary")),V==="action"&&(ee.active&&Di(N[V],"active"),ee.selected&&Di(N[V],"selected")))})}),R=n.reduce((k,N)=>Kr(k,N),R);const C={prefix:i,disableCssColorScheme:a,shouldSkipGeneratingVar:o,getSelector:U6(R)},{vars:O,generateThemeVars:D,generateStyleSheets:P}=f6(R,C);return R.vars=O,Object.entries(R.colorSchemes[R.defaultColorScheme]).forEach(([k,N])=>{R[k]=N}),R.generateThemeVars=D,R.generateStyleSheets=P,R.generateSpacing=function(){return sO(f.spacing,l2(this))},R.getColorSchemeSelector=d6(u),R.spacing=R.generateSpacing(),R.shouldSkipGeneratingVar=o,R.unstable_sxConfig={...Km,...f==null?void 0:f.unstable_sxConfig},R.unstable_sx=function(N){return bf({sx:N,theme:this})},R.toRuntimeSource=yO,R}function Bw(e,n,t){e.colorSchemes&&t&&(e.colorSchemes[n]={...t!==!0&&t,palette:g2({...t===!0?{}:t.palette,mode:n})})}function y2(e={},...n){const{palette:t,cssVariables:r=!1,colorSchemes:a=t?void 0:{light:!0},defaultColorScheme:i=t==null?void 0:t.mode,...o}=e,u=i||"light",c=a==null?void 0:a[u],f={...a,...t?{[u]:{...typeof c!="boolean"&&c,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in e))return W1(e,...n);let h=t;"palette"in e||f[u]&&(f[u]!==!0?h=f[u].palette:u==="dark"&&(h={mode:"dark"}));const p=W1({...e,palette:h},...n);return p.defaultColorScheme=u,p.colorSchemes=f,p.palette.mode==="light"&&(p.colorSchemes.light={...f.light!==!0&&f.light,palette:p.palette},Bw(p,"dark",f.dark)),p.palette.mode==="dark"&&(p.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:p.palette},Bw(p,"light",f.light)),p}return!t&&!("light"in f)&&u==="light"&&(f.light=!0),H6({...o,colorSchemes:f,defaultColorScheme:u,...typeof r!="boolean"&&r},...n)}const z6=y2();function Hg({theme:e,...n}){const t=Is in e?e[Is]:void 0;return nt.jsx(hO,{...n,themeId:t?Is:void 0,theme:t||e})}const $d={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:W6}=s6({themeId:Is,theme:()=>y2({cssVariables:!0}),colorSchemeStorageKey:$d.colorSchemeStorageKey,modeStorageKey:$d.modeStorageKey,defaultColorScheme:{light:$d.defaultLightColorScheme,dark:$d.defaultDarkColorScheme},resolveTheme:e=>{const n={...e,typography:gO(e.palette,e.typography)};return n.unstable_sx=function(r){return bf({sx:r,theme:this})},n}}),K6=W6;function q6({theme:e,...n}){if(typeof e=="function")return nt.jsx(Hg,{theme:e,...n});const t=Is in e?e[Is]:e;return"colorSchemes"in t?nt.jsx(K6,{theme:e,...n}):"vars"in t?nt.jsx(Hg,{theme:e,...n}):nt.jsx(Hg,{theme:{...e,vars:null},...n})}function Y6(e){return nt.jsx(BF,{...e,defaultTheme:z6,themeId:Is})}function EO(e){return function(t){return nt.jsx(Y6,{styles:typeof e=="function"?r=>e({theme:r,...t}):e})}}function $6(e){return JF(e)}const K1=typeof EO({})=="function",j6=(e,n)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...n&&!e.vars&&{colorScheme:e.palette.mode}}),X6=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),_O=(e,n=!1)=>{var i,o;const t={};n&&e.colorSchemes&&typeof e.getColorSchemeSelector=="function"&&Object.entries(e.colorSchemes).forEach(([u,c])=>{var h,p;const f=e.getColorSchemeSelector(u);f.startsWith("@")?t[f]={":root":{colorScheme:(h=c.palette)==null?void 0:h.mode}}:t[f.replace(/\s*&/,"")]={colorScheme:(p=c.palette)==null?void 0:p.mode}});let r={html:j6(e,n),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...X6(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...t};const a=(o=(i=e.components)==null?void 0:i.MuiCssBaseline)==null?void 0:o.styleOverrides;return a&&(r=[r,a]),r},yh="mui-ecs",Z6=e=>{const n=_O(e,!1),t=Array.isArray(n)?n[0]:n;return!e.vars&&t&&(t.html[`:root:has(${yh})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([r,a])=>{var o,u;const i=e.getColorSchemeSelector(r);i.startsWith("@")?t[i]={[`:root:not(:has(.${yh}))`]:{colorScheme:(o=a.palette)==null?void 0:o.mode}}:t[i.replace(/\s*&/,"")]={[`&:not(:has(.${yh}))`]:{colorScheme:(u=a.palette)==null?void 0:u.mode}}}),n},Q6=EO(K1?({theme:e,enableColorScheme:n})=>_O(e,n):({theme:e})=>Z6(e));function J6(e){const n=$6({props:e,name:"MuiCssBaseline"}),{children:t,enableColorScheme:r=!1}=n;return nt.jsxs(J.Fragment,{children:[K1&&nt.jsx(Q6,{enableColorScheme:r}),!K1&&!r&&nt.jsx("span",{className:yh,style:{display:"none"}}),t]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var AO=function(e,n){return(AO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])})(e,n)};function Da(e,n){function t(){this.constructor=e}AO(e,n),e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}function Ie(e,n,t,r){return new(t||(t=Promise))(function(a,i){function o(f){try{c(r.next(f))}catch(h){i(h)}}function u(f){try{c(r.throw(f))}catch(h){i(h)}}function c(f){f.done?a(f.value):new t(function(h){h(f.value)}).then(o,u)}c((r=r.apply(e,[])).next())})}function Re(e,n){var t,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function u(c){return function(f){return function(h){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(a=2&h[0]?r.return:h[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,h[1])).done)return a;switch(r=0,a&&(h=[2&h[0],a.value]),h[0]){case 0:case 1:a=h;break;case 4:return o.label++,{value:h[1],done:!1};case 5:o.label++,r=h[1],h=[0];continue;case 7:h=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){o=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){o.label=h[1];break}if(h[0]===6&&o.label<a[1]){o.label=a[1],a=h;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(h);break}a[2]&&o.ops.pop(),o.trys.pop();continue}h=n.call(e,o)}catch(p){h=[6,p],r=0}finally{t=a=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,f])}}}var e5=function(){function e(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(n,t){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=n,this.platform=t},e.prototype.registerFlag=function(n,t,r){if(this.flagRegistry[n]={evaluationFn:t,setHook:r},this.urlFlags[n]!=null){var a=this.urlFlags[n];console.warn("Setting feature override from URL "+n+": "+a+"."),this.set(n,a)}},e.prototype.get=function(n){return n in this.flags?this.flags[n]:(this.flags[n]=this.evaluateFlag(n),this.flags[n])},e.prototype.getNumber=function(n){return this.get(n)},e.prototype.getBool=function(n){return this.get(n)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(n,t){if(this.flagRegistry[n]==null)throw new Error("Cannot set flag "+n+" as it has not been registered.");this.flags[n]=t,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(t)},e.prototype.evaluateFlag=function(n){if(this.flagRegistry[n]==null)throw new Error("Cannot evaluate flag '"+n+"': no evaluation function found.");return this.flagRegistry[n].evaluationFn()},e.prototype.setFlags=function(n){this.flags=Object.assign({},n)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var n=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var t,r,a=(t=this.global.location.search,r={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];return t5(r,o[0],o[1]),o.join("=")}),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach(function(i){var o=i.split(":"),u=o[0],c=o[1];n.urlFlags[u]=function(f,h){if((h=h.toLowerCase())==="true"||h==="false")return h==="true";if(""+ +h===h)return+h;throw new Error("Could not parse value flag value "+h+" for flag "+f+".")}(u,c)})}},e}();function t5(e,n,t){e[decodeURIComponent(n)]=decodeURIComponent(t||"")}function le(){return wO}var wO=null,Qp=new Map,q1=new Map;function IO(e,n){var t=CO(e,n);return Qp.get(t)}function n5(e){return q1.get(e)}function Uw(e){for(var n=Qp.entries(),t=[];;){var r=n.next(),a=r.done,i=r.value;if(a)break;var o=i[0],u=i[1];o.split("_")[0]===e&&t.push(u)}return t}function RO(e){var n=e.kernelName,t=e.backendName,r=CO(n,t);if(Qp.has(r))throw new Error("The kernel '"+n+"' for backend '"+t+"' is already registered");Qp.set(r,e)}function r5(e){var n=e.kernelName;q1.has(n)&&console.warn("Overriding the gradient for '"+n+"'"),q1.set(n,e)}function CO(e,n){return n+"_"+e}function Y1(e,n,t){return Math.max(e,Math.min(n,t))}function NO(e){return e%2==0?e:e+1}function a5(e){for(var n=0,t=0;t<e.length;t++)n+=e[t];return n}function F(e,n){if(!e)throw new Error(typeof n=="string"?n:n())}function vt(e,n,t){t===void 0&&(t=""),F(On(e,n),function(){return t+" Shapes "+e+" and "+n+" must match"})}function El(e){F(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function ul(e,n,t){if(n===void 0&&(n=[]),t===void 0&&(t=!1),n==null&&(n=[]),Array.isArray(e)||ni(e)&&!t)for(var r=0;r<e.length;++r)ul(e[r],n,t);else n.push(e);return n}function Ne(e){if(e.length===0)return 1;for(var n=e[0],t=1;t<e.length;t++)n*=e[t];return n}function On(e,n){if(e===n)return!0;if(e==null||n==null||e.length!==n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function jt(e){return e%1==0}function i5(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var n=Math.exp(2*e);return(n-1)/(n+1)}function $1(e){var n=Math.ceil(Math.sqrt(e));return[n,Math.ceil(e/n)]}function ju(e,n){return n<=e.length?e:e+" ".repeat(n-e.length)}function Fw(e,n,t){return n===void 0&&(n=function(r){return 0}),new Promise(function(r,a){var i=0,o=function(){if(e())r();else{i++;var u=n(i);t!=null&&i>=t?a():setTimeout(o,u)}};o()})}function o5(e,n){for(var t=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)t*=e[a];else if(e[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(r===-1){if(n>0&&n!==t)throw Error("Size("+n+") must match the product of shape "+e);return e}if(t===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(n%t!=0)throw Error("The implicit shape can't be a fractional number. Got "+n+" / "+t);var i=e.slice();return i[r]=n/t,i}function Sn(e,n){var t=n.length;return F((e=e==null?n.map(function(r,a){return a}):[].concat(e)).every(function(r){return r>=-t&&r<t}),function(){return"All values in axis param must be in range [-"+t+", "+t+") but got axis "+e}),F(e.every(function(r){return jt(r)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(r){return r<0?t+r:r})}function Es(e,n){for(var t=[],r=[],a=n!=null&&Array.isArray(n)&&n.length===0,i=n==null||a?null:Sn(n,e).sort(),o=0,u=0;u<e.length;++u){if(i!=null){if(i[o]===u&&e[u]!==1)throw new Error("Can't squeeze axis "+u+" since its dim '"+e[u]+"' is not 1");(i[o]==null||i[o]>u)&&e[u]===1&&(t.push(e[u]),r.push(u)),i[o]<=u&&o++}e[u]!==1&&(t.push(e[u]),r.push(u))}return{newShape:t,keptDims:r}}function ef(e,n){var t=null;if(e==null||e==="float32")t=new Float32Array(n);else if(e==="int32")t=new Int32Array(n);else{if(e!=="bool")throw new Error("Unknown data type "+e);t=new Uint8Array(n)}return t}function Jp(e,n){var t=null;if(e==null||e==="float32")t=new Float32Array(n);else if(e==="int32")t=new Int32Array(n);else if(e==="bool")t=new Uint8Array(n);else{if(e!=="string")throw new Error("Unknown data type "+e);t=new Array(n)}return t}function s5(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+n+" being uploaded contains "+r+".")}}function u5(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function l5(e,n){return n!=="complex64"&&(n!=="float32"||e==="complex64")&&(n!=="int32"||e==="float32"||e==="complex64")&&(n!=="bool"||e!=="bool")}function ni(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function TO(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function c5(e){if(e==null)return 0;var n=0;return e.forEach(function(t){return n+=t.length}),n}function b2(e){return typeof e=="string"||e instanceof String}function f5(e){return typeof e=="boolean"}function d5(e){return typeof e=="number"}function Sf(e){return Array.isArray(e)?Sf(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":d5(e)?"float32":b2(e)?"string":f5(e)?"bool":"float32"}function j1(e){return!!(e&&e.constructor&&e.call&&e.apply)}function X1(e,n){for(var t=n;t<e;++t)if(e%t==0)return t;return e}function ri(e){var n=e.length;if(n<2)return[];var t=new Array(n-1);t[n-2]=e[n-1];for(var r=n-3;r>=0;--r)t[r]=t[r+1]*e[r+1];return t}function OO(e,n,t){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ul(e)),t&&s5(e,n),function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"}(e,n))return e;if(n==null||n==="float32"||n==="complex64")return new Float32Array(e);if(n==="int32")return new Int32Array(e);if(n==="bool"){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)Math.round(e[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+n)}function Vw(e,n){if(e.length===0)return n[0];var t=e.reduce(function(r,a){return r*a});if(t===0)return[];if(t!==n.length)throw new Error("["+e+"] does not match the input size.");return function r(a,i,o){var u=new Array;if(i.length===1)for(var c=i[0],f=0;f<c;f++)u[f]=o[a+f];else{c=i[0];var h=i.slice(1),p=h.reduce(function(m,g){return m*g});for(f=0;f<c;f++)u[f]=r(a+f*p,h,o)}return u}(0,e,n)}function kO(e,n){for(var t=Ef(e,n),r=0;r<t.length;r++)t[r]=1;return t}function Ef(e,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(e);if(n==="int32")return new Int32Array(e);if(n==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+n)}function Ya(){return le().platform.now()}function xO(e){e.forEach(function(n){F(Number.isInteger(n)&&n>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function h5(e,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",le().platform.encode(e,n)}function em(e,n){return n===void 0&&(n="utf-8"),n=n||"utf-8",le().platform.decode(e,n)}function Gw(e,n,t){if(n===0)return 0;if(n===1)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=t[a]*e[a];return r}function p5(e,n,t){if(n===0)return[];if(n===1)return[e];for(var r=new Array(n),a=0;a<r.length-1;++a)r[a]=Math.floor(e/t[a]),e-=r[a]*t[a];return r[r.length-1]=e,r}var m5=function(){function e(n,t){this.backendTimer=n,this.logger=t,t==null&&(this.logger=new v5)}return e.prototype.profileKernel=function(n,t,r){var a,i=this,o=this.backendTimer.time(function(){a=r()});return a.forEach(function(u){u.data().then(function(c){(function(f,h,p){if(h!=="float32")return!1;for(var m=0;m<f.length;m++){var g=f[m];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+p+"'"),!0}})(c,u.dtype,n),o.then(function(f){var h="";f.getExtraProfileInfo!=null&&(h=f.getExtraProfileInfo()),i.logger.logKernelProfile(n,u,c,f.kernelMs,t,h)})})}),a},e}(),v5=function(){function e(){}return e.prototype.logKernelProfile=function(n,t,r,a,i,o){var u=typeof a=="number"?ju(a+"ms",9):a.error,c=ju(n,25),f=t.rank,h=t.size,p=ju(t.shape.toString(),14),m="";for(var g in i){var y=i[g].shape||t.shape,b=y.length;m+=g+": "+b+"D "+(b>0?y:"")+" "}console.log("%c"+c+"	%c"+u+"	%c"+f+"D "+p+"	%c"+h+"	%c"+m+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),Hw=20,Nc=3,zg=7;function g5(e,n,t,r){var a=ri(n),i=function(f,h,p,m){var g=Ne(h),y=m[m.length-1],b=new Array(y).fill(0),E=h.length,_=p==="complex64"?Oc(f):f;if(E>1)for(var w=0;w<g/y;w++)for(var I=w*y,R=0;R<y;R++)b[R]=Math.max(b[R],Tc(_[I+R],0,p).length);return b}(e,n,t,a),o=n.length,u=function f(h,p,m,g,y,b){b===void 0&&(b=!0);var E=m==="complex64"?2:1,_=p[0],w=p.length;if(w===0)return m==="complex64"?[Tc(Oc(h)[0],0,m)]:m==="bool"?[DO(h[0])]:[h[0].toString()];if(w===1){if(_>Hw){var I=Nc*E,R=Array.from(h.slice(0,I)),C=Array.from(h.slice((_-Nc)*E,_*E));return m==="complex64"&&(R=Oc(R),C=Oc(C)),["["+R.map(function(ne,z){return Tc(ne,y[z],m)}).join(", ")+", ..., "+C.map(function(ne,z){return Tc(ne,y[_-Nc+z],m)}).join(", ")+"]"]}return["["+(m==="complex64"?Oc(h):Array.from(h)).map(function(ne,z){return Tc(ne,y[z],m)}).join(", ")+"]"]}var O=p.slice(1),D=g.slice(1),P=g[0]*E,k=[];if(_>Hw){for(var N=0;N<Nc;N++){var U=(V=N*P)+P;k.push.apply(k,f(h.slice(V,U),O,m,D,y,!1))}for(k.push("..."),N=_-Nc;N<_;N++)U=(V=N*P)+P,k.push.apply(k,f(h.slice(V,U),O,m,D,y,N===_-1))}else for(N=0;N<_;N++){var V;U=(V=N*P)+P,k.push.apply(k,f(h.slice(V,U),O,m,D,y,N===_-1))}var ee=w===2?",":"";for(k[0]="["+k[0]+ee,N=1;N<k.length-1;N++)k[N]=" "+k[N]+ee;var re=`,
`;for(N=2;N<w;N++)re+=`
`;return k[k.length-1]=" "+k[k.length-1]+"]"+(b?"":re),k}(e,n,t,a,i),c=["Tensor"];return r&&(c.push("  dtype: "+t),c.push("  rank: "+o),c.push("  shape: ["+n+"]"),c.push("  values:")),c.push(u.map(function(f){return"    "+f}).join(`
`)),c.join(`
`)}function Tc(e,n,t){return ju(Array.isArray(e)?parseFloat(e[0].toFixed(zg))+" + "+parseFloat(e[1].toFixed(zg))+"j":b2(e)?"'"+e+"'":t==="bool"?DO(e):parseFloat(e.toFixed(zg)).toString(),n)}function DO(e){return e===0?"false":"true"}function Oc(e){for(var n=[],t=0;t<e.length;t+=2)n.push([e[t],e[t+1]]);return n}var tf=function(){function e(n,t,r){var a=this;if(this.dtype=t,this.shape=n.slice(),this.size=Ne(n),r!=null){var i=r.length;F(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+a.size+"'."})}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Jp(t,this.size),this.strides=ri(n)}return e.prototype.set=function(n){for(var t=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),F(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+t.rank+")"});var i=this.locToIndex(r);this.values[i]=n},e.prototype.get=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n.length===0&&(n=[0]);for(var r=0,a=0,i=n;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var u="Requested out of range element at "+n+".   Buffer shape="+this.shape;throw new Error(u)}r++}for(var c=n[n.length-1],f=0;f<n.length-1;++f)c+=this.strides[f]*n[f];return this.values[c]},e.prototype.locToIndex=function(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];for(var t=n[n.length-1],r=0;r<n.length-1;++r)t+=this.strides[r]*n[r];return t},e.prototype.indexToLoc=function(n){if(this.rank===0)return[];if(this.rank===1)return[n];for(var t=new Array(this.shape.length),r=0;r<t.length-1;++r)t[r]=Math.floor(n/this.strides[r]),n-=t[r]*this.strides[r];return t[t.length-1]=n,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return $a().makeTensor(this.values,this.shape,this.dtype)},e}(),$a=null,se=null,PO=null,Ut=function(){function e(n,t,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=t||"float32",this.size=Ne(n),this.strides=ri(n),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),F(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(n,t){return this.throwIfDisposed(),this.reshape([n,t])},e.prototype.as3D=function(n,t,r){return this.throwIfDisposed(),this.reshape([n,t,r])},e.prototype.as4D=function(n,t,r,a){return this.throwIfDisposed(),this.reshape([n,t,r,a])},e.prototype.as5D=function(n,t,r,a,i){return this.throwIfDisposed(),this.reshape([n,t,r,a,i])},e.prototype.asType=function(n){return this.throwIfDisposed(),se.cast(this,n)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Ie(this,void 0,void 0,function(){var n;return Re(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return n=t.sent(),[2,se.buffer(this.shape,this.dtype,n)]}})})},e.prototype.bufferSync=function(){return se.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Ie(this,void 0,void 0,function(){var n;return Re(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return n=t.sent(),[2,Vw(this.shape,n)]}})})},e.prototype.arraySync=function(){return Vw(this.shape,this.dataSync())},e.prototype.data=function(){return Ie(this,void 0,void 0,function(){var n,t;return Re(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),n=$a().read(this.dataId),this.dtype!=="string"?[3,2]:[4,n];case 1:t=r.sent();try{return[2,t.map(function(a){return em(a)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,n]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var n=$a().readSync(this.dataId);if(this.dtype==="string")try{return n.map(function(t){return em(t)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n},e.prototype.bytes=function(){return Ie(this,void 0,void 0,function(){var n;return Re(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,$a().read(this.dataId)];case 1:return n=t.sent(),this.dtype==="string"?[2,n]:[2,new Uint8Array(n.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||($a().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(n){return n===void 0&&(n=!1),se.print(this,n)},e.prototype.reshape=function(n){return this.throwIfDisposed(),se.reshape(this,n)},e.prototype.reshapeAs=function(n){return this.throwIfDisposed(),this.reshape(n.shape)},e.prototype.expandDims=function(n){return n===void 0&&(n=0),se.expandDims(this,n)},e.prototype.cumsum=function(n,t,r){return n===void 0&&(n=0),t===void 0&&(t=!1),r===void 0&&(r=!1),se.cumsum(this,n,t,r)},e.prototype.squeeze=function(n){return this.throwIfDisposed(),se.squeeze(this,n)},e.prototype.clone=function(){return this.throwIfDisposed(),se.clone(this)},e.prototype.oneHot=function(n,t,r){return this.throwIfDisposed(),se.oneHot(this,n,t,r)},e.prototype.toString=function(n){return n===void 0&&(n=!1),g5(this.dataSync(),this.shape,this.dtype,n)},e.prototype.tile=function(n){return this.throwIfDisposed(),se.tile(this,n)},e.prototype.gather=function(n,t){return t===void 0&&(t=0),this.throwIfDisposed(),se.gather(this,n,t)},e.prototype.matMul=function(n,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!1),this.throwIfDisposed(),se.matMul(this,n,t,r)},e.prototype.dot=function(n){return this.throwIfDisposed(),se.dot(this,n)},e.prototype.norm=function(n,t,r){return n===void 0&&(n="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),se.norm(this,n,t,r)},e.prototype.slice=function(n,t){return this.throwIfDisposed(),se.slice(this,n,t)},e.prototype.reverse=function(n){return this.throwIfDisposed(),se.reverse(this,n)},e.prototype.concat=function(n,t){return t===void 0&&(t=0),this.throwIfDisposed(),n instanceof e&&(n=[n]),se.concat([this].concat(n),t)},e.prototype.split=function(n,t){return t===void 0&&(t=0),this.throwIfDisposed(),se.split(this,n,t)},e.prototype.stack=function(n,t){return t===void 0&&(t=0),se.stack([this,n],t)},e.prototype.unstack=function(n){return n===void 0&&(n=0),se.unstack(this,n)},e.prototype.pad=function(n,t){return t===void 0&&(t=0),se.pad(this,n,t)},e.prototype.batchNormalization=function(n,t,r,a,i){return r===void 0&&(r=.001),PO("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(n,t,i,a,r)},e.prototype.batchNorm=function(n,t,r,a,i){return i===void 0&&(i=.001),this.throwIfDisposed(),se.batchNorm(this,n,t,r,a,i)},e.prototype.all=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),se.all(this,n,t)},e.prototype.any=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),se.any(this,n,t)},e.prototype.logSumExp=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),se.logSumExp(this,n,t)},e.prototype.sum=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),se.sum(this,n,t)},e.prototype.prod=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),se.prod(this,n,t)},e.prototype.mean=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),se.mean(this,n,t)},e.prototype.min=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),se.min(this,n,t)},e.prototype.max=function(n,t){return n===void 0&&(n=null),t===void 0&&(t=!1),this.throwIfDisposed(),se.max(this,n,t)},e.prototype.argMin=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),se.argMin(this,n)},e.prototype.argMax=function(n){return n===void 0&&(n=null),this.throwIfDisposed(),se.argMax(this,n)},e.prototype.cast=function(n){return this.throwIfDisposed(),se.cast(this,n)},e.prototype.add=function(n){return this.throwIfDisposed(),se.add(this,n)},e.prototype.addStrict=function(n){return this.throwIfDisposed(),se.addStrict(this,n)},e.prototype.atan2=function(n){return this.throwIfDisposed(),se.atan2(this,n)},e.prototype.sub=function(n){return this.throwIfDisposed(),se.sub(this,n)},e.prototype.subStrict=function(n){return this.throwIfDisposed(),se.subStrict(this,n)},e.prototype.pow=function(n){return this.throwIfDisposed(),se.pow(this,n)},e.prototype.powStrict=function(n){return this.throwIfDisposed(),se.powStrict(this,n)},e.prototype.mul=function(n){return this.throwIfDisposed(),se.mul(this,n)},e.prototype.mulStrict=function(n){return this.throwIfDisposed(),se.mulStrict(this,n)},e.prototype.div=function(n){return this.throwIfDisposed(),se.div(this,n)},e.prototype.divNoNan=function(n){return this.throwIfDisposed(),se.divNoNan(this,n)},e.prototype.floorDiv=function(n){return this.throwIfDisposed(),se.floorDiv(this,n)},e.prototype.divStrict=function(n){return this.throwIfDisposed(),se.divStrict(this,n)},e.prototype.minimum=function(n){return this.throwIfDisposed(),se.minimum(this,n)},e.prototype.minimumStrict=function(n){return this.throwIfDisposed(),se.minimumStrict(this,n)},e.prototype.maximum=function(n){return this.throwIfDisposed(),se.maximum(this,n)},e.prototype.maximumStrict=function(n){return this.throwIfDisposed(),se.maximumStrict(this,n)},e.prototype.mod=function(n){return this.throwIfDisposed(),se.mod(this,n)},e.prototype.modStrict=function(n){return this.throwIfDisposed(),se.modStrict(this,n)},e.prototype.squaredDifferenceStrict=function(n){return this.throwIfDisposed(),se.squaredDifferenceStrict(this,n)},e.prototype.transpose=function(n){return this.throwIfDisposed(),se.transpose(this,n)},e.prototype.notEqual=function(n){return this.throwIfDisposed(),se.notEqual(this,n)},e.prototype.notEqualStrict=function(n){return this.throwIfDisposed(),se.notEqualStrict(this,n)},e.prototype.less=function(n){return this.throwIfDisposed(),se.less(this,n)},e.prototype.lessStrict=function(n){return this.throwIfDisposed(),se.lessStrict(this,n)},e.prototype.equal=function(n){return this.throwIfDisposed(),se.equal(this,n)},e.prototype.equalStrict=function(n){return this.throwIfDisposed(),se.equalStrict(this,n)},e.prototype.lessEqual=function(n){return this.throwIfDisposed(),se.lessEqual(this,n)},e.prototype.lessEqualStrict=function(n){return this.throwIfDisposed(),se.lessEqualStrict(this,n)},e.prototype.greater=function(n){return this.throwIfDisposed(),se.greater(this,n)},e.prototype.greaterStrict=function(n){return this.throwIfDisposed(),se.greaterStrict(this,n)},e.prototype.greaterEqual=function(n){return this.throwIfDisposed(),se.greaterEqual(this,n)},e.prototype.greaterEqualStrict=function(n){return this.throwIfDisposed(),se.greaterEqualStrict(this,n)},e.prototype.logicalAnd=function(n){return this.throwIfDisposed(),se.logicalAnd(this,n)},e.prototype.logicalOr=function(n){return this.throwIfDisposed(),se.logicalOr(this,n)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),se.logicalNot(this)},e.prototype.logicalXor=function(n){return this.throwIfDisposed(),se.logicalXor(this,n)},e.prototype.where=function(n,t){return this.throwIfDisposed(),se.where(n,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),se.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),se.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),se.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),se.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),se.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),se.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),se.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),se.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),se.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),se.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),se.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),se.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),se.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),se.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),se.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),se.abs(this)},e.prototype.clipByValue=function(n,t){return this.throwIfDisposed(),se.clipByValue(this,n,t)},e.prototype.relu=function(){return this.throwIfDisposed(),se.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),se.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),se.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),se.selu(this)},e.prototype.leakyRelu=function(n){return n===void 0&&(n=.2),this.throwIfDisposed(),se.leakyRelu(this,n)},e.prototype.prelu=function(n){return this.throwIfDisposed(),se.prelu(this,n)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),se.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),se.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),se.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),se.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),se.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),se.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),se.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),se.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),se.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),se.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),se.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),se.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),se.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),se.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),se.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),se.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),se.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),se.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),se.round(this)},e.prototype.step=function(n){return n===void 0&&(n=0),this.throwIfDisposed(),se.step(this,n)},e.prototype.softmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),se.softmax(this,n)},e.prototype.logSoftmax=function(n){return n===void 0&&(n=-1),this.throwIfDisposed(),se.logSoftmax(this,n)},e.prototype.resizeBilinear=function(n,t){return t===void 0&&(t=!1),this.throwIfDisposed(),se.image.resizeBilinear(this,n,t)},e.prototype.resizeNearestNeighbor=function(n,t){return t===void 0&&(t=!1),this.throwIfDisposed(),se.image.resizeNearestNeighbor(this,n,t)},e.prototype.conv1d=function(n,t,r,a,i,o){return a===void 0&&(a="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),se.conv1d(this,n,t,r,a,i,o)},e.prototype.conv2d=function(n,t,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),se.conv2d(this,n,t,r,a,i,o)},e.prototype.conv2dTranspose=function(n,t,r,a,i){return this.throwIfDisposed(),se.conv2dTranspose(this,n,t,r,a,i)},e.prototype.depthwiseConv2D=function(n,t,r,a,i,o){return a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),se.depthwiseConv2d(this,n,t,r,a,i,o)},e.prototype.separableConv2d=function(n,t,r,a,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),se.separableConv2d(this,n,t,r,a,i,o)},e.prototype.avgPool=function(n,t,r,a){return this.throwIfDisposed(),se.avgPool(this,n,t,r,a)},e.prototype.maxPool=function(n,t,r,a){return this.throwIfDisposed(),se.maxPool(this,n,t,r,a)},e.prototype.localResponseNormalization=function(n,t,r,a){return n===void 0&&(n=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5),se.localResponseNormalization(this,n,t,r,a)},e.prototype.pool=function(n,t,r,a,i){return this.throwIfDisposed(),se.pool(this,n,t,r,a,i)},e.prototype.variable=function(n,t,r){return n===void 0&&(n=!0),this.throwIfDisposed(),$a().makeVariable(this,n,t,r)},e.prototype.unsortedSegmentSum=function(n,t){return this.throwIfDisposed(),se.unsortedSegmentSum(this,n,t)},e.prototype.batchToSpaceND=function(n,t){return this.throwIfDisposed(),se.batchToSpaceND(this,n,t)},e.prototype.spaceToBatchND=function(n,t){return this.throwIfDisposed(),se.spaceToBatchND(this,n,t)},e.prototype.topk=function(n,t){return n===void 0&&(n=1),t===void 0&&(t=!0),this.throwIfDisposed(),se.topk(this,n,t)},e.prototype.stridedSlice=function(n,t,r,a,i,o,u,c){return a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),u===void 0&&(u=0),c===void 0&&(c=0),this.throwIfDisposed(),se.stridedSlice(this,n,t,r,a,i,o,u,c)},e.prototype.depthToSpace=function(n,t){return this.throwIfDisposed(),se.depthToSpace(this,n,t)},e.prototype.fft=function(){return this.throwIfDisposed(),se.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),se.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),se.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),se.spectral.irfft(this)},e}();Object.defineProperty(Ut,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var zw,Z1,Q1,J1,ey,ll=function(e){function n(t,r,a,i){var o=e.call(this,t.shape,t.dtype,t.dataId,i)||this;return o.trainable=r,o.name=a,o}return Da(n,e),n.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!On(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");$a().disposeTensor(this),this.dataId=t.dataId,$a().incRef(this,null)},n.prototype.dispose=function(){$a().disposeVariable(this),this.isDisposedInternal=!0},n}(Ut);Object.defineProperty(ll,Symbol.hasInstance,{value:function(e){return e instanceof Ut&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(zw||(zw={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Z1||(Z1={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Q1||(Q1={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(J1||(J1={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(ey||(ey={}));var y5={float32:J1,int32:Z1,bool:Q1,complex64:ey};function Fn(e,n){if(e==="string"||n==="string"){if(e==="string"&&n==="string")return"string";throw new Error("Can not upcast "+e+" with "+n)}return y5[e][n]}function Wg(e){return Fn(e,"int32")}function Gt(e,n){if(e.dtype===n.dtype)return[e,n];var t=Fn(e.dtype,n.dtype);return[e.cast(t),n.cast(t)]}function b5(e,n){F(e.dtype===n.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+n.dtype+") input must match"})}function MO(e){var n=[];return function t(r,a,i){if(r!=null){if(r instanceof Ut)return void a.push(r);if(o=r,!(!Array.isArray(o)&&typeof o!="object")){var o,u=r;for(var c in u){var f=u[c];i.has(f)||(i.add(f),t(f,a,i))}}}}(e,n,new Set),n}var Kg,Ww=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var n in this.registeredVariables)this.registeredVariables[n].dispose()},e}(),S5=function(){function e(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Ww}return e.prototype.ready=function(){return Ie(this,void 0,void 0,function(){var n,t,r;return Re(this,function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];n=this.getSortedBackends(),t=0,a.label=1;case 1:return t<n.length?(r=n[t],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var n=this.initializeBackendsAndReturnBest(),t=n.name;if(n.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(n){return!(n in this.registry)&&(!(n in this.registryFactory)||this.initializeBackend(n).asyncInit)?null:this.registry[n]},e.prototype.findBackendFactory=function(n){return n in this.registryFactory?this.registryFactory[n].factory:null},e.prototype.registerBackend=function(n,t,r){return r===void 0&&(r=1),n in this.registryFactory?(console.warn(n+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[n]={factory:t,priority:r},!0)},e.prototype.setBackend=function(n){return Ie(this,void 0,void 0,function(){var t,r,a;return Re(this,function(i){switch(i.label){case 0:if(this.registryFactory[n]==null)throw new Error("Backend name '"+n+"' not found in registry");return this.backendName=n,this.registry[n]!=null?[3,4]:(this.backendInstance=null,t=this.initializeBackend(n),r=t.success,t.asyncInit?[4,r]:[3,2]);case 1:return a=i.sent(),[3,3];case 2:a=r,i.label=3;case 3:if(!a)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new m5(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var n=this;Uw(this.backendName).forEach(function(t){t.setupFunc!=null&&t.setupFunc(n.backendInstance)})},e.prototype.disposeRegisteredKernels=function(n){var t=this;Uw(n).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(t.registry[n])})},e.prototype.initializeBackend=function(n){var t=this,r=this.registryFactory[n];if(r==null)throw new Error("Cannot initialize backend "+n+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var i=++this.pendingBackendInitId,o=a.then(function(u){return!(i<t.pendingBackendInitId)&&(t.registry[n]=u,t.pendingBackendInit=null,!0)}).catch(function(u){return!(i<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+n+" failed"),console.warn(u.stack||u.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[n]=a,{success:!0,asyncInit:!1}}catch(u){return console.warn("Initialization of backend "+n+" failed"),console.warn(u.stack||u.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(n){if(!(n in this.registryFactory))throw new Error(n+" backend not found in registry");this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var n=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,r){return n.registryFactory[r].priority-n.registryFactory[t].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var n=this.getSortedBackends(),t=0;t<n.length;t++){var r=n[t],a=this.initializeBackend(r),i=a.success,o=a.asyncInit;if(o||i)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(n,t){var r=this.state.tensorInfo.get(t),a=r.backend,i=this.readSync(t);a.disposeData(t),r.backend=n,n.move(t,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(n,t){var r,a=this,i=null;if(t==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");t=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=n}return this.scopedRun(function(){return a.startScope(i)},function(){return a.endScope(r)},function(){return(r=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},e.prototype.scopedRun=function(n,t,r){n();try{var a=r();return t(),a}catch(i){throw t(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(n){var t=this.makeTensorFromDataId(n.dataId,n.shape,n.dtype),r={x:n};return this.addTapeNode(this.state.activeScope.name,r,[t],function(a){return{x:function(){return a.toFloat()}}},[]),t},e.prototype.runKernel=function(n,t,r,a,i){return this.runKernelFunc(null,t,null,n,r,a,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(n,t,r){var a=this.backend.numDataIds(),i=0;r.forEach(function(c){i+=c.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=a-t-i-o;if(u>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+u+" data ids) after running '"+n+"'")},e.prototype.runKernelFunc=function(n,t,r,a,i,o,u){var c,f=this;o===void 0&&(o=[]),u===void 0&&(u=[]);var h=[],p=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var m,g=function(w){p&&(h=w.map(function(I){return f.keep(f.clone(I))}))},y=this.state.numBytes,b=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var E,_=IO(a,this.backendName);return m=_!=null?function(){var w=f.backend.numDataIds();E=_.kernelFunc({inputs:t,attrs:i,backend:f.backend});var I=Array.isArray(E)?E:[E];f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,w,I);var R=I.map(function(O){var D=O.dataId,P=O.shape,k=O.dtype;return f.makeTensorFromDataId(D,P,k)}),C=R.filter(function(O,D){return u[D]});return g((o||[]).slice().concat(C)),R}:function(){var w=f.backend.numDataIds();E=f.tidy(function(){return n(f.backend,g)});var I=Array.isArray(E)?E:[E];return f.shouldCheckForMemLeaks()&&f.checkKernelForMemLeak(a,w,I),I},this.scopedRun(function(){return f.state.kernelDepth++},function(){return f.state.kernelDepth--},function(){c=f.ENV.getBool("DEBUG")?f.profiler.profileKernel(a,t,function(){return m()}):m()}),p&&this.addTapeNode(a,t,c,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-y,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-b,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(w){return t[w].shape}),outputShapes:c.map(function(w){return w.shape})}),Array.isArray(E)?c:c[0]},e.prototype.makeTensor=function(n,t,r,a){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var i=n;r==="string"&&b2(n[0])&&(i=n.map(function(h){return h5(h)}));var o=a.write(i,t,r),u=new Ut(t,r,o,this.nextTensorId());if(this.incRef(u,a),r==="string"){var c=this.state.tensorInfo.get(o),f=c5(i);this.state.numBytes+=f-c.bytes,c.bytes=f}return u},e.prototype.makeTensorFromDataId=function(n,t,r,a){var i=new Ut(t,r=r||"float32",n,this.nextTensorId());return this.incRef(i,a),i},e.prototype.makeVariable=function(n,t,r,a){t===void 0&&(t=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==n.dtype&&(n=n.asType(a));var i=new ll(n,t,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(n,t){var r=this.state.tensorInfo.has(n.dataId)?this.state.tensorInfo.get(n.dataId).refCount:0;if(this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(a=n.size*TO(n.dtype)),this.state.tensorInfo.set(n.dataId,{backend:t||this.backend,dtype:n.dtype,shape:n.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(n.dataId).refCount++,n instanceof ll||this.track(n)},e.prototype.disposeTensor=function(n){if(this.state.tensorInfo.has(n.dataId)){this.state.numTensors--,n.dtype==="string"&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(n.dataId);t.refCount<=1?(n.dtype!=="complex64"&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(n.dataId),this.state.tensorInfo.delete(n.dataId)):this.state.tensorInfo.get(n.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var n in this.state.registeredVariables){var t=this.state.registeredVariables[n];this.disposeVariable(t)}},e.prototype.disposeVariable=function(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]},e.prototype.memory=function(){var n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n},e.prototype.profile=function(n){return Ie(this,void 0,void 0,function(){var t,r;return Re(this,function(a){return this.state.profiling=!0,t=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(n,t,r,a,i){var o=this,u={id:this.state.nextTapeNodeId++,kernelName:n,inputs:t,outputs:r,saved:i},c=n5(n);c!=null&&(a=c.gradFunc),a!=null&&(u.gradient=function(f){return f=f.map(function(h,p){if(h==null){var m=r[p],g=Ef(m.size,m.dtype);return o.makeTensor(g,m.shape,m.dtype)}return h}),a(f.length>1?f:f[0],i)}),this.state.activeTape.push(u)},e.prototype.keep=function(n){return n.kept=!0,n},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(n){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(t.name=n),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(n){for(var t=this,r=MO(n),a=new Set(r.map(function(c){return c.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||a.has(o.id)||o.dispose()}var u=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(c){c.kept||c.scopeId!==u.id||t.track(c)})},e.prototype.gradients=function(n,t,r,a){var i=this;if(a===void 0&&(a=!1),F(t.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",n)});F(o instanceof Ut,function(){return"The result y returned by f() must be a tensor."});var u=function(c,f,h){for(var p={},m={},g=0;g<f.length;g++)p[f[g].id]=!0;for(g=0;g<c.length;g++){var y=(O=c[g]).inputs;for(var b in y){for(var E=y[b],_=!1,w=0;w<f.length;w++)if(p[E.id]){O.outputs.forEach(function(N){return p[N.id]=!0}),_=!0,m[O.id]=!0;break}if(_)break}}var I={};I[h.id]=!0;var R={};for(g=c.length-1;g>=0;g--)for(y=(O=c[g]).inputs,w=0;w<O.outputs.length;w++)if(I[O.outputs[w].id]){for(var b in y)I[y[b].id]=!0,R[O.id]=!0;break}var C=[];for(g=0;g<c.length;g++){var O;if(m[(O=c[g]).id]&&R[O.id]){var D={};for(var b in O.inputs){var P=O.inputs[b];p[P.id]&&(D[b]=P)}var k=Object.assign({},O);k.inputs=D,k.outputs=O.outputs,C.push(k)}}return C}(this.state.activeTape,t,o);if(!a&&u.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,f,h={};h[o.id]=r??(c=o.shape,f=kO(Ne(c),"float32"),W.makeTensor(f,c,"float32")),function(m,g,y){for(var b=function(_){var w=g[_],I=[];if(w.outputs.forEach(function(D){var P=m[D.id];P!=null?I.push(P):I.push(null)}),w.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+w.kernelName+".");var R=w.gradient(I),C=function(D){if(!(D in R))throw new Error("Cannot backprop through input "+D+". Available gradients found: "+Object.keys(R)+".");var P=y(function(){return R[D]()});if(P.dtype!=="float32")throw new Error("Error in gradient for op "+w.kernelName+". The gradient of input "+D+" must have 'float32' dtype, but has '"+P.dtype+"'");var k=w.inputs[D];if(!On(P.shape,k.shape))throw new Error("Error in gradient for op "+w.kernelName+". The gradient of input '"+D+"' has shape '"+P.shape+"', which does not match the shape of the input '"+k.shape+"'");if(m[k.id]==null)m[k.id]=P;else{var N=m[k.id];m[k.id]=N.add(P),N.dispose()}};for(var O in w.inputs)C(O)},E=g.length-1;E>=0;E--)b(E)}(h,u,function(m){return i.tidy(m)});var p=t.map(function(m){return h[m.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(m){for(var g=0,y=m.saved;g<y.length;g++)y[g].dispose()}),i.state.activeTape=null),{value:o,grads:p}})},e.prototype.customGrad=function(n){var t=this;return F(j1(n),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];F(a.every(function(u){return u instanceof Ut}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return a.forEach(function(u,c){o[c]=u}),t.runKernelFunc(function(u,c){return F((r=n.apply(void 0,a.concat([c]))).value instanceof Ut,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),F(j1(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},o,function(u,c){var f=r.gradFunc(u,c),h=Array.isArray(f)?f:[f];F(h.length===a.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),F(h.every(function(m){return m instanceof Ut}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var p={};return h.forEach(function(m,g){p[g]=function(){return m}}),p})}},e.prototype.readSync=function(n){return this.state.tensorInfo.get(n).backend.readSync(n)},e.prototype.read=function(n){return this.state.tensorInfo.get(n).backend.read(n)},e.prototype.time=function(n){return Ie(this,void 0,void 0,function(){var t,r;return Re(this,function(a){switch(a.label){case 0:return t=Ya(),[4,this.backend.time(n)];case 1:return(r=a.sent()).wallMs=Ya()-t,[2,r]}})})},e.prototype.track=function(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var n in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Ww,this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),W=function(){var e=function(){if(Kg==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(typeof self>"u")throw new Error("Could not find a global object");t=self}Kg=t}return Kg}();if(e._tfengine==null){var n=new e5(e);e._tfengine=new S5(n)}return function(t){wO=t}(e._tfengine.ENV),$a=function(){return e._tfengine},e._tfengine}();function LO(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Pi=le();Pi.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Pi.registerFlag("IS_BROWSER",function(){return LO()}),Pi.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Pi.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Pi.registerFlag("PROD",function(){return!1}),Pi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Pi.getBool("DEBUG")}),Pi.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Pi.registerFlag("IS_TEST",function(){return!1});var nf,Fr,Br,bs={},qg={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function E5(e,n){bs[e]=n}function li(e){e in bs||(bs[e]=function(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return r.addEventListener("webglcontextlost",function(a){a.preventDefault(),delete bs[t]},!1),t===1?r.getContext("webgl",qg)||r.getContext("experimental-webgl",qg):r.getContext("webgl2",qg)}(e));var n=bs[e];return n.isContextLost()?(delete bs[e],li(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),bs[e])}function Ym(e,n){return[n,e]}function Fc(e){var n=Ne(e);return $1(Math.ceil(n/4))}function _f(e,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(e/2))]}function S2(e,n){var t,r,a,i,o,u,c,f,h,p=e;return le().getNumber("WEBGL_VERSION")===2?(t=p.R32F,r=p.R16F,a=p.RGBA16F,i=p.RGBA32F,o=p.RED,u=4,c=1,f=p.HALF_FLOAT,h=p.FLOAT):(t=e.RGBA,r=e.RGBA,a=e.RGBA,i=p.RGBA,o=e.RGBA,u=4,c=4,f=n!=null?n.HALF_FLOAT_OES:null,h=e.FLOAT),{internalFormatFloat:t,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:f,textureTypeFloat:h}}function Te(e,n,t){var r=t();return n&&function(a){var i=a.getError();if(i!==a.NO_ERROR)throw new Error("WebGL Error: "+I5(a,i))}(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(nf||(nf={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Fr||(Fr={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Br||(Br={}));var _5=596e-10,A5=65504;function w5(e){return!!(le().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||_5<Math.abs(e)&&Math.abs(e)<A5)}function I5(e,n){switch(n){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+n}}function jd(e,n,t){return Yi(e,n,function(){return e.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function R5(e,n,t){var r=Yi(e,n,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Te(e,n,function(){return e.shaderSource(r,t)}),Te(e,n,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function C5(e,n,t){var r=Yi(e,n,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Te(e,n,function(){return e.shaderSource(r,t)}),Te(e,n,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw function(a,i){var o=N5.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(a);for(var u=+o[1],c=a.split(`
`),f=c.length.toString().length+2,h=c.map(function(E,_){return ju((_+1).toString(),f)+E}),p=0,m=0;m<h.length;m++)p=Math.max(h[m].length,p);var g=h.slice(0,u-1),y=h.slice(u-1,u),b=h.slice(u);console.log(g.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+ju(y[0],p),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(b.join(`
`))}(t,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Yg,$g,N5=/ERROR: [0-9]+:([0-9]+):/g;function T5(e,n){return Yi(e,n,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function O5(e,n,t){if(Te(e,n,function(){return e.linkProgram(t)}),e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function jg(e,n,t){if(Te(e,n,function(){return e.validateProgram(t)}),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function k5(e,n,t){var r=Yi(e,n,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Te(e,n,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Te(e,n,function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}),r}function x5(e,n,t){var r=Yi(e,n,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Te(e,n,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),Te(e,n,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)}),r}function D5(e,n){return Yi(e,n,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function P5(e,n){var t=le().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||n<=0){var r="["+e+"x"+n+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>t||n>t)throw r="["+e+"x"+n+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+t+"x"+t+"]")+".")}function M5(e,n){return Yi(e,n,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Kw(e,n,t,r,a,i,o,u){var c=e.getAttribLocation(t,r);return c!==-1&&(Te(e,n,function(){return e.bindBuffer(e.ARRAY_BUFFER,a)}),Te(e,n,function(){return e.vertexAttribPointer(c,i,e.FLOAT,!1,o,u)}),Te(e,n,function(){return e.enableVertexAttribArray(c)}),!0)}function L5(e,n,t,r){G5(e,r),Te(e,n,function(){return e.activeTexture(e.TEXTURE0+r)}),Te(e,n,function(){return e.bindTexture(e.TEXTURE_2D,t)})}function B5(e,n,t,r){return Yi(e,n,function(){return e.getUniformLocation(t,r)},'uniform "'+r+'" not present in program.')}function U5(e,n,t){return e.getUniformLocation(n,t)}function F5(e,n,t,r,a,i){Te(e,n,function(){return L5(e,n,r,i)}),Te(e,n,function(){return e.uniform1i(a,i)})}function Xg(e,n,t,r){Te(e,n,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Te(e,n,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)})}function qw(e,n,t){Te(e,n,function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)}),Te(e,n,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function Xd(e){var n=e.checkFramebufferStatus(e.FRAMEBUFFER);if(n!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+V5(e,n))}function V5(e,n){switch(n){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+n}}function Yi(e,n,t,r){var a=Te(e,n,function(){return t()});if(a==null)throw new Error(r);return a}function G5(e,n){var t=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+e.TEXTURE0;if(r<e.TEXTURE0||r>t)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+t+"]")+".")}function tm(e,n){return n===void 0&&(n=2),Ne(e.slice(0,e.length-n))}function nm(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Zg(e){var n=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(n=[tm(e)].concat(nm(e))),n}function H5(e,n){var t;n===void 0&&(n=!1);var r=le().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n&&(r*=2,(e=e.map(function(f,h){return h>=e.length-2?NO(e[h]):e[h]})).length===1&&(e=[2,e[0]])),e.length!==2){var a=Es(e);e=a.newShape}var i=Ne(e);if(e.length<=1&&i<=r)return[1,i];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(n){var o=tm(e),u=2,c=2;return e.length&&(u=(t=nm(e))[0],c=t[1]),$1(i=o*(u/2)*(c/2)).map(function(f){return 2*f})}return $1(i)}function Zd(e){return e%2==0}function Qd(e,n){if(On(e=e.slice(-2),n=n.slice(-2))||!e.length||!n.length||e[0]===0||e[1]===0||n[0]===0||n[1]===0)return!0;if(e.length!==n.length){var t=e.slice(-1)[0],r=n.slice(-1)[0];if(t===r||Zd(t)&&Zd(r)&&(e[0]===1||n[0]===1))return!0}return e[1]===n[1]&&Zd(e[0])&&Zd(n[0])}function z5(e){if(Yg==null){var n=li(e);Yg=n.getParameter(n.MAX_TEXTURE_SIZE)}return Yg}function W5(e){if($g==null){var n=li(e);$g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$g)}function K5(e){if(e===0)return 0;var n=li(e);return ha(n,"EXT_disjoint_timer_query_webgl2")&&e===2?2:ha(n,"EXT_disjoint_timer_query")?1:0}function ha(e,n){return e.getExtension(n)!=null}function Yw(e){try{if(li(e)!=null)return!0}catch{return!1}return!1}function q5(e){if(e===0)return!1;var n=li(e);if(e===1){if(!ha(n,"OES_texture_float"))return!1}else if(!ha(n,"EXT_color_buffer_float"))return!1;return ty(n)}function Y5(e){if(e===0)return!1;var n=li(e);if(e!==1){if(ha(n,"EXT_color_buffer_float"))return ty(n);if(ha(n,"EXT_color_buffer_half_float")){var t=n.getExtension("EXT_color_buffer_half_float");return function(r,a){var i=S2(r,a),o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var u=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,u),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);var c=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(o),r.deleteFramebuffer(u),c}(n,t)}return!1}return!!ha(n,"OES_texture_float")&&!!ha(n,"WEBGL_color_buffer_float")&&ty(n)}function ty(e){var n=S2(e),t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(r),a}function $5(e){return e===2&&li(e).fenceSync!=null}var Fe=le();function BO(e){le().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ae(e,n){return W.tidy(e,n)}function _r(e){MO(e).forEach(function(n){return n.dispose()})}function j5(e){return W.keep(e)}function rm(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];le().getBool("IS_TEST")||console.warn.apply(console,e)}function Wo(e,n){var t=e;if(ni(e))return n==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(t)||ni(t)&&n!=="string";)r.push(t.length),t=t[0];return Array.isArray(e)&&le().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function a(i,o,u){if(u=u||[],!Array.isArray(i)&&!ni(i))return void F(o.length===0,function(){return"Element arr["+u.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});F(o.length>0,function(){return"Element arr["+u.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),F(i.length===o[0],function(){return"Element arr["+u.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"});for(var c=o.slice(1),f=0;f<i.length;++f)a(i[f],c,u.concat(f))}(e,r,[]),r}function $w(e,n,t,r){if(e!=null&&(e!=="numeric"&&e!==n||e==="numeric"&&n==="string"))throw new Error("Argument '"+t+"' passed to '"+r+"' must be "+e+" tensor, but got "+n+" tensor")}function M(e,n,t,r){if(r===void 0&&(r="numeric"),e instanceof Ut)return $w(r,e.dtype,n,t),e;var a=Sf(e);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),$w(r,a,n,t),e==null||!ni(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+n+"' passed to '"+t+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=Wo(e,a);ni(e)||Array.isArray(e)||(e=[e]);var u=a!=="string"?OO(e,a,le().getBool("DEBUG")):ul(e,[],!0);return W.makeTensor(u,o,a)}function am(e,n,t,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+n+" passed to "+t+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(a,i){return M(a,n+"["+i+"]",t)},r)}function UO(e,n){for(var t=0;t<e.length;++t)if(e[e.length-t-1]!==n-1-t)return!1;return!0}function X5(e,n,t){for(var r=e.length+n.length,a=[],i=0,o=0,u=0;u<r;u++)t.indexOf(u)===-1?a.push(e[i++]):a.push(n[o++]);return a}function jn(e,n){for(var t=[],r=e.length,a=0;a<r;a++)n.indexOf(a)===-1&&t.push(e[a]);return[t,n.map(function(i){return e[i]})]}function Ir(e,n){return X5(e,n.map(function(t){return 1}),n)}function Lr(e,n,t){F(UO(n,t),function(){return e+" supports only inner-most axes for now. Got axes "+n+" and rank-"+t+" input."})}function ci(e,n){if(UO(e,n))return null;for(var t=[],r=0;r<n;++r)e.indexOf(r)===-1&&t.push(r);return e.forEach(function(a){return t.push(a)}),t}function E2(e){return e.map(function(n,t){return[t,n]}).sort(function(n,t){return n[1]-t[1]}).map(function(n){return n[0]})}function fi(e,n){for(var t=[],r=n-e;r<n;++r)t.push(r);return t}function Z5(e,n){var t=e[0].length;e.forEach(function(a,i){F(a.length===t,function(){return"Error in concat"+t+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+t+")"})}),F(n>=0&&n<t,function(){return"Error in concat"+t+"D: axis must be between 0 and "+(t-1)+"."});var r=e[0];e.forEach(function(a,i){for(var o=0;o<t;o++)F(o===n||a[o]===r[o],function(){return"Error in concat"+t+"D: Shape of tensors["+i+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function cl(e,n){for(var t=e[0].slice(),r=1;r<e.length;r++)t[n]+=e[r][n];return t}function H(e){var n=Object.keys(e);if(n.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+n.length+" keys.");var t=n[0],r=e[t];t.endsWith("_")&&(t=t.substring(0,t.length-1));var a=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];W.startScope(t);try{var u=r.apply(void 0,i);return u instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),W.endScope(u),u}catch(c){throw W.endScope(null),c}};return Object.defineProperty(a,"name",{value:t,configurable:!0}),a}Fe.registerFlag("HAS_WEBGL",function(){return Fe.getNumber("WEBGL_VERSION")>0}),Fe.registerFlag("WEBGL_VERSION",function(){return Yw(2)?2:Yw(1)?1:0}),Fe.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Fe.get("WEBGL_VERSION")===2}),Fe.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Fe.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Fe.registerFlag("WEBGL_PACK",function(){return Fe.getBool("HAS_WEBGL")}),Fe.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_CLIP",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Fe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_REDUCE",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_CONV_IM2COL",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return z5(Fe.getNumber("WEBGL_VERSION"))}),Fe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return W5(Fe.getNumber("WEBGL_VERSION"))}),Fe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=Fe.getNumber("WEBGL_VERSION");return e===0?0:K5(e)}),Fe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Fe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),Fe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return q5(Fe.getNumber("WEBGL_VERSION"))}),Fe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Fe.getBool("WEBGL_FORCE_F16_TEXTURES")&&Fe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Fe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Y5(Fe.getNumber("WEBGL_VERSION"))}),Fe.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return $5(Fe.getNumber("WEBGL_VERSION"))}),Fe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Fe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),PO=BO;var Bn=H({complex_:function(e,n){var t=M(e,"real","complex"),r=M(n,"imag","complex");return vt(t.shape,r.shape,"real and imag shapes, "+t.shape+" and "+r.shape+", must match in call to tf.complex()."),W.runKernelFunc(function(a){return a.complex(t,r)},{$real:t,$imag:r})}}),da=H({real_:function(e){var n=M(e,"input","real");return W.runKernelFunc(function(t){return t.real(n)},{$input:n})}}),ja=H({imag_:function(e){var n=M(e,"input","imag");return W.runKernelFunc(function(t){return t.imag(n)},{$input:n})}});function Gn(e,n,t){return Ko(e,n,Wo(e,t),t)}function Ko(e,n,t,r){if(r==null&&(r=Sf(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ni(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){xO(n);var a=Ne(n),i=Ne(t);F(a===i,function(){return"Based on the provided shape, ["+n+"], the tensor should have "+a+" values but has "+i});for(var o=0;o<t.length;++o){var u=t[o],c=o!==t.length-1||u!==Ne(n.slice(o));F(t[o]===n[o]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+t+") does not match the provided shape ("+n+"). "})}}return ni(e)||Array.isArray(e)||(e=[e]),n=n||t,e=r!=="string"?OO(e,r,le().getBool("DEBUG")):ul(e,[],!0),W.makeTensor(e,n,r)}function Ee(e,n){if((ni(e)&&n!=="string"||Array.isArray(e))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&ni(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ko(e,[],[],n)}function un(e,n){El(e);var t=Wo(e,n);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ko(e,null,t,n)}function Do(e,n,t){if(El(e),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Wo(e,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ko(e,n,r,t)}function _2(e,n,t){if(El(e),n!=null&&n.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Wo(e,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ko(e,n,r,t)}function br(e,n,t){if(El(e),n!=null&&n.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Wo(e,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ko(e,n,r,t)}function Q5(e,n,t){if(El(e),n!=null&&n.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Wo(e,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ko(e,n,r,t)}function J5(e,n,t){if(El(e),n!=null&&n.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Wo(e,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&n==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ko(e,n=n||r,r,t)}function eV(e,n,t,r){return n===void 0&&(n=!0),W.makeVariable(e,n,t,r)}function _l(e,n){if(n===void 0&&(n="float32"),n==="complex64"){var t=_l(e,"float32"),r=Ot(e,"float32");return Bn(t,r)}var a=kO(Ne(e),n);return W.makeTensor(a,e,n)}function Ot(e,n){if(n===void 0&&(n="float32"),n==="complex64"){var t=Ot(e,"float32"),r=Ot(e,"float32");return Bn(t,r)}var a=Ef(Ne(e),n);return W.makeTensor(a,e,n)}function ai(e,n,t){return W.runKernelFunc(function(r){return r.fill(e,n,t)},{})}function tV(e,n,t){if(t<=0)throw new Error("The number of values should be positive.");return W.runKernelFunc(function(r){return r.linspace(e,n,t)},{})}function im(e,n,t,r){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t===0)throw new Error("Cannot have a step of zero");if(e===n||e<n&&t<0||n<e&&t>1)return Ot([0],r);var a=Ef(Math.abs(Math.ceil((n-e)/t)),r);n<e&&t===1&&(t=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+t;return un(a,r)}var FO=H({onesLike_:function(e){var n=M(e,"x","onesLike");if(n.dtype==="complex64"){var t=FO(da(n)),r=rt(ja(n));return Bn(t,r)}return W.runKernelFunc(function(a){return a.onesLike(n)},{$x:n},function(a,i){return{$x:function(){return rt(a)}}})}}),rt=H({zerosLike_:function(e){var n=M(e,"x","zerosLike");return W.runKernelFunc(function(t){return t.zerosLike(n)},{$x:n},function(t,r){return{$x:function(){return rt(t)}}})}}),mn=H({concat_:function(e,n){n===void 0&&(n=0),F(e.length>=1,function(){return"Pass at least one tensor to concat"});var t=am(e,"tensors","concat");t[0].dtype==="complex64"&&t.forEach(function(u){if(u.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+u.dtype+". ")}),n=Sn(n,t[0].shape)[0];var r=cl(t.map(function(u){return u.shape}),n);if(Ne(r)===0)return Gn([],r);if((t=t.filter(function(u){return u.size>0})).length===1)return t[0];var a=t.map(function(u){return u.shape});Z5(a,n);var i=t,o={axis:n};return W.runKernelFunc(function(u){return u.concat(t,n)},i,function(u){var c=a.map(function(f){return f[n]});return A2(u,c,n).map(function(f){return function(){return f}})},"Concat",o)}}),nV=H({concat1d_:function(e){return mn(e,0)}}),rV=H({concat2d_:function(e,n){return mn(e,n)}}),aV=H({concat3d_:function(e,n){return mn(e,n)}}),iV=H({concat4d_:function(e,n){return mn(e,n)}}),A2=H({split_:function(e,n,t){t===void 0&&(t=0);var r,a=M(e,"x","split");return t=Sn(t,a.shape)[0],typeof n=="number"?(F(a.shape[t]%n==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(n).fill(a.shape[t]/n)):(F(a.shape[t]===n.reduce(function(i,o){return i+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=n),W.runKernelFunc(function(i){return i.split(a,r,t)},{$x:a},function(i){return{$x:function(){return mn(i,t)}}})}});function qs(e,n){return e(n={exports:{}},n.exports),n.exports}var oV=qs(function(e){(function(n,t,r){function a(u){var c,f=this,h=(c=4022871197,function(p){p=p.toString();for(var m=0;m<p.length;m++){var g=.02519603282416938*(c+=p.charCodeAt(m));g-=c=g>>>0,c=(g*=c)>>>0,c+=4294967296*(g-=c)}return 23283064365386963e-26*(c>>>0)});f.next=function(){var p=2091639*f.s0+23283064365386963e-26*f.c;return f.s0=f.s1,f.s1=f.s2,f.s2=p-(f.c=0|p)},f.c=1,f.s0=h(" "),f.s1=h(" "),f.s2=h(" "),f.s0-=h(u),f.s0<0&&(f.s0+=1),f.s1-=h(u),f.s1<0&&(f.s1+=1),f.s2-=h(u),f.s2<0&&(f.s2+=1),h=null}function i(u,c){return c.c=u.c,c.s0=u.s0,c.s1=u.s1,c.s2=u.s2,c}function o(u,c){var f=new a(u),h=c&&c.state,p=f.next;return p.int32=function(){return 4294967296*f.next()|0},p.double=function(){return p()+11102230246251565e-32*(2097152*p()|0)},p.quick=p,h&&(typeof h=="object"&&i(h,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.alea=o})(0,e)}),sV=qs(function(e){(function(n,t,r){function a(u){var c=this,f="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var p=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^p^p>>>8},u===(0|u)?c.x=u:f+=u;for(var h=0;h<f.length+64;h++)c.x^=0|f.charCodeAt(h),c.next()}function i(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c}function o(u,c){var f=new a(u),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var m=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=f.next,p.quick=p,h&&(typeof h=="object"&&i(h,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xor128=o})(0,e)}),uV=qs(function(e){(function(n,t,r){function a(u){var c=this,f="";c.next=function(){var p=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^p^p<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,u===(0|u)?c.x=u:f+=u;for(var h=0;h<f.length+64;h++)c.x^=0|f.charCodeAt(h),h==f.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c.v=u.v,c.d=u.d,c}function o(u,c){var f=new a(u),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var m=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=f.next,p.quick=p,h&&(typeof h=="object"&&i(h,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xorwow=o})(0,e)}),lV=qs(function(e){(function(n,t,r){function a(u){var c=this;c.next=function(){var f,h,p=c.x,m=c.i;return f=p[m],h=(f^=f>>>7)^f<<24,h^=(f=p[m+1&7])^f>>>10,h^=(f=p[m+3&7])^f>>>3,h^=(f=p[m+4&7])^f<<7,f=p[m+7&7],h^=(f^=f<<13)^f<<9,p[m]=h,c.i=m+1&7,h},function(f,h){var p,m=[];if(h===(0|h))m[0]=h;else for(h=""+h,p=0;p<h.length;++p)m[7&p]=m[7&p]<<15^h.charCodeAt(p)+m[p+1&7]<<13;for(;m.length<8;)m.push(0);for(p=0;p<8&&m[p]===0;++p);for(p==8?m[7]=-1:m[p],f.x=m,f.i=0,p=256;p>0;--p)f.next()}(c,u)}function i(u,c){return c.x=u.x.slice(),c.i=u.i,c}function o(u,c){u==null&&(u=+new Date);var f=new a(u),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var m=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=f.next,p.quick=p,h&&(h.x&&i(h,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xorshift7=o})(0,e)}),cV=qs(function(e){(function(n,t,r){function a(u){var c=this;c.next=function(){var f,h,p=c.w,m=c.X,g=c.i;return c.w=p=p+1640531527|0,h=m[g+34&127],f=m[g=g+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=m[g]=h^f,c.i=g,h+(p^p>>>16)|0},function(f,h){var p,m,g,y,b,E=[],_=128;for(h===(0|h)?(m=h,h=null):(h+="\0",m=0,_=Math.max(_,h.length)),g=0,y=-32;y<_;++y)h&&(m^=h.charCodeAt((y+32)%h.length)),y===0&&(b=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,y>=0&&(b=b+1640531527|0,g=(p=E[127&y]^=m+b)==0?g+1:0);for(g>=128&&(E[127&(h&&h.length||0)]=-1),g=127,y=512;y>0;--y)m=E[g+34&127],p=E[g=g+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,E[g]=m^p;f.w=b,f.X=E,f.i=g}(c,u)}function i(u,c){return c.i=u.i,c.w=u.w,c.X=u.X.slice(),c}function o(u,c){u==null&&(u=+new Date);var f=new a(u),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var m=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=f.next,p.quick=p,h&&(h.X&&i(h,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.xor4096=o})(0,e)}),fV=qs(function(e){(function(n,t,r){function a(u){var c=this,f="";c.next=function(){var p=c.b,m=c.c,g=c.d,y=c.a;return p=p<<25^p>>>7^m,m=m-g|0,g=g<<24^g>>>8^y,y=y-p|0,c.b=p=p<<20^p>>>12^m,c.c=m=m-g|0,c.d=g<<16^m>>>16^y,c.a=y-p|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,u===Math.floor(u)?(c.a=u/4294967296|0,c.b=0|u):f+=u;for(var h=0;h<f.length+20;h++)c.b^=0|f.charCodeAt(h),c.next()}function i(u,c){return c.a=u.a,c.b=u.b,c.c=u.c,c.d=u.d,c}function o(u,c){var f=new a(u),h=c&&c.state,p=function(){return(f.next()>>>0)/4294967296};return p.double=function(){do var m=((f.next()>>>11)+(f.next()>>>0)/4294967296)/2097152;while(m===0);return m},p.int32=f.next,p.quick=p,h&&(typeof h=="object"&&i(h,f),p.state=function(){return i(f,{})}),p}t&&t.exports?t.exports=o:this.tychei=o})(0,e)}),Ss=qs(function(e){(function(n,t){var r,a=this,i=256,o=6,u="random",c=t.pow(i,o),f=t.pow(2,52),h=2*f,p=i-1;function m(_,w,I){var R=[],C=b(function P(k,N){var U,V=[],ee=typeof k;if(N&&ee=="object")for(U in k)try{V.push(P(k[U],N-1))}catch{}return V.length?V:ee=="string"?k:k+"\0"}((w=w==1?{entropy:!0}:w||{}).entropy?[_,E(n)]:_??function(){try{var P;return r&&(P=r.randomBytes)?P=P(i):(P=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(P)),E(P)}catch{var k=a.navigator,N=k&&k.plugins;return[+new Date,a,N,a.screen,E(n)]}}(),3),R),O=new g(R),D=function(){for(var P=O.g(o),k=c,N=0;P<f;)P=(P+N)*i,k*=i,N=O.g(1);for(;P>=h;)P/=2,k/=2,N>>>=1;return(P+N)/k};return D.int32=function(){return 0|O.g(4)},D.quick=function(){return O.g(4)/4294967296},D.double=D,b(E(O.S),n),(w.pass||I||function(P,k,N,U){return U&&(U.S&&y(U,O),P.state=function(){return y(O,{})}),N?(t[u]=P,k):P})(D,C,"global"in w?w.global:this==t,w.state)}function g(_){var w,I=_.length,R=this,C=0,O=R.i=R.j=0,D=R.S=[];for(I||(_=[I++]);C<i;)D[C]=C++;for(C=0;C<i;C++)D[C]=D[O=p&O+_[C%I]+(w=D[C])],D[O]=w;(R.g=function(P){for(var k,N=0,U=R.i,V=R.j,ee=R.S;P--;)k=ee[U=p&U+1],N=N*i+ee[p&(ee[U]=ee[V=p&V+k])+(ee[V]=k)];return R.i=U,R.j=V,N})(i)}function y(_,w){return w.i=_.i,w.j=_.j,w.S=_.S.slice(),w}function b(_,w){for(var I,R=_+"",C=0;C<R.length;)w[p&C]=p&(I^=19*w[p&C])+R.charCodeAt(C++);return E(w)}function E(_){return String.fromCharCode.apply(0,_)}if(t["seed"+u]=m,b(t.random(),n),e.exports){e.exports=m;try{r=require("crypto")}catch{}}})([],Math)});Ss.alea=oV,Ss.xor128=sV,Ss.xorwow=uV,Ss.xorshift7=lV,Ss.xor4096=cV,Ss.tychei=fV;var $m=Ss.alea,w2=function(){function e(n,t,r,a,i){this.mean=n,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=$m(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var n=this.nextVal;return this.nextVal=NaN,n}for(var t,r,a=!1;!a;){var i=void 0,o=void 0,u=void 0;do u=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(u>=1||u===0);var c=Math.sqrt(-2*Math.log(u)/u);t=this.mean+this.stdDev*i*c,r=this.mean+this.stdDev*o*c,this.truncated&&!this.isValidTruncated(t)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(t)},e.prototype.convertValue=function(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)},e.prototype.isValidTruncated=function(n){return n<=this.upper&&n>=this.lower},e}(),dV=function(){function e(n,t,r,a){this.alpha=n,this.beta=1/t,this.dtype=r;var i=a||Math.random();this.randu=$m(i.toString()),this.randn=new w2(0,1,r,!1,this.randu()),this.d=n<1?n+2/3:n-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var n,t,r,a,i,o;;){do a=this.randn.nextValue(),o=1+this.c*a;while(o<=0);if(o*=o*o,t=1-.331*(n=a*a)*n,r=.5*n+this.d*(1-o+Math.log(o)),(i=this.randu())<t||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(n){return this.dtype==="float32"?n:Math.round(n)},e}(),hV=function(){function e(n,t,r,a){var i=this;if(n===void 0&&(n=0),t===void 0&&(t=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=n,this.range=t-n,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+n+" - "+t+" <= 1 and dtype is not float");this.random=$m(a)}return e.prototype.convertValue=function(n){return this.canReturnFloat()?n:Math.round(n)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function We(e,n,t){return n===void 0&&(n="float32"),n=n||"float32",xO(e),new tf(e,n,t)}function pV(e,n){n===void 0&&(n=!1),console.log(e.toString(n))}var VO=H({batchToSpaceND_:function(e,n,t){var r=M(e,"x","batchToSpaceND"),a=n.reduce(function(i,o){return i*o});return F(r.rank>=1+n.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+n.length}),F(t.length===n.length,function(){return"crops.length is "+t.length+" but should be equal to blockShape.length  "+n.length}),F(r.shape[0]%a==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+n.join(" * ")+" === "+a}),W.runKernelFunc(function(i){return i.batchToSpaceND(r,n,t)},{$x:r},function(i){return{$x:function(){return i.spaceToBatchND(n,t)}}})}}),mV=H({broadcastTo_:function(e,n){var t=M(e,"broadcastTo","x"),r=t.shape;if(n.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+n+"].");if(n.length<t.rank)throw new Error("broadcastTo(): shape.length="+n.length+" < input.rank="+t.rank+".");if(n.length>t.rank){for(var a=t.shape.slice();a.length<n.length;)a.unshift(1);t=t.reshape(a)}for(var i=Array.from(n),o=n.length-1;o>=0;o--)if(t.shape[o]===n[o])i[o]=1;else if(t.shape[o]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+n+"].");var u=i.map(function(c,f){return c>1?f:-1}).filter(function(c){return c>=0});return u.length===0?t.clone():W.runKernelFunc(function(c){return c.tile(t,i)},{input:t},function(c){return{input:function(){return c.sum(u,!0)}}})}}),vV=H({cast_:function(e,n){var t=M(e,"x","cast");if(!u5(n))throw new Error("Failed to cast to unknown dtype "+n);if(n==="string"&&t.dtype!=="string"||n!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:n};return W.runKernelFunc(function(a){return a.cast(t,n)},{x:t},function(a){return{x:function(){return a.clone()}}},"Cast",r)}}),gV=H({clone_:function(e){var n=M(e,"x","clone",null);return W.runKernelFunc(function(){return W.makeTensorFromDataId(n.dataId,n.shape,n.dtype)},{$x:n},function(t){return{$x:function(){return t.toFloat()}}})}}),yV=H({cumsum_:function(e,n,t,r){n===void 0&&(n=0),t===void 0&&(t=!1),r===void 0&&(r=!1);var a=M(e,"x","cumsum"),i=ci([n|=0],a.rank),o=a;i!=null&&(o=a.transpose(i));var u=fi(1,a.rank)[0],c=W.runKernelFunc(function(f){return f.cumsum(o,u,t,r)},{permutedX:o},function(f){return{permutedX:function(){return f.cumsum(n,t,!r)}}});return i!=null&&(c=c.transpose(i)),c}}),bV=H({depthToSpace_:function(e,n,t){t===void 0&&(t="NHWC");var r=M(e,"x","depthToSpace"),a=t==="NHWC"?r.shape[1]:r.shape[2],i=t==="NHWC"?r.shape[2]:r.shape[3],o=t==="NHWC"?r.shape[3]:r.shape[1];return F(a*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+n+`  for depthToSpace with input shape
      `+r.shape}),F(i*n>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+n+` for depthToSpace with input shape
          `+r.shape}),F(o%(n*n)==0,function(){return"Dimension size must be evenly divisible by "+n*n+" but is "+o+" for depthToSpace with input shape "+r.shape}),W.runKernelFunc(function(u){return u.depthToSpace(r,n,t)},{$x:r})}}),fa=H({expandDims_:function(e,n){n===void 0&&(n=0);var t=M(e,"x","expandDims",null);F(n<=t.rank,function(){return"Axis must be <= rank of the tensor"});var r=t.shape.slice();return n<0&&(F(-(t.rank+1)<=n,function(){return"Axis must be in the interval ["+-(t.rank+1)+", "+t.rank+"]"}),n=t.rank+n+1),r.splice(n,0,1),Na(t,r)}}),GO=H({eye_:function(e,n,t,r){r===void 0&&(r="float32"),n==null&&(n=e);for(var a=We([e,n],r),i=e<=n?e:n,o=0;o<i;++o)a.set(1,o,o);var u=a.toTensor().as2D(e,n);if(t==null)return u;if(t.length===1)return Xu(fa(u,0),[t[0],1,1]);if(t.length===2)return Xu(fa(fa(u,0),0),[t[0],t[1],1,1]);if(t.length===3)return Xu(fa(fa(fa(u,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+t.length+"D.")}}),SV=H({multinomial_:function(e,n,t,r){r===void 0&&(r=!1);var a=M(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);t=t||Math.random();var u=o===1?a.as2D(1,-1):a,c=W.runKernelFunc(function(f){return f.multinomial(u,r,n,t)},{logits2D:u});return o===1?c.as1D():c}}),ny=H({oneHot_:function(e,n,t,r){if(t===void 0&&(t=1),r===void 0&&(r=0),n<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+n);var a=M(e,"indices","oneHot","int32"),i=a.shape.concat([n]);return a=a.flatten(),W.runKernelFunc(function(o){return o.oneHot(a,n,t,r)},{$indices:a},function(o){return{$indices:function(){return Ot(a.shape,"float32")}}}).reshape(i)}}),Ys=H({pad_:function(e,n,t){t===void 0&&(t=0);var r=M(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:n,constantValue:t};return W.runKernelFunc(function(i){return i.pad(r,n,t)},{x:r},function(i){var o=n.map(function(u){return u[0]});return{x:function(){return i.slice(o,r.shape)}}},"PadV2",a)}}),EV=H({pad1d_:function(e,n,t){return t===void 0&&(t=0),F(n.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Ys(e,[n],t)}}),_V=H({pad2d_:function(e,n,t){return t===void 0&&(t=0),F(n.length===2&&n[0].length===2&&n[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ys(e,n,t)}}),AV=H({pad3d_:function(e,n,t){return t===void 0&&(t=0),F(n.length===3&&n[0].length===2&&n[1].length===2&&n[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ys(e,n,t)}}),wV=H({pad4d_:function(e,n,t){return t===void 0&&(t=0),F(n.length===4&&n[0].length===2&&n[1].length===2&&n[2].length===2&&n[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ys(e,n,t)}}),IV=H({rand_:function(e,n,t){var r=Ne(e),a=null;if(t==null||t==="float32")a=new Float32Array(r);else if(t==="int32")a=new Int32Array(r);else{if(t!=="bool")throw new Error("Unknown data type "+t);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=n();return W.makeTensor(a,e,t)}}),RV=H({randomNormal_:function(e,n,t,r,a){if(n===void 0&&(n=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new w2(n,t,r,!1,a),o=We(e,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),CV=H({randomGamma_:function(e,n,t,r,a){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new dV(n,t,r,a),o=We(e,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),HO=H({randomUniform_:function(e,n,t,r,a){n===void 0&&(n=0),t===void 0&&(t=1),r===void 0&&(r="float32");for(var i=We(e,r),o=new hV(n,t,null,a),u=0;u<i.values.length;u++)i.values[u]=o.nextValue();return i.toTensor()}}),Na=H({reshape_:function(e,n){var t=M(e,"x","reshape",null);n=o5(n,t.size),F(t.size===Ne(n),function(){return"new shape and old shape must have the same number of elements."});var r={shape:n};return W.runKernelFunc(function(a){return a.reshape(t,n)},{x:t},function(a){return{x:function(){return a.reshape(t.shape)}}},"Reshape",r)}}),zO=H({spaceToBatchND_:function(e,n,t){var r=M(e,"x","spaceToBatchND");return F(r.rank>=1+n.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+n.length}),F(t.length===n.length,function(){return"paddings.shape[0] "+t.length+" must be equal to [blockShape] "+n.length}),F(r.shape.reduce(function(a,i,o){return o>0&&o<=n.length?a&&(i+t[o-1][0]+t[o-1][1])%n[o-1]==0:a},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+t.toString()+" must be divisible by blockShapes "+n.toString()}),W.runKernelFunc(function(a){return a.spaceToBatchND(r,n,t)},{$x:r},function(a){return{$x:function(){return a.batchToSpaceND(n,t)}}})}}),WO=H({squeeze_:function(e,n){var t=M(e,"x","squeeze");return Na(t,Es(t.shape,n).newShape)}}),qr=H({stack_:function(e,n){n===void 0&&(n=0);var t=am(e,"tensors","stack");if(F(t.length>=1,function(){return"Pass at least one tensor to tf.stack"}),t.length===1)return t[0].expandDims(n);var r=t[0].rank,a=t[0].shape,i=t[0].dtype;F(n<=r,function(){return"Axis must be <= rank of the tensor"}),t.forEach(function(u){vt(a,u.shape,"All tensors passed to stack must have matching shapes")}),t.forEach(function(u){F(i===u.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=t.map(function(u){return u.expandDims(n)});return mn(o,n)}}),Xu=H({tile_:function(e,n){var t=M(e,"x","tile",null);F(t.rank===n.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of reps "+n+"."});var r=[t],a={reps:n};return W.runKernelFunc(function(i,o){var u=i.tile(t,n);return o([t]),u},{x:t},function(i,o){var u=o[0];return{x:function(){var c=rt(u);if(u.rank===1)for(var f=0;f<n[0];++f)c=c.add(i.slice([f*u.shape[0]],[u.shape[0]]));else if(u.rank===2)for(f=0;f<n[0];++f)for(var h=0;h<n[1];++h)c=c.add(i.slice([f*u.shape[0],h*u.shape[1]],[u.shape[0],u.shape[1]]));else if(u.rank===3)for(f=0;f<n[0];++f)for(h=0;h<n[1];++h)for(var p=0;p<n[2];++p)c=c.add(i.slice([f*u.shape[0],h*u.shape[1],p*u.shape[2]],[u.shape[0],u.shape[1],u.shape[2]]));else{if(u.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+u.rank+" tensors yet.");for(f=0;f<n[0];++f)for(h=0;h<n[1];++h)for(p=0;p<n[2];++p)for(var m=0;m<n[3];++m)c=c.add(i.slice([f*u.shape[0],h*u.shape[1],p*u.shape[2],m*u.shape[3]],[u.shape[0],u.shape[1],u.shape[2],u.shape[3]]))}return c}}},"Tile",a,r)}}),NV=H({truncatedNormal_:function(e,n,t,r,a){if(n===void 0&&(n=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new w2(n,t,r,!0,a),o=We(e,r),u=0;u<o.values.length;u++)o.values[u]=i.nextValue();return o.toTensor()}}),vn=H({unstack_:function(e,n){n===void 0&&(n=0),n=n||0;var t=M(e,"x","unstack");F(n>=-t.shape.length&&n<t.shape.length,function(){return"Axis = "+n+" is not in [-"+t.shape.length+", "+t.shape.length+")"}),n<0&&(n+=t.shape.length);var r={axis:n};return W.runKernelFunc(function(a){return a.unstack(t,n)},{x:t},function(a){return{x:function(){return qr(a,n)}}},"Unpack",r)}}),TV=function(e,n){return Ie(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,h,p;return Re(this,function(m){switch(m.label){case 0:return t=M(e,"x","setdiff1d"),r=M(n,"y","setdiff1d"),F(t.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+t.dtype+") and y ("+r.dtype+")."}),F(t.rank===1,function(){return"x should be 1D tensor, but got x ("+t.shape+")."}),F(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,t.data()];case 1:return a=m.sent(),[4,r.data()];case 2:for(i=m.sent(),o=new Set(i),u=0,h=0;h<a.length;h++)o.has(a[h])||u++;for(c=new tf([u],t.dtype),f=new tf([u],"int32"),h=0,p=0;h<a.length;h++)o.has(a[h])||(c.values[p]=a[h],f.values[p]=h,p++);return[2,[c.toTensor(),f.toTensor()]]}})})};function om(e,n,t,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(n.slice(0))).push(e[0]/t),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=n.length,o=0;o<i;++o)a=a.concat([e[o+1]/n[o],n[o]]);a=a.concat(e.slice(i+1))}return a}function sm(e,n,t){t===void 0&&(t=!0);var r=[];if(t){r.push(n);for(var a=n+1;a<e;++a)a<=2*n?(r.push(a),r.push(a-(n+1))):r.push(a)}else{var i=[],o=[];for(a=1;a<e;++a)a>=2*n+1||a%2==1?o.push(a):i.push(a);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function um(e,n,t,r){r===void 0&&(r=!0);var a=[];r?a.push(e[0]/t):a.push(e[0]*t);for(var i=1;i<e.length;++i)i<=n.length?r?a.push(n[i-1]*e[i]):a.push(e[i]/n[i-1]):a.push(e[i]);return a}function KO(e,n){for(var t=[0],r=0;r<n;++r)t.push(e[r][0]);return t}function qO(e,n,t){for(var r=e.slice(0,1),a=0;a<t;++a)r.push(e[a+1]-n[a][0]-n[a][1]);return r}function YO(e,n){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(n.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(n.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+n.dtype+".");if(n.shape[n.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+n.shape[n.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var t=n.shape,r=t[t.length-1],a=1,i=0;i<t.length-1;++i)a*=t[i];var o=e.shape,u=t.slice();u.pop();var c=1;for(i=r;i<e.rank;++i)c*=o[i],u.push(o[i]);var f=ri(e.shape).map(function(h){return h/c}).concat([1]).slice(0,r);return[u,a,c,f]}var $O=30;function Qg(e){return e<=$O?e:X1(e,Math.floor(Math.sqrt(e)))}function OV(e,n,t){var r=n.rank>1?n.shape[n.rank-1]:1,a=n.rank>1?n.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+t.shape+", indices.shape: "+n.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(t.rank<a)throw new Error(i+" update.rank < "+a+". ");if(e.length<r+(t.rank-a))throw new Error(i+" Output shape length < "+(r+(t.rank-a)));if(t.rank!==a+e.length-r)throw new Error(i+" update.rank != "+(a+e.length-r));for(var o=0;o<a;++o)if(t.shape[o]!==n.shape[o])throw new Error(i+" updates.shape["+o+"] ("+t.shape[o]+") != indices.shape["+o+"] ("+n.shape[o]+").");for(o=0;o<t.rank-a;++o)if(t.shape[o+a]!==e[o+r])throw new Error(i+" updates.shape["+(o+a)+"] ("+t.shape[o+a]+") != shape["+(o+a)+"] ("+e[o+a]+")")}function kV(e,n,t){if(n.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+n.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(n.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+n.dtype);if(t.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+t);if(t.length===0){if(n.size===0)throw new Error("Indices specified for empty output. indices shape: "+n.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}OV(t,n,e)}function lm(e,n,t){for(var r=n.shape.length,a=r>1?n.shape[r-1]:1,i=t.length,o=1,u=a;u<i;++u)o*=t[u];var c=a<1?1:a;return{sliceRank:a,numUpdates:Ne(n.shape)/c,sliceSize:o,strides:ri(t.slice(0,a)).concat([1]),outputSize:Ne(t)}}function xV(e,n,t){F(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+n+" must match the rank of the array ("+e.rank+")."}),F(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of size "+t+" must match the rank of the array ("+e.rank+")."});for(var r=function(i){F(n[i]+t[i]<=e.shape[i],function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(n[i]+t[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"})},a=0;a<e.rank;++a)r(a)}function jw(e){for(var n=[],t=0;e>0;)1&e&&n.push(t),e/=2,t++;return n}function I2(e,n,t){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((n[a]-e[a])/t[a]);return r}function DV(e,n,t,r,a){var i=n[a],o=t[a]||1;(e&1<<a||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=Y1(0,i,u-1)}function PV(e,n,t,r,a){var i=n[a],o=t[a]||1;(e&1<<a||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return i<0&&(i+=u),i=o>0?Y1(0,i,u):Y1(-1,i,u-1)}function jO(e,n,t){for(var r=t.length,a=0;a<t.length;a++)if(t[a]>1){r=a;break}for(a=r+1;a<t.length;a++)if(n[a]>0||t[a]!==e[a])return!1;return!0}function XO(e,n){for(var t=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)t+=e[r]*n[r];return t}function MV(e,n){F(j1(e),function(){return"The f passed in variableGrads(f) must be a function"}),F(n==null||Array.isArray(n)&&n.every(function(h){return h instanceof ll}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var t=n!=null;if(!t)for(var r in n=[],W.registeredVariables)n.push(W.registeredVariables[r]);var a=t?n.filter(function(h){return!h.trainable}):null,i=n.length;F((n=n.filter(function(h){return h.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var o=W.gradients(e,n,null,!0),u=o.value,c=o.grads;F(c.some(function(h){return h!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),F(u.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+u.rank+" tensor"});var f={};return n.forEach(function(h,p){c[p]!=null&&(f[h.name]=c[p])}),a!=null&&a.forEach(function(h){return f[h.name]=null}),{value:u,grads:f}}function jm(e){return W.customGrad(e)}var $i=H({softmax_:function(e,n){n===void 0&&(n=-1);var t=M(e,"logits","softmax","float32");if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+n);return W.runKernelFunc(function(r,a){var i=r.softmax(t,n);return a([i]),i},{logits:t},function(r,a){var i=a[0],o=r.mul(i);return{logits:function(){return o.sub(o.sum([n],!0).mul(i))}}},"Softmax",{dim:n},[],[!0])}}),LV=H({logSoftmax_:function(e,n){n===void 0&&(n=-1);var t=M(e,"logits","logSoftmax");if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and axis was "+n);return jm(function(r,a){var i=r.max(n,!0),o=r.sub(i),u=o.toFloat().sub(o.exp().sum(n,!0).log());return a([u]),{value:u,gradFunc:function(c,f){var h=f[0].exp();return c.sub(c.sum(n,!0).mul(h))}}})(t)}}),ZO=function(){function e(n,t){this.backend=n,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)},e.prototype.set=function(n,t){this.dataIdsCount++,this.data.set(n,t)},e.prototype.has=function(n){return this.data.has(n)},e.prototype.delete=function(n){return this.dataIdsCount--,this.data.delete(n)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),QO=function(){function e(){}return e.prototype.time=function(n){return ie("time")},e.prototype.read=function(n){return ie("read")},e.prototype.readSync=function(n){return ie("readSync")},e.prototype.numDataIds=function(){return ie("numDataIds")},e.prototype.disposeData=function(n){return ie("disposeData")},e.prototype.write=function(n,t,r){return ie("write")},e.prototype.move=function(n,t,r,a){return ie("move")},e.prototype.memory=function(){return ie("memory")},e.prototype.floatPrecision=function(){return ie("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(n,t,r,a){return ie("batchMatMul")},e.prototype.fusedBatchMatMul=function(n){return n.a,n.b,n.transposeA,n.transposeB,n.bias,n.activation,n.preluActivationWeights,ie("fusedBatchMatMul")},e.prototype.slice=function(n,t,r){return ie("slice")},e.prototype.stridedSlice=function(n,t,r,a){return ie("stridedSlice")},e.prototype.unstack=function(n,t){return ie("unstack")},e.prototype.reverse=function(n,t){return ie("reverse")},e.prototype.concat=function(n,t){return ie("concat")},e.prototype.neg=function(n){return ie("neg")},e.prototype.add=function(n,t){return ie("add")},e.prototype.addN=function(n){return ie("addN")},e.prototype.subtract=function(n,t){return ie("subtract")},e.prototype.multiply=function(n,t){return ie("multiply")},e.prototype.realDivide=function(n,t){return ie("realDivide")},e.prototype.floorDiv=function(n,t){return ie("floorDiv")},e.prototype.sum=function(n,t){return ie("sum")},e.prototype.prod=function(n,t){return ie("prod")},e.prototype.unsortedSegmentSum=function(n,t,r){return ie("unsortedSegmentSum")},e.prototype.argMin=function(n,t){return ie("argMin")},e.prototype.argMax=function(n,t){return ie("argMax")},e.prototype.equal=function(n,t){return ie("equal")},e.prototype.notEqual=function(n,t){return ie("notEqual")},e.prototype.less=function(n,t){return ie("less")},e.prototype.lessEqual=function(n,t){return ie("lessEqual")},e.prototype.greater=function(n,t){return ie("greater")},e.prototype.greaterEqual=function(n,t){return ie("greaterEqual")},e.prototype.logicalNot=function(n){return ie("logicalNot")},e.prototype.logicalAnd=function(n,t){return ie("logicalAnd")},e.prototype.logicalOr=function(n,t){return ie("logicalOr")},e.prototype.where=function(n){return ie("where")},e.prototype.select=function(n,t,r){return ie("select")},e.prototype.topk=function(n,t,r){return ie("topk")},e.prototype.min=function(n,t){return ie("min")},e.prototype.minimum=function(n,t){return ie("minimum")},e.prototype.mod=function(n,t){return ie("mod")},e.prototype.max=function(n,t){return ie("max")},e.prototype.maximum=function(n,t){return ie("maximum")},e.prototype.all=function(n,t){return ie("all")},e.prototype.any=function(n,t){return ie("any")},e.prototype.squaredDifference=function(n,t){return ie("squaredDifference")},e.prototype.ceil=function(n){return ie("ceil")},e.prototype.floor=function(n){return ie("floor")},e.prototype.round=function(n){return ie("round")},e.prototype.sign=function(n){return ie("sign")},e.prototype.isNaN=function(n){return ie("isNaN")},e.prototype.isInf=function(n){return ie("isInf")},e.prototype.isFinite=function(n){return ie("isFinite")},e.prototype.pow=function(n,t){return ie("pow")},e.prototype.exp=function(n){return ie("exp")},e.prototype.expm1=function(n){return ie("expm1")},e.prototype.softmax=function(n,t){return ie("softmax")},e.prototype.log=function(n){return ie("log")},e.prototype.log1p=function(n){return ie("log1p")},e.prototype.sqrt=function(n){return ie("sqrt")},e.prototype.rsqrt=function(n){return ie("rsqrt")},e.prototype.square=function(n){return ie("square")},e.prototype.reciprocal=function(n){return ie("reciprocal")},e.prototype.relu=function(n){return ie("relu")},e.prototype.relu6=function(n){return ie("relu6")},e.prototype.prelu=function(n,t){return ie("prelu")},e.prototype.elu=function(n){return ie("elu")},e.prototype.eluDer=function(n,t){return ie("eluDer")},e.prototype.selu=function(n){return ie("selu")},e.prototype.int=function(n){return ie("int")},e.prototype.clip=function(n,t,r){return ie("clip")},e.prototype.abs=function(n){return ie("abs")},e.prototype.complexAbs=function(n){return ie("complexAbs")},e.prototype.sigmoid=function(n){return ie("sigmoid")},e.prototype.softplus=function(n){return ie("softplus")},e.prototype.sin=function(n){return ie("sin")},e.prototype.cos=function(n){return ie("cos")},e.prototype.tan=function(n){return ie("tan")},e.prototype.asin=function(n){return ie("asin")},e.prototype.acos=function(n){return ie("acos")},e.prototype.atan=function(n){return ie("atan")},e.prototype.atan2=function(n,t){return ie("atan2")},e.prototype.sinh=function(n){return ie("sinh")},e.prototype.cosh=function(n){return ie("cosh")},e.prototype.tanh=function(n){return ie("tanh")},e.prototype.asinh=function(n){return ie("asinh")},e.prototype.acosh=function(n){return ie("acosh")},e.prototype.atanh=function(n){return ie("atanh")},e.prototype.erf=function(n){return ie("erf")},e.prototype.step=function(n,t){return ie("step")},e.prototype.fusedConv2d=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,ie("fusedConv2d")},e.prototype.conv2d=function(n,t,r){return ie("conv2d")},e.prototype.conv2dDerInput=function(n,t,r){return ie("conv2dDerInput")},e.prototype.conv2dDerFilter=function(n,t,r){return ie("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(n){return n.input,n.filter,n.convInfo,n.bias,n.activation,n.preluActivationWeights,ie("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(n,t,r){return ie("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(n,t,r){return ie("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(n,t,r){return ie("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(n,t,r){return ie("conv3d")},e.prototype.conv3dDerInput=function(n,t,r){return ie("conv3dDerInput")},e.prototype.conv3dDerFilter=function(n,t,r){return ie("conv3dDerFilter")},e.prototype.maxPool=function(n,t){return ie("maxPool")},e.prototype.maxPoolBackprop=function(n,t,r,a){return ie("maxPoolBackprop")},e.prototype.avgPool=function(n,t){return ie("avgPool")},e.prototype.avgPoolBackprop=function(n,t,r){return ie("avgPoolBackprop")},e.prototype.avgPool3d=function(n,t){return ie("avgPool3d")},e.prototype.avgPool3dBackprop=function(n,t,r){return ie("avgPool3dBackprop")},e.prototype.maxPool3d=function(n,t){return ie("maxPool3d")},e.prototype.maxPool3dBackprop=function(n,t,r,a){return ie("maxPool3dBackprop")},e.prototype.reshape=function(n,t){return ie("reshape")},e.prototype.cast=function(n,t){return ie("cast")},e.prototype.tile=function(n,t){return ie("tile")},e.prototype.pad=function(n,t,r){return ie("pad")},e.prototype.transpose=function(n,t){return ie("transpose")},e.prototype.gather=function(n,t,r){return ie("gather")},e.prototype.gatherND=function(n,t){return ie("gatherND")},e.prototype.scatterND=function(n,t,r){return ie("scatterND")},e.prototype.batchToSpaceND=function(n,t,r){return ie("batchToSpaceND")},e.prototype.spaceToBatchND=function(n,t,r){return ie("spaceToBatchND")},e.prototype.resizeBilinear=function(n,t,r,a){return ie("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(n,t,r){return ie("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(n,t,r,a){return ie("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(n,t,r){return ie("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(n,t,r,a,i,o){return ie("batchNormalization")},e.prototype.localResponseNormalization4D=function(n,t,r,a,i){return ie("localResponseNormalization4D")},e.prototype.LRNGrad=function(n,t,r,a,i,o,u){return ie("LRNGrad")},e.prototype.multinomial=function(n,t,r,a){return ie("multinomial")},e.prototype.oneHot=function(n,t,r,a){return ie("oneHot")},e.prototype.cumsum=function(n,t,r,a){return ie("cumsum")},e.prototype.nonMaxSuppression=function(n,t,r,a,i){return ie("nonMaxSuppression")},e.prototype.fft=function(n){return ie("fft")},e.prototype.ifft=function(n){return ie("ifft")},e.prototype.complex=function(n,t){return ie("complex")},e.prototype.real=function(n){return ie("real")},e.prototype.imag=function(n){return ie("imag")},e.prototype.cropAndResize=function(n,t,r,a,i,o){return ie("cropAndResize")},e.prototype.depthToSpace=function(n,t,r){return ie("depthToSpace")},e.prototype.split=function(n,t,r){return ie("split")},e.prototype.sparseToDense=function(n,t,r,a){return ie("sparseToDense")},e.prototype.diag=function(n){return ie("diag")},e.prototype.fill=function(n,t,r){return ie("fill")},e.prototype.onesLike=function(n){return ie("onesLike")},e.prototype.zerosLike=function(n){return ie("zerosLike")},e.prototype.linspace=function(n,t,r){return ie("linspace")},e.prototype.dispose=function(){return ie("dispose")},e}();function ie(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Oo(e,n){for(var t=e.length,r=[],a=0;a<t;a++){var i=t-1-a,o=e[i]||1;(n[n.length-1-a]||1)>1&&o===1&&r.unshift(i)}return r}function yn(e,n){for(var t=[],r=0;r<n.length;r++){var a=e[e.length-r-1],i=n.length-r-1,o=n[i];(a==null||a===1&&o>1)&&t.unshift(i)}return t}function Je(e,n){for(var t=[],r=Math.max(e.length,n.length),a=0;a<r;a++){var i=e[e.length-a-1];i==null&&(i=1);var o=n[n.length-a-1];if(o==null&&(o=1),i===1)t.unshift(o);else if(o===1)t.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+n+".");t.unshift(i)}}return t}function rf(e,n,t,r,a,i,o){o===void 0&&(o="channelsLast");var u,c=dm(n),f=c[0],h=c[1];if(o==="channelsLast")u=[f,h,e[3],e[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);u=[f,h,e[1],e[1]]}return $s(e,u,t,r,a,i,!1,o)}function cm(e,n,t,r,a,i,o){o===void 0&&(o="NDHWC");var u,c,f=ry(n),h=f[0],p=f[1],m=f[2];if(o==="NDHWC")c="channelsLast",u=[h,p,m,e[4],e[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);c="channelsFirst",u=[h,p,m,e[1],e[1]]}return fm(e,u,t,r,a,!1,c,i)}function $s(e,n,t,r,a,i,o,u){o===void 0&&(o=!1),u===void 0&&(u="channelsLast");var c=[-1,-1,-1,-1],f=c[0],h=c[1],p=c[2],m=c[3];if(u==="channelsLast")f=e[0],h=e[1],p=e[2],m=e[3];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);f=e[0],m=e[1],h=e[2],p=e[3]}var g,y=n[0],b=n[1],E=n[3],_=dm(t),w=_[0],I=_[1],R=dm(r),C=R[0],O=R[1],D=Zu(y,C),P=Zu(b,O),k=function(re,ne,z,Z,$,oe,L,Y){var Q,de,he;if(typeof re=="number"){Q={top:re,bottom:re,left:re,right:re,type:re===0?"VALID":"NUMBER"};var Se=function(Le,qe,ge,ht,pt){ht==null&&(ht=JO(Le,qe,ge));var at=Le[0],_n=Le[1],yt=Vc((at-qe+2*ht)/ge+1,pt);F(jt(yt),function(){return"The output # of rows ("+yt+") must be an integer. Change the stride and/or zero pad parameters"});var Mt=Vc((_n-qe+2*ht)/ge+1,pt);return F(jt(Mt),function(){return"The output # of columns ("+Mt+") must be an integer. Change the stride and/or zero pad parameters"}),[yt,Mt]}([ne,z],oe,Z,re,Y);de=Se[0],he=Se[1]}else if(re==="same"){de=Math.ceil(ne/Z),he=Math.ceil(z/$);var be=Math.max(0,(de-1)*Z+oe-ne),Pe=Math.max(0,(he-1)*$+L-z),_e=Math.floor(be/2),Ce=be-_e,Be=Math.floor(Pe/2);Q={top:_e,bottom:Ce,left:Be,right:Pe-Be,type:"SAME"}}else{if(re!=="valid")throw Error("Unknown padding parameter: "+re);Q={top:0,bottom:0,left:0,right:0,type:"VALID"},de=Math.ceil((ne-oe+1)/Z),he=Math.ceil((z-L+1)/$)}return{padInfo:Q,outHeight:de,outWidth:he}}(a,h,p,w,I,D,P,i),N=k.padInfo,U=k.outHeight,V=k.outWidth,ee=o?E*m:E;return u==="channelsFirst"?g=[f,ee,U,V]:u==="channelsLast"&&(g=[f,U,V,ee]),{batchSize:f,dataFormat:u,inHeight:h,inWidth:p,inChannels:m,outHeight:U,outWidth:V,outChannels:ee,padInfo:N,strideHeight:w,strideWidth:I,filterHeight:y,filterWidth:b,effectiveFilterHeight:D,effectiveFilterWidth:P,dilationHeight:C,dilationWidth:O,inShape:e,outShape:g,filterShape:n}}function fm(e,n,t,r,a,i,o,u){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var c=[-1,-1,-1,-1,-1],f=c[0],h=c[1],p=c[2],m=c[3],g=c[4];if(o==="channelsLast")f=e[0],h=e[1],p=e[2],m=e[3],g=e[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);f=e[0],g=e[1],h=e[2],p=e[3],m=e[4]}var y,b=n[0],E=n[1],_=n[2],w=n[4],I=ry(t),R=I[0],C=I[1],O=I[2],D=ry(r),P=D[0],k=D[1],N=D[2],U=Zu(b,P),V=Zu(E,k),ee=Zu(_,N),re=function(L,Y,Q,de,he,Se,be,Pe,_e,Ce,Be){var Le,qe,ge,ht;if(typeof L=="number"){Le={top:L,bottom:L,left:L,right:L,front:L,back:L,type:L===0?"VALID":"NUMBER"};var pt=function(tn,hr,pi,Zr,lt,nn){lt==null&&(lt=JO(tn,hr,Zr));var An=tn[0],mi=tn[1],ar=tn[2],cn=Vc((An-hr+2*lt)/Zr+1,nn);F(jt(cn),function(){return"The output # of depths ("+cn+") must be an integer. Change the stride and/or zero pad parameters"});var xn=Vc((mi-hr+2*lt)/Zr+1,nn);F(jt(xn),function(){return"The output # of rows ("+xn+") must be an integer. Change the stride and/or zero pad parameters"});var Rl=Vc((ar-hr+2*lt)/Zr+1,nn);return F(jt(Rl),function(){return"The output # of columns ("+Rl+") must be an integer. Change the stride and/or zero pad parameters"}),[cn,xn,Rl,pi]}([Y,Q,de,1],Pe,1,he,L,Be);qe=pt[0],ge=pt[1],ht=pt[2]}else if(L==="same"){qe=Math.ceil(Y/he),ge=Math.ceil(Q/Se),ht=Math.ceil(de/be);var at=(qe-1)*he+Pe-Y,_n=(ge-1)*Se+_e-Q,yt=(ht-1)*be+Ce-de,Mt=Math.floor(at/2),zn=at-Mt,rr=Math.floor(_n/2),Nr=_n-rr,dr=Math.floor(yt/2);Le={top:rr,bottom:Nr,left:dr,right:yt-dr,front:Mt,back:zn,type:"SAME"}}else{if(L!=="valid")throw Error("Unknown padding parameter: "+L);Le={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},qe=Math.ceil((Y-Pe+1)/he),ge=Math.ceil((Q-_e+1)/Se),ht=Math.ceil((de-Ce+1)/be)}return{padInfo:Le,outDepth:qe,outHeight:ge,outWidth:ht}}(a,h,p,m,R,C,O,U,V,ee,u),ne=re.padInfo,z=re.outDepth,Z=re.outHeight,$=re.outWidth,oe=i?w*g:w;return o==="channelsFirst"?y=[f,oe,z,Z,$]:o==="channelsLast"&&(y=[f,z,Z,$,oe]),{batchSize:f,dataFormat:o,inDepth:h,inHeight:p,inWidth:m,inChannels:g,outDepth:z,outHeight:Z,outWidth:$,outChannels:oe,padInfo:ne,strideDepth:R,strideHeight:C,strideWidth:O,filterDepth:b,filterHeight:E,filterWidth:_,effectiveFilterDepth:U,effectiveFilterHeight:V,effectiveFilterWidth:ee,dilationDepth:P,dilationHeight:k,dilationWidth:N,inShape:e,outShape:y,filterShape:n}}function JO(e,n,t,r){r===void 0&&(r=1);var a=Zu(n,r);return Math.floor((e[0]*(t-1)-t+a)/2)}function dm(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function ry(e){return typeof e=="number"?[e,e,e]:e}function Zu(e,n){return n<=1?e:e+(e-1)*(n-1)}function Vc(e,n){if(!n)return e;switch(n){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+n)}}function fl(e){var n=dm(e),t=n[0],r=n[1],a=n[2];return t===1&&r===1&&a===1}function Rr(e,n){return fl(e)||fl(n)}function R2(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function ek(e,n,t){if(n==="complex64"){if(e.dtype==="complex64")return e.clone();var r=Ot(e.shape),a=e.toFloat(),i=t.complex(a,r);return r.dispose(),a.dispose(),i}if(!l5(e.dtype,n))return W.makeTensorFromDataId(e.dataId,e.shape,n);if(e.dtype==="complex64"){var o=t.real(e);return i=o.cast(n),o.dispose(),i}if(n==="int32")return t.int(e);if(n==="bool"){var u=Ee(0,e.dtype);return i=t.notEqual(e,u),u.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+n)}function ay(e,n){return W.makeTensorFromDataId(e.dataId,n,e.dtype)}function tk(e,n,t){var r=(n-e)/(t-1),a=Ef(t,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return un(a,"float32")}function iy(e,n){if(e.length!==n.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+n.length+".");for(var t=new Float32Array(2*e.length),r=0;r<t.length;r+=2)t[r]=e[r/2],t[r+1]=n[r/2];return t}function Xw(e,n){return{real:e[2*n],imag:e[2*n+1]}}function BV(e,n,t,r){e[2*r]=n,e[2*r+1]=t}function UV(e,n,t){var r=(t?2:-2)*Math.PI*(e/n);return{real:Math.cos(r),imag:Math.sin(r)}}function FV(e,n,t){var r=function(i,o,u){return function(c,f,h){for(var p=0,m=c.length,g=0,y=!1;p<m;){var b=h(f,c[g=p+(m-p>>>1)]);b>0?p=g+1:(m=g,y=!b)}return y?p:-p-1}(i,o,u||VV)}(e,n,t),a=r<0?-(r+1):r;e.splice(a,0,n)}function VV(e,n){return e>n?1:e<n?-1:0}function C2(e,n,t,r,a){return nk(e,n,t,r,a,0).selectedIndices}function N2(e,n,t,r,a,i){var o=nk(e,n,t,r,a,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function nk(e,n,t,r,a,i,o,u){u===void 0&&(u=!1);for(var c=Array.from(n).map(function(R,C){return{score:R,boxIndex:C,suppressBeginIndex:0}}).filter(function(R){return R.score>a}).sort(Zw),f=i>0?-.5/i:0,h=[],p=[];h.length<t&&c.length>0;){var m=c.pop(),g=m.score,y=m.boxIndex,b=m.suppressBeginIndex;if(g<a)break;for(var E=!1,_=h.length-1;_>=b;--_){var w=GV(e,y,h[_]);if(w>=r){E=!0;break}if(m.score=m.score*HV(r,f,w),m.score<=a)break}m.suppressBeginIndex=h.length,E||(m.score===g?(h.push(y),p.push(m.score)):m.score>a&&FV(c,m,Zw))}var I=h.length;return u&&(h.fill(0,I),p.fill(0,I)),{selectedIndices:un(h,"int32"),selectedScores:un(p,"float32"),numValidOutputs:Ee(I,"int32")}}function GV(e,n,t){var r=e.subarray(4*n,4*n+4),a=e.subarray(4*t,4*t+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),f=Math.min(a[0],a[2]),h=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),m=Math.max(a[1],a[3]),g=(u-i)*(c-o),y=(p-f)*(m-h);if(g<=0||y<=0)return 0;var b=Math.max(i,f),E=Math.max(o,h),_=Math.min(u,p),w=Math.min(c,m),I=Math.max(_-b,0)*Math.max(w-E,0);return I/(g+y-I)}function HV(e,n,t){var r=Math.exp(n*t*t);return t<=e?r:0}function Zw(e,n){return e.score-n.score||e.score===n.score&&n.boxIndex-e.boxIndex}function rk(e,n,t){var r=new Array(e.rank).fill(0),a=e.shape.slice();return n.map(function(i){a[t]=i;var o=e.slice(r,a);return r[t]+=i,o})}function ak(e,n){for(var t=new Array(e.rank),r=0;r<t.length;r++)t[r]=e.shape[r]*n[r];var a=We(t,e.dtype);for(r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),o=new Array(e.rank),u=0;u<o.length;u++)o[u]=i[u]%e.shape[u];var c=e.locToIndex(o);a.values[r]=e.values[c]}return a.toTensor()}function ik(e,n,t,r,a){for(var i=n[n.length-1],o=[e.length/i,i],u=o[0],c=o[1],f=ef(t,u*r),h=ef("int32",u*r),p=0;p<u;p++){for(var m=p*c,g=e.subarray(m,m+c),y=[],b=0;b<g.length;b++)y.push({value:g[b],index:b});y.sort(function(R,C){return C.value-R.value});var E=p*r,_=f.subarray(E,E+r),w=h.subarray(E,E+r);for(b=0;b<r;b++)_[b]=y[b].value,w[b]=y[b].index}var I=n.slice();return I[I.length-1]=r,[Gn(f,I,t),Gn(h,I,"int32")]}function T2(e,n){for(var t=[],r=0;r<n.length;r++)n[r]&&t.push(r);var a=We(e,"int32"),i=We([t.length,e.length],"int32");for(r=0;r<t.length;r++){var o=a.indexToLoc(t[r]),u=r*e.length;i.values.set(o,u)}return i.toTensor()}var zV=function(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map(function(a,i){return"T"+i});var t=[];this.variableNames.forEach(function(a){t.push("float v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},WV=function(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map(function(a,i){return"T"+i});var t=[];this.variableNames.forEach(function(a){t.push("vec4 v"+a+" = get"+a+"AtOutCoords();")});var r=this.variableNames.map(function(a){return"v"+a}).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},KV=function(e,n,t){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,i=e.inSize,o=Math.ceil(i/r);t||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];var u=n==="max"?">":"<",c=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+u+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function ok(e,n){return["x","y","z","w","u","v"].slice(0,n).map(function(t){return e+"."+t})}function Sr(e,n){return n===1?[e]:ok(e,n)}function Zn(){var e,n,t,r,a,i,o,u,c,f;return le().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",n="in",t="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",u=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",f=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",n="attribute",t="varying",r="varying",a="texture2D",i="gl_FragColor",o="",u=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,f=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:n,varyingVs:t,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:u,defineSpecialInf:c,defineRound:f}}function _s(e,n,t){t===void 0&&(t="index");var r=ri(n);return r.map(function(a,i){return"int "+e[i]+" = "+t+" / "+a+"; "+(i===r.length-1?"int "+e[i+1]+" = "+t+" - "+e[i]+" * "+a:"index -= "+e[i]+" * "+a)+";"}).join("")}function O2(e){var n=ri(e).map(function(t){return t.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+n[0]+" + coords.y * "+n[1]+` + coords.z;
  }
`}var sk=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function qV(e,n,t,r){var a=[];e.forEach(function(g){var y=Ne(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?a.push("uniform float "+g.name+(y>1?"["+y+"]":"")+";"):(a.push("uniform sampler2D "+g.name+";"),a.push("uniform int offset"+g.name+";"))});var i,o,u=a.join(`
`),c=e.map(function(g){return function(y,b,E){E===void 0&&(E=!1);var _="";_+=E?uk(y):zu(y);var w=y.shapeInfo.logicalShape,I=b.logicalShape;return w.length<=I.length&&(_+=E?function(R,C){var O,D=R.name,P=D.charAt(0).toUpperCase()+D.slice(1),k="get"+P+"AtOutCoords",N=R.shapeInfo.logicalShape.length,U=C.logicalShape.length,V=Oo(R.shapeInfo.logicalShape,C.logicalShape),ee=Tt(U),re=U-N,ne=["x","y","z","w","u","v"];O=N===0?"":U<2&&V.length>=1?"coords = 0;":V.map(function(Q){return"coords."+ne[Q+re]+" = 0;"}).join(`
`);var z="";z=U<2&&N>0?"coords":R.shapeInfo.logicalShape.map(function(Q,de){return"coords."+ne[de+re]}).join(", ");var Z="return outputValue;",$=Ne(R.shapeInfo.logicalShape)===1,oe=Ne(C.logicalShape)===1;if(N!==1||$||oe){if($&&!oe)Z=U===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(V.length){var L=N-2,Y=N-1;V.indexOf(L)>-1&&V.indexOf(Y)>-1?Z="return vec4(outputValue.x);":V.indexOf(L)>-1?Z="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":V.indexOf(Y)>-1&&(Z="return vec4(outputValue.xx, outputValue.zz);")}}else Z=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+k+`() {
      `+ee+` coords = getOutputCoords();
      `+O+`
      vec4 outputValue = get`+P+"("+z+`);
      `+Z+`
    }
  `}(y,b):function(R,C){var O=R.name,D=O.charAt(0).toUpperCase()+O.slice(1),P="get"+D+"AtOutCoords",k=C.texShape,N=R.shapeInfo.texShape,U=R.shapeInfo.logicalShape.length,V=C.logicalShape.length;if(!R.shapeInfo.isUniform&&U===V&&R.shapeInfo.flatOffset==null&&On(N,k))return`
      float `+P+`() {
        return sampleTexture(`+O+`, resultUV);
      }
    `;var ee,re=Tt(V),ne=Oo(R.shapeInfo.logicalShape,C.logicalShape),z=V-U,Z=["x","y","z","w","u","v"];ee=U===0?"":V<2&&ne.length>=1?"coords = 0;":ne.map(function(oe){return"coords."+Z[oe+z]+" = 0;"}).join(`
`);var $="";return $=V<2&&U>0?"coords":R.shapeInfo.logicalShape.map(function(oe,L){return"coords."+Z[L+z]}).join(", "),`
    float `+P+`() {
      `+re+` coords = getOutputCoords();
      `+ee+`
      return get`+D+"("+$+`);
    }
  `}(y,b)),_}(g,n,r)}).join(`
`),f=n.texShape,h=Zn(),p=function(g){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+g.texture2D+`(textureSampler, uv).r;
    }
  `}(h),m=function(g){return g.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+g.varyingFs+` vec2 resultUV;
    `+g.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+g.defineSpecialNaN+`
    `+g.defineSpecialInf+`
    `+g.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+YV+`
    `+$V+`
    `+jV+`
  `}(h);return n.isPacked?(i=function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(R,C){var O=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];return O[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+O[1]+`.0);
      }
    `:O[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+O[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));
      return 2 * (resTexRC.x * `+O[1]+` + resTexRC.y);
    }
  `}(0,y);case 2:return function(R,C){var O=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)];if(On(R,C))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+O[0]+", "+O[1]+`));
      }
    `;var D=Math.ceil(R[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));

      int index = resTexRC.x * `+O[1]+` + resTexRC.y;
      int r = 2 * (index / `+D+`);
      int c = imod(index, `+D+`) * 2;

      return ivec2(r, c);
    }
  `}(g,y);case 3:return b=g,E=y,_=[Math.ceil(E[0]/2),Math.ceil(E[1]/2)],w=Math.ceil(b[2]/2),I=w*Math.ceil(b[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+_[0]+", "+_[1]+`));
      int index = resTexRC.x * `+_[1]+` + resTexRC.y;

      int b = index / `+I+`;
      index -= b * `+I+`;

      int r = 2 * (index / `+w+`);
      int c = imod(index, `+w+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(R,C){for(var O=[Math.ceil(C[0]/2),Math.ceil(C[1]/2)],D=Math.ceil(R[R.length-1]/2),P=D*Math.ceil(R[R.length-2]/2),k=P,N="",U="b, r, c",V=2;V<R.length-1;V++)k*=R[R.length-V-1],N=`
      int b`+V+" = index / "+k+`;
      index -= b`+V+" * "+k+`;
    `+N,U="b"+V+", "+U;return`
    ivec`+R.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+O[0]+", "+O[1]+`));
      int index = resTexRC.x * `+O[1]+` + resTexRC.y;

      `+N+`

      int b = index / `+P+`;
      index -= b * `+P+`;

      int r = 2 * (index / `+D+`);
      int c = imod(index, `+D+`) * 2;

      return ivec`+R.length+"("+U+`);
    }
  `}(g,y)}var b,E,_,w,I}(n.logicalShape,f),o=function(g){return`
    void setOutput(vec4 val) {
      `+g.output+` = val;
    }
  `}(h)):(i=function(g,y){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(_,w){return w[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+w[1]+`.0);
      }
    `:w[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+w[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+w[0]+", "+w[1]+`));
      return resTexRC.x * `+w[1]+` + resTexRC.y;
    }
  `}(0,y);case 2:return function(_,w){return On(_,w)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+w[0]+", "+w[1]+`));
      }
    `:_[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+w[0]+", "+w[1]+`));
        int index = resTexRC.x * `+w[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:_[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+w[0]+", "+w[1]+`));
        int index = resTexRC.x * `+w[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+w[0]+", "+w[1]+`));
      int index = resTexRC.x * `+w[1]+` + resTexRC.y;
      int r = index / `+_[1]+`;
      int c = index - r * `+_[1]+`;
      return ivec2(r, c);
    }
  `}(g,y);case 3:return b=y,E=_s(["r","c","d"],g),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+b[0]+", "+b[1]+`));
      int index = resTexRC.x * `+b[1]+` + resTexRC.y;
      `+E+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(_,w){var I=_s(["r","c","d","d2"],_);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+w[0]+", "+w[1]+`));
      int index = resTexRC.x * `+w[1]+` + resTexRC.y;
      `+I+`
      return ivec4(r, c, d, d2);
    }
  `}(g,y);case 5:return function(_,w){var I=_s(["r","c","d","d2","d3"],_);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+w[0]+`,
                             `+w[1]+`));

      int index = resTexRC.x * `+w[1]+` + resTexRC.y;

      `+I+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(g,y);case 6:return function(_,w){var I=_s(["r","c","d","d2","d3","d4"],_);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+w[0]+", "+w[1]+`));
      int index = resTexRC.x * `+w[1]+` + resTexRC.y;

      `+I+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(g,y);default:throw new Error(g.length+"-D output sampling is not yet supported")}var b,E}(n.logicalShape,f),o=function(g){return`
    void setOutput(float val) {
      `+g.output+` = vec4(val, 0, 0, 0);
    }
  `}(h)),r&&(m+=XV),[m,p,o,u,i,c,t].join(`
`)}function zu(e){var n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var i=t.shapeInfo.texShape,o=i[0],u=i[1];if(o===1&&u===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=t.shapeInfo.texShape,f=c[0],h=c[1],p=ys(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+f+", "+h+", "+p+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 1:return function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Fu(t)+`
      }
    `;var i=t.shapeInfo.texShape,o=i[0],u=i[1];if(u===1&&o===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=ys(r);return u===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+o+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:o===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+u+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+u+", index + "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 2:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=t.shapeInfo.texShape;if(o!=null&&On(r,o)){var u=o[0],c=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+u+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var f=Es(r),h=f.newShape,p=f.keptDims,m=h;if(m.length<r.length){var g=Wu(t,m);return`
      `+zu(g)+`
      float `+i+`(int row, int col) {
        return `+i+"("+Ku(["row","col"],p)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Fu(t)+`
      }
    `;var y=o[0],b=o[1],E=ys(a);return b===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+E+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:y===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+E+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+b+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+E+`;
    vec2 uv = uvFromFlat(`+y+", "+b+`, index);
    return sampleTexture(`+a+`, uv);
  }
`}(e);case 3:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[1]*r[2],u=r[2],c=Es(r),f=c.newShape,h=c.keptDims,p=f;if(p.length<r.length){var m=Wu(t,p);return`
        `+zu(m)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+Ku(["row","col","depth"],h)+`);
        }
      `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+u+`, 1)));
        `+Fu(t)+`
      }
    `;var g=t.shapeInfo.texShape,y=g[0],b=g[1],E=t.shapeInfo.flatOffset;if(b===o&&E==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+u+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+b+".0, "+y+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(b===u&&E==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+b+".0, "+y+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var _=ys(a);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+u+" + depth + "+_+`;
        vec2 uv = uvFromFlat(`+y+", "+b+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `}(e);case 4:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[3],u=r[2]*o,c=r[1]*u,f=Es(r),h=f.newShape,p=f.keptDims;if(h.length<r.length){var m=Wu(t,h);return`
      `+zu(m)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+Ku(["row","col","depth","depth2"],p)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+u+", "+o+`, 1)));
        `+Fu(t)+`
      }
    `;var g=t.shapeInfo.flatOffset,y=t.shapeInfo.texShape,b=y[0],E=y[1];if(E===c&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+u+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+E+".0, "+b+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(E===o&&g==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+E+".0, "+b+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var _=ys(a);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+u+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+b+", "+E+", index + "+_+`);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);case 5:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=r[4],u=r[3]*o,c=r[2]*u,f=r[1]*c,h=Es(r),p=h.newShape,m=h.keptDims;if(p.length<r.length){var g=Wu(t,p);return`
      `+zu(g)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+Ku(["row","col","depth","depth2","depth3"],m)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+f+", "+c+", "+u+", "+o+`)) +
          depth3;
        `+Fu(t)+`
      }
    `;var y=t.shapeInfo.flatOffset,b=t.shapeInfo.texShape,E=b[0],_=b[1];if(_===f&&y==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+u+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+_+".0, "+E+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(_===o&&y==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+_+".0, "+E+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var w=ys(a);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+f+" + col * "+c+" + depth * "+u+` +
          depth2 * `+o+" + depth3 + "+w+`;
      vec2 uv = uvFromFlat(`+E+", "+_+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);case 6:return function(t){var r=t.shapeInfo.logicalShape,a=t.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),o=Es(r),u=o.newShape,c=o.keptDims;if(u.length<r.length){var f=Wu(t,u);return`
      `+zu(f)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+Ku(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var h=r[5],p=r[4]*h,m=r[3]*p,g=r[2]*m,y=r[1]*g;if(t.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+y+", "+g+", "+m+", "+p+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+h+`, 1)));
        `+Fu(t)+`
      }
    `;var b=t.shapeInfo.flatOffset,E=t.shapeInfo.texShape,_=E[0],w=E[1];if(w===y&&b==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+g+", "+m+", "+p+", "+h+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+w+".0, "+_+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(w===h&&b==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+w+".0, "+_+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var I=ys(a);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+y+" + col * "+g+" + depth * "+m+` +
          depth2 * `+p+" + depth3 * "+h+" + depth4 + "+I+`;
      vec2 uv = uvFromFlat(`+_+", "+w+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `}(e);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function uk(e){var n,t,r;switch(e.shapeInfo.logicalShape.length){case 0:return n=e.name,t="get"+n.charAt(0).toUpperCase()+n.slice(1),r=Zn(),`
    vec4 `+t+`() {
      return `+r.texture2D+"("+n+`, halfCR);
    }
  `;case 1:return function(a){var i=a.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),u=a.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],f=Zn();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+f.texture2D+"("+i+`, uv);
    }
  `}(e);case 2:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,u="get"+o.charAt(0).toUpperCase()+o.slice(1),c=a.shapeInfo.texShape,f=c[0],h=c[1],p=Zn();if(c!=null&&On(i,c))return`
      vec4 `+u+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+h+".0, "+f+`.0);

        return `+p.texture2D+"("+o+`, uv);
      }
    `;var m=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],g=Math.ceil(i[1]/2);return`
    vec4 `+u+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+g+", "+m[0]+", "+m[1]+`, row, col);
      return `+p.texture2D+"("+o+`, uv);
    }
  `}(e);case 3:return function(a){var i=a.shapeInfo.logicalShape,o=a.name,u="get"+o.charAt(0).toUpperCase()+o.slice(1),c=a.shapeInfo.texShape,f=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(i[0]===1){var h=i.slice(1),p=Wu(a,h);return`
        `+uk(p)+`
        vec4 `+u+`(int b, int row, int col) {
          return `+u+"("+Ku(["b","row","col"],[1,2])+`);
        }
      `}var m=f[0],g=f[1],y=Math.ceil(i[2]/2),b=y*Math.ceil(i[1]/2),E=Zn();return`
    vec4 `+u+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+m+", "+g+", "+b+", "+y+`, b, row, col);
      return `+E.texture2D+"("+o+`, uv);
    }
  `}(e);default:return function(a){for(var i=a.shapeInfo.logicalShape,o=i.length,u=a.name,c="get"+u.charAt(0).toUpperCase()+u.slice(1),f=a.shapeInfo.texShape,h=[Math.ceil(f[0]/2),Math.ceil(f[1]/2)],p=h[0],m=h[1],g=Math.ceil(i[o-1]/2),y=g*Math.ceil(i[o-2]/2),b="int b, int row, int col",E="b * "+y+" + (row / 2) * "+g+" + (col / 2)",_=2;_<o-1;_++)b="int b"+_+", "+b,y*=i[o-_-1],E="b"+_+" * "+y+" + "+E;var w=Zn();return`
    vec4 `+c+"("+b+`) {
      int index = `+E+`;
      int texR = index / `+m+`;
      int texC = index - texR * `+m+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+", "+p+`);
      return `+w.texture2D+"("+u+`, uv);
    }
  `}(e)}}var YV=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$V=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,jV=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,XV=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ys(e){return"offset"+e}function Fu(e){var n=e.name,t=Ne(e.shapeInfo.logicalShape);return t<2?"return "+n+";":`
    for (int i = 0; i < `+t+`; i++) {
      if (i == index) {
        return `+n+`[i];
      }
    }
  `}function Tt(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Wu(e,n){var t=JSON.parse(JSON.stringify(e));return t.shapeInfo.logicalShape=n,t}function Ku(e,n){return n.map(function(t){return e[t]}).join(", ")}var ZV=function(e,n,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,F(e.length>2,function(){return"Packed arg"+(t.charAt(0).toUpperCase()+t.slice(1))+" supports only inputs with rank above 2."});var a=e[e.length-1],i=Math.ceil(a/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var o,u,c=this.outputShape,f=c.length,h=Tt(f),p=Sr("coords",f);if(i===1){var m=Tt(u=f+1);o=`
        `+m+" sourceLocR = "+m+"("+p.join()+`, 0);
        ++`+p[f-1]+`;
        `+m+" sourceLocG = "+m+"("+p.join()+`, 0);
        ++`+p[f-2]+`;
        `+m+" sourceLocA = "+m+"("+p.join()+`, 0);
        --`+p[f-1]+`;
        `+m+" sourceLocB = "+m+"("+p.join()+`, 0);
        --`+p[f-2]+";"}else u=f,o=`
        `+h+` sourceLocR = coords;
        ++`+p[f-1]+`;
        `+h+` sourceLocG = coords;
        ++`+p[f-2]+`;
        `+h+` sourceLocA = coords;
        --`+p[f-1]+`;
        `+h+` sourceLocB = coords;
        --`+p[f-2]+";";var g=["x","y","z","w","u","v"].slice(0,u),y="."+g[u-1],b=g.map(function(P){return"int "+P}),E=Sr("sourceLocR",u-1).concat("inIdx.r"),_=Sr("sourceLocG",u-1).concat("inIdx.g"),w=Sr("sourceLocB",u-1).concat("inIdx.b"),I=Sr("sourceLocA",u-1).concat("inIdx.a"),R=t==="max"?"greaterThan":"lessThan",C=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+E.join()+`),
                             getBestIndicesAChannel(`+_.join()+`),
                             getBestIndicesAChannel(`+w.join()+`),
                             getBestIndicesAChannel(`+I.join()+")));",O=`vec4(
            getAChannel(`+E.join()+`),
            hasNextCol ? getAChannel(`+_.join()+`) : 0.,
            hasNextRow ? getAChannel(`+w.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+I.join()+") : 0.)",D=r?"":`
      float getBestIndicesAChannel(`+b.join()+`) {
        return getChannel(getBestIndicesA(`+g.join()+`),
                                          vec2(`+g.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+b.join()+`) {
        return getChannel(getA(`+g.join()+`),
                               vec2(`+g.slice(-2).join()+`));
      }
      `+D+`
      void main() {
        `+h+` coords = getOutputCoords();
        bool hasNextCol = `+p[f-1]+" < "+(c[f-1]-1)+`;
        bool hasNextRow = `+p[f-2]+" < "+(c[f-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+y+", sourceLocG"+y+`,
          sourceLocB`+y+", sourceLocA"+y+") * "+n+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+O+`;

        for (int i = 0; i < `+n+`; i++) {
          inIdx = srcIdx;
          `+C+`
          vec4 candidate = `+O+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+R+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},QV=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,f=u-1-e.padInfo.top,h=c-1-e.padInfo.left,p=1/(n*t);this.userCode=`
      const ivec2 pads = ivec2(`+f+", "+h+`);
      const float avgMultiplier = float(`+p+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+u+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},JV=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var n=e.filterDepth,t=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=h-1-e.padInfo.front,y=p-1-e.padInfo.top,b=m-1-e.padInfo.left,E=1/(n*t*r);this.userCode=`
      const ivec3 pads = ivec3(`+g+", "+y+", "+b+`);
      const float avgMultiplier = float(`+E+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+u+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+p+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+m+`;
                wC += `+f+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},eG=function(e,n,t,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Je(e,n),Je(e,t);var o="0.0";r!=null&&(Je(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var u="1.0";a!=null&&(Je(e,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+u+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},tG=function(e,n,t,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Je(e,n),Je(e,t);var o="vec4(0.0)";r!=null&&(Je(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var u="vec4(1.0)";a!=null&&(Je(e,a),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+u+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},nG="return areal * breal - aimag * bimag;",rG="return areal * bimag + aimag * breal;",Qw=function(e,n,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Je(n,t),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Jg="return a + b;",e1="return a - b;",Jw="return a * b;",lk="return (a < 0.) ? b * a : a;",Kt=function(e,n,t){this.variableNames=["A","B"],this.outputShape=Je(n,t),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},ck=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Mi=function(e,n,t,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Je(n,t);var a=this.outputShape.length,i="";if(r)if(a===0||Ne(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Tt(a)+` coords = getOutputCoords();
        `,a===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=Sr("coords",a);i+=`
            bool nextRowOutOfBounds =
              (`+o[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+o[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},aG=function(){function e(n){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(n,t){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,n),a.gl.uniform1f(r.maxLoc,t)}},e}(),iG=function(){function e(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(n,t){var r=this;return function(a,i){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(i,"maxVal")),a.gl.uniform1f(r.minLoc,n),a.gl.uniform1f(r.maxLoc,t)}},e}(),oG=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},sG=function(e){this.outputShape=[],this.outputShape=cl(e,1),this.variableNames=e.map(function(u,c){return"T"+c});var n=new Array(e.length-1);n[0]=e[0][1];for(var t=1;t<n.length;t++)n[t]=n[t-1]+e[t][1];var r=["if (yC < "+n[0]+") setOutput(getT0(yR, yC));"];for(t=1;t<n.length;t++){var a=n[t-1];r.push("else if (yC < "+n[t]+") setOutput(getT"+t+"(yR, yC-"+a+"));")}var i=n.length,o=n[n.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},uG=function(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=cl(e,n);var t=this.outputShape,r=t.length,a=Tt(r),i=Sr("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(E,_){return"T"+_});var u=new Array(e.length-1);u[0]=e[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+e[c][n];var f=o[n],h=o.slice(-2),p=o.join(),m="if ("+f+" < "+u[0]+`) {
        return getChannel(
            getT0(`+p+"), vec2("+h.join()+`));
        }`;for(c=1;c<u.length;c++){var g=u[c-1];m+=`
        if (`+f+" < "+u[c]+"  && "+f+" >= "+u[c-1]+`) {
          return getChannel(
            getT`+c+"("+Jd(o,f,g)+`),
            vec2(`+Jd(h,f,g)+`));
        }`}var y=u.length,b=u[u.length-1];m+=`
        return getChannel(
          getT`+y+"("+Jd(o,f,b)+`),
          vec2(`+Jd(h,f,b)+"));",this.userCode=`
      float getValue(`+o.map(function(E){return"int "+E})+`) {
        `+m+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+t[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+t[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+t[r-2]+` &&
            `+i[r-1]+" < "+t[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function Jd(e,n,t){var r=e.indexOf(n);return e.map(function(a,i){return i===r?a+" - "+t:a}).join()}var lG=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,t=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},cG=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,u=t-1-e.padInfo.left,c=i?1:2,f=i?2:3,h=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+h+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+f+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},fG=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideDepth,t=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+n+" - "+a+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+t+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+o+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},dG=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterDepth,t=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,u=n-1-e.padInfo.front,c=t-1-e.padInfo.top,f=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+u+", "+c+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+n+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+n+` - 1 - wF;

          for (int wR = 0; wR < `+t+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+t+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},hG=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var n=e.strideHeight,t=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+n+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},pG=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var n=e.filterHeight,t=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=n-1-e.padInfo.top,o=t-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+n+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+n+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+u+`; dm++) {
              int d2 = d1 * `+u+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},eI=function(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,p=e.filterWidth,m=4*Math.floor(e.inChannels/4),g=e.inChannels%4,y=e.dataFormat==="channelsLast",b=y?1:2,E=y?2:3,_=y?3:1,w="",I="";t&&(w=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,I="result = activation(result);");var R=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+w+`

      const ivec2 strides = ivec2(`+o+", "+u+`);
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+_+`];

        ivec2 xRCCorner =
            ivec2(coords[`+b+"], coords["+E+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+m+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+y+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(g===1)+`) {

              if (`+y+`) {
                dotProd +=
                    getX(batch, xR, xC, `+m+`) *
                    getW(wR, wC, `+m+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+m+`, xR, xC) *
                    getW(wR, wC, `+m+`, d2);
              }

            } else if (`+(g===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2)
              );

              if (`+y+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(g===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2),
                getW(wR, wC, `+m+` + 2, d2)
              );

              if (`+y+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1),
                  getX(batch, xR, xC, `+m+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC),
                  getX(batch, `+m+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+R+`
        `+I+`
        setOutput(result);
      }
    `},mG=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var n=e.padInfo.front,t=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,h=e.filterDepth,p=e.filterHeight,m=e.filterWidth,g=4*Math.floor(e.inChannels/4),y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+n+", "+t+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+h+`; wF++) {
          int xF = xFCorner + wF * `+u+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+m+`; wC++) {
              int xC = xCCorner + wC * `+f+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+g+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(y===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+g+`) *
                  getW(wF, wR, wC, `+g+`, d2);
              } else if (`+(y===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(y===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1),
                  getX(batch, xF, xR, xC, `+g+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2),
                  getW(wF, wR, wC, `+g+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},tI=function(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,u=e.padInfo.left,c=e.strideHeight,f=e.strideWidth,h=e.dilationHeight,p=e.dilationWidth,m=e.filterHeight,g=e.filterWidth,y=e.outChannels/e.inChannels,b="",E="";t&&(b=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,E="result = activation(result);");var _=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+y+`;
        int q = d2 - d1 * `+y+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+m+`; wR++) {
          int xR = xRCorner + wR * `+h+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC++) {
            int xC = xCCorner + wC * `+p+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+_+`
        `+E+`
        setOutput(result);
      }
    `},nI=function(e,n,t,r){n===void 0&&(n=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var a=e.inHeight,i=e.inWidth,o=e.padInfo.top,u=e.padInfo.left,c=e.strideHeight,f=e.strideWidth,h=e.dilationHeight,p=e.dilationWidth,m=e.filterHeight,g=e.filterWidth,y=g,b="int xR; int xC; int xCOffset;",E=0;E<m;E++)for(var _=0;_<g;_++)b+=`
          vec4 xTexelR`+E+"C"+2*_+` = vec4(0.);
          vec4 wR`+E+"C"+_+` = vec4(0.);
          vec4 xR`+E+"C"+_+" = vec4(0.);";for(E=0;E<m;E++)for(var w=0;w<y;w++){if(b+=`
          xR = xRCorner + `+E*h+`;
          xC = xCCorner + `+(_=2*w)*p+`;
        `,f===1){if(_<g&&(b+=u%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+E+"C"+_+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+E+"C"+_+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+E+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+E+"C"+_+" = vec4(previous.zw, xTexelR"+E+"C"+_+`.xy);
                } else {
                  xR`+E+"C"+_+" = vec4(0, 0, xTexelR"+E+"C"+_+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+E+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+E+"C"+_+` = vec4(0.);
                }

                xR`+E+"C"+_+" = xTexelR"+E+"C"+_+`;
              `,_+1<g)){var I=u%2==0?NO(p):p;p%2==0&&u%2==1||p%2!=0&&u%2!=1?(b+=`
                  xCOffset = xC + `+u%2+" + "+I+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+E+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,p>1&&(b+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+E+"C"+_+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+E+"C"+_+` = vec4(0.);
                    }
                  `),b+=`
                  xR`+E+"C"+(_+1)+` = vec4(
                    xTexelR`+E+"C"+_+".zw, xTexelR"+E+"C"+(_+2)+`.xy);
                `):b+=`
                  xCOffset = xC + `+I+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+E+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+E+"C"+(_+1)+" = xTexelR"+E+"C"+(_+2)+`;
                `}}else _<g&&(b+=`
              if(xR >= 0 && xR < `+a+`) {
            `,u%2==1?(b+=`
                xCOffset = xC + 1 - `+f+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+E+"C"+_+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+E+"C"+_+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+E+"C"+(_+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+E+"C"+(_+2)+` = vec4(0.);
                }

                xR`+E+"C"+_+` = vec4(
                  xTexelR`+E+"C"+_+".zw, xTexelR"+E+"C"+(_+2)+`.zw);
              `,_+1<g&&(b+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+f+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+E+"C"+(_+1)+" = vec4(xTexelR"+E+"C"+(_+2)+`.xy, final.xy);
                `)):(b+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+E+"C"+_+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+E+"C"+_+` = vec4(0.);
                }

                xCOffset = xC + `+f+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+E+"C"+(_+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+E+"C"+(_+2)+` = vec4(0.);
                }

                xR`+E+"C"+_+` = vec4(
                  xTexelR`+E+"C"+_+".xy, xTexelR"+E+"C"+(_+2)+`.xy);
              `,_+1<g&&(b+=`
                  xR`+E+"C"+(_+1)+` = vec4(
                    xTexelR`+E+"C"+_+".zw, xTexelR"+E+"C"+(_+2)+`.zw);
                `)),b+="}");_<g&&(b+=`
            vec4 wTexelR`+E+"C"+_+" = getW("+E+", "+_+`, d1, q);
            wR`+E+"C"+_+" = vec4(wTexelR"+E+"C"+_+".xz, wTexelR"+E+"C"+_+`.xz);
          `,_+1<g&&(b+=`
              vec4 wTexelR`+E+"C"+(_+1)+" = getW("+E+", "+(_+1)+`, d1, q);
              wR`+E+"C"+(_+1)+` =
                vec4(wTexelR`+E+"C"+(_+1)+".xz, wTexelR"+E+"C"+(_+1)+".xz);"))}for(E=0;E<m;E++)for(_=0;_<g;_++)b+="dotProd += xR"+E+"C"+_+" * wR"+E+"C"+_+";";var R="",C="";t&&(R=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`vec4 activation(vec4 x) {
          `+t+`
        }`,C="result = activation(result);");var O=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+R+`

      const ivec2 strides = ivec2(`+c+", "+f+`);
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+b+`

        vec4 result = dotProd;
        `+O+`
        `+C+`
        setOutput(result);
      }
    `},vG=function(e,n,t,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],u=e[2],c=e[3],f=n[0],h=t[0],p=t[1];this.outputShape=[f,h,p,c];var m=r==="bilinear"?1:0,g=[o-1+".0",u-1+".0"],y=g[0],b=g[1],E=h>1?[""+(o-1)/(h-1),"(y2-y1) * height_ratio","y1*"+y+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+y],_=E[0],w=E[1],I=E[2],R=p>1?[""+(u-1)/(p-1),"(x2-x1) * width_ratio","x1*"+b+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+b],C=R[0],O=R[1],D=R[2];this.userCode=`
      const float height_ratio = float(`+_+`);
      const float width_ratio = float(`+C+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+w+`;
        float width_scale = `+O+`;

        float in_y = `+I+`;
        if( in_y < 0.0 || in_y > `+y+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+D+`;
        if( in_x < 0.0 || in_x > `+b+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+m+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},gG=function(e,n,t){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],i=t?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(t?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Tt(r)+` coords = getOutputCoords();
        int end = `+rI(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+n+`) {
            continue;
          }
          `+rI(r,"coords")+` = idx;
          val += getX(`+function(o,u){if(o===1)return""+u;if(o===2)return u+".x, "+u+".y";if(o===3)return u+".x, "+u+".y, "+u+".z";if(o===4)return u+".x, "+u+".y, "+u+".z, "+u+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function rI(e,n){if(e===1)return""+n;if(e===2)return n+".y";if(e===3)return n+".z";if(e===4)return n+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var yG=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=nf.DENSE;var n=Fc(e),t=Zn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+_s(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+t.output+` = result;
      }
    `},bG=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=nf.DENSE;var n=Fc(e),t=Zn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+_s(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+n[0]+", "+n[1]+`));
        int index = 4 * (resTexRC.x * `+n[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+t.output+` = result;
      }
    `},SG=function(){function e(n,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+t+`;
      int offset_h = imod(h, `+t+`);
      int in_w = w / `+t+`;
      int offset_w = imod(w, `+t+`);
      int offset_d = (offset_h * `+t+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),EG=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},_G=function(e){this.variableNames=["A"],this.outTexUsage=Fr.DOWNLOAD;var n=Zn();this.outputShape=e,this.userCode=`
      `+sk+`

      void main() {
        float x = getAAtOutCoords();
        `+n.output+` = encode_float(x);
      }
    `},AG=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Fr.DOWNLOAD;var n=Zn();this.outputShape=e,this.userCode=`
      `+sk+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+n.output+` = encode_float(x);
      }
    `},wG=function(e,n,t){t===void 0&&(t=!1),this.variableNames=["A"];var r=Zn(),a=n[0],i=n[1];this.outputShape=e;var o="result";t&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+O2(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},IG=function(e,n,t){t===void 0&&(t=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Zn(),a=n[0],i=n[1];this.outputShape=e;var o="",u="result";t&&(u="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var f=0;f<=1;f++){var h=2*c+f;o+=`
          localCoords = coords;
          if(localCoords[2] + `+f+" < "+e[2]+`) {
            localCoords[2] += `+f+`;
            if(localCoords[1] + `+c+" < "+e[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+h+`] = values[0];
              } else if(offset == 1) {
                result[`+h+`] = values[1];
              } else if(offset == 2) {
                result[`+h+`] = values[2];
              } else {
                result[`+h+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+O2(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+r.output+" = "+u+`;
      }
    `},RG="return real * expR - imag * expI;",CG="return real * expI + imag * expR;",aI=function(e,n,t){this.variableNames=["real","imag"];var r=n[1];this.outputShape=n;var a=t?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=t?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},NG=function(){function e(n,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;return function(r,a){t.valueLoc==null&&(t.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(t.valueLoc,n)}},e}(),TG=function(e,n,t){this.variableNames=["A","indices"];var r=e.slice();r[t]=n,this.outputShape=r,this.rank=r.length;var a=Tt(this.rank),i=function(o,u){var c=o.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var f=["resRC.x","resRC.y","resRC.z","resRC.w"],h=[],p=0;p<o.length;p++)p===u?h.push("int(getIndices("+f[p]+"))"):h.push(""+f[p]);return h.join()}(e,t);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},OG=function(e,n,t){this.sliceDim=e,this.strides=n,this.variableNames=["x","indices"],this.outputShape=t;var r=Tt(n.length),a=Tt(t.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function kG(e,n){var t=Zn();return R5(e,n,t.version+`
    precision highp float;
    `+t.attribute+` vec3 clipSpacePos;
    `+t.attribute+` vec2 uv;
    `+t.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function xG(e,n){return k5(e,n,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function DG(e,n){return x5(e,n,new Uint16Array([0,1,2,2,1,3]))}function Af(e,n,t,r,a,i,o){P5(t,r);var u=D5(e,n),c=e.TEXTURE_2D;return Te(e,n,function(){return e.bindTexture(c,u)}),Te(e,n,function(){return e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Te(e,n,function(){return e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Te(e,n,function(){return e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Te(e,n,function(){return e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Te(e,n,function(){return e.texImage2D(c,0,a,t,r,0,i,o,null)}),Te(e,n,function(){return e.bindTexture(e.TEXTURE_2D,null)}),u}function PG(e,n,t,r,a){var i=Ym(t,r);return Af(e,n,i[0],i[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}function MG(e,n,t,r,a){var i=Ym(t,r);return Af(e,n,i[0],i[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function LG(e,n,t,r,a){var i=Ym(t,r);return Af(e,n,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function BG(e,n,t,r,a){var i=_f(t,r);return Af(e,n,i[0],i[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function UG(e,n,t,r,a){var i=_f(t,r);return Af(e,n,i[0],i[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}function FG(e,n,t,r){return Te(e,n,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Kw(e,n,t,"clipSpacePos",r,3,20,0)&&Kw(e,n,t,"uv",r,2,20,12)}function VG(e,n,t,r,a,i,o){var u,c,f;Te(e,n,function(){return e.bindTexture(e.TEXTURE_2D,t)}),i instanceof Uint8Array?(u=new Uint8Array(r*a*4),c=e.UNSIGNED_BYTE,f=e.RGBA):(u=new Float32Array(r*a*4),c=e.FLOAT,f=o.internalFormatPackedFloat),u.set(i),Te(e,n,function(){return e.texImage2D(e.TEXTURE_2D,0,f,r,a,0,e.RGBA,c,u)}),Te(e,n,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function GG(e,n,t,r){Te(e,n,function(){return e.bindTexture(e.TEXTURE_2D,t)}),r.data instanceof Uint8Array?Te(e,n,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):Te(e,n,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),Te(e,n,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function HG(e,n,t,r,a){var i=e.createBuffer();Te(e,n,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var o=16*t*r;return Te(e,n,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)}),Te(e,n,function(){return e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,0)}),Te(e,n,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function zG(e,n,t){var r=e,a=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function WG(e,n,t,r,a){var i=Ym(t,r),o=i[0],u=i[1],c=new Uint8Array(t*r*4);return Te(e,n,function(){return e.readPixels(0,0,o,u,a.downloadTextureFormat,e.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function KG(e,n,t,r,a,i,o,u){var c=e,f=new Float32Array(function(h,p){var m=_f(h,p);return m[0]*m[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,n),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,f),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),f}function qG(e,n,t,r){var a=new Float32Array(t*r*4);return Te(e,n,function(){return e.readPixels(0,0,r,t,e.RGBA,e.FLOAT,a)}),a}var YG=function(){function e(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=le().getNumber("WEBGL_VERSION");n!=null?(this.gl=n,E5(t,n)):this.gl=li(t);var r="WEBGL_color_buffer_float";if(le().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=jd(this.gl,this.debug,"OES_texture_float"),ha(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=jd(this.gl,this.debug,"OES_texture_half_float");else if(le().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ha(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=jd(this.gl,this.debug,"EXT_color_buffer_half_float");else if(le().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ha(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!ha(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=xG(this.gl,this.debug),this.indexBuffer=DG(this.gl,this.debug),this.framebuffer=M5(this.gl,this.debug),this.textureConfig=S2(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return le().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var n=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Te(t,this.debug,function(){return t.finish()}),Te(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Te(t,this.debug,function(){return t.deleteFramebuffer(n.framebuffer)}),Te(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Te(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Te(t,this.debug,function(){return t.deleteBuffer(n.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(n,t){return this.throwIfDisposed(),PG(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(n,t){return this.throwIfDisposed(),MG(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(n,t){return this.throwIfDisposed(),LG(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(n,t){this.throwIfDisposed(),GG(this.gl,this.debug,n,t)},e.prototype.uploadDenseMatrixToTexture=function(n,t,r,a){this.throwIfDisposed(),VG(this.gl,this.debug,n,t,r,a,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(n,t){return this.throwIfDisposed(),UG(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(n,t){return this.throwIfDisposed(),BG(this.gl,this.debug,n,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(n){var t=this;this.throwIfDisposed(),this.outputTexture===n&&(qw(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Te(this.gl,this.debug,function(){return t.gl.deleteTexture(n)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(n,t,r){var a=this;return this.downloadMatrixDriver(n,function(){return WG(a.gl,a.debug,t,r,a.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(n,t,r,a,i,o){return KG(this.gl,n,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(n,t){return zG(this.gl,n,t)},e.prototype.createBufferFromTexture=function(n,t,r){this.bindTextureToFrameBuffer(n);var a=HG(this.gl,this.debug,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},e.prototype.createAndWaitForFence=function(){var n=this.createFence(this.gl);return this.pollFence(n)},e.prototype.createFence=function(n){var t,r,a=this;if(le().getBool("WEBGL_FENCE_API_ENABLED")){var i=n,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),r=function(){var u=i.clientWaitSync(o,0,0);return u===i.ALREADY_SIGNALED||u===i.CONDITION_SATISFIED},t=o}else le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(t,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:t,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(n,t,r){var a=this;return this.downloadMatrixDriver(n,function(){return qG(a.gl,a.debug,t,r)})},e.prototype.createProgram=function(n){this.throwIfDisposed();var t=this.gl,r=C5(t,this.debug,n),a=kG(t,this.debug),i=T5(t,this.debug);return Te(t,this.debug,function(){return t.attachShader(i,a)}),Te(t,this.debug,function(){return t.attachShader(i,r)}),O5(t,this.debug,i),this.debug&&jg(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=FG(t,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(n){var t=this;this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&Te(this.gl,this.debug,function(){return t.gl.deleteProgram(n)})},e.prototype.setProgram=function(n){var t=this;this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&jg(this.gl,this.debug,this.program),Te(this.gl,this.debug,function(){return t.gl.useProgram(n)})},e.prototype.getUniformLocation=function(n,t,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?B5(this.gl,this.debug,n,t):U5(this.gl,n,t)},e.prototype.getAttributeLocation=function(n,t){var r=this;return this.throwIfDisposed(),Te(this.gl,this.debug,function(){return r.gl.getAttribLocation(n,t)})},e.prototype.getUniformLocationNoThrow=function(n,t){return this.throwIfDisposed(),this.gl.getUniformLocation(n,t)},e.prototype.setInputMatrixTexture=function(n,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),F5(this.gl,this.debug,this.program,n,t,r)},e.prototype.setOutputMatrixTexture=function(n,t,r){this.setOutputMatrixTextureDriver(n,r,t)},e.prototype.setOutputPackedMatrixTexture=function(n,t,r){this.throwIfDisposed();var a=_f(t,r),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(n,i,o)},e.prototype.setOutputMatrixWriteRegion=function(n,t,r,a){this.setOutputMatrixWriteRegionDriver(r,n,a,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(n,t,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&jg(this.gl,this.debug,this.program),Xd(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var n=this.gl;this.debug&&this.debugValidate(),Te(n,this.debug,function(){return n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var n=this;this.throwIfDisposed(),Te(this.gl,this.debug,function(){return n.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=jd(this.gl,this.debug,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var n=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=n.createQuery();return n.beginQuery(t.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),i=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}else{var t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(n){return Ie(this,void 0,void 0,function(){var t=this;return Re(this,function(r){switch(r.label){case 0:return[4,Fw(function(){return t.disposed||t.isQueryAvailable(n,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(n,le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(n,t){if(t===0)return null;if(t===2){var r=this.gl;return r.getQueryParameter(n,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(n,a.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(n,t){if(t===0)return!0;if(t===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(n,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(n,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(n){var t=this;return new Promise(function(r){t.addItemToPoll(function(){return n.isFencePassed()},function(){return r()})})},e.prototype.pollItems=function(){for(var n=function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),t=0;t<=n;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(n+1)},e.prototype.addItemToPoll=function(n,t){var r=this;this.itemsToPoll.push({isDoneFn:n,resolveFn:t}),this.itemsToPoll.length>1||Fw(function(){return r.pollItems(),r.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(n){this.throwIfDisposed(),Xg(this.gl,this.debug,n,this.framebuffer),this.debug&&Xd(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Xg(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Xd(this.gl)):qw(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(n,t){this.bindTextureToFrameBuffer(n);var r=t();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(n,t,r){this.throwIfDisposed();var a=this.gl;Xg(a,this.debug,n,this.framebuffer),this.debug&&Xd(a),this.outputTexture=n,Te(a,this.debug,function(){return a.viewport(0,0,t,r)}),Te(a,this.debug,function(){return a.scissor(0,0,t,r)})},e.prototype.setOutputMatrixWriteRegionDriver=function(n,t,r,a){var i=this;this.throwIfDisposed(),Te(this.gl,this.debug,function(){return i.gl.scissor(n,t,r,a)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function iI(e,n){if(e.length!==n.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+n.length+" inputs");e.forEach(function(t,r){var a=t.logicalShape,i=n[r],o=i.shape;if(!On(a,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+o+" must match");if(!t.isUniform||!i.isUniform){var u=t.texShape,c=i.isUniform?null:i.texData.texShape;if(!On(u,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+u+" and "+c+" must match")}})}var $G=function(e,n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=t.filterWidth,a=t.inChannels,i=t.strideWidth,o=t.strideHeight,u=t.padInfo,c=t.outWidth,f=t.dilationWidth,h=t.dilationHeight,p=t.dataFormat,m=u.left,g=u.top,y=a*r,b=Zn(),E=p==="channelsLast",_=E?0:1,w=E?1:2,I="",R=0;R<=1;R++)for(var C=0;C<=1;C++)I+=`
          blockIndex = rc.y + `+C+`;
          pos = rc.x + `+R+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+o+" - "+g+`;
            d0 = offsetY + `+h+" * (pos / "+y+`);

            if(d0 < `+n[_]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+i+". - "+m+`.);
              d1 = offsetX + `+f+" * (int(mod(float(pos), "+y+".) / "+a+`.));

              if(d1 < `+n[w]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+E+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*R+C)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*R+C)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+I+`

        `+b.output+` = result;
      }
    `},jG=function(e,n,t,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=n,u=e[3]-1;this.outputShape=e;var c="float("+t+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+u+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},XG=function(e,n,t,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=t,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+n+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+n+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+t+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},ZG=function(e,n,t,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=n,u=e[3]-1;this.outputShape=e;var c="float("+t+") + float("+r+") * sum";i=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+u+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},QG=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideHeight,t=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,u=i-1-e.padInfo.left,c=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+t+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},JG=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var n=e.strideDepth,t=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=u-1-e.padInfo.front,p=c-1-e.padInfo.top,m=f-1-e.padInfo.left,g=u*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+u+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+n+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+t+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+g+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+f+` +
                  wR * `+f+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},t1=function(e,n,t,r,a,i,o){t===void 0&&(t=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var u=t?e[1]:e[2],c=Math.ceil(u/2),f=t?"i * 2, rc.y":"rc.y, i * 2",h=r?"rc.z, i * 2":"i * 2, rc.z",p=t?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",y="";i&&(g=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,y="result = activation(result);");var b=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+f+`);
          vec4 b = getMatrixB(rc.x, `+h+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+p[0]+" * "+m[0]+`);
          result += (`+p[1]+" * "+m[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+b+`

        `+y+`

        setOutput(result);
      }
    `},e8=function(){function e(n,t,r){this.variableNames=["probs"],this.outputShape=[n,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(t-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(t-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;return function(r,a){t.seedLoc==null&&(t.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(t.seedLoc,n)}},e}(),t8=function(e,n,t,r){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+t+`),
                      float(index == coords.y)));
      }
    `},n8=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var n=e.length;if(n===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var t=Sr("rc",n),r=Tt(n),a=function(u,c,f){if(u===1)return"rc > "+c[0];for(var h="",p=u-2;p<u;p++)h+=f[p]+" >= "+c[p],p<u-1&&(h+="||");return h}(n,e,t),i=function(u,c,f,h){if(u===1)return"";var p=h.slice(-2);return`
    int r = `+p[0]+`;
    int c = `+p[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+f+`;
  `}(n,e[e.length-1],e[e.length-2],t),o=function(u,c){var f=u.length,h=function(p,m){for(var g=[],y=0;y<=1;y++)for(var b=0;b<=1;b++){for(var E=(y===0?"r":"rp1")+", "+(b===0?"c":"cp1"),_=2;_<p;_++)E=m[m.length-1-_]+","+E;g.push(E)}return g}(f,c);return f===1?`getA(rc),
            rc + 1 >= `+u[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+h[0]+`),
          cEdge ? 0. : getA(`+h[1]+`),
          rEdge ? 0. : getA(`+h[2]+`),
          rEdge || cEdge ? 0. : getA(`+h[3]+")"}(e,t);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},r8=function(e,n,t){this.variableNames=["x"],this.outputShape=n.map(function(c,f){return c[0]+e[f]+c[1]});var r=e.length,a=Tt(r),i=n.map(function(c){return c[0]}).join(","),o=n.map(function(c,f){return c[0]+e[f]}).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+i+`);
      `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+t+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+u+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+t+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},a8=function(e,n,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map(function(E,_){return E[0]+e[_]+E[1]});for(var r=e.length,a=Tt(r),i=n.map(function(E){return E[0]}).join(","),o=n.map(function(E,_){return E[0]+e[_]}).join(","),u=Sr("rc",r),c=Sr("source",r),f=u[r-1]+" < "+this.outputShape[r-1],h=r===1?"source":"vec2("+c.slice(-2).join()+")",p=[a+" rc = outputLoc;",u[r-1]+` += 1;
       if(`+f+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+u[r-2]+` += 1;
       if(`+u[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+u[r-1]+` += 1;
         if(`+f+") {"],m=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",y=0,b=r===1?2:4;y<b;y++)g+=`
        `+p[y]+`
        if (`+m+`) {
          result[`+y+"] = float("+t+`);
        } else {
          `+a+` source = rc - start;
          result[`+y+"] = getChannel(getX("+c.join()+"), "+h+`);
        }
      `;g+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+i+`);
      const `+a+" end = "+a+"("+o+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+g+`
        setOutput(result);
      }
    `},n1=function(e,n,t){if(this.variableNames=["x"],n==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;var m=n==="avg",g="0.0";if(m||(g="-1.0 / 1e-20"),t)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+i+`);
        const ivec2 pads = ivec2(`+h+", "+p+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`;
                wC += `+u+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+f+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(y="avgValue / count");var b=4*Math.floor(r/4),E=r%4,_=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+i+`);
      const ivec2 pads = ivec2(`+h+", "+p+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+b+`; wC += 4) {
            int xC = xCCorner + wC * `+u+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              getValue(batch, xR, xC + 2 * `+u+`, d),
              getValue(batch, xR, xC + 3 * `+u+`, d)
            );

            `+_+`
          }

          int xC = xCCorner + `+b+`;
          if (`+(E===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(E===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              initializationValue,
              initializationValue
            );

            `+_+`
          } else if (`+(E===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+u+`, d),
              getValue(batch, xR, xC + 2 * `+u+`, d),
              initializationValue
            );

            `+_+`
          }
        }
        setOutput(`+y+`);
      }
    `}},r1=function(e,n,t){if(this.variableNames=["x"],n==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;var E=n==="avg",_="0.0";if(E||(_="-1.0 / 1e-20"),t)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+g+", "+y+", "+b+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+h+`;
              wD += `+u+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+p+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+m+`;
                  wC += `+f+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+p+" * "+m+` +
                      wR * `+m+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var w=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="avg"&&(w="avgValue / count");var I=4*Math.floor(r/4),R=r%4,C=`
      if (`+E+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+g+", "+y+", "+b+`);
      const float initializationValue = `+_+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+_+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+h+`;
            wD += `+u+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+p+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+I+`; wC += 4) {
              int xC = xCCorner + wC * `+f+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+f+`, ch)
              );

              `+C+`
            }

            int xC = xCCorner + `+I+`;
            if (`+(R===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+C+`
            } else if (`+(R===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                initializationValue,
                initializationValue
              );

              `+C+`
            } else if (`+(R===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+f+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+f+`, ch),
                initializationValue
              );

              `+C+`
            }
          }
          setOutput(`+w+`);
        }
      }
    `}},i8=function(e,n){this.variableNames=["x"];var t=e.windowSize,r=e.batchSize,a=e.inSize,i=Math.ceil(a/t);this.outputShape=[r,i];var o="0.0",u="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",u="min"):n==="max"&&(o="-1.0 / 1e-20",u="max");var c=n+"("+n+"("+n+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");var f=4*Math.floor(t/4),h=t%4,p=`
      if (`+(n==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(n==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+u+`(values, minMaxValue);
      }
    `,m="vec4";n==="all"?(o="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):n==="any"&&(o="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");var g="";a%t>0&&(g=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+g+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+f+`; i += 4) {
          int inIdx = inOffset + i;
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+p+`
        }

        int inIdx = inOffset + `+f+`;
        if (`+(h===1)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(h===2)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+p+`
        } else if (`+(h===3)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+p+`
        }
        setOutput(`+c+`);
      }
    `},o8=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var t="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),t+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+_s(["r","c","d"],n)+`
      return ivec3(r, c, d);
    }
  
      `+O2(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+t+`

        setOutput(result);
      }
    `},s8=function(e,n,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,a=r[1],i=r[2],o=e.shape,u=o[1],c=o[2],f=[t&&u>1?a-1:a,t&&c>1?i-1:i],h=[t&&u>1?u-1:u,t&&c>1?c-1:c],p=f[0]/h[0],m=f[1]/h[1],g=1/p,y=1/m,b=2*Math.ceil(g)+2,E=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+b+`);
        const int winWidth = int(`+E+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+u+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},u8=function(e,n,t,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],u=e[3];this.outputShape=[a,n,t,u];var c=[r&&n>1?i-1:i,r&&t>1?o-1:o],f=[r&&n>1?n-1:n,r&&t>1?t-1:t];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},l8=function(e,n,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=e[0],i=e[1],o=e[2],u=e[3];this.outputShape=[a,n,t,u];var c=[r&&n>1?i-1:i,r&&t>1?o-1:o],f=[r&&n>1?n-1:n,r&&t>1?t-1:t];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`,
          `+c[1]/f[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(u-1)+`;
        bool hasNextRow = coords.z < `+(t-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},c8=function(e,n,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;var r=n.shape,a=r[1],i=r[2],o=e.shape,u=o[1],c=o[2],f=[t&&u>1?a-1:a,t&&c>1?i-1:i],h=[t&&u>1?u-1:u,t&&c>1?c-1:c],p=f[0]/h[0],m=f[1]/h[1],g=1/p,y=1/m,b=2*Math.ceil(g)+2,E=2*Math.ceil(y)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+p+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+y+`);

        const int winHeight = int(`+b+`);
        const int winWidth = int(`+E+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+u+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+f[0]+`) *
                (float(dyR) / float(`+h[0]+`));

            float sourceFracCol =
                float(`+f[1]+`) *
                  (float(dyC) / float(`+h[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+t+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+t+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},f8=function(e,n,t,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],i=e[1],o=e[2],u=e[3];this.outputShape=[a,n,t,u];var c=[r&&n>1?i-1:i,r&&t>1?o-1:o],f=[r&&n>1?n-1:n,r&&t>1?t-1:t],h=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/f[0]+`,
          `+c[1]/f[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+h+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},d8=function(e,n){this.variableNames=["x"];var t=e.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");if(this.outputShape=e,t!==1){var r=e.map(function(i,o){return function(u){return n.indexOf(u)!==-1&&e[u]!==1?e[u]+" - coords["+u+"] - 1":"coords["+u+"]"}(o)}).join(","),a=Tt(t);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},h8=function(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=e.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");this.outputShape=e;var r=Sr("rc",t),a=r[t-1]+" + 1 < "+this.outputShape[t-1],i=r[t-2]+" + 1 < "+this.outputShape[t-2],o=Tt(t);function u(c){var f=e.map(function(h,p){return function(m,g){return n.indexOf(m)!==-1&&e[m]!==1?e[m]+" - "+g[m]+" - 1":""+g[m]}(p,c)});return"getChannel(getX("+f.join(",")+"), vec2("+f.slice(-2).join(",")+"))"}this.userCode=t===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return u(c)}(r.slice())+`;
          if(`+a+`){
            result.g = `+function(c){return c[t-1]="("+c[t-1]+" + 1)",u(c)}(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(c){return c[t-2]="("+c[t-2]+" + 1)",u(c)}(r.slice())+`;
            if(`+a+`) {
              result.a = `+function(c){return c[t-1]="("+c[t-1]+" + 1)",c[t-2]="("+c[t-2]+" + 1)",u(c)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},oI=function(e,n,t,r,a,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var u=Tt(a.length),c=Tt(i.length),f="";t===1?f="i":t===2&&(f="i, j");var h="getIndices("+f+")",p="";r===1?p="i":r===2&&(p="i, coords[1]");var m="getUpdates("+p+")",g=n>1?"strides[j]":"strides";this.userCode=`
        `+u+" strides = "+u+"("+a+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+n+`; j++) {
              int index = round(`+h+`);
              flattenedIndex += index * `+g+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+m+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},p8=function(e,n){this.variableNames=["x","segmentIds"];var t=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/t);this.outputShape=[r,o];var u=4*Math.floor(t/4),c=t%4,f=`
        sumValue += dot(values, segFilter);
    `,h="";a%t>0&&(h=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var p="";a%t>0&&(p=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+p+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+t+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+u+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+f+`
        }

        int inIdx = inOffset + `+u+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+f+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+f+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+f+`
        }
        setOutput(sumValue);
      }
    `},m8=function(e,n,t){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=n,t>4)throw Error("Where for rank "+t+" is not yet supported");if(t===1)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],u=[],c=0;c<n.length;c++)u.push(""+i[c]),c<e&&o.push(""+i[c]);r=o.join(),a=u.join()}var f=Tt(t);this.userCode=`
      void main() {
        `+f+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},v8=function(){function e(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;var t,r=Tt(this.rank),a="uniform int start["+this.rank+"];",i=function(o){if(o===1)return"sourceLoc";if(o<=6)return a1.slice(0,o).map(function(u){return"sourceLoc."+u}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);t=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+n.map(function(o,u){return"sourceLoc."+a1[u]+" = start["+u+"] + coords."+a1[u]+";"}).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+t+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,n)}},e}(),a1=["x","y","z","w","u","v"],g8=function(){function e(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length;var t=Tt(this.rank),r=Sr("coords",this.rank),a=Sr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",o="getChannel(getSource("+a.join()+"), "+i+")",u=`
      result.x = `+o+`;
      if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+o+`;
        --`+a[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+n[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+r[this.rank-1]+" < "+n[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,f=this.rank<=4?`sourceLoc = coords +
            `+t+"("+n.map(function(h,p){return"start["+p+"]"}).join()+");":n.map(function(h,p){return a[p]+" = "+r[p]+" + start["+p+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+t+` coords = getOutputCoords();
        `+t+` sourceLoc;
        `+f+`
        vec4 result = vec4(0.);
        `+u+`
        `+c+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(n){var t=this;if(n.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+n.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,n)}},e}(),y8=function(e,n,t){this.variableNames=["x"],this.outputShape=t;var r=t.length,a=Tt(t.length),i=Tt(t.length),o="";if(r===1)o="coords * strides + begin";else{var u=0;o=t.map(function(c,f){return u++,t.length===1?"coords * strides["+f+"] + begin["+f+"]":"coords["+(u-1)+"] * strides["+f+"] + begin["+f+"]"}).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+e+`);
      `+a+" strides = "+a+"("+n+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},b8=function(){function e(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(n,t,r){var a,i=sI(t,r),o=uI(n,i,r);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var u=this.freeTextures[o].shift();return this.usedTextures[o].push(u),u}return this.numUsedTextures++,this.log(),i===Br.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):i===Br.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):i===Br.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):i===Br.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):i===Br.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[o].push(a),a},e.prototype.releaseTexture=function(n,t,r,a){if(this.freeTextures!=null){var i=uI(t,sI(r,a),a);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(n),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],u=o.indexOf(n);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(u,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+n+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var n=this;if(this.freeTextures!=null){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(r){n.gpgpu.deleteMatrixTexture(r)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(a){n.gpgpu.deleteMatrixTexture(a)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function sI(e,n){if(e===Fr.UPLOAD)return Br.PACKED_2X2_FLOAT32;if(e===Fr.RENDER||e==null)return function(t){return le().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Br.PACKED_2X2_FLOAT32:Br.UNPACKED_FLOAT32:t?Br.PACKED_2X2_FLOAT16:Br.UNPACKED_FLOAT16}(n);if(e===Fr.DOWNLOAD||e===Fr.PIXELS)return Br.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function uI(e,n,t){return e[0]+"_"+e[1]+"_"+n+"_"+t}var S8=function(e,n){this.variableNames=["A"];for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=e[r]*n[r];this.outputShape=t,this.rank=t.length;var a=Tt(this.rank),i=function(o){var u=o.length;if(u>5)throw Error("Tile for rank "+u+" is not yet supported");if(u===1)return"imod(resRC, "+o[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],f=[],h=0;h<o.length;h++)f.push("imod("+c[h]+", "+o[h]+")");return f.join()}(e);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},E8=function(e,n){this.variableNames=["A"];for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=e[n[r]];this.outputShape=t,this.rank=t.length;var a=Tt(this.rank),i=function(o){var u=o.length;if(u>6)throw Error("Transpose for rank "+u+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],f=new Array(u),h=0;h<o.length;h++)f[o[h]]=c[h];return f.join()}(n);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},_8=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=e[n[r]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=Tt(this.rank),i=ok("rc",this.rank),o=new Array(this.rank);for(r=0;r<n.length;r++)o[n[r]]=i[r];var u="vec2("+o.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+t[this.rank-1],f="getChannel(getA("+o.join()+"), "+u+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+f+`;
      if(`+c+`) {
        result[1] = `+f+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+t[this.rank-2]+`) {
        result[2] = `+f+`;
        if(`+c+`) {
          result[3] = `+f+`;
        }
      }
      setOutput(result);
    }
    `},k2=1.7580993408473768,x2=1.0507009873554805,$e=function(e,n){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+n+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Pa="if (isnan(x)) return x;",A8="return x;",lI="return abs(x);",fk=Pa+`
  return (x < 0.0) ? 0.0 : x;
`,dk=Pa+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,hk="return (x >= 0.0) ? x : (exp(x) - 1.0);",w8=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+k2+`;
  float scale = `+x2+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,cI="return -x;",fI="return ceil(x);",dI="return floor(x);",hI="return exp(x);",pI="return exp(x) - 1.0;",I8=Pa+`
  return sin(x);
`,R8=Pa+`
  return cos(x);
`,C8=Pa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,N8=Pa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,T8=Pa+`
  return atan(x);
`,O8=Pa+"return log(x + sqrt(x * x + 1.0));",k8=Pa+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,x8=Pa+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,eh="return x;",D8="return x;",pk=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mk=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,vk=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,kc=function(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+n+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},P8=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var n=e.length,t=Sr("rc",n),r=Tt(n),a=function(u,c){if(u===1)return"rc";for(var f="",h=0;h<u;h++)f+=c[h],h<u-1&&(f+=",");return f}(n,t),i=t.slice(-2),o=n<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},th={};function nh(e,n){if(n===void 0&&(n=!1),e==="linear")return n?D8:A8;if(e==="relu")return n?pk:fk;if(e==="elu")return n?vk:hk;if(e==="relu6")return n?mk:dk;if(e==="prelu")return n?ck:lk;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var M8=600,L8=function(e){function n(t){var r,a=e.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!le().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){var i=li(le().getNumber("WEBGL_VERSION"));a.binaryCache=((r=le().getNumber("WEBGL_VERSION"))in th||(th[r]={}),th[r]),a.gpgpu=new YG(i),a.canvas=i.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=t,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=t.gl.canvas;return a.textureManager=new b8(a.gpgpu),a.numMBBeforeWarning=le().global.screen==null?1024:le().global.screen.height*le().global.screen.width*window.devicePixelRatio*M8/1024/1024,a.texData=new ZO(a,W),a}return Da(n,e),n.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.prototype.write=function(t,r,a){if(le().getBool("DEBUG")&&this.checkNumericalProblems(t),a==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:a,values:t,usage:Fr.UPLOAD}),i},n.prototype.move=function(t,r,a,i){if(le().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:a,dtype:i,values:r,usage:Fr.UPLOAD})},n.prototype.readSync=function(t){var r=this.texData.get(t),a=r.values,i=r.dtype,o=r.complexTensors,u=r.slice,c=r.shape,f=r.isPacked;if(u!=null){var h=void 0;h=f?new kc(c,eh):new $e(c,eh);var p=this.runWebGLProgram(h,[{dataId:t,shape:c,dtype:i}],i),m=this.readSync(p.dataId);return this.disposeData(p.dataId),m}if(a!=null)return this.convertAndCacheOnCPU(t);if(i==="string")return a;var g,y,b=this.activeTimers!=null;return b&&(g=Ya()),i==="complex64"?y=iy(o.real.dataSync(),o.imag.dataSync()):y=this.getValuesFromTexture(t),b&&(this.downloadWaitMs+=Ya()-g),this.convertAndCacheOnCPU(t,y)},n.prototype.read=function(t){return Ie(this,void 0,void 0,function(){var r,a,i,o,u,c,f,h,p,m,g,y,b,E,_,w,I,R,C,O,D,P;return Re(this,function(k){switch(k.label){case 0:if(this.pendingRead.has(t))return r=this.pendingRead.get(t),[2,new Promise(function(N){return r.push(N)})];if(a=this.texData.get(t),i=a.values,o=a.shape,u=a.slice,c=a.dtype,f=a.complexTensors,h=a.isPacked,u!=null)return p=void 0,p=h?new kc(o,eh):new $e(o,eh),m=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:c}],c),g=this.read(m.dataId),this.disposeData(m.dataId),[2,g];if(i!=null)return[2,this.convertAndCacheOnCPU(t)];if(!le().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&le().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return y=null,c!=="complex64"&&le().get("WEBGL_BUFFER_SUPPORTED")&&(b=this.decode(t),E=this.texData.get(b.dataId),y=(P=this.gpgpu).createBufferFromTexture.apply(P,[E.texture].concat(Fc(o)))),this.pendingRead.set(t,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:k.sent(),k.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([f.real.data(),f.imag.data()])];case 3:return w=k.sent(),I=w[0],R=w[1],_=iy(I,R),[3,5];case 4:y==null?_=this.getValuesFromTexture(t):(C=Ne(o),_=this.gpgpu.downloadFloat32MatrixFromBuffer(y,C)),k.label=5;case 5:return b!=null&&this.disposeData(b.dataId),O=this.convertAndCacheOnCPU(t,_),D=this.pendingRead.get(t),this.pendingRead.delete(t),D.forEach(function(N){return N(O)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,O]}})})},n.prototype.checkNumericalProblems=function(t){if(t!=null)for(var r=0;r<t.length;r++){var a=t[r];if(!w5(a))throw le().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},n.prototype.getValuesFromTexture=function(t){var r,a=this.texData.get(t),i=a.shape,o=a.dtype,u=a.isPacked,c=Ne(i);if(le().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var f=this.decode(t),h=this.texData.get(f.dataId),p=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[h.texture].concat(Fc(i))).subarray(0,c);return this.disposeData(f.dataId),p}var m=le().getBool("WEBGL_PACK")&&u===!0,g=m?Zg(i):i,y=m?new AG(g):new _G(g),b=this.runWebGLProgram(y,[{shape:g,dtype:o,dataId:t}],"float32"),E=this.texData.get(b.dataId),_=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(E.texture,E.texShape[0],E.texShape[1]).subarray(0,c);return this.disposeData(b.dataId),_},n.prototype.time=function(t){return Ie(this,void 0,void 0,function(){var r,a,i,o,u,c,f;return Re(this,function(h){switch(h.label){case 0:return r=this.activeTimers,a=[],i=!1,this.programTimersStack==null?(this.programTimersStack=a,i=!0):this.activeTimers.push(a),this.activeTimers=a,t(),o=ul(this.activeTimers.map(function(p){return p.query})).filter(function(p){return p!=null}),u=ul(this.activeTimers.map(function(p){return p.name})).filter(function(p){return p!=null}),this.activeTimers=r,i&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return f=h.sent(),c.kernelMs=a5(f),c.getExtraProfileInfo=function(){return f.map(function(p,m){return{name:u[m],ms:p}}).map(function(p){return p.name+": "+p.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},h.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},n.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},n.prototype.startTimer=function(){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Ya(),endMs:null}},n.prototype.endTimer=function(t){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Ya(),t)},n.prototype.getQueryTime=function(t){return Ie(this,void 0,void 0,function(){var r;return Re(this,function(a){return le().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(r=t).endMs-r.startMs]})})},n.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var r=this.texData.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(t)}}},n.prototype.releaseGPUData=function(t){var r=this.texData.get(t),a=r.texture,i=r.dtype,o=r.texShape,u=r.usage,c=r.isPacked,f=r.slice,h=f&&f.origDataId||t,p=this.dataRefCount.get(h);p>1?this.dataRefCount.set(h,p-1):(this.dataRefCount.delete(h),a!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(a,o,u,c)));var m=this.texData.get(t);m.texture=null,m.texShape=null,m.isPacked=!1,m.slice=null},n.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},n.prototype.getDataInfo=function(t){return this.texData.get(t)},n.prototype.getCPUBackend=function(){return le().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=W.findBackend("cpu")),this.cpuBackend):null},n.prototype.shouldExecuteOnCPU=function(t,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&t.every(function(i){return a.texData.get(i.dataId).texture==null&&i.size<r})},n.prototype.getGPGPUContext=function(){return this.gpgpu},n.prototype.complex=function(t,r){var a=this.makeOutput(t.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:W.keep(t.clone()),imag:W.keep(r.clone())},a},n.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},n.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},n.prototype.slice=function(t,r,a){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,r,a);if(Ne(a)===0)return Gn([],a,t.dtype);var i=this.texData.get(t.dataId).isPacked,o=jO(t.shape,r,a);if(i||!o){var u=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new g8(a):new v8(a),c=u.getCustomSetupFunc(r);return this.compileAndRun(u,[t],null,c)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,r,a)},n.prototype.shallowSlice=function(t,r,a){var i=this.texData.get(t.dataId),o=this.makeOutput(a,t.dtype),u=this.texData.get(o.dataId);Object.assign(u,i),u.shape=a,u.dtype=t.dtype;var c=XO(r,t.strides);i.slice&&(c+=i.slice.flatOffset),u.slice={flatOffset:c,origDataId:i.slice&&i.slice.origDataId||t.dataId};var f=this.dataRefCount.get(u.slice.origDataId)||1;return this.dataRefCount.set(u.slice.origDataId,f+1),o},n.prototype.stridedSlice=function(t,r,a,i){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,r,a,i);var o=I2(r,a,i);if(o.some(function(c){return c===0}))return Gn([],o);var u=new y8(r,i,o);return this.compileAndRun(u,[t])},n.prototype.reverse=function(t,r){var a=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new h8(t.shape,r):new d8(t.shape,r);return this.compileAndRun(a,[t])},n.prototype.concat=function(t,r){if(t[0].dtype==="complex64"){var a=t.map(function(g){return da(g)}),i=t.map(function(g){return ja(g)});return Bn(this.concat(a,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,r);if(t.length===1)return t[0];if(t.length>le().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(t.length/2),u=this.concat(t.slice(0,o),r),c=this.concat(t.slice(o),r);return this.concat([u,c],r)}if(le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var f=new uG(t.map(function(g){return g.shape}),r);return this.compileAndRun(f,t)}var h=cl(t.map(function(g){return g.shape}),r),p=t.map(function(g){return g.as2D(-1,Ne(g.shape.slice(r)))}),m=new sG(p.map(function(g){return g.shape}));return this.compileAndRun(m,p).reshape(h)},n.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,cI,t.dtype);var r=new $e(t.shape,cI);return this.compileAndRun(r,[t])},n.prototype.batchMatMul=function(t,r,a,i){var o=a?t.shape[2]:t.shape[1],u=i?r.shape[1]:r.shape[2],c=a?t.shape[1]:t.shape[2],f=t.shape[0];if((o===1||u===1)&&c>1e3){a&&(t=t.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var h=u===1?t:t.as3D(f,c,1),p=u===1?2:1,m=u===1?r.as3D(f,1,c):r;return this.multiply(h,m).sum(p,!0)}var g=Fn(t.dtype,r.dtype),y=new t1(t.shape,[f,o,u],a,i);return this.compileAndRun(y,[t,r],g)},n.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,i=t.transposeA,o=t.transposeB,u=t.bias,c=t.activation,f=t.preluActivationWeights,h=i?r.shape[2]:r.shape[1],p=o?a.shape[1]:a.shape[2],m=r.shape[0],g=Fn(r.dtype,a.dtype),y=u!=null,b=f!=null,E=c?nh(c,!0):null,_=new t1(r.shape,[m,h,p],i,o,y,E,b),w=[r,a];return u&&w.push(u),f&&w.push(f),this.compileAndRun(_,w,g)},n.prototype.multiply=function(t,r){if(t.dtype==="complex64"){var a=this.texData.get(t.dataId),i=this.texData.get(r.dataId),o=new Qw(nG,t.shape,r.shape),u=new Qw(rG,t.shape,r.shape),c=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],f=this.compileAndRun(o,c),h=this.compileAndRun(u,c),p=this.complex(f,h);return f.dispose(),h.dispose(),p}if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.multiply(t,r);if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,Jw,t.dtype);var m=new Kt(Jw,t.shape,r.shape);return this.compileAndRun(m,[t,r],t.dtype)},n.prototype.batchNormalization=function(t,r,a,i,o,u){var c=[t,r,a],f=null;u!=null&&(f=u.shape,c.push(u));var h=null;if(o!=null&&(h=o.shape,c.push(o)),le().getBool("WEBGL_PACK_NORMALIZATION")){var p=new tG(t.shape,r.shape,a.shape,f,h,i);return this.compileAndRun(p,c)}var m=new eG(t.shape,r.shape,a.shape,f,h,i);return this.compileAndRun(m,c)},n.prototype.localResponseNormalization4D=function(t,r,a,i,o){var u=le().getBool("WEBGL_PACK_NORMALIZATION")?new ZG(t.shape,r,a,i,o):new jG(t.shape,r,a,i,o);return this.compileAndRun(u,[t])},n.prototype.LRNGrad=function(t,r,a,i,o,u,c){var f=new XG(r.shape,i,o,u,c);return this.compileAndRun(f,[r,a,t])},n.prototype.tile=function(t,r){if(t.dtype==="string"){var a=this.readSync(t.dataId).map(function(o){return em(o)});return ak(We(t.shape,t.dtype,a),r)}var i=new S8(t.shape,r);return this.compileAndRun(i,[t])},n.prototype.pad=function(t,r,a){var i=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new a8(t.shape,r,a):new r8(t.shape,r,a);return this.compileAndRun(i,[t])},n.prototype.transpose=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,r);var a=le().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _8(t.shape,r):new E8(t.shape,r);return this.compileAndRun(a,[t])},n.prototype.gather=function(t,r,a){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.gather(t,r,a);var i=new TG(t.shape,r.size,a);return this.compileAndRun(i,[t,r])},n.prototype.batchToSpaceND=function(t,r,a){F(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(p,m){return p*m}),o=om(t.shape,r,i),u=sm(o.length,r.length),c=um(t.shape,r,i),f=KO(a,r.length),h=qO(c,a,r.length);return t.reshape(o).transpose(u).reshape(c).slice(f,h)},n.prototype.spaceToBatchND=function(t,r,a){F(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(m,g){return m*g}),o=[[0,0]];o.push.apply(o,a);for(var u=1+r.length;u<t.shape.length;++u)o.push([0,0]);var c=t.pad(o),f=om(c.shape,r,i,!1),h=sm(f.length,r.length,!1),p=um(c.shape,r,i,!1);return c.reshape(f).transpose(h).reshape(p)},n.prototype.reduce=function(t,r,a){var i=t.shape[0],o=t.shape[1],u=Qg(o),c=new i8({windowSize:u,inSize:o,batchSize:i},r),f=this.compileAndRun(c,[t],a);return f.shape[1]===1?f:this.reduce(f,r,a)},n.prototype.argReduce=function(t,r,a){a===void 0&&(a=null);var i=t.shape[0],o=t.shape[1];a!=null&&(i=a.shape[0],o=a.shape[1]);var u=Qg(o),c=new KV({windowSize:u,inSize:o,batchSize:i},r,a==null),f=[t];a!=null&&f.push(a);var h=this.compileAndRun(c,f,"int32");return h.shape[1]===1?h:this.argReduce(t,r,h)},n.prototype.argReducePacked=function(t,r,a){a===void 0&&(a=null);var i=a!=null?a.shape:t.shape,o=Qg(i[i.length-1]),u=new ZV(i,o,r,a==null),c=a==null?[t]:[t,a],f=this.compileAndRun(u,c,"int32");return f.rank===t.rank?this.argReducePacked(t,r,f):f},n.prototype.sum=function(t,r){Lr("sum",r,t.rank);var a=jn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o),c=Wg(t.dtype);return this.reduce(u,"sum",c).reshape(i)},n.prototype.prod=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,r);var a=jn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o),c=Wg(t.dtype);return this.reduce(u,"prod",c).reshape(i)},n.prototype.unsortedSegmentSum=function(t,r,a){var i=0,o=ci([i],t.rank),u=t;o!=null&&(u=t.transpose(o),i=fi(1,t.rank)[0]);var c=function(g,y,b){for(var E=[],_=g.length,w=0;w<_;w++)w!==y?E.push(g[w]):E.push(b);return E}(u.shape,i,a),f=Ne([u.shape[i]]),h=u.as2D(-1,f),p=Wg(t.dtype),m=this.segOpCompute(h,"unsortedSegmentSum",r,p,a).reshape(c);return o!=null&&(m=m.transpose(E2(o))),m},n.prototype.segOpCompute=function(t,r,a,i,o){var u=t.shape[0],c=t.shape[1],f=function(m,g){var y,b=!1;for(m<=$O?(y=m,b=!0):y=X1(m,Math.floor(Math.sqrt(m)));!b;)y>g||y===m?b=!0:y=X1(m,y+1);return y}(c,o),h=new p8({windowSize:f,inSize:c,batchSize:u,numSegments:o}),p=this.compileAndRun(h,[t,a],i);return p.shape[1]===o?p:(a=im(0,o).tile([c/f]),this.segOpCompute(p,r,a,i,o))},n.prototype.argMinMaxReduce=function(t,r,a){var i=[r];if(Lr("arg"+a.charAt(0).toUpperCase()+a.slice(1),i,t.rank),!le().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var o=jn(t.shape,i),u=o[0],c=Ne(o[1]),f=t.as2D(-1,c);return this.argReduce(f,a).reshape(u)}return this.argReducePacked(t,a)},n.prototype.argMin=function(t,r){return this.argMinMaxReduce(t,r,"min")},n.prototype.argMax=function(t,r){return this.argMinMaxReduce(t,r,"max")},n.prototype.cumsum=function(t,r,a,i){if(r!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+r);var o=new gG(t.shape,a,i);return this.compileAndRun(o,[t])},n.prototype.equal=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(equal(a, b));
`,"bool");var a=new Kt("return float(a == b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},n.prototype.notEqual=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new Kt("return float(a != b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},n.prototype.less=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.less(t,r);if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new Kt("return float(a < b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},n.prototype.lessEqual=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new Kt("return float(a <= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},n.prototype.greater=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.greater(t,r);if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new Kt("return float(a > b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},n.prototype.greaterEqual=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new Kt("return float(a >= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},n.prototype.logicalNot=function(t){var r=new $e(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[t])},n.prototype.logicalAnd=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new Kt("return float(a >= 1.0 && b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},n.prototype.logicalOr=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new Kt("return float(a >= 1.0 || b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},n.prototype.select=function(t,r,a){var i=new m8(t.rank,r.shape,r.rank);return this.compileAndRun(i,[t,r,a],Fn(r.dtype,a.dtype))},n.prototype.where=function(t){rm("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=t.dataSync();return T2(t.shape,r)},n.prototype.topk=function(t,r,a){return ik(t.dataSync(),t.shape,t.dtype,r)},n.prototype.min=function(t,r){Lr("min",r,t.rank);var a=jn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o);return this.reduce(u,"min",u.dtype).reshape(i)},n.prototype.minimum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.minimum(t,r);var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mi(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},n.prototype.mod=function(t,r){var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mi(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`if (b == 0.0) return NAN;
  return mod(a, b);`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},n.prototype.max=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,r);Lr("max",r,t.rank);var a=jn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o);return this.reduce(u,"max",u.dtype).reshape(i)},n.prototype.maximum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.maximum(t,r);var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mi(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},n.prototype.all=function(t,r){Lr("all",r,t.rank);var a=jn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o);return this.reduce(u,"all",u.dtype).reshape(i)},n.prototype.any=function(t,r){Lr("any",r,t.rank);var a=jn(t.shape,r),i=a[0],o=Ne(a[1]),u=t.as2D(-1,o);return this.reduce(u,"any",u.dtype).reshape(i)},n.prototype.realDivide=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new Kt(`
if (a == b) {
  return 1.0;
};
return a / b;`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"float32")},n.prototype.floorDiv=function(t,r){if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new Kt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"int32")},n.prototype.add=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,Jg);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.add(t,r);var a=Fn(t.dtype,r.dtype);if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,Jg,a);var i=new Kt(Jg,t.shape,r.shape);return this.compileAndRun(i,[t,r],a)},n.prototype.packedUnaryOp=function(t,r,a){var i=new kc(t.shape,r);return this.compileAndRun(i,[t],a)},n.prototype.packedBinaryOp=function(t,r,a,i,o){o===void 0&&(o=!1);var u=new Mi(a,t.shape,r.shape,o);return this.compileAndRun(u,[t,r],i)},n.prototype.complexSeparableBinaryOp=function(t,r,a){var i=this,o=this.texData.get(t.dataId),u=this.texData.get(r.dataId),c=[[o.complexTensors.real,u.complexTensors.real],[o.complexTensors.imag,u.complexTensors.imag]].map(function(m){var g=m[0],y=m[1],b=i.makeComplexComponentTensorInfo(t,g),E=i.makeComplexComponentTensorInfo(r,y),_=new Kt(a,t.shape,r.shape);return i.compileAndRun(_,[b,E],Fn(g.dtype,y.dtype))}),f=c[0],h=c[1],p=this.complex(f,h);return f.dispose(),h.dispose(),p},n.prototype.makeComplexComponentTensorInfo=function(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}},n.prototype.addN=function(t){if(t.length===1)return t[0];if(t.length>le().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(t.length/2),a=this.addN(t.slice(0,r)),i=this.addN(t.slice(r));return this.addN([a,i])}var o=t.map(function(f){return f.dtype}).reduce(function(f,h){return Fn(f,h)}),u=t.map(function(f){return f.shape}),c=le().getBool("WEBGL_PACK")?new WV(t[0].shape,u):new zV(t[0].shape,u);return this.compileAndRun(c,t,o)},n.prototype.subtract=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,e1);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.subtract(t,r);var a=Fn(t.dtype,r.dtype);if(le().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,e1,t.dtype);var i=new Kt(e1,t.shape,r.shape);return this.compileAndRun(i,[t,r],a)},n.prototype.pow=function(t,r){var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mi(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,t.shape,r.shape),i=Fn(t.dtype,r.dtype);return this.compileAndRun(a,[t,r],i)},n.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,fI,t.dtype);var r=new $e(t.shape,fI);return this.compileAndRun(r,[t])},n.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,dI,t.dtype);var r=new $e(t.shape,dI);return this.compileAndRun(r,[t])},n.prototype.sign=function(t){var r=new $e(t.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[t])},n.prototype.isNaN=function(t){var r=new $e(t.shape,"return float(isnan(x));");return this.compileAndRun(r,[t],"bool")},n.prototype.isInf=function(t){var r=new $e(t.shape,"return float(isinf(x));");return this.compileAndRun(r,[t],"bool")},n.prototype.isFinite=function(t){var r=new $e(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[t],"bool")},n.prototype.round=function(t){var r=new $e(t.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[t])},n.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,hI,t.dtype);var r=new $e(t.shape,hI);return this.compileAndRun(r,[t])},n.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,pI,t.dtype);var r=new $e(t.shape,pI);return this.compileAndRun(r,[t])},n.prototype.softmax=function(t,r){var a=Sn([r],t.shape),i=this.max(t,a),o=Ir(i.shape,a),u=this.subtract(t,i.reshape(o)),c=this.exp(u),f=this.sum(c,a).reshape(o);return this.realDivide(c,f)},n.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,t.dtype);var r=new $e(t.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[t])},n.prototype.log1p=function(t){var r=new $e(t.shape,"return log(1.0 + x);");return this.compileAndRun(r,[t])},n.prototype.sqrt=function(t){var r=new $e(t.shape,"return sqrt(x);");return this.compileAndRun(r,[t])},n.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var r=new $e(t.shape,"return inversesqrt(x);");return this.compileAndRun(r,[t])},n.prototype.reciprocal=function(t){var r=new $e(t.shape,"return 1.0 / x;");return this.compileAndRun(r,[t])},n.prototype.relu=function(t){var r;return r=le().getBool("WEBGL_PACK")?new kc(t.shape,pk):new $e(t.shape,fk),this.compileAndRun(r,[t])},n.prototype.relu6=function(t){var r;return r=le().getBool("WEBGL_PACK")?new kc(t.shape,mk):new $e(t.shape,dk),this.compileAndRun(r,[t])},n.prototype.prelu=function(t,r){var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mi(ck,t.shape,r.shape):new Kt(lk,t.shape,r.shape);return this.compileAndRun(a,[t,r])},n.prototype.elu=function(t){if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,vk,t.dtype);var r=new $e(t.shape,hk);return this.compileAndRun(r,[t])},n.prototype.eluDer=function(t,r){var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mi(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t.shape,r.shape):new Kt("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r])},n.prototype.selu=function(t){var r=new $e(t.shape,w8);return this.compileAndRun(r,[t])},n.prototype.int=function(t){var r=new $e(t.shape,"return float(int(x));");return this.compileAndRun(r,[t],"int32")},n.prototype.clip=function(t,r,a){var i,o=(i=le().getBool("WEBGL_PACK_CLIP")?new iG(t.shape):new aG(t.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(i,[t],null,o)},n.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(le().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,lI,t.dtype);var r=new $e(t.shape,lI);return this.compileAndRun(r,[t])},n.prototype.complexAbs=function(t){var r=this.texData.get(t.dataId),a=new oG(t.shape),i=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)];return this.compileAndRun(a,i)},n.prototype.sigmoid=function(t){var r=new $e(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[t])},n.prototype.softplus=function(t){var r=new $e(t.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[t])},n.prototype.sin=function(t){var r=new $e(t.shape,I8);return this.compileAndRun(r,[t])},n.prototype.cos=function(t){var r=new $e(t.shape,R8);return this.compileAndRun(r,[t])},n.prototype.tan=function(t){var r=new $e(t.shape,"return tan(x);");return this.compileAndRun(r,[t])},n.prototype.asin=function(t){var r=new $e(t.shape,C8);return this.compileAndRun(r,[t])},n.prototype.acos=function(t){var r=new $e(t.shape,N8);return this.compileAndRun(r,[t])},n.prototype.atan=function(t){var r=new $e(t.shape,T8);return this.compileAndRun(r,[t])},n.prototype.atan2=function(t,r){var a=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mi(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new Kt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},n.prototype.sinh=function(t){var r=new $e(t.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},n.prototype.cosh=function(t){var r=new $e(t.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},n.prototype.tanh=function(t){var r=new $e(t.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[t])},n.prototype.asinh=function(t){var r=new $e(t.shape,O8);return this.compileAndRun(r,[t])},n.prototype.acosh=function(t){var r=new $e(t.shape,k8);return this.compileAndRun(r,[t])},n.prototype.atanh=function(t){var r=new $e(t.shape,x8);return this.compileAndRun(r,[t])},n.prototype.erf=function(t){var r=new $e(t.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[t])},n.prototype.step=function(t,r){var a=new $e(t.shape,function(i){return i===void 0&&(i=0),Pa+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(r));return this.compileAndRun(a,[t])},n.prototype.conv2dByMatMul=function(t,r,a,i,o,u){var c=t.shape,f=this.texData.get(t.dataId),h=a.inChannels,p=c[0]*c[1]*c[2],m=a.outChannels,g=a.dataFormat==="channelsLast",y=(p===1||m===1)&&h>1e3,b=c[2]%2!=0&&!!f.isPacked;if(y||!le().getBool("WEBGL_LAZILY_UNPACK")||!le().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!b){var E=g?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],_=this.reshape(t,[1,E,a.inChannels]),w=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:_,b:w,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:u}),a.outShape)}var I=g?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),R={dataId:t.dataId,shape:[1,I,a.inChannels],dtype:t.dtype},C=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,F(Qd(f.shape,R.shape),function(){return"packed reshape "+f.shape+" to "+R.shape+" isn't free"});var O=this.reshape(r,[1,a.inChannels,a.outChannels]),D=this.fusedBatchMatMul({a:R,b:O,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:u}),P=this.texData.get(D.dataId);return F(P.isPacked,function(){return"batchMatMul result is expected to be packed"}),f.shape=C,P.shape=a.outShape,W.makeTensorFromDataId(D.dataId,a.outShape,D.dtype)},n.prototype.conv2dWithIm2Row=function(t,r,a,i,o,u){var c=a.filterWidth,f=a.filterHeight,h=a.inChannels,p=a.outWidth,m=a.outHeight,g=a.dataFormat==="channelsLast",y=c*f*h,b=m*p,E=[y,b],_=t.squeeze([0]),w=r.reshape([1,y,-1]),I=new $G(E,_.shape,a),R=this.compileAndRun(I,[_]).reshape([1,E[0],E[1]]),C=i!=null,O=u!=null,D=o?nh(o,!0):null,P=new t1(R.shape,[1,b,a.outChannels],!0,!1,C,D,O),k=[R,w];i&&k.push(i),O&&k.push(u);var N=this.compileAndRun(P,k);return g?N.reshape([1,m,p,a.outChannels]):N.reshape([1,a.outChannels,m,p])},n.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,i,o,u,c);if(le().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,i,o,u,c);var f=o!=null,h=c!=null,p=u?nh(u,!1):null,m=new eI(i,f,p,h),g=[r,a];return o&&g.push(o),c&&g.push(c),this.compileAndRun(m,g)},n.prototype.conv2d=function(t,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(t,r,a);if(le().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,r,a);var i=new eI(a);return this.compileAndRun(i,[t,r])},n.prototype.conv2dDerInput=function(t,r,a){var i=new cG(a);return this.compileAndRun(i,[t,r])},n.prototype.conv2dDerFilter=function(t,r,a){var i=new lG(a);return this.compileAndRun(i,[t,r])},n.prototype.fusedDepthwiseConv2D=function(t){var r,a=t.input,i=t.filter,o=t.convInfo,u=t.bias,c=t.activation,f=t.preluActivationWeights,h=le().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,p=c?nh(c,h):null,m=[a,i],g=u!=null,y=f!=null;return g&&m.push(u),y&&m.push(f),h?(r=new nI(o,g,p,y),this.compileAndRun(r,m)):(r=new tI(o,g,p,y),this.compileAndRun(r,m))},n.prototype.depthwiseConv2D=function(t,r,a){var i;return le().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(i=new nI(a),this.compileAndRun(i,[t,r])):(i=new tI(a),this.compileAndRun(i,[t,r]))},n.prototype.depthwiseConv2DDerInput=function(t,r,a){var i=new pG(a);return this.compileAndRun(i,[t,r])},n.prototype.depthwiseConv2DDerFilter=function(t,r,a){var i=new hG(a);return this.compileAndRun(i,[t,r])},n.prototype.conv3d=function(t,r,a){var i=new mG(a);return this.compileAndRun(i,[t,r])},n.prototype.conv3dDerInput=function(t,r,a){var i=new dG(a);return this.compileAndRun(i,[t,r])},n.prototype.conv3dDerFilter=function(t,r,a){var i=new fG(a);return this.compileAndRun(i,[t,r])},n.prototype.maxPool=function(t,r){var a=new n1(r,"max",!1);return this.compileAndRun(a,[t])},n.prototype.avgPool=function(t,r){var a=new n1(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},n.prototype.maxPoolBackprop=function(t,r,a,i){var o=new n1(i,"max",!0),u=this.compileAndRun(o,[r]),c=new QG(i),f=this.compileAndRun(c,[t,u],r.dtype);return u.dispose(),f},n.prototype.avgPoolBackprop=function(t,r,a){var i=new QV(a);return this.compileAndRun(i,[t],r.dtype)},n.prototype.cast=function(t,r){return ek(t,r,this)},n.prototype.unstack=function(t,r){for(var a=t.shape[r],i=new Array(t.rank-1),o=0,u=0;u<t.rank;u++)u!==r&&(i[o++]=t.shape[u]);var c=new Array(t.rank).fill(0),f=t.shape.slice();f[r]=1;var h=new Array(a);for(u=0;u<h.length;u++)c[r]=u,h[u]=this.slice(t,c,f).reshape(i);return h},n.prototype.avgPool3d=function(t,r){var a=new r1(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},n.prototype.avgPool3dBackprop=function(t,r,a){var i=new JV(a);return this.compileAndRun(i,[t],r.dtype)},n.prototype.maxPool3d=function(t,r){var a=new r1(r,"max",!1);return this.compileAndRun(a,[t],"float32")},n.prototype.maxPool3dBackprop=function(t,r,a,i){var o=new r1(i,"max",!0),u=this.compileAndRun(o,[r]),c=new JG(i),f=this.compileAndRun(c,[t,u],r.dtype);return u.dispose(),f},n.prototype.reshape=function(t,r){var a=this.texData.get(t.dataId);if(a.isPacked&&!Qd(t.shape,r)&&(a.texture===null||!Qd(a.shape,r))){var i=this.packedReshape(t,r);return W.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return ay(t,r)},n.prototype.resizeBilinear=function(t,r,a,i){var o=le().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new l8(t.shape,r,a,i):new u8(t.shape,r,a,i);return this.compileAndRun(o,[t],"float32")},n.prototype.resizeBilinearBackprop=function(t,r,a){var i=new s8(t,r,a);return this.compileAndRun(i,[t])},n.prototype.resizeNearestNeighbor=function(t,r,a,i){var o=new f8(t.shape,r,a,i);return this.compileAndRun(o,[t])},n.prototype.resizeNearestNeighborBackprop=function(t,r,a){var i=new c8(t,r,a);return this.compileAndRun(i,[t])},n.prototype.multinomial=function(t,r,a,i){var o=r?t:$i(t),u=o.shape[0],c=o.shape[1],f=new e8(u,c,a),h=f.getCustomSetupFunc(i);return this.compileAndRun(f,[o],"int32",h)},n.prototype.oneHot=function(t,r,a,i){var o=new t8(t.size,r,a,i);return this.compileAndRun(o,[t])},n.prototype.diag=function(t){var r=new EG(t.size);return this.compileAndRun(r,[t])},n.prototype.nonMaxSuppression=function(t,r,a,i,o){return rm("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),C2(t.dataSync(),r.dataSync(),a,i,o)},n.prototype.cropAndResize=function(t,r,a,i,o,u){var c=new vG(t.shape,r.shape,i,o,u);return this.compileAndRun(c,[t,r,a],"float32")},n.prototype.depthToSpace=function(t,r,a){F(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var i=t.shape[0],o=a==="NHWC"?t.shape[1]:t.shape[2],u=a==="NHWC"?t.shape[2]:t.shape[3],c=a==="NHWC"?t.shape[3]:t.shape[1],f=o*r,h=u*r,p=c/(r*r),m=new SG(a==="NHWC"?[i,f,h,p]:[i,p,f,h],r,a);return this.compileAndRun(m,[t])},n.prototype.split=function(t,r,a){return rk(t,r,a)},n.prototype.scatterND=function(t,r,a){var i=lm(0,t,a),o=i.sliceRank,u=i.numUpdates,c=i.sliceSize,f=i.strides,h=i.outputSize,p=[h/c,c],m=t.reshape([u,o]),g=r.reshape([u,c]);if(h===0)return ay(Gn([]),a);var y=Ee(0),b=new oI(u,o,m.rank,g.rank,f,p);return this.compileAndRun(b,[g,m,y]).reshape(a)},n.prototype.sparseToDense=function(t,r,a,i){var o=lm(0,t,a),u=o.sliceRank,c=o.numUpdates,f=o.strides,h=o.outputSize,p=new oI(c,u,t.rank,r.rank,f,[h,1]);return this.compileAndRun(p,[r,t,i]).reshape(a)},n.prototype.fft=function(t){return this.fftImpl(t,!1)},n.prototype.ifft=function(t){return this.fftImpl(t,!0)},n.prototype.fftImpl=function(t,r){var a=this.texData.get(t.dataId),i=new aI(RG,t.shape,r),o=new aI(CG,t.shape,r),u=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag)],c=this.compileAndRun(i,u),f=this.compileAndRun(o,u),h=this.complex(c,f).as2D(t.shape[0],t.shape[1]);return c.dispose(),f.dispose(),h},n.prototype.gatherND=function(t,r){var a=r.shape,i=a[a.length-1],o=YO(t,r),u=o[0],c=o[1],f=o[2],h=o[3],p=r.reshape([c,i]),m=t.reshape([t.size/f,f]),g=new OG(i,h,[c,f]);return this.compileAndRun(g,[m,p]).reshape(u)},n.prototype.fill=function(t,r,a){if((a=a||Sf(r))==="string"){var i=Jp(a,Ne(t));return i.fill(r),W.makeTensor(i,t,a,this)}var o=new NG(t,r),u=o.getCustomSetupFunc(r);return this.compileAndRun(o,[],a,u)},n.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},n.prototype.zerosLike=function(t){return this.fill(t.shape,t.dtype==="string"?"":0,t.dtype)},n.prototype.linspace=function(t,r,a){return tk(t,r,a)},n.prototype.makeTensorInfo=function(t,r){var a=this.write(null,t,r);return this.texData.get(a).usage=null,{dataId:a,shape:t,dtype:r}},n.prototype.makeOutput=function(t,r){var a=this.makeTensorInfo(t,r).dataId;return W.makeTensorFromDataId(a,t,r,this)},n.prototype.unpackTensor=function(t){var r=new P8(t.shape);return this.runWebGLProgram(r,[t],t.dtype)},n.prototype.packTensor=function(t){var r=new n8(t.shape);return this.runWebGLProgram(r,[t],t.dtype,null,!0)},n.prototype.packedReshape=function(t,r){var a=[tm(t.shape)].concat(nm(t.shape)),i={dtype:t.dtype,shape:a,dataId:t.dataId},o=[tm(r)].concat(nm(r)),u=new o8(o,a),c=this.runWebGLProgram(u,[i],t.dtype,null,!0);return{dataId:c.dataId,shape:r,dtype:c.dtype}},n.prototype.decode=function(t){var r,a=this.texData.get(t),i=a.isPacked,o=a.shape,u=a.dtype,c=Zg(o);return r=i?new bG(c):new yG(c),{dtype:u,shape:o,dataId:this.runWebGLProgram(r,[{shape:c,dtype:u,dataId:t}],u,null,!0).dataId}},n.prototype.runWebGLProgram=function(t,r,a,i,o){var u=this;o===void 0&&(o=!1);var c=this.makeTensorInfo(t.outputShape,a),f=this.texData.get(c.dataId);if(t.packedOutput&&(f.isPacked=!0),t.outPackingScheme===nf.DENSE){var h=Fc(t.outputShape);f.texShape=h.map(function(I){return 2*I})}if(t.outTexUsage!=null&&(f.usage=t.outTexUsage),Ne(c.shape)===0)return f.values=ef(c.dtype,0),c;var p=[],m=r.map(function(I){if(I.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var R=u.texData.get(I.dataId);if(R.texture==null){if(!t.packedInputs&&Ne(I.shape)<=le().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:I.shape,texData:null,isUniform:!0,uniformValues:R.values};t.packedInputs&&(R.isPacked=!0,R.shape=I.shape)}else if(!!R.isPacked!=!!t.packedInputs)I=R.isPacked?u.unpackTensor(I):u.packTensor(I),p.push(I),R=u.texData.get(I.dataId);else if(R.isPacked&&!Qd(R.shape,I.shape)){var C=I,O=I.shape;I.shape=R.shape,I=u.packedReshape(I,O),p.push(I),R=u.texData.get(I.dataId),C.shape=O}return u.uploadToGPU(I.dataId),{shape:I.shape,texData:R,isUniform:!1}});this.uploadToGPU(c.dataId);var g,y={shape:c.shape,texData:f,isUniform:!1},b=function(I,R,C){var O="";R.concat(C).forEach(function(k){var N=k.texData!=null&&k.texData.slice!=null&&k.texData.slice.flatOffset>0,U=k.isUniform?"uniform":k.texData.texShape;O+=k.shape+"_"+U+"_"+N});var D=I.userCode,P=I.constructor.name;return P+="_"+O+"_"+D}(t,m,y),E=this.getAndSaveBinary(b,function(){return function(I,R,C,O){var D=R.userCode,P=C.map(function($,oe){var L={logicalShape:$.shape,texShape:$.isUniform?null:$.texData.texShape,isUniform:$.isUniform,isPacked:!$.isUniform&&$.texData.isPacked,flatOffset:null};return $.texData!=null&&$.texData.slice!=null&&$.texData.slice.flatOffset>0&&(L.flatOffset=$.texData.slice.flatOffset),{name:R.variableNames[oe],shapeInfo:L}}),k=P.map(function($){return $.shapeInfo}),N={logicalShape:O.shape,texShape:O.texData.texShape,isUniform:!1,isPacked:O.texData.isPacked,flatOffset:null},U=qV(P,N,D,R.packedInputs),V=I.createProgram(U),ee=null,re=I.getUniformLocation(V,"NAN",!1);le().getNumber("WEBGL_VERSION")===1&&(ee=I.getUniformLocation(V,"INFINITY",!1));for(var ne={},z=0;z<R.variableNames.length;z++){var Z=R.variableNames[z];ne[Z]=I.getUniformLocation(V,Z,!1),ne["offset"+Z]=I.getUniformLocation(V,"offset"+Z,!1)}return{program:R,source:U,webGLProgram:V,uniformLocations:ne,inShapeInfos:k,outShapeInfo:N,infLoc:ee,nanLoc:re}}(u.gpgpu,t,m,y)}),_=this.activeTimers!=null;if(_&&(g=this.startTimer()),function(I,R,C,O,D){iI(R.inShapeInfos,C),iI([R.outShapeInfo],[O]);var P=O.texData.texture,k=O.texData.texShape;O.texData.isPacked?I.setOutputPackedMatrixTexture(P,k[0],k[1]):I.setOutputMatrixTexture(P,k[0],k[1]),I.setProgram(R.webGLProgram),le().getNumber("WEBGL_VERSION")===1&&R.infLoc!==null&&I.gl.uniform1f(R.infLoc,1/0),R.nanLoc!==null&&I.gl.uniform1f(R.nanLoc,NaN),C.forEach(function(N,U){var V=R.program.variableNames[U],ee=R.uniformLocations[V],re=R.uniformLocations["offset"+V];if(ee!=null)if(N.isUniform)if(Ne(N.shape)<2)I.gl.uniform1f(ee,N.uniformValues[0]);else{var ne=N.uniformValues;ne instanceof Float32Array||(ne=new Float32Array(ne)),I.gl.uniform1fv(ee,ne)}else N.texData.slice!=null&&re!=null&&I.gl.uniform1i(re,N.texData.slice.flatOffset),I.setInputMatrixTexture(N.texData.texture,ee,U)}),D!=null&&D(I,R.webGLProgram),I.executeProgram()}(this.gpgpu,E,m,y,i),p.forEach(function(I){return u.disposeData(I.dataId)}),_&&(g=this.endTimer(g),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(g)})),!le().getBool("WEBGL_LAZILY_UNPACK")&&f.isPacked&&o===!1){var w=this.unpackTensor(c);return this.disposeData(c.dataId),w}return c},n.prototype.compileAndRun=function(t,r,a,i,o){o===void 0&&(o=!1),a=a||r[0].dtype;var u=this.runWebGLProgram(t,r,a,i,o);return W.makeTensorFromDataId(u.dataId,u.shape,u.dtype)},n.prototype.getAndSaveBinary=function(t,r){return t in this.binaryCache||(this.binaryCache[t]=r()),this.binaryCache[t]},n.prototype.getTextureManager=function(){return this.textureManager},n.prototype.dispose=function(){var t=this;this.disposed||(le().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){t.gpgpu.deleteProgram(t.binaryCache[r].webGLProgram),delete t.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},n.prototype.floatPrecision=function(){var t=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ae(function(){if(!le().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=le().getBool("DEBUG");le().set("DEBUG",!1);var a=t.abs(Ee(1e-8)).dataSync()[0];if(le().set("DEBUG",r),a>0)return 32}return 16})),this.floatPrecisionValue},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.uploadToGPU=function(t){var r,a=this.texData.get(t),i=a.shape,o=a.dtype,u=a.values,c=a.texture,f=a.usage,h=a.isPacked;if(c==null){var p,m=this.activeTimers!=null;m&&(p=Ya());var g=a.texShape;if(g==null&&(g=H5(i,h),a.texShape=g),u!=null){var y=Zg(i),b=void 0,E=g[1],_=g[0],w=u instanceof Uint8Array;h?(E=(r=_f(g[0],g[1]))[0],_=r[1],b=new IG(y,[_,E],w)):b=new wG(y,[_,E],w);var I=this.makeTensorInfo([_,E],o);this.texData.get(I.dataId).usage=w?Fr.PIXELS:Fr.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(I.dataId),E,_,u);var R=this.runWebGLProgram(b,[I],o,null,!0),C=this.texData.get(R.dataId);a.texture=C.texture,a.texShape=C.texShape,a.isPacked=C.isPacked,a.usage=C.usage,this.disposeData(I.dataId),this.texData.delete(R.dataId),a.values=null,m&&(this.uploadWaitMs+=Ya()-p)}else{var O=this.acquireTexture(g,f,o,h);a.texture=O}}},n.prototype.convertAndCacheOnCPU=function(t,r){var a=this.texData.get(t),i=a.dtype;return this.releaseGPUData(t),r!=null&&(a.values=function(o,u){if(u==="float32"||u==="complex64")return o;if(u==="int32"||u==="bool"){for(var c=u==="int32"?new Int32Array(o.length):new Uint8Array(o.length),f=0;f<c.length;++f)c[f]=Math.round(o[f]);return c}throw new Error("Unknown dtype "+u)}(r,i)),a.values},n.prototype.acquireTexture=function(t,r,a,i){if(this.numBytesInGPU+=this.computeBytes(t,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,r,i)},n.prototype.computeBytes=function(t,r){return t[0]*t[1]*TO(r)},n}(QO);LO()&&W.registerBackend("webgl",function(){return new L8},2);var B8=H({square_:function(e){var n=M(e,"x","square"),t=[n];return W.runKernelFunc(function(r,a){return a([n]),r.square(n)},{x:n},null,"Square",{},t,[])}}),af="SquaredDifference",gk=H({squaredDifference_:function(e,n){var t,r=M(e,"a","squaredDifference"),a=M(n,"b","squaredDifference");t=Gt(r,a),r=t[0],a=t[1],Je(r.shape,a.shape);var i={a:r,b:a},o=[r,a];return W.runKernelFunc(function(u,c){var f=u.squaredDifference(r,a);return c([r,a]),f},i,function(u,c){var f=c[0],h=c[1],p=Ee(2);return{a:function(){return u.mul(f.sub(h).mul(p))},b:function(){return u.mul(h.sub(f).mul(p))}}},af,{},o,[])}}),U8=H({abs_:function(e){var n=M(e,"x","abs");return n.dtype==="complex64"?W.runKernelFunc(function(t){return t.complexAbs(n)},{$x:n}):W.runKernelFunc(function(t,r){var a=t.abs(n);return r([n]),a},{x:n},function(t,r){var a=r[0];return{x:function(){return t.mul(a.toFloat().step(-1))}}},"Abs")}}),F8=H({acos_:function(e){var n=M(e,"x","acos");return W.runKernelFunc(function(t,r){var a=t.acos(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(Ee(1).sub(a.toFloat().square()).sqrt()).neg()}}})}}),V8=H({acosh_:function(e){var n=M(e,"x","acosh");return W.runKernelFunc(function(t,r){var a=t.acosh(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(a.toFloat().square().sub(1).sqrt())}}})}}),G8=H({asin_:function(e){var n=M(e,"x","asin");return W.runKernelFunc(function(t,r){var a=t.asin(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(Ee(1).sub(a.toFloat().square()).sqrt())}}})}}),H8=H({asinh_:function(e){var n=M(e,"x","asinh");return W.runKernelFunc(function(t,r){var a=t.asinh(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.divStrict(Ee(1).add(a.toFloat().square()).sqrt())}}})}}),z8=H({atan_:function(e){var n=M(e,"x","atan");return W.runKernelFunc(function(t,r){var a=t.atan(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().square().add(1))}}})}}),W8=H({atanh_:function(e){var n=M(e,"x","atanh");return W.runKernelFunc(function(t,r){var a=t.atanh(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.div(Ee(1).sub(a.toFloat().square()))}}})}}),K8=H({ceil_:function(e){var n=M(e,"x","ceil");return W.runKernelFunc(function(t){return t.ceil(n)},{$x:n},function(t){return{$x:function(){return rt(t)}}})}}),D2=H({clipByValue_:function(e,n,t){var r=M(e,"x","clipByValue");F(n<=t,function(){return"Error in clip: min ("+n+") must be less than or equal to max ("+t+")."});var a=[r],i={min:n,max:t};return W.runKernelFunc(function(o,u){var c=o.clip(r,n,t);return u([r]),c},{x:r},function(o,u){var c=u[0];return{x:function(){return o.where(c.greaterEqual(n).logicalAnd(c.lessEqual(t)),rt(o))}}},"ClipByValue",i,a)}}),q8=H({cos_:function(e){var n=M(e,"x","cos"),t=[n];return W.runKernelFunc(function(r,a){var i=r.cos(n);return a([n]),i},{x:n},function(r,a){var i=a[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}},"Cos",{},t)}}),Y8=H({cosh_:function(e){var n=M(e,"x","cosh");return W.runKernelFunc(function(t,r){var a=t.cosh(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(t)}}})}}),$8=H({erf_:function(e){var n=M(e,"x","erf");return F(n.dtype==="int32"||n.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),n.dtype==="int32"&&(n=n.toFloat()),W.runKernelFunc(function(t,r){var a=t.erf(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),oy=H({exp_:function(e){var n=M(e,"x","exp");return W.runKernelFunc(function(t,r){var a=t.exp(n);return r([a]),a},{x:n},function(t,r){return{x:function(){return t.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),j8=H({expm1_:function(e){var n=M(e,"x","expm1");return W.runKernelFunc(function(t,r){var a=t.expm1(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.exp())}}})}}),X8=H({floor_:function(e){var n=M(e,"x","floor");return W.runKernelFunc(function(t){return t.floor(n)},{$x:n},function(t){return{$x:function(){return rt(t)}}})}}),Z8=H({log_:function(e){var n=M(e,"x","log"),t=[n];return W.runKernelFunc(function(r,a){var i=r.log(n);return a([n]),i},{x:n},function(r,a){var i=a[0];return{x:function(){return r.div(i.toFloat())}}},"Log",{},t)}}),Q8=H({log1p_:function(e){var n=M(e,"x","log1p");return W.runKernelFunc(function(t,r){var a=t.log1p(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.div(a.add(1))}}})}}),J8=H({logSigmoid_:function(e){var n=M(e,"x","logSigmoid");return W.runKernelFunc(function(t,r){var a=t.softplus(n.neg()).neg();return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.neg().sigmoid())}}})}}),hm=H({neg_:function(e){var n=M(e,"x","neg"),t=[n];return W.runKernelFunc(function(r){return r.neg(n)},{x:n},function(r){return{x:function(){return r.neg()}}},"Neg",{},t)}}),e7=H({reciprocal_:function(e){var n=M(e,"x","reciprocal");return W.runKernelFunc(function(t,r){var a=t.reciprocal(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.div(a.square().neg())}}})}}),t7=H({round_:function(e){var n=M(e,"x","round");return W.runKernelFunc(function(t){return t.round(n)},{$x:n},function(t){return{$x:function(){return rt(t)}}})}}),yk=H({rsqrt_:function(e){var n=M(e,"x","rsqrt"),t=[n];return W.runKernelFunc(function(r,a){var i=r.rsqrt(n);return a([n]),i},{x:n},function(r,a){var i=a[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},t)}}),bk=H({sigmoid_:function(e){var n=M(e,"x","sigmoid");return W.runKernelFunc(function(t,r){var a=t.sigmoid(n);return r([a]),a},{x:n},function(t,r){var a=r[0];return{x:function(){return t.mul(a.mul(Ee(1).sub(a)))}}},"Sigmoid")}}),n7=H({sign_:function(e){var n=M(e,"x","sign");return W.runKernelFunc(function(t){return t.sign(n)},{$x:n},function(t){return{$x:function(){return rt(t)}}})}}),r7=H({isNaN_:function(e){var n=M(e,"x","isNaN");return W.runKernelFunc(function(t){return t.isNaN(n)},{$x:n},function(t){return{$x:function(){return rt(t)}}})}}),a7=H({isInf_:function(e){var n=M(e,"x","isInf");return W.runKernelFunc(function(t){return t.isInf(n)},{$x:n},function(t){return{$x:function(){return rt(t)}}})}}),i7=H({isFinite_:function(e){var n=M(e,"x","isFinite");return W.runKernelFunc(function(t){return t.isFinite(n)},{$x:n},function(t){return{$x:function(){return rt(t)}}})}}),o7=H({sin_:function(e){var n=M(e,"x","sin"),t=[n];return W.runKernelFunc(function(r,a){var i=r.sin(n);return a([n]),i},{x:n},function(r,a){var i=a[0];return{x:function(){return i.toFloat().cos().mul(r)}}},"Sin",{},t)}}),s7=H({sinh_:function(e){var n=M(e,"x","sinh");return W.runKernelFunc(function(t,r){var a=t.sinh(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(t)}}})}}),u7=H({softplus_:function(e){var n=M(e,"x","softplus");return W.runKernelFunc(function(t,r){var a=t.softplus(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.mul(a.sigmoid())}}})}}),l7=H({sqrt_:function(e){var n=M(e,"x","sqrt");return W.runKernelFunc(function(t,r){var a=t.sqrt(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().sqrt().mul(2))}}})}}),c7=H({step_:function(e,n){n===void 0&&(n=0);var t=M(e,"x","step");return W.runKernelFunc(function(r){return r.step(t,n)},{$x:t},function(r){return{$x:function(){return rt(r)}}})}}),f7=H({tan_:function(e){var n=M(e,"x","tan");return W.runKernelFunc(function(t,r){var a=t.tan(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return t.div(a.cos().square())}}})}}),d7=H({tanh_:function(e){var n=M(e,"x","tanh");return W.runKernelFunc(function(t,r){var a=t.tanh(n);return r([a]),a},{x:n},function(t,r){var a=r[0];return{x:function(){return Ee(1).sub(a.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});function Sk(e,n,t,r,a,i){var o,u,c=M(e,"x","batchNorm"),f=M(n,"mean","batchNorm"),h=M(t,"variance","batchNorm");return a!=null&&(o=M(a,"scale","batchNorm")),r!=null&&(u=M(r,"offset","batchNorm")),F(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),F(f.rank===2||f.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+f.rank+"."}),F(h.rank===2||h.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+h.rank+"."}),o!=null&&F(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),u!=null&&F(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+u.rank+"."}),wf(c,f,h,u,o,i)}function Ek(e,n,t,r,a,i){var o,u,c=M(e,"x","batchNorm"),f=M(n,"mean","batchNorm"),h=M(t,"variance","batchNorm");return a!=null&&(o=M(a,"scale","batchNorm")),r!=null&&(u=M(r,"offset","batchNorm")),F(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),F(f.rank===3||f.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+f.rank+"."}),F(h.rank===3||h.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+h.rank+"."}),o!=null&&F(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),u!=null&&F(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+u.rank+"."}),wf(c,f,h,u,o,i)}function _k(e,n,t,r,a,i){var o,u,c=M(e,"x","batchNorm"),f=M(n,"mean","batchNorm"),h=M(t,"variance","batchNorm");return a!=null&&(o=M(a,"scale","batchNorm")),r!=null&&(u=M(r,"offset","batchNorm")),F(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),F(f.rank===4||f.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+f.rank+"."}),F(h.rank===4||h.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+h.rank+"."}),o!=null&&F(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),u!=null&&F(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+u.rank+"."}),wf(c,f,h,u,o,i)}function wf(e,n,t,r,a,i){i==null&&(i=.001);var o,u,c,f=M(e,"x","batchNorm"),h=M(n,"mean","batchNorm"),p=M(t,"variance","batchNorm");a!=null&&(o=M(a,"scale","batchNorm")),r!=null&&(u=M(r,"offset","batchNorm")),F(h.rank===p.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),F(u==null||h.rank===u.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),F(o==null||h.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=f.rank===0||f.rank===1?f.as4D(1,1,1,f.size):f.rank===2?f.as4D(1,1,f.shape[0],f.shape[1]):f.rank===3?f.as4D(1,f.shape[0],f.shape[1],f.shape[2]):f;var m=[f,h,p,o];return W.runKernelFunc(function(g,y){var b=g.batchNormalization(c,rh(h),rh(p),i,rh(o),rh(u));return y([f,h,p,o]),b},{x:f,mean:h,variance:p,scale:o,offset:u},function(g,y){var b=y,E=b[0],_=b[1],w=b[2],I=b[3],R=I??Ee(1),C=yn(_.shape,c.shape),O=[];if(_.rank===1){for(var D=0;D<c.shape.length-1;++D)O.push(c.shape[D]);O.push(1)}var P=E.sub(_),k=g.mul(R),N=yk(w.add(Ee(i))),U=N.mul(N).mul(N).mul(Ee(-.5));return{x:function(){return _.rank===1?g.mul(Xu(N.as4D(1,1,1,_.shape[0]),O)).mul(R).reshape(E.shape):g.mul(N).mul(R).reshape(E.shape)},mean:function(){var V=N.mul(Ee(-1)).mul(k);return _.rank===1&&(V=V.sum(C)),V.reshape(_.shape)},variance:function(){var V=U.mul(P).mul(k);return _.rank===1&&(V=V.sum(C)),V.reshape(_.shape)},scale:function(){var V=P.mul(N),ee=g.mul(V);return _.rank===1&&(ee=ee.sum(C)),ee.reshape(_.shape)},offset:function(){var V=g;return _.rank===1&&(V=V.sum(C)),V.reshape(_.shape)}}},"BatchNormalization",{varianceEpsilon:i},m).reshape(f.shape)}function rh(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Xm(){BO("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var h7=H({batchNormalization2d_:function(e,n,t,r,a,i){return r===void 0&&(r=.001),Xm(),Sk(e,n,t,i,a,r)}}),p7=H({batchNormalization3d_:function(e,n,t,r,a,i){return r===void 0&&(r=.001),Xm(),Ek(e,n,t,i,a,r)}}),m7=H({batchNormalization4d_:function(e,n,t,r,a,i){return r===void 0&&(r=.001),Xm(),_k(e,n,t,i,a,r)}}),v7=H({batchNormalization_:function(e,n,t,r,a,i){return r===void 0&&(r=.001),Xm(),wf(e,n,t,i,a,r)}}),Ak=H({batchNorm_:wf}),g7=H({batchNorm2d_:Sk}),y7=H({batchNorm3d_:Ek}),b7=H({batchNorm4d_:_k}),Zm=H({logicalAnd_:function(e,n){var t=M(e,"a","logicalAnd","bool"),r=M(n,"b","logicalAnd","bool");return Je(t.shape,r.shape),W.runKernelFunc(function(a){return a.logicalAnd(t,r)},{a:t,b:r},null,"LogicalAnd")}}),S7=H({logicalNot_:function(e){var n=M(e,"x","logicalNot","bool");return W.runKernelFunc(function(t){return t.logicalNot(n)},{$x:n})}}),wk=H({logicalOr_:function(e,n){var t=M(e,"a","logicalOr","bool"),r=M(n,"b","logicalOr","bool");return Je(t.shape,r.shape),W.runKernelFunc(function(a){return a.logicalOr(t,r)},{$a:t,$b:r})}}),E7=H({logicalXor_:function(e,n){var t=M(e,"a","logicalXor","bool"),r=M(n,"b","logicalXor","bool");return Je(t.shape,r.shape),wk(e,n).logicalAnd(Zm(e,n).logicalNot())}}),Fs=H({where_:function(e,n,t){var r=M(n,"a","where"),a=M(t,"b","where"),i=M(e,"condition","where","bool");return vt(r.shape,a.shape,"Error in where: "),i.rank===1?F(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):vt(i.shape,a.shape,"Error in where: "),W.runKernelFunc(function(o,u){var c=o.select(i,r,a);return u([i]),c},{$condition:i,$a:r,$b:a},function(o,u){var c=u[0];return{$condition:function(){return rt(c).toFloat()},$a:function(){return o.mul(c.cast(o.dtype))},$b:function(){return o.mul(c.logicalNot().cast(o.dtype))}}})}}),Ik=function(e){return Ie(this,void 0,void 0,function(){var n,t,r;return Re(this,function(a){switch(a.label){case 0:return[4,(n=M(e,"condition","whereAsync","bool")).data()];case 1:return t=a.sent(),r=T2(n.shape,t),e!==n&&n.dispose(),[2,r]}})})},Ze=H({add_:function(e,n){var t,r=M(e,"a","add"),a=M(n,"b","add");t=Gt(r,a),r=t[0],a=t[1];var i=Je(r.shape,a.shape);return W.runKernelFunc(function(o){return o.add(r,a)},{a:r,b:a},function(o){return{a:function(){var u=o,c=yn(r.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(r.shape)},b:function(){var u=o,c=yn(a.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(a.shape)}}},"Add")}}),_7=H({addN_:function(e){F(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),F(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var n=e.map(function(a,i){return M(a,"tensors"+i,"addN")}),t=n[0];n.forEach(function(a){if(a.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(function(a){if(!On(a.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=n;return W.runKernelFunc(function(a){return a.addN(n)},r,function(a){var i={};return n.forEach(function(o,u){i[u]=function(){return a.clone()}}),i},"AddN")}}),A7=H({addStrict_:function(e,n){var t=M(e,"a","addStrict"),r=M(n,"b","addStrict");return vt(t.shape,r.shape,"Error in addStrict: "),t.add(r)}}),w7=H({atan2_:function(e,n){var t,r=M(e,"a","atan2"),a=M(n,"b","atan2");t=Gt(r,a),r=t[0],a=t[1];var i=Je(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.atan2(r,a);return u([r,a]),c},{$a:r,$b:a},function(o,u){var c=u[0],f=u[1];return{$a:function(){var h=Ze(c.square(),f.square()),p=o.mul(f.div(h)),m=yn(c.shape,i);return m.length>0&&(p=p.sum(m)),p.reshape(c.shape)},$b:function(){var h=Ze(c.square(),f.square()),p=hm(o.mul(c.div(h))),m=yn(f.shape,i);return m.length>0&&(p=p.sum(m)),p.reshape(f.shape)}}})}}),Ca=H({div_:function(e,n){var t,r=M(e,"a","div"),a=M(n,"b","div");if(t=Gt(r,a),r=t[0],a=t[1],r.dtype==="int32"&&a.dtype==="int32")return Rk(r,a);var i=Je(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.realDivide(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var h=o.div(f.toFloat()),p=yn(c.shape,i);return p.length>0?h.sum(p).reshape(c.shape):h},b:function(){var h=o.mul(c.toFloat()),p=yn(f.shape,i);p.length>0&&(h=h.sum(p).reshape(f.shape));var m=f.square();return h.div(m.toFloat()).neg()}}},"Div")}}),I7=H({divNoNan_:function(e,n){var t,r=M(e,"a","div"),a=M(n,"b","div");r=(t=Gt(r,a))[0],a=t[1];var i=Ca(r,a),o=rt(i),u=a.equal(o);return Fs(u,o,i)}}),R7=H({divStrict_:function(e,n){var t=M(e,"a","div"),r=M(n,"b","div");return vt(t.shape,r.shape,"Error in divideStrict: "),t.div(r)}}),Rk=H({floorDiv_:function(e,n){var t,r=M(e,"a","floorDiv"),a=M(n,"b","floorDiv");t=Gt(r,a),r=t[0],a=t[1];var i=Je(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.floorDiv(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var h=o.div(f.toFloat()),p=yn(c.shape,i);return p.length>0?h.sum(p).reshape(c.shape):h},b:function(){var h=o.mul(c.toFloat()),p=yn(f.shape,i);p.length>0&&(h=h.sum(p).reshape(f.shape));var m=f.square();return h.div(m.toFloat()).neg()}}},"FloorDiv")}}),P2=H({maximum_:function(e,n){var t,r=M(e,"a","maximum"),a=M(n,"b","maximum");return t=Gt(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),Je(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.maximum(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return i.mul(u.greaterEqual(c).toFloat())},b:function(){return i.mul(u.less(c).toFloat())}}},"Maximum")}}),C7=H({maximumStrict_:function(e,n){var t=M(e,"a","maximumStrict"),r=M(n,"b","maximumStrict");return vt(t.shape,r.shape,"Error in maximumStrict: "),t.maximum(r)}}),Ck=H({minimum_:function(e,n){var t,r=M(e,"a","minimum"),a=M(n,"b","minimum");return t=Gt(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),Je(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.minimum(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return i.mul(u.lessEqual(c).toFloat())},b:function(){return i.mul(u.greater(c).toFloat())}}},"Minimum")}}),N7=H({minimumStrict_:function(e,n){var t=M(e,"a","minimumStrict"),r=M(n,"b","minimumStrict");return vt(t.shape,r.shape,"Error in minimumStrict: "),t.minimum(r)}}),T7=H({mod_:function(e,n){var t,r=M(e,"a","mod"),a=M(n,"b","mod");t=Gt(r,a),r=t[0],a=t[1];var i=Je(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.mod(r,a);return u([r,a]),c},{$a:r,$b:a},function(o,u){var c=u[0],f=u[1];return{$a:function(){var h=yn(c.shape,i);return h.length>0?o.sum(h).reshape(c.shape):o},$b:function(){var h=o.mul(c.div(f).floor().neg()),p=yn(f.shape,i);return p.length>0?h.sum(p).reshape(f.shape):h}}})}}),O7=H({modStrict_:function(e,n){var t=M(e,"a","modStrict"),r=M(n,"b","modStrict");return vt(t.shape,r.shape,"Error in modStrict: "),t.mod(r)}}),er=H({mul_:function(e,n){var t,r=M(e,"a","mul"),a=M(n,"b","mul");t=Gt(r,a),r=t[0],a=t[1];var i=Je(r.shape,a.shape);return W.runKernelFunc(function(o,u){var c=o.multiply(r,a);return u([r,a]),c},{a:r,b:a},function(o,u){var c=u[0],f=u[1];return{a:function(){var h=o.mul(f.toFloat()),p=yn(c.shape,i);return p.length>0?h.sum(p).reshape(c.shape):h},b:function(){var h=o.mul(c.toFloat()),p=yn(f.shape,i);return p.length>0?h.sum(p).reshape(f.shape):h}}},"Mul")}}),k7=H({mulStrict_:function(e,n){var t=M(e,"a","mul"),r=M(n,"b","mul");return vt(t.shape,r.shape,"Error in multiplyStrict: "),t.mul(r)}}),pm=H({pow_:function(e,n){var t,r=M(e,"base","pow"),a=M(n,"exp","pow");t=Gt(r,a),r=t[0],a=t[1];var i=Je(r.shape,a.shape),o=[r,a];return W.runKernelFunc(function(u,c){var f=u.pow(r,a);return c([r,a,f]),f},{a:r,b:a},function(u,c){var f=c[0],h=c[1],p=c[2];return{a:function(){var m=h.toFloat(),g=u.mul(m.mul(f.pow(m.sub(Ee(1))))),y=yn(f.shape,i);return y.length>0&&(g=g.sum(y)),g.reshape(f.shape)},b:function(){var m=f.greater(0),g=f.log().where(m,rt(f)),y=u.mul(p.mul(g)),b=yn(h.shape,i);return b.length>0&&(y=y.sum(b)),y.reshape(h.shape)}}},"Pow",{},o,[!0])}}),x7=H({powStrict_:function(e,n){return vt(e.shape,n.shape,"Error in powStrict: "),e.pow(n)}}),D7=H({squaredDifferenceStrict_:function(e,n){var t=M(e,"a","squaredDifferenceStrict"),r=M(n,"b","squaredDifferenceStrict");return vt(t.shape,r.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(r)}}),bn=H({sub_:function(e,n){var t,r=M(e,"a","sub"),a=M(n,"b","sub");t=Gt(r,a),r=t[0],a=t[1];var i=Je(r.shape,a.shape);return W.runKernelFunc(function(o){return o.subtract(r,a)},{a:r,b:a},function(o){return{a:function(){var u=o,c=yn(r.shape,i);return c.length>0&&(u=u.sum(c)),u.reshape(r.shape)},b:function(){var u=o,c=yn(a.shape,i);return c.length>0&&(u=u.sum(c)),u.neg().reshape(a.shape)}}},"Sub")}}),P7=H({subStrict_:function(e,n){var t=M(e,"a","subStrict"),r=M(n,"b","subStrict");return vt(t.shape,r.shape,"Error in subStrict: "),t.sub(r)}}),Nk=H({equal_:function(e,n){var t,r=M(e,"a","equal"),a=M(n,"b","equal");return t=Gt(r,a),r=t[0],a=t[1],Je(r.shape,a.shape),W.runKernelFunc(function(i){return i.equal(r,a)},{$a:r,$b:a})}}),M7=H({equalStrict_:function(e,n){var t=M(e,"a","equalStrict"),r=M(n,"b","equalStrict");return vt(t.shape,r.shape,"Error in equalStrict: "),t.equal(r)}}),L7=H({greater_:function(e,n){var t,r=M(e,"a","greater"),a=M(n,"b","greater");return t=Gt(r,a),r=t[0],a=t[1],Je(r.shape,a.shape),W.runKernelFunc(function(i){return i.greater(r,a)},{a:r,b:a},null,"Greater")}}),Tk=H({greaterEqual_:function(e,n){var t,r=M(e,"a","greaterEqual"),a=M(n,"b","greaterEqual");return t=Gt(r,a),r=t[0],a=t[1],Je(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.greaterEqual(r,a);return o([r,a]),u},{a:r,b:a},function(i,o){var u=o[0],c=o[1];return{a:function(){return rt(u)},b:function(){return rt(c)}}},"GreaterEqual")}}),B7=H({greaterEqualStrict_:function(e,n){var t=M(e,"a","greaterEqualStrict"),r=M(n,"b","greaterEqualStrict");return vt(t.shape,r.shape,"Error in greaterEqualStrict: "),t.greaterEqual(r)}}),U7=H({greaterStrict_:function(e,n){var t=M(e,"a","greaterStrict"),r=M(n,"b","greaterStrict");return vt(t.shape,r.shape,"Error in greaterStrict: "),t.greater(r)}}),F7=H({less_:function(e,n){var t,r=M(e,"a","less"),a=M(n,"b","less");return t=Gt(r,a),r=t[0],a=t[1],Je(r.shape,a.shape),W.runKernelFunc(function(i){return i.less(r,a)},{a:r,b:a},null,"Less")}}),V7=H({lessEqual_:function(e,n){var t,r=M(e,"a","lessEqual"),a=M(n,"b","lessEqual");return t=Gt(r,a),r=t[0],a=t[1],Je(r.shape,a.shape),W.runKernelFunc(function(i,o){var u=i.lessEqual(r,a);return o([r,a]),u},{a:r,b:a},null,"LessEqual")}}),G7=H({lessEqualStrict_:function(e,n){var t=M(e,"a","lessEqualStrict"),r=M(n,"b","lessEqualStrict");return vt(t.shape,r.shape,"Error in lessEqualStrict: "),t.lessEqual(r)}}),H7=H({lessStrict_:function(e,n){var t=M(e,"a","lessStrict"),r=M(n,"b","lessStrict");return vt(t.shape,r.shape,"Error in lessStrict: "),t.less(r)}}),z7=H({notEqual_:function(e,n){var t,r=M(e,"a","notEqual"),a=M(n,"b","notEqual");return t=Gt(r,a),r=t[0],a=t[1],Je(r.shape,a.shape),W.runKernelFunc(function(i){return i.notEqual(r,a)},{a:r,b:a},null,"NotEqual")}}),W7=H({notEqualStrict_:function(e,n){var t=M(e,"a","notEqualStrict"),r=M(n,"b","notEqualStrict");return vt(t.shape,r.shape,"Error in notEqualStrict: "),t.notEqual(r)}});function mI(e,n){for(var t=[],r=e;r<n;++r)t.push(r);return t}function vI(e){for(var n=[],t=0;t<e.length;++t)for(var r=0;r<e[t].length;++r)n.push(e[t][r]);return n}var M2=H({gather_:function(e,n,t){t===void 0&&(t=0);var r=M(e,"x","gather"),a=M(n,"indices","gather","int32");t=Sn(t,r.shape)[0];var i=function(o,u,c){for(var f=o.shape[c],h=[],p=1,m=1,g=0;g<c;g++)h.push(o.shape[g]),p*=o.shape[g];for(g=0;g<u.rank;g++)h.push(u.shape[g]);for(g=c+1;g<o.rank;g++)h.push(o.shape[g]),m*=o.shape[g];return{batchSize:p,sliceSize:m,dimSize:f,outputShape:h}}(r,a,t);return W.runKernelFunc(function(o,u){var c=o.gather(r,a.flatten(),t);return u([a]),c},{x:r,indices:a},function(o,u){var c=u[0];return{x:function(){var f=r.shape,h=c.size,p=f.slice(0,t),m=p.length,g=f.slice(t,f.length).slice(1),y=g.length,b=mI(0,m),E=mI(m+1,m+1+y),_=vI([p,[h],g]),w=o.reshape(_),I=c.reshape([h]),R=vI([[m],b,E]),C=w.transpose(R),O=Ok(C,I,r.shape[t]),D=E2(R);return O=O.transpose(D)},indices:function(){return c}}},"Gather",{axis:t}).reshape(i.outputShape)}}),Ok=H({unsortedSegmentSum_:function(e,n,t){var r=M(e,"x","unsortedSegmentSum"),a=M(n,"segmentIds","unsortedSegmentSum","int32");return F(jt(t),function(){return"numSegments must be of dtype int"}),W.runKernelFunc(function(i,o){var u=i.unsortedSegmentSum(r,a,t);return o([a]),u},{$x:r},function(i,o){var u=o[0];return{$x:function(){return function(c,f){for(var h=P2(f,rt(f)),p=M2(c,h),m=Tk(f,Ee(0,"int32")),g=p.rank-m.rank,y=0;y<g;++y)m=fa(m,y+1);m=Zm(m,_l(p.shape,"bool"));var b=rt(p);return Fs(m,p,b)}(i,u)}}})}}),K7=function(e,n,t){return Ie(this,void 0,void 0,function(){var r,a,i,o,u,c,f,h,p,m,g,y,b;return Re(this,function(E){switch(E.label){case 0:for(r=M(e,"tensor","boolMask"),a=M(n,"mask","boolMask","bool"),i=t??0,o=a.rank,u=r.shape,F(o>0,function(){return"mask cannot be scalar"}),vt(u.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,f=i;f<i+o;f++)c*=u[f];return h=u.slice(0,i).concat([c],u.slice(i+o)),p=r.reshape(h),m=a.reshape([-1]),[4,Ik(m)];case 1:return g=E.sent(),y=g.squeeze([1]),b=M2(p,y,i),e!==r&&r.dispose(),n!==a&&a.dispose(),y.dispose(),p.dispose(),m.dispose(),g.dispose(),[2,b]}})})};function kk(e,n,t,r,a,i,o){i===void 0&&(i="NHWC"),F(e.length===n.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+n.rank+") must match"});var u=e,c=n,f=!1;n.rank===3&&(f=!0,c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]),u=[1,e[0],e[1],e[2]]),F(u.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+u.length+"."}),F(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),F(t.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+t.rank});var h=i==="NHWC"?u[3]:u[1],p=i==="NHWC"?c.shape[3]:c.shape[1];F(h===t.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+h+") must match input depth for filter "+t.shape[2]+"."}),F(p===t.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+t.shape[3]+"."}),o!=null&&F(jt(a),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var m=R2(i),g=$s(u,t.shape,r,1,a,o,!1,m),y=W.runKernelFunc(function(b,E){var _=b.conv2dDerInput(c,t,g);return E([t,c]),_},{dy4D:c,filter:t},function(b,E){var _=E[0],w=E[1];return{dy4D:function(){return Sa(b,_,r,a,i,1,o)},filter:function(){return L2(b,w,_.shape,r,a,i,o)}}});return f?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}function i1(e){var n=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(e),t=n[0],r=n[1],a=n[2];return t===1&&r===1&&a===1}function xk(e,n,t,r,a){F(e.length===n.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+n.rank+") must match"});var i=e,o=n,u=!1;n.rank===4&&(u=!0,o=n.as5D(1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var c=i[4],f=o.shape[4];F(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),F(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),F(t.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+t.rank}),F(c===t.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+t.shape[3]+"."}),F(f===t.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+f+") must match output depth for filter "+t.shape[4]+"."});var h=fm(i,t.shape,r,1,a),p=W.runKernelFunc(function(m){return m.conv3dDerInput(o,t,h)},{dy5D:o});return u?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}var q7=H({conv1d_:function(e,n,t,r,a,i,o){a===void 0&&(a="NWC"),i===void 0&&(i=1);var u=M(e,"x","conv1d"),c=M(n,"filter","conv1d"),f=u,h=!1;u.rank===2&&(h=!0,f=u.as3D(1,u.shape[0],u.shape[1])),F(f.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+f.rank+"."}),F(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),o!=null&&F(jt(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}),F(f.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+f.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),F(Rr(t,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+t+" and dilation '"+i+"'"}),F(a==="NWC",function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."});var p=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),m=f.as4D(f.shape[0],1,f.shape[1],f.shape[2]),g=Sa(m,p,[1,t],r,"NHWC",[1,i],o);return h?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),Sa=H({conv2d_:function(e,n,t,r,a,i,o){a===void 0&&(a="NHWC"),i===void 0&&(i=[1,1]);var u=M(e,"x","conv2d"),c=M(n,"filter","conv2d"),f=u,h=!1;u.rank===3&&(h=!0,f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),F(f.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+f.rank+"."}),F(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),o!=null&&F(jt(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var p=a==="NHWC"?f.shape[3]:f.shape[1];F(p===c.shape[2],function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+c.shape[2]+"."}),F(Rr(t,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"});var m=R2(a),g=$s(f.shape,c.shape,t,i,r,o,!1,m),y=[c,f],b=W.runKernelFunc(function(E,_){var w=E.conv2d(f,c,g);return _([c,f]),w},{x:f,filter:c},function(E,_){var w=_,I=w[0],R=w[1];return F(fl(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return Dk(R.shape,E,I,t,r,a)},filter:function(){return L2(R,E,I.shape,t,r,a)}}},"Conv2D",g,y);return h?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),Y7=H({conv3d_:function(e,n,t,r,a,i){a===void 0&&(a="NDHWC"),i===void 0&&(i=[1,1,1]);var o=M(e,"x","conv3d"),u=M(n,"filter","conv3d"),c=o,f=!1;o.rank===4&&(f=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),F(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),F(u.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+u.rank+"."}),F(c.shape[4]===u.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+u.shape[3]+"."}),F(function(m,g){return i1(m)||i1(g)}(t,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),F(a==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."});var h=fm(c.shape,u.shape,t,i,r),p=W.runKernelFunc(function(m,g){var y=m.conv3d(c,u,h);return g([c,u]),y},{x:c,$filter:u},function(m,g){F(i1(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var y=g[0],b=g[1];return{x:function(){return xk(y.shape,m,b,t,r)},$filter:function(){return function(E,_,w,I,R){var C=E;E.rank===4&&(C=E.as5D(1,E.shape[0],E.shape[1],E.shape[2],E.shape[3]));var O=_;O.rank===4&&(O=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),F(C.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+C.shape+"."}),F(O.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+O.shape+"."}),F(w.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+w+"."}),F(C.shape[4]===w[3],function(){return"Error in conv3dDerFilter: depth of input "+C.shape[4]+") must match input depth in filter ("+w[3]+"."}),F(O.shape[4]===w[4],function(){return"Error in conv3dDerFilter: depth of dy ("+O.shape[4]+") must match output depth for filter ("+w[4]+")."});var D=fm(C.shape,w,I,1,R);return W.runKernelFunc(function(P){return P.conv3dDerFilter(C,O,D)},{x5D:C,dy5D:O})}(y,m,b.shape,t,r)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),L2=H({conv2dDerFilter_:function(e,n,t,r,a,i,o){i===void 0&&(i="NHWC");var u=e;e.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var c=n;c.rank===3&&(c=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),F(u.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+u.shape+"."}),F(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),F(t.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+t+"."});var f=i==="NHWC"?u.shape[3]:u.shape[1],h=i==="NHWC"?c.shape[3]:c.shape[1];F(f===t[2],function(){return"Error in conv2dDerFilter: depth of input "+f+") must match input depth in filter ("+t[2]+"."}),F(h===t[3],function(){return"Error in conv2dDerFilter: depth of dy ("+h+") must match output depth for filter ("+t[3]+")."}),o!=null&&F(jt(a),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."});var p=R2(i),m=$s(u.shape,t,r,1,a,o,!1,p);return W.runKernelFunc(function(g){return g.conv2dDerFilter(u,c,m)},{x4D:u,dy4D:c})}}),Dk=H({conv2dDerInput_:kk}),Qm=H({depthwiseConv2d_:function(e,n,t,r,a,i,o){i===void 0&&(i=[1,1]);var u=M(e,"x","depthwiseConv2d"),c=M(n,"filter","depthwiseConv2d"),f=u,h=!1;u.rank===3&&(h=!0,f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),F(f.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+f.rank+"."}),F(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),F(f.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+f.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),i==null&&(i=[1,1]),F(Rr(t,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+i+"'"}),o!=null&&F(jt(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var p=$s(f.shape,c.shape,t,i,r,o,!0),m=[f,c],g=W.runKernelFunc(function(y,b){var E=y.depthwiseConv2D(f,c,p);return b([f,c]),E},{x:f,filter:c},function(y,b){F(fl(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var E=b[0],_=b[1];return{x:function(){return Pk(E.shape,y,_,p)},filter:function(){return Mk(E,y,_.shape,p)}}},"DepthwiseConv2dNative",p,m);return h?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),Pk=H({depthwiseConv2dDerInput_:function(e,n,t,r){var a=n,i=!1;n.rank===3&&(i=!0,a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=W.runKernelFunc(function(u){return u.depthwiseConv2DDerInput(a,t,r)},{dy4D:a});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),Mk=H({depthwiseConv2dDerFilter_:function(e,n,t,r){var a=e;e.rank===3&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=n;return i.rank===3&&(i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2])),W.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(a,i,r)},{x4D:a,dy4D:i})}}),B2=H({separableConv2d_:function(e,n,t,r,a,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var u=M(e,"x","separableConv2d"),c=M(n,"depthwiseFilter","separableConv2d"),f=M(t,"pointwiseFilter","separableConv2d"),h=u,p=!1;if(u.rank===3&&(p=!0,h=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");F(h.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+h.rank+"."}),F(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),F(f.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),F(f.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+f.shape[0]+"."}),F(f.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+f.shape[1]+"."});var m=c.shape[2],g=c.shape[3];F(f.shape[2]===m*g,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+m*g+", but got "+f.shape[2]+"."});var y=Qm(h,c,r,a,o,i),b=Sa(y,f,1,"valid",o);return p?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),$7=H({conv2dTranspose_:function(e,n,t,r,a,i){return kk(t,M(e,"x","conv2dTranspose"),M(n,"filter","conv2dTranspose"),r,a,"NHWC",i)}}),j7=H({conv3dTranspose_:function(e,n,t,r,a){return xk(t,M(e,"x","conv3dTranspose"),M(n,"filter","conv3dTranspose"),r,a)}}),Jm=H({matMul_:function(e,n,t,r){var a;t===void 0&&(t=!1),r===void 0&&(r=!1);var i=M(e,"a","matMul"),o=M(n,"b","matMul");a=Gt(i,o),i=a[0],o=a[1];var u=t?i.shape[i.rank-2]:i.shape[i.rank-1],c=r?o.shape[o.rank-1]:o.shape[o.rank-2],f=t?i.shape[i.rank-1]:i.shape[i.rank-2],h=r?o.shape[o.rank-2]:o.shape[o.rank-1],p=i.shape.slice(0,-2),m=o.shape.slice(0,-2),g=Ne(p),y=Ne(m);F(i.rank>=2&&o.rank>=2&&i.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."}),F(On(p,m),function(){return"Error in matMul: outer dimensions ("+p+") and ("+m+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."}),F(u===c,function(){return"Error in matMul: inner shapes ("+u+") and ("+c+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+t+" and transposeB="+r+" must match."});var b=i.shape.slice(0,-2).concat([f,h]),E=t?i.as3D(g,u,f):i.as3D(g,f,u),_=r?o.as3D(y,h,c):o.as3D(y,c,h),w={transposeA:t,transposeB:r};return W.runKernelFunc(function(I,R){var C=I.batchMatMul(E,_,t,r);return R([E,_]),C},{a:E,b:_},function(I,R){var C=R,O=C[0],D=C[1];return t||r?!t&&r?{a:function(){return I.matMul(D,!1,!1)},b:function(){return I.matMul(O,!0,!1)}}:t&&!r?{a:function(){return D.matMul(I,!1,!0)},b:function(){return O.matMul(I,!1,!1)}}:{a:function(){return D.matMul(I,!0,!0)},b:function(){return I.matMul(O,!0,!0)}}:{a:function(){return I.matMul(D,!1,!0)},b:function(){return O.matMul(I,!0,!1)}}},"BatchMatMul",w).reshape(b)}}),X7=H({dot_:function(e,n){var t=M(e,"t1","dot"),r=M(n,"t2","dot");F(!(t.rank!==1&&t.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+t.rank+" and "+r.rank+"."});var a=t.rank===1?t.size:t.shape[1],i=r.rank===1?r.size:r.shape[0];return F(a===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."}),t.rank===1&&r.rank===1?t.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():t.rank===1&&r.rank===2?t.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():t.rank===2&&r.rank===1?t.matMul(r.as2D(-1,1)).as1D():t.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Z7=H({outerProduct_:function(e,n){var t=M(e,"v1","outerProduct"),r=M(n,"v2","outerProduct");return F(t.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+r.rank+"."}),t.as2D(-1,1).matMul(r.as2D(1,-1))}}),If=H({reverse_:function(e,n){var t=M(e,"x","reverse");if(t.rank===0)return t.clone();var r=Sn(n,t.shape);return W.runKernelFunc(function(a){return a.reverse(t,r)},{$x:t},function(a){return{$x:function(){return a.reverse(r)}}}).reshapeAs(t)}}),Q7=H({reverse1d_:function(e){var n=M(e,"x","reverse");return F(n.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+n.rank+"."}),If(n,0)}}),J7=H({reverse2d_:function(e,n){var t=M(e,"x","reverse");return F(t.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+t.rank+"."}),If(t,n)}}),eH=H({reverse3d_:function(e,n){var t=M(e,"x","reverse");return F(t.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+t.rank+"."}),If(t,n)}}),tH=H({reverse4d_:function(e,n){var t=M(e,"x","reverse");return F(t.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+t.rank+"."}),If(t,n)}});function Lk(e,n,t,r,a,i){var o=M(e,"x","maxPool"),u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),F(u.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+u.rank+"."}),F(Rr(t,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"}),i!=null&&F(jt(a),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var f=rf(u.shape,n,t,r,a,i);if(f.filterWidth===1&&f.filterHeight===1&&On(f.inShape,f.outShape))return o.clone();var h=[u],p=W.runKernelFunc(function(m,g){var y=m.maxPool(u,f);return g([u,y]),y},{x:u},function(m,g){var y=g[0],b=g[1];return{x:function(){return function(E,_,w,I,R,C,O,D){var P=M(E,"dy","maxPoolBackprop"),k=M(_,"input","maxPoolBackprop"),N=M(w,"output","maxPoolBackprop");F(k.rank===P.rank,function(){return"Rank of input ("+k.rank+") does not match rank of dy ("+P.rank+")"}),F(Rr(R,C),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+R+" and dilations '"+C+"'"}),F(P.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+P.rank+"."}),F(k.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+k.rank+"."});var U=rf(k.shape,I,R,C,O,D);return W.runKernelFunc(function(V){return V.maxPoolBackprop(P,k,N,U)},{$dy:P,$input:k})}(m,y,b,n,t,r,a)}}},"MaxPool",f,h);return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Bk(e,n,t,r,a,i){var o=M(e,"x","avgPool","float32");F(Rr(t,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"});var u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),F(u.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+u.rank+"."}),i!=null&&F(jt(a),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var f=rf(u.shape,n,t,r,a,i);if(f.filterWidth===1&&f.filterHeight===1&&On(f.inShape,f.outShape))return o.clone();var h=W.runKernelFunc(function(p){return p.avgPool(u,f)},{x:u},function(p){return{x:function(){return function(m,g,y,b,E,_){var w=M(m,"dy","avgPoolBackprop"),I=M(g,"input","avgPoolBackprop");F(I.rank===w.rank,function(){return"Rank of input ("+I.rank+") does not match rank of dy ("+w.rank+")"}),F(Rr(b,E),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+E+"'"});var R=I,C=w,O=!1;I.rank===3&&(O=!0,R=I.as4D(1,I.shape[0],I.shape[1],I.shape[2]),C=w.as4D(1,w.shape[0],w.shape[1],w.shape[2])),F(C.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+C.rank+"."}),F(R.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+R.rank+"."});var D=rf(R.shape,y,b,E,_),P=W.runKernelFunc(function(k){return k.avgPoolBackprop(C,R,D)},{dy4D:C,input4D:R});return O?P.as3D(P.shape[1],P.shape[2],P.shape[3]):P}(p,u,n,t,r,a)}}},"AvgPool",f);return h=h.cast(o.dtype),c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}var Nn=H({maxPool_:function(e,n,t,r,a){return Lk(e,n,t,1,r,a)}}),Rf=H({avgPool_:function(e,n,t,r,a){return Bk(e,n,t,1,r,a)}}),nH=H({pool_:function(e,n,t,r,a,i){a==null&&(a=[1,1]),i==null&&(i=1),r===0&&(r="valid");var o=M(e,"x","maxPool"),u=o,c=!1;o.rank===3&&(c=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),F(Rr(i,a),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"});var f,h=rf(u.shape,n,i,a,r),p=[h.dilationHeight,h.dilationWidth];f=r==="same"?function(R,C){var O=R.map(function(k,N){return k+(k-1)*(C[N]-1)}).map(function(k){return k-1}),D=O.map(function(k){return Math.floor(k/2)}),P=O.map(function(k,N){return k-D[N]});return O.map(function(k,N){return[D[N],P[N]]})}([h.filterHeight,h.filterWidth],p):[[0,0],[0,0]];var m=p[0]===1&&p[1]===1,g=function(R,C,O){var D=O.map(function(re){return re[0]}),P=O.map(function(re){return re[1]}),k=R.concat(D,P),N=C.map(function(re,ne){return(re-k[ne]%re)%re}),U=P.map(function(re,ne){return re+N[ne]}),V=C.map(function(re,ne){return[D[ne],U[ne]]}),ee=C.map(function(re,ne){return[0,N[ne]]});return[V,ee]}([h.inHeight,h.inWidth],p,f),y=g[0],b=g[1],E=m?r:"valid",_=m?u:zO(u,p,y),w=(t==="avg"?function(){return Bk(_,n,i,1,E)}:function(){return Lk(_,n,i,1,E)})(),I=m?w:VO(w,p,b);return c?I.as3D(I.shape[1],I.shape[2],I.shape[3]):I}}),rH=H({maxPool3d_:function(e,n,t,r,a,i,o){i===void 0&&(i="NDHWC");var u=M(e,"x","maxPool3d"),c=u,f=!1;u.rank===4&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),o==null&&(o=[1,1,1]),F(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),F(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),F(Rr(t,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),a!=null&&F(jt(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var h=cm(c.shape,n,t,o,r,a,i),p=W.runKernelFunc(function(m,g){var y=m.maxPool3d(c,h);return g([c,y]),y},{x:c},function(m,g){var y=g[0],b=g[1];return{x:function(){return function(E,_,w,I,R,C,O,D){var P=M(E,"dy","maxPool3dBackprop"),k=M(_,"input","maxPool3dBackprop"),N=M(w,"output","maxPool3dBackprop"),U=P,V=k,ee=N,re=!1;k.rank===4&&(re=!0,U=P.as5D(1,P.shape[0],P.shape[1],P.shape[2],P.shape[3]),V=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),ee=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3])),F(U.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+U.rank+"."}),F(V.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+V.rank+"."}),F(ee.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+ee.rank+"."}),C==null&&(C=[1,1,1]),F(Rr(R,C),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+R+" and dilations '"+C+"'"}),D!=null&&F(jt(O),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+D+" but got pad "+O+"."});var ne=cm(V.shape,I,R,C,O,D),z=W.runKernelFunc(function(Z){return Z.maxPool3dBackprop(U,V,ee,ne)},{dy5D:U,input5D:V});return re?z.as4D(z.shape[1],z.shape[2],z.shape[3],z.shape[4]):z}(m,y,b,n,t,o,r,a)}}});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),aH=H({avgPool3d_:function(e,n,t,r,a,i,o){i===void 0&&(i="NDHWC");var u=M(e,"x","avgPool3d","float32"),c=u,f=!1;u.rank===4&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),o==null&&(o=[1,1,1]),F(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),F(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),F(Rr(t,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}),a!=null&&F(jt(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var h=cm(c.shape,n,t,o,r,a,i),p=W.runKernelFunc(function(m){return m.avgPool3d(c,h)},{x:c},function(m){return{x:function(){return function(g,y,b,E,_,w,I){var R=M(g,"dy","avgPool3dBackprop"),C=M(y,"input","avgPool3dBackprop"),O=R,D=C,P=!1;C.rank===4&&(P=!0,O=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3]),D=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3])),F(O.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+O.rank+"."}),F(D.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+D.rank+"."}),_==null&&(_=[1,1,1]),F(Rr(E,_),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+E+" and dilations '"+_+"'"}),I!=null&&F(jt(w),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+I+" but got pad "+w+"."});var k=cm(D.shape,b,E,_,w,I),N=W.runKernelFunc(function(U){return U.avgPool3dBackprop(O,D,k)},{dy5D:O,input5D:D});return P?N.as4D(N.shape[1],N.shape[2],N.shape[3],N.shape[4]):N}(m,c,n,t,o,r,a)}}});return p=p.cast(c.dtype),f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),si=H({slice_:function(e,n,t){var r,a,i=M(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof n=="number"?[n].concat(new Array(i.rank-1).fill(0)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(0)):n.slice()).forEach(function(c){F(c!==-1,function(){return"slice() does not support negative begin indexing."})}),a=(a=t==null?new Array(i.rank).fill(-1):typeof t=="number"?[t].concat(new Array(i.rank-1).fill(-1)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(-1)):t).map(function(c,f){return c>=0?c:(F(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+f+"."}),i.shape[f]-r[f])}),xV(i,r,a);var o=i.shape,u={begin:r,size:a};return W.runKernelFunc(function(c){return c.slice(i,r,a)},{x:i},function(c){for(var f=[],h=0;h<c.rank;h++)f.push([r[h],o[h]-r[h]-a[h]]);return{x:function(){return c.pad(f)}}},"Slice",u)}}),iH=H({slice1d_:function(e,n,t){var r=M(e,"x","slice1d");return F(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),si(r,[n],[t])}}),oH=H({slice2d_:function(e,n,t){var r=M(e,"x","slice2d");return F(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),si(r,n,t)}}),Uk=H({slice3d_:function(e,n,t){var r=M(e,"x","slice3d");return F(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),si(r,n,t)}}),sH=H({slice4d_:function(e,n,t){var r=M(e,"x","slice4d");return F(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),si(r,n,t)}});function Fk(e,n,t,r,a){return n.rank<t.rank&&(n=n.reshape(Ir(n.shape,r))),e.rank<t.rank&&(e=e.reshape(Ir(e.shape,r))),{x:function(){var i=e.mul(t.equal(n).cast(e.dtype));return a==null?i:i.transpose(a)}}}var uH=H({all_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=M(e,"x","all","bool"),a=Sn(n,r.shape),i=a,o=ci(i,r.rank);o!=null&&(r=r.transpose(o),i=fi(i.length,r.rank));var u=W.runKernelFunc(function(f){return f.all(r,i)},{$x:r});if(t){var c=Ir(u.shape,a);return u.reshape(c)}return u}}),lH=H({any_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=M(e,"x","any","bool"),a=Sn(n,r.shape),i=a,o=ci(i,r.rank);o!=null&&(r=r.transpose(o),i=fi(i.length,r.rank));var u=W.runKernelFunc(function(f){return f.any(r,i)},{$x:r});if(t){var c=Ir(u.shape,a);return u.reshape(c)}return u}}),cH=H({argMax_:function(e,n){n===void 0&&(n=0);var t=M(e,"x","argMax");n==null&&(n=0);var r=Sn(n,t.shape),a=ci(r,t.rank);a!=null&&(t=t.transpose(a),r=fi(r.length,t.rank));var i={axis:r[0]},o=[t];return W.runKernelFunc(function(u,c){var f=u.argMax(t,r[0]);return c([t]),f},{x:t},function(u,c){var f=c[0];return{x:function(){return rt(f)}}},"ArgMax",i,o)}}),fH=H({argMin_:function(e,n){n===void 0&&(n=0);var t=M(e,"x","argMin");n==null&&(n=0);var r=Sn(n,t.shape),a=ci(r,t.rank);return a!=null&&(t=t.transpose(a),r=fi(r.length,t.rank)),W.runKernelFunc(function(i,o){var u=i.argMin(t,r[0]);return o([t]),u},{$x:t},function(i,o){var u=o[0];return{$x:function(){return rt(u)}}})}}),dH=H({logSumExp_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=M(e,"x","logSumExp"),a=Sn(n,r.shape),i=r.max(a,!0),o=r.sub(i).exp().sum(a).log(),u=i.reshape(o.shape).add(o);if(t){var c=Ir(u.shape,a);return u.reshape(c)}return u}}),ev=H({max_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=M(e,"x","max"),a=r,i=Sn(n,r.shape),o=i,u=ci(o,r.rank);u!=null&&(r=r.transpose(u),o=fi(o.length,r.rank));var c=[r],f=W.runKernelFunc(function(p,m){var g=p.max(r,o);return m([a,g]),g},{x:r},function(p,m){return Fk(p,m[1],m[0],i,u)},"Max",{axes:o},c,[!0]);if(t){var h=Ir(f.shape,i);f=f.reshape(h)}return f}}),hH=H({mean_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=M(e,"x","mean"),a=Sn(n,r.shape),i=Ne(jn(r.shape,a)[1]);return jm(function(o){var u=Ee(i);return{value:(u.dtype===o.dtype?o:o.cast(u.dtype)).div(u).sum(n,t),gradFunc:function(c){var f=o.shape.slice();return a.forEach(function(h){f[h]=1}),c.reshape(f).mul(_l(o.shape,"float32")).div(i)}}})(r)}}),pH=H({min_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=M(e,"x","min"),a=r,i=Sn(n,r.shape),o=i,u=ci(o,r.rank);u!=null&&(r=r.transpose(u),o=fi(o.length,r.rank));var c=[r],f=W.runKernelFunc(function(p,m){var g=p.min(r,o);return m([a,g]),g},{x:r},function(p,m){return Fk(p,m[1],m[0],i,u)},"Min",{axes:o},c,[!0]);if(t){var h=Ir(f.shape,i);f=f.reshape(h)}return f}}),mH=H({moments_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=Sn(n,(e=M(e,"x","moments")).shape),a=e.mean(r,t),i=a.shape;t||(i=Ir(a.shape,r));var o=e.toFloat().sub(a.reshape(i)).square();return{mean:a,variance:o.mean(r,t)}}}),Vk=H({sum_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=M(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=Sn(n,r.shape);return jm(function(i){var o=ci(a,i.rank),u=a,c=i;o!=null&&(c=i.transpose(o),u=fi(u.length,i.rank));var f=function(g){var y=i.shape.slice();return a.forEach(function(b){y[b]=1}),g.reshape(y).mul(_l(i.shape,"float32"))},h={axes:u},p=W.runKernelFunc(function(g){return g.sum(c,u)},{x:c},function(g){return{x:function(){return f(g)}}},"Sum",h);if(t){var m=Ir(p.shape,a);p=p.reshape(m)}return{value:p,gradFunc:f}})(r)}}),vH=H({prod_:function(e,n,t){n===void 0&&(n=null),t===void 0&&(t=!1);var r=M(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=Sn(n,r.shape),i=ci(a,r.rank),o=a,u=r;i!=null&&(u=r.transpose(i),o=fi(o.length,r.rank));var c=W.runKernelFunc(function(h){return h.prod(u,o)},{permutedX:u});if(t){var f=Ir(c.shape,a);c=c.reshape(f)}return c}}),Gk=H({elu_:function(e){var n=M(e,"x","elu");return W.runKernelFunc(function(t,r){var a=t.elu(n);return r([a]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){return W.runKernelFunc(function(i){return i.eluDer(t,a)},{dy:t,y:a})}}})}}),gH=H({leakyRelu_:function(e,n){n===void 0&&(n=.2);var t=M(e,"x","leakyRelu");return P2(Ee(n).mul(t),t)}}),Hk=H({prelu_:function(e,n){var t=M(e,"x","prelu"),r=M(n,"alpha","prelu");return W.runKernelFunc(function(a,i){var o=a.prelu(t,r);return i([t,r]),o},{x:t,alpha:r},function(a,i){var o=i[0],u=i[1],c=o.greater(0);return{x:function(){return Fs(c,a,a.mul(u))},alpha:function(){var f=Fs(c,rt(a),a.mul(o)),h=yn(u.shape,a.shape);return h.length>0&&(f=f.sum(h)),f.reshape(u.shape)}}},"Prelu")}}),Ft=H({relu_:function(e){var n=M(e,"x","relu");return n.dtype==="bool"?n.toInt():W.runKernelFunc(function(t,r){var a=t.relu(n);return r([n]),a},{x:n},function(t,r){var a=r[0];return{x:function(){return t.mulStrict(a.step().toFloat())}}},"Relu")}}),zk=H({relu6_:function(e){var n=M(e,"x","relu6");return n.dtype==="bool"?n.toInt():W.runKernelFunc(function(t,r){var a=t.relu6(n);return r([n]),a},{x:n},function(t,r){var a=r[0],i=a.lessEqual(6).mul(a.step());return{x:function(){return t.mulStrict(i.toFloat())}}},"Relu6")}}),yH=H({selu_:function(e){var n=M(e,"x","selu");return W.runKernelFunc(function(t,r){var a=t.selu(n);return r([n]),a},{$x:n},function(t,r){var a=r[0];return{$x:function(){var i=a.greater(Ee(0)),o=Ee(k2),u=Ee(x2),c=t.mul(u),f=t.mul(o).mul(a.toFloat().exp());return Fs(i,c,f)}}})}}),Vo=H({transpose_:function(e,n){var t=M(e,"x","transpose");if(n==null&&(n=t.shape.map(function(a,i){return i}).reverse()),F(t.rank===n.length,function(){return"Error in transpose: rank of input "+t.rank+" must match length of perm "+n+"."}),n.forEach(function(a){F(a>=0&&a<t.rank,function(){return"All entries in 'perm' must be between 0 and "+(t.rank-1)+" but got "+n})}),t.rank<=1)return t.clone();var r={perm:n};return W.runKernelFunc(function(a){return a.transpose(t,n)},{x:t},function(a){var i=E2(n);return{x:function(){return a.transpose(i)}}},"Transpose",r)}}),bH=H({localResponseNormalization_:function(e,n,t,r,a){n===void 0&&(n=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5);var i=M(e,"x","localResponseNormalization");F(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),F(jt(n),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+n+"."});var o=i,u=!1;i.rank===3&&(u=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=W.runKernelFunc(function(f,h){var p=f.localResponseNormalization4D(o,n,t,r,a);return h([o,p]),p},{x4D:o},function(f,h){var p=h[0],m=h[1];return{x4D:function(){return W.runKernelFunc(function(g){return g.LRNGrad(f,p,m,n,t,r,a)},{})}}});return u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),Wk=H({norm_:function(e,n,t,r){n===void 0&&(n="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1);var a=function u(c,f,h){if(h===void 0&&(h=null),c.rank===0)return c.abs();if(c.rank!==1&&h===null)return u(c.reshape([-1]),f,h);if(c.rank===1||typeof h=="number"||Array.isArray(h)&&h.length===1){if(f===1)return c.abs().sum(h);if(f===1/0)return c.abs().max(h);if(f===-1/0)return c.abs().min(h);if(f==="euclidean"||f===2)return c.abs().pow(Ee(2,"int32")).sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}if(Array.isArray(h)&&h.length===2){if(f===1)return c.abs().sum(h[0]).max(h[1]-1);if(f===1/0)return c.abs().sum(h[1]).max(h[0]);if(f===-1/0)return c.abs().sum(h[1]).min(h[0]);if(f==="fro"||f==="euclidean")return c.square().sum(h).sqrt();throw new Error("Error in norm: invalid ord value: "+f)}throw new Error("Error in norm: invalid axis: "+h)}(e=M(e,"x","norm"),n,t),i=a.shape;if(r){var o=Sn(t,e.shape);i=Ir(a.shape,o)}return a.reshape(i)}}),SH=H({basicLSTMCell_:function(e,n,t,r,a,i){var o=M(e,"forgetBias","basicLSTMCell"),u=M(n,"lstmKernel","basicLSTMCell"),c=M(t,"lstmBias","basicLSTMCell"),f=M(r,"data","basicLSTMCell"),h=M(a,"c","basicLSTMCell"),p=M(i,"h","basicLSTMCell"),m=f.concat(p,1).matMul(u).add(c),g=m.shape[0],y=m.shape[1]/4,b=[g,y],E=m.slice([0,0],b),_=m.slice([0,y],b),w=m.slice([0,2*y],b),I=m.slice([0,3*y],b),R=E.sigmoid().mulStrict(_.tanh()).addStrict(h.mulStrict(o.add(w).sigmoid())),C=R.tanh().mulStrict(I.sigmoid());return[R,C]}}),EH=H({multiRNNCell_:function(e,n,t,r){for(var a=M(n,"data","multiRNNCell"),i=am(t,"c","multiRNNCell"),o=am(r,"h","multiRNNCell"),u=a,c=[],f=0;f<e.length;f++){var h=e[f](u,i[f],o[f]);c.push(h[0]),c.push(h[1]),u=h[1]}var p=[],m=[];for(f=0;f<c.length;f+=2)p.push(c[f]),m.push(c[f+1]);return[p,m]}}),_H=H({movingAverage_:function(e,n,t,r,a){a===void 0&&(a=!0);var i=M(e,"v","movingAverage"),o=M(n,"x","movingAverage"),u=M(t,"decay","movingAverage");b5(i,o),F(On(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var c=Ee(1),f=c.sub(u),h=o.sub(i).mul(f);if(a){F(r!=null,function(){return"When using zeroDebias: true, step is required."});var p=M(r,"step","movingAverage");h=h.div(c.sub(pm(u,p)))}return i.add(h)}}),AH=H({stridedSlice_:function(e,n,t,r,a,i,o,u,c){if(a===void 0&&(a=0),i===void 0&&(i=0),o===void 0&&(o=0),u===void 0&&(u=0),c===void 0&&(c=0),r==null&&(r=new Array(n.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var f=M(e,"x","stridedSlice"),h=jw(u),p=f.shape.slice();h.forEach(function(E){n[E]=0,t[E]=1,p.splice(E,0,1)}),f=f.reshape(p);for(var m=0;m<f.rank;m++)n[m]=DV(a,n,r,f.shape,m),t[m]=PV(i,t,r,f.shape,m),r[m]=r[m]||1;var g=jw(c);g.forEach(function(E){t[E]=n[E]+1,r[E]=1});var y=I2(n,t,r),b=y.filter(function(E,_){return g.indexOf(_)===-1});return r.every(function(E){return E===1})?si(f,n,y).reshape(b):W.runKernelFunc(function(E){return E.stridedSlice(f,n,t,r)},{$x:f}).reshape(b)}}),wH=H({topk_:function(e,n,t){n===void 0&&(n=1),t===void 0&&(t=!0);var r=M(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(n>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+n);var i=W.runKernelFunc(function(o){return o.topk(r,n,t)},{$x:r});return{values:i[0],indices:i[1]}}}),IH=H({scatterND_:function(e,n,t){var r=M(e,"indices","scatterND","int32"),a=M(n,"updates","scatterND");return kV(a,r,t),W.runKernelFunc(function(i){return i.scatterND(r,a,t)},{indices:r,updates:a},null,"ScatterNd",{shape:t})}}),U2=H({fft_:function(e){F(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var n=e.shape[e.shape.length-1],t=e.size/n,r=e.as2D(t,n);return W.runKernelFunc(function(a){return a.fft(r)},{input:e}).reshape(e.shape)}}),mm=H({ifft_:function(e){F(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var n=e.shape[e.shape.length-1],t=e.size/n,r=e.as2D(t,n);return W.runKernelFunc(function(a){return a.ifft(r)},{input:e}).reshape(e.shape)}}),F2=H({rfft_:function(e,n){F(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var t,r=e.shape[e.shape.length-1],a=e.size/r;if(n!=null&&n<r){var i=e.shape.map(function(_){return 0}),o=e.shape.map(function(_){return _});o[e.shape.length-1]=n,t=e.slice(i,o),r=n}else if(n!=null&&n>r){var u=e.shape.map(function(_){return _});u[e.shape.length-1]=n-r,t=e.concat(Ot(u),e.shape.length-1),r=n}else t=e;var c=t.zerosLike(),f=Bn(t,c).as2D(a,r),h=U2(f),p=Math.floor(r/2)+1,m=da(h),g=ja(h),y=m.split([p,r-p],m.shape.length-1),b=g.split([p,r-p],g.shape.length-1),E=t.shape.slice();return E[t.shape.length-1]=p,Bn(y[0],b[0]).reshape(E)}}),Kk=H({irfft_:function(e){var n=e.shape[e.shape.length-1],t=e.size/n;if(n<=2){var r=e.as2D(t,n),a=mm(r);return da(a)}var i=[t,2*(n-1)],o=da(e).as2D(t,n),u=ja(e).as2D(t,n),c=o.slice([0,1],[t,n-2]).reverse(1),f=u.slice([0,1],[t,n-2]).reverse(1).mul(Ee(-1)),h=o.concat(c,1),p=u.concat(f,1);return r=Bn(h,p).as2D(i[0],i[1]),a=mm(r),da(a)}}),RH=Object.freeze({fft:U2,ifft:mm,rfft:F2,irfft:Kk}),CH=H({sparseToDense_:function(e,n,t,r){r===void 0&&(r=0);var a=M(e,"sparseIndices","sparseToDense","int32"),i=M(n,"sparseValues","sparseToDense"),o=M(r,"defaultValue","sparseToDense",i.dtype);return function(u,c,f,h){if(u.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+u.dtype+".");if(u.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+u.shape+".");var p=u.rank>0?u.shape[0]:1,m=u.rank>1?u.shape[1]:1;if(f.length!==m)throw new Error("outputShape has incorrect number of elements:, "+f.length+", should be: "+m+".");var g=c.size;if(c.rank!==0&&(c.rank!==1||g!==p))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+p+"]");if(c.dtype!==h.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,t,o),W.runKernelFunc(function(u){return u.sparseToDense(a,i,t,o)},{$sparseIndices:a,$sparseValues:i,$defaultValue:o})}}),NH=H({gatherND_:function(e,n){var t=M(n,"indices","gatherND","int32"),r=M(e,"x","gatherND");return W.runKernelFunc(function(a){return a.gatherND(r,t)},{x:r,indices:t},null,"GatherNd")}}),TH=H({diag_:function(e){var n=M(e,"x","diag").flatten(),t=e.shape.concat(e.shape);return W.runKernelFunc(function(r){return r.diag(n)},{$x:n}).reshape(t)}}),OH=H({dropout_:function(e,n,t,r){var a=M(e,"x","dropout");if(F(a.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."}),F(n>=0&&n<1,function(){return"rate must be a float in the range [0, 1), but got "+n+"."}),n===0)return e instanceof Ut?a.clone():a;var i=function(c,f){if(f==null)return c.shape.slice();if(On(c.shape,f))return f;if(c.shape.length===f.length){for(var h=[],p=0;p<c.shape.length;p++)f[p]==null&&c.shape[p]!=null?h.push(c.shape[p]):h.push(f[p]);return h}return f}(a,t),o=1-n,u=HO(i,0,1,"float32",r).add(o).floor().div(o);return a.mul(u)}});function qk(e,n,t){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=n-t*Math.cos(o)}return un(a,"float32")}var V2=H({hannWindow_:function(e){return qk(e,.5,.5)}}),Yk=H({hammingWindow_:function(e){return qk(e,.54,.46)}}),G2=H({frame_:function(e,n,t,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var i=0,o=[];i+n<=e.size;)o.push(si(e,i,n)),i+=t;if(r)for(;i<e.size;){var u=i+n-e.size,c=mn([si(e,i,n-u),ai([u],a)]);o.push(c),i+=t}return o.length===0?Do([],[0,n]):mn(o).as2D(o.length,n)}}),$k=H({stft_:function(e,n,t,r,a){var i;a===void 0&&(a=V2),r==null&&(i=n,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=G2(e,n,t),u=er(o,a(n)),c=[],f=0;f<o.shape[0];f++)c.push(F2(u.slice([f,0],[1,n]),r));return mn(c)}}),kH=Object.freeze({hannWindow:V2,hammingWindow:Yk,frame:G2,stft:$k}),Qn,xH=function(e,n,t){return t===void 0&&(t=1),Ie(this,void 0,void 0,function(){var r,a,i,o,u,c,f,h,p,m,g,y,b,E;return Re(this,function(_){switch(_.label){case 0:return r=M(e,"predictions","inTopK"),a=M(n,"targets","inTopK"),F(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),F(r.rank-1===a.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank}),vt(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],F(t>0&&t<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+t}),[4,r.data()];case 1:return o=_.sent(),[4,a.data()];case 2:for(u=_.sent(),c=[o.length/i,i],h=c[1],p=ef("bool",f=c[0]),m=0;m<f;m++){for(g=m*h,y=o.subarray(g,g+h),b=[],E=0;E<y.length;E++)b.push({value:y[E],index:E});for(b.sort(function(w,I){return I.value-w.value}),p[m]=0,E=0;E<t;E++)if(b[E].index===u[m]){p[m]=1;break}}return e!==r&&r.dispose(),n!==a&&a.dispose(),[2,Gn(p,a.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Qn||(Qn={}));var DH=H({absoluteDifference_:function(e,n,t,r){r===void 0&&(r=Qn.SUM_BY_NONZERO_WEIGHTS);var a=M(e,"labels","absoluteDifference"),i=M(n,"predictions","absoluteDifference"),o=null;t!=null&&(o=M(t,"weights","absoluteDifference")),vt(a.shape,i.shape,"Error in absoluteDifference: ");var u=a.sub(i).abs();return ji(u,o,r)}}),ji=H({computeWeightedLoss_:function(e,n,t){t===void 0&&(t=Qn.SUM_BY_NONZERO_WEIGHTS);var r=M(e,"losses","computeWeightedLoss"),a=null;n!=null&&(a=M(n,"weights","computeWeightedLoss"));var i=a==null?r:r.mul(a);if(t===Qn.NONE)return i;if(t===Qn.SUM)return i.sum();if(t===Qn.MEAN){if(a==null)return i.mean();var o=r.size/a.size,u=i.sum().div(a.sum());return o>1?u.div(Ee(o)):u}if(t===Qn.SUM_BY_NONZERO_WEIGHTS){if(a==null)return i.sum().div(Ee(r.size));var c=a.mul(_l(r.shape)).notEqual(Ee(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+t)}}),PH=H({cosineDistance_:function(e,n,t,r,a){a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=M(e,"labels","cosineDistance"),o=M(n,"predictions","cosineDistance"),u=null;r!=null&&(u=M(r,"weights","cosineDistance")),vt(i.shape,o.shape,"Error in cosineDistance: ");var c=Ee(1).sub(i.mul(o).sum(t,!0));return ji(c,u,a)}}),MH=H({hingeLoss_:function(e,n,t,r){r===void 0&&(r=Qn.SUM_BY_NONZERO_WEIGHTS);var a=M(e,"labels","hingeLoss"),i=M(n,"predictions","hingeLoss"),o=null;t!=null&&(o=M(t,"weights","hingeLoss")),vt(a.shape,i.shape,"Error in hingeLoss: ");var u=Ee(1);a=Ee(2).mul(a).sub(u);var c=u.sub(a.mul(i)).relu();return ji(c,o,r)}}),LH=H({huberLoss_:function(e,n,t,r,a){r===void 0&&(r=1),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=M(e,"labels","huberLoss"),o=M(n,"predictions","huberLoss"),u=null;t!=null&&(u=M(t,"weights","huberLoss")),vt(i.shape,o.shape,"Error in huberLoss: ");var c=Ee(r),f=o.sub(i).abs(),h=Ck(f,c),p=f.sub(h),m=Ee(.5).mul(h.square()).add(c.mul(p));return ji(m,u,a)}}),BH=H({logLoss_:function(e,n,t,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=M(e,"labels","logLoss"),o=M(n,"predictions","logLoss"),u=null;t!=null&&(u=M(t,"weights","logLoss")),vt(i.shape,o.shape,"Error in logLoss: ");var c=Ee(1),f=Ee(r),h=i.mul(o.add(f).log()).neg().sub(c.sub(i).mul(c.sub(o).add(f).log()));return ji(h,u,a)}}),UH=H({meanSquaredError_:function(e,n,t,r){r===void 0&&(r=Qn.SUM_BY_NONZERO_WEIGHTS);var a=M(e,"labels","meanSquaredError"),i=M(n,"predictions","meanSquaredError"),o=null;t!=null&&(o=M(t,"weights","meanSquaredError")),vt(a.shape,i.shape,"Error in meanSquaredError: ");var u=a.squaredDifference(i);return ji(u,o,r)}}),FH=H({sigmoidCrossEntropy_:function(e,n,t,r,a){r===void 0&&(r=0),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=M(e,"multiClassLabels","sigmoidCrossEntropy"),o=M(n,"logits","sigmoidCrossEntropy"),u=null;if(t!=null&&(u=M(t,"weights","sigmoidCrossEntropy")),vt(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=Ee(r),f=Ee(1),h=Ee(.5);i=i.mul(f.sub(c)).add(h.mul(c))}var p=function(m,g){var y=M(m,"labels","sigmoidCrossEntropyWithLogits"),b=M(g,"logits","sigmoidCrossEntropyWithLogits");vt(y.shape,b.shape,"Error in sigmoidCrossEntropyWithLogits: ");var E=b.relu(),_=b.mul(y),w=b.abs().neg().exp().log1p();return E.sub(_).add(w)}(i,o);return ji(p,u,a)}}),VH=H({softmaxCrossEntropy_:function(e,n,t,r,a){r===void 0&&(r=0),a===void 0&&(a=Qn.SUM_BY_NONZERO_WEIGHTS);var i=M(e,"onehotLabels","softmaxCrossEntropy"),o=M(n,"logits","softmaxCrossEntropy"),u=null;if(t!=null&&(u=M(t,"weights","softmaxCrossEntropy")),vt(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var c=Ee(r),f=Ee(1),h=Ee(i.shape[1]);i=i.mul(f.sub(c)).add(c.div(h))}var p=function(m,g,y){if(y===void 0&&(y=-1),y===-1&&(y=g.rank-1),y!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+y);return jm(function(b,E,_){var w=E.logSumExp([y],!0),I=E.toFloat().sub(w);return _([b,I]),{value:I.mul(b).neg().sum([y]),gradFunc:function(R,C){var O=C[0],D=C[1],P=Ir(R.shape,[y]);return[R.reshape(P).mul(O.toFloat().sub(D.exp())),R.reshape(P).mul(D.exp().sub(O.toFloat()))]}}})(m,g)}(i,o);return ji(p,u,a)}}),GH=Object.freeze({get Reduction(){return Qn},absoluteDifference:DH,computeWeightedLoss:ji,cosineDistance:PH,hingeLoss:MH,huberLoss:LH,logLoss:BH,meanSquaredError:UH,sigmoidCrossEntropy:FH,softmaxCrossEntropy:VH});function gI(e,n){return n===void 0&&(n=!1),W.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var t=e.shape[0],r=e.shape[1],a=GO(t),i=e.clone(),o=Do([[1]],[1,1]),u=o.clone(),c=t>=r?r:t,f=function(p){var m,g=i,y=u,b=a;m=W.tidy(function(){var E=i.slice([p,p],[t-p,1]),_=E.norm(),w=i.slice([p,p],[1,1]),I=Do([[-1]]).where(w.greater(0),Do([[1]])),R=w.sub(I.mul(_)),C=E.div(R);u=C.shape[0]===1?o.clone():o.concat(C.slice([1,0],[C.shape[0]-1,C.shape[1]]),0);var O=I.matMul(R).div(_).neg(),D=i.slice([p,0],[t-p,r]),P=O.mul(u);if(p===0)i=D.sub(P.matMul(u.transpose().matMul(D)));else{var k=D.sub(P.matMul(u.transpose().matMul(D)));i=i.slice([0,0],[p,r]).concat(k,0)}var N=a.slice([0,p],[t,a.shape[1]-p]);if(p===0)a=N.sub(N.matMul(u).matMul(P.transpose()));else{var U=N.sub(N.matMul(u).matMul(P.transpose()));a=a.slice([0,0],[t,p]).concat(U,1)}return[u,i,a]}),u=m[0],i=m[1],a=m[2],_r([g,y,b])},h=0;h<c;++h)f(h);return!n&&t>r&&(a=a.slice([0,0],[t,r]),i=i.slice([0,0],[r,r])),[a,i]})}var HH=H({bandPart_:function(e,n,t){if(n%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+n+".");if(t%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+t+".");var r=M(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,i=r.shape.slice(-2),o=i[0],u=i[1];if(!(n<=o))throw new Error("bandPart(): numLower ("+n+") must not be greater than the number of rows ("+o+").");if(!(t<=u))throw new Error("bandPart(): numUpper ("+t+") must not be greater than the number of columns ("+u+").");n<0&&(n=o),t<0&&(t=u);var c=im(0,o,1,"int32").reshape([-1,1]),f=im(0,u,1,"int32"),h=bn(c,f),p=Zm(h.lessEqual(Ee(+n,"int32")),h.greaterEqual(Ee(-t,"int32"))),m=Ot([o,u],r.dtype);return qr(vn(r.reshape([-1,o,u])).map(function(g){return Fs(p,g,m)})).reshape(a)}}),zH=H({gramSchmidt_:function(e){var n;if(Array.isArray(e)){n=!1,F(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var t=e[0].shape[0],r=function(c){F(e[c].shape[0]===t,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[c].shape[0]+" vs. "+t+")"})},a=1;a<e.length;++a)r(a)}else n=!0,e=A2(e,e.shape[0],0).map(function(c){return WO(c,[0])});F(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],o=e,u=function(c){i.push(W.tidy(function(){var f=o[c];if(c>0)for(var h=0;h<c;++h){var p=Vk(i[h].mulStrict(f)).mul(i[h]);f=f.sub(p)}return f.div(Wk(f,"euclidean"))}))};for(a=0;a<e.length;++a)u(a);return n?qr(i,0):i}}),WH=H({qr_:function(e,n){if(n===void 0&&(n=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return gI(e,n);var t=e.shape.slice(0,e.shape.length-2).reduce(function(o,u){return o*u}),r=vn(e.reshape([t,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach(function(o){var u=gI(o,n),c=u[0],f=u[1];a.push(c),i.push(f)}),[qr(a,0).reshape(e.shape),qr(i,0).reshape(e.shape)]}}),KH=Object.freeze({bandPart:HH,gramSchmidt:zH,qr:WH});function tv(e,n,t,r,a,i){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=e.shape[0];return t=Math.min(t,o),F(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),F(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),F(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),F(n.rank===1,function(){return"scores must be a 1D tensor"}),F(n.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+n.shape[0]}),F(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:t,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var qH=H({resizeBilinear_:function(e,n,t){t===void 0&&(t=!1);var r=M(e,"images","resizeBilinear");F(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),F(n.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+n+"."});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=n[0],u=n[1],c=W.runKernelFunc(function(f,h){return h([a]),f.resizeBilinear(a,o,u,t)},{x:a},function(f,h){return{x:function(){return W.runKernelFunc(function(p){return p.resizeBilinearBackprop(f,h[0],t)},{})}}},"ResizeBilinear",{alignCorners:t,newHeight:o,newWidth:u});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),YH=H({resizeNearestNeighbor_:function(e,n,t){t===void 0&&(t=!1);var r=M(e,"images","resizeNearestNeighbor");F(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),F(n.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+n+"."}),F(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var a=r,i=!1;r.rank===3&&(i=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=n[0],u=n[1],c=W.runKernelFunc(function(f,h){return h([a]),f.resizeNearestNeighbor(a,o,u,t)},{batchImages:a},function(f,h){return{batchImages:function(){return W.runKernelFunc(function(p){return p.resizeNearestNeighborBackprop(f,h[0],t)},{})}}});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),$H=H({nonMaxSuppression_:function(e,n,t,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var i=M(e,"boxes","nonMaxSuppression"),o=M(n,"scores","nonMaxSuppression"),u=tv(i,o,t,r,a);t=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold;var c={maxOutputSize:t,iouThreshold:r,scoreThreshold:a};return W.runKernelFunc(function(f){return f.nonMaxSuppression(i,o,t,r,a)},{boxes:i,scores:o},null,"NonMaxSuppressionV3",c)}}),jH=function(e,n,t,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),Ie(this,void 0,void 0,function(){var i,o,u,c,f,h,p;return Re(this,function(m){switch(m.label){case 0:return i=M(e,"boxes","nonMaxSuppressionAsync"),o=M(n,"scores","nonMaxSuppressionAsync"),u=tv(i,o,t,r,a),t=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return c=m.sent(),f=c[0],h=c[1],p=C2(f,h,t,r,a),i!==e&&i.dispose(),o!==n&&o.dispose(),[2,p]}})})},XH=H({nonMaxSuppressionWithScore_:function(e,n,t,r,a,i){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=M(e,"boxes","nonMaxSuppression"),u=M(n,"scores","nonMaxSuppression"),c=tv(o,u,t,r,a,i),f={maxOutputSize:t=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},h=W.runKernel("NonMaxSuppressionV5",{boxes:o,scores:u},f);return{selectedIndices:h[0],selectedScores:h[1]}}}),ZH=function(e,n,t,r,a,i){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),Ie(this,void 0,void 0,function(){var o,u,c,f,h,p,m;return Re(this,function(g){switch(g.label){case 0:return o=M(e,"boxes","nonMaxSuppressionAsync"),u=M(n,"scores","nonMaxSuppressionAsync"),c=tv(o,u,t,r,a,i),t=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([o.data(),u.data()])];case 1:return f=g.sent(),h=f[0],p=f[1],m=N2(h,p,t,r,a,i),o!==e&&o.dispose(),u!==n&&u.dispose(),[2,m]}})})},QH=H({cropAndResize_:function(e,n,t,r,a,i){var o=M(e,"image","cropAndResize"),u=M(n,"boxes","cropAndResize","float32"),c=M(t,"boxInd","cropAndResize","int32");a=a||"bilinear",i=i||0;var f=u.shape[0];return F(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),F(u.rank===2&&u.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+f+",4] but had shape "+u.shape+"."}),F(c.rank===1&&c.shape[0]===f,function(){return"Error in cropAndResize: boxInd must be have size ["+f+"] but had shape "+u.shape+"."}),F(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),F(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),F(a==="bilinear"||a==="nearest",function(){return"method must be bilinear or nearest, but was "+a}),W.runKernelFunc(function(h,p){return h.cropAndResize(o,u,c,r,a,i)},{images:o,boxes:u,boxInd:c},null,"CropAndResize",{method:a,extrapolationValue:i,cropSize:r})}}),H2=Object.freeze({resizeBilinear:qH,resizeNearestNeighbor:YH,nonMaxSuppression:$H,nonMaxSuppressionAsync:jH,nonMaxSuppressionWithScore:XH,nonMaxSuppressionWithScoreAsync:ZH,cropAndResize:QH}),z2=function(e,n){return!(e>0)||n==="linear"},W2=function(e,n,t){if(t==null||t==="linear")return e;if(t==="relu")return e.mul(n.step());throw new Error("Gradient for activation "+t+" has not been implemented yet.")},K2=function(e,n){var t=n,r=yn(e.shape,n.shape);return r.length>0&&(t=t.sum(r)),t.reshape(e.shape)},q2=function(e,n,t){if(n==="linear")return e;if(n==="relu")return Ft(e);if(n==="elu")return Gk(e);if(n==="relu6")return zk(e);if(n==="prelu")return Hk(e,t);throw new Error("Unknown fused activation "+n+".")},JH=H({fusedMatMul_:function(e){var n,t=e.a,r=e.b,a=e.transposeA,i=a!==void 0&&a,o=e.transposeB,u=o!==void 0&&o,c=e.bias,f=e.activation,h=f===void 0?"linear":f,p=e.preluActivationWeights;if(z2(W.state.gradientDepth,h)===!1){var m=Jm(t,r,i,u);return c!=null&&(m=Ze(m,c)),q2(m,h,p)}var g=M(t,"a","fused matMul"),y=M(r,"b","fused matMul");n=Gt(g,y),g=n[0],y=n[1];var b=i?g.shape[g.rank-2]:g.shape[g.rank-1],E=u?y.shape[y.rank-1]:y.shape[y.rank-2],_=i?g.shape[g.rank-1]:g.shape[g.rank-2],w=u?y.shape[y.rank-2]:y.shape[y.rank-1],I=g.shape.slice(0,-2),R=y.shape.slice(0,-2),C=Ne(I),O=Ne(R);F(g.rank>=2&&y.rank>=2&&g.rank===y.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+y.rank+"."}),F(On(I,R),function(){return"Error in fused matMul: outer dimensions ("+I+") and ("+R+") of Tensors with shapes "+g.shape+" and "+y.shape+" must match."}),F(b===E,function(){return"Error in fused matMul: inner shapes ("+b+") and ("+E+") of Tensors with shapes "+g.shape+" and "+y.shape+" and transposeA="+i+" and transposeB="+u+" must match."});var D,P,k=g.shape.slice(0,-2).concat([_,w]),N=i?g.as3D(C,b,_):g.as3D(C,_,b),U=u?y.as3D(O,w,E):y.as3D(O,E,w);c!=null&&Je(k,(D=Gt(D=M(c,"bias","fused matMul"),g)[0]).shape),p!=null&&(P=M(p,"prelu weights","fused matMul"));var V={a:N,b:U};c!=null&&(V.bias=D),p!=null&&(V.preluActivationWeights=P);var ee=[N,U];return W.runKernelFunc(function(re,ne){var z=re.fusedBatchMatMul({a:N,b:U,transposeA:i,transposeB:u,bias:D,activation:h,preluActivationWeights:P});return ne([N,U,z]),z},V,function(re,ne){var z=ne[0],Z=ne[1],$=ne[2],oe=W2(re,$,h),L={};return c!=null&&(L={bias:function(){return K2(D,oe)}}),Object.assign(i||u?!i&&u?{a:function(){return oe.matMul(Z,!1,!1)},b:function(){return oe.matMul(z,!0,!1)}}:i&&!u?{a:function(){return Z.matMul(oe,!1,!0)},b:function(){return z.matMul(oe,!1,!1)}}:{a:function(){return Z.matMul(oe,!0,!0)},b:function(){return oe.matMul(z,!0,!0)}}:{a:function(){return oe.matMul(Z,!1,!0)},b:function(){return z.matMul(oe,!0,!1)}},L)},"_FusedMatMul",{transposeA:i,transposeB:u,activation:h},ee,[!0]).reshape(k)}}),ez=H({fusedConv2d_:function(e){var n=e.x,t=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,u=e.dilations,c=u===void 0?[1,1]:u,f=e.dimRoundingMode,h=e.bias,p=e.activation,m=p===void 0?"linear":p,g=e.preluActivationWeights;if(m=m||"linear",z2(W.state.gradientDepth,m)===!1){var y=Sa(n,t,r,a,o,c,f);return h!=null&&(y=Ze(y,h)),q2(y,m,g)}var b=M(n,"x","conv2d"),E=M(t,"filter","conv2d"),_=b,w=!1;b.rank===3&&(w=!0,_=b.as4D(1,b.shape[0],b.shape[1],b.shape[2])),F(_.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+_.rank+"."}),F(E.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+E.rank+"."}),f!=null&&F(jt(a),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+f+" but got pad "+a+"."}),F(_.shape[3]===E.shape[2],function(){return"Error in conv2d: depth of input ("+_.shape[3]+") must match input depth for filter "+E.shape[2]+"."}),F(Rr(r,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),F(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var I,R,C=$s(_.shape,E.shape,r,c,a,f);h!=null&&(I=Gt(I=M(h,"bias","fused conv2d"),b)[0],Je(C.outShape,I.shape)),g!=null&&(R=M(g,"prelu weights","fused conv2d"));var O={x:_,filter:E};h!=null&&(O.bias=I),g!=null&&(O.preluActivationWeights=R);var D=[E,_],P=W.runKernelFunc(function(k,N){var U=k.fusedConv2d({input:_,filter:E,convInfo:C,bias:I,activation:m,preluActivationWeights:R});return N([E,_,U]),U},O,function(k,N){var U=N,V=U[0],ee=U[1],re=U[2],ne=W2(k,re,m);F(fl(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var z={};return h!=null&&(z={bias:function(){return K2(I,ne)}}),Object.assign({x:function(){return Dk(ee.shape,ne,V,r,a)},filter:function(){return L2(ee,ne,V.shape,r,a)}},z)},"FusedConv2D",{convInfo:C,activation:m},D,[!0]);return w?P.as3D(P.shape[1],P.shape[2],P.shape[3]):P}}),tz=H({fusedDepthwiseConv2d_:function(e){var n=e.x,t=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,u=e.dilations,c=u===void 0?[1,1]:u,f=e.dimRoundingMode,h=e.bias,p=e.activation,m=p===void 0?"linear":p,g=e.preluActivationWeights;if(z2(W.state.gradientDepth,m)===!1){var y=Qm(n,t,r,a,o,c,f);return h!=null&&(y=Ze(y,h)),q2(y,m,g)}var b=M(n,"x","depthwiseConv2d"),E=M(t,"filter","depthwiseConv2d"),_=b,w=!1;b.rank===3&&(w=!0,_=b.as4D(1,b.shape[0],b.shape[1],b.shape[2])),F(_.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+_.rank+"."}),F(E.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+E.rank+"."}),F(_.shape[3]===E.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+_.shape[3]+") must match the inChannels dimension in filter "+E.shape[2]+"."}),c==null&&(c=[1,1]),F(Rr(r,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"}),f!=null&&F(jt(a),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+f+" but got pad "+a+"."});var I,R,C=$s(_.shape,E.shape,r,c,a,f,!0);h!=null&&(I=Gt(I=M(h,"bias","fused conv2d"),b)[0],Je(C.outShape,I.shape)),g!=null&&(R=M(g,"prelu weights","fused depthwiseConv2d"));var O={x:_,filter:E};h!=null&&(O.bias=I),g!=null&&(O.preluActivationWeights=R);var D=[E,_],P=W.runKernelFunc(function(k,N){var U=k.fusedDepthwiseConv2D({input:_,filter:E,convInfo:C,bias:I,activation:m,preluActivationWeights:R});return N([E,_,U]),U},O,function(k,N){F(fl(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var U=N[0],V=N[1],ee=N[2],re=W2(k,ee,m),ne={};return h!=null&&(ne={bias:function(){return K2(I,re)}}),Object.assign({x:function(){return Pk(V.shape,re,U,C)},filter:function(){return Mk(V,re,U.shape,C)}},ne)},"FusedDepthwiseConv2D",{convInfo:C,activation:m},D,[!0]);return w?P.as3D(P.shape[1],P.shape[2],P.shape[3]):P}}),nz=Object.freeze({matMul:JH,conv2d:ez,depthwiseConv2d:tz}),rz=Object.freeze({image:H2,linalg:KH,losses:GH,spectral:RH,fused:nz,signal:kH,square:B8,squaredDifference:gk,conv1d:q7,conv2d:Sa,conv3d:Y7,depthwiseConv2d:Qm,separableConv2d:B2,conv2dTranspose:$7,conv3dTranspose:j7,op:H,batchNormalization2d:h7,batchNormalization3d:p7,batchNormalization4d:m7,batchNormalization:v7,batchNorm:Ak,batchNorm2d:g7,batchNorm3d:y7,batchNorm4d:b7,booleanMaskAsync:K7,complex:Bn,real:da,imag:ja,concat:mn,concat1d:nV,concat2d:rV,concat3d:aV,concat4d:iV,split:A2,matMul:Jm,dot:X7,outerProduct:Z7,reverse:If,reverse1d:Q7,reverse2d:J7,reverse3d:eH,reverse4d:tH,maxPool:Nn,avgPool:Rf,pool:nH,maxPool3d:rH,avgPool3d:aH,slice:si,slice1d:iH,slice2d:oH,slice3d:Uk,slice4d:sH,abs:U8,acos:F8,acosh:V8,asin:G8,asinh:H8,atan:z8,atanh:W8,ceil:K8,clipByValue:D2,cos:q8,cosh:Y8,erf:$8,exp:oy,expm1:j8,floor:X8,log:Z8,log1p:Q8,logSigmoid:J8,neg:hm,reciprocal:e7,round:t7,rsqrt:yk,sigmoid:bk,sign:n7,isNaN:r7,isInf:a7,isFinite:i7,sin:o7,sinh:s7,softplus:u7,sqrt:l7,step:c7,tan:f7,tanh:d7,all:uH,any:lH,argMax:cH,argMin:fH,logSumExp:dH,max:ev,mean:hH,min:pH,moments:mH,sum:Vk,prod:vH,equal:Nk,equalStrict:M7,greater:L7,greaterEqual:Tk,greaterEqualStrict:B7,greaterStrict:U7,less:F7,lessEqual:V7,lessEqualStrict:G7,lessStrict:H7,notEqual:z7,notEqualStrict:W7,add:Ze,addN:_7,addStrict:A7,atan2:w7,div:Ca,divNoNan:I7,divStrict:R7,floorDiv:Rk,maximum:P2,maximumStrict:C7,minimum:Ck,minimumStrict:N7,mod:T7,modStrict:O7,mul:er,mulStrict:k7,pow:pm,powStrict:x7,squaredDifferenceStrict:D7,sub:bn,subStrict:P7,elu:Gk,leakyRelu:gH,prelu:Hk,relu:Ft,relu6:zk,selu:yH,logicalAnd:Zm,logicalNot:S7,logicalOr:wk,logicalXor:E7,where:Fs,whereAsync:Ik,buffer:We,print:pV,batchToSpaceND:VO,broadcastTo:mV,cast:vV,clone:gV,cumsum:yV,depthToSpace:bV,expandDims:fa,eye:GO,multinomial:SV,oneHot:ny,pad:Ys,pad1d:EV,pad2d:_V,pad3d:AV,pad4d:wV,rand:IV,randomNormal:RV,randomGamma:CV,randomUniform:HO,reshape:Na,spaceToBatchND:zO,squeeze:WO,stack:qr,tile:Xu,truncatedNormal:NV,unstack:vn,setdiff1dAsync:TV,fill:ai,linspace:tV,ones:_l,range:im,scalar:Ee,tensor:Gn,tensor1d:un,tensor2d:Do,tensor3d:_2,tensor4d:br,tensor5d:Q5,tensor6d:J5,variable:eV,zeros:Ot,onesLike:FO,zerosLike:rt,transpose:Vo,softmax:$i,logSoftmax:LV,localResponseNormalization:bH,norm:Wk,gather:M2,unsortedSegmentSum:Ok,basicLSTMCell:SH,multiRNNCell:EH,movingAverage:_H,stridedSlice:AH,topk:wH,scatterND:IH,fft:U2,ifft:mm,rfft:F2,irfft:Kk,sparseToDense:CH,gatherND:NH,diag:TH,dropout:OH,hannWindow:V2,hammingWindow:Yk,frame:G2,stft:$k,inTopKAsync:xH});function me(e,n){Array.isArray(e)||(e=[e]),e.forEach(function(t){t!=null&&F(t.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})}function o1(e,n,t,r){if(t==="linear")return e.linear(n);if(t==="relu")return e.relu(n);if(t==="elu")return e.elu(n);if(t==="relu6")return e.relu6(n);if(t==="prelu")return e.prelu(n,r);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}var az=function(e){function n(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new ZO(t,W),t}return Da(n,e),n.prototype.write=function(t,r,a){this.firstUse&&(this.firstUse=!1,le().get("IS_NODE")&&rm(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:t,dtype:a}),i},n.prototype.move=function(t,r,a,i){this.data.set(t,{values:r,dtype:i})},n.prototype.numDataIds=function(){return this.data.numDataIds()},n.prototype.read=function(t){return Ie(this,void 0,void 0,function(){return Re(this,function(r){return[2,this.readSync(t)]})})},n.prototype.readSync=function(t){var r=this.data.get(t),a=r.dtype,i=r.complexTensors;return a==="complex64"?iy(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(t).values},n.prototype.bufferSync=function(t){var r=this.readSync(t.dataId),a=r;if(t.dtype==="string")try{a=r.map(function(i){return em(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return We(t.shape,t.dtype,a)},n.prototype.makeOutput=function(t,r,a){var i=this.write(t,r,a);return W.makeTensorFromDataId(i,r,a,this)},n.prototype.disposeData=function(t){if(this.data.has(t)){var r=this.data.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(t)}},n.prototype.time=function(t){return Ie(this,void 0,void 0,function(){var r;return Re(this,function(a){return r=Ya(),t(),[2,{kernelMs:Ya()-r}]})})},n.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.prototype.complex=function(t,r){var a=this.makeOutput(null,t.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:W.keep(t.clone()),imag:W.keep(r.clone())},a},n.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},n.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},n.prototype.slice=function(t,r,a){if(me(t,"slice"),jO(t.shape,r,a)){var i=XO(r,t.strides),o=Ne(a);return Gn(this.readSync(t.dataId).subarray(i,i+o),a,t.dtype)}for(var u=We(a,t.dtype),c=this.bufferSync(t),f=0;f<u.size;++f){var h=u.indexToLoc(f).map(function(p,m){return p+r[m]});u.values[f]=c.get.apply(c,h)}return u.toTensor()},n.prototype.stridedSlice=function(t,r,a,i){me(t,"stridedSlice");var o=I2(r,a,i);if(o.some(function(g){return g===0}))return Gn([],o);for(var u=We(o,t.dtype),c=this.bufferSync(t),f=0;f<u.size;f++){for(var h=u.indexToLoc(f),p=new Array(h.length),m=0;m<p.length;m++)p[m]=h[m]*i[m]+r[m];u.set.apply(u,[c.get.apply(c,p)].concat(h))}return u.toTensor()},n.prototype.diag=function(t){for(var r=this.readSync(t.dataId),a=We([t.size,t.size],t.dtype),i=a.values,o=0;o<r.length;o++)i[o*t.size+o]=r[o];return a.toTensor()},n.prototype.unstack=function(t,r){for(var a=t.shape[r],i=new Array(t.rank-1),o=0,u=0;u<t.rank;u++)u!==r&&(i[o++]=t.shape[u]);var c=new Array(t.rank).fill(0),f=t.shape.slice();f[r]=1;var h=new Array(a);for(u=0;u<h.length;u++)c[r]=u,h[u]=this.slice(t,c,f).reshape(i);return h},n.prototype.reverse=function(t,r){me(t,"reverse");for(var a=We(t.shape,t.dtype),i=this.bufferSync(t),o=function(c){var f=a.indexToLoc(c),h=f.slice();r.forEach(function(p){return h[p]=t.shape[p]-1-h[p]}),a.set.apply(a,[i.get.apply(i,h)].concat(f))},u=0;u<a.size;u++)o(u);return a.toTensor()},n.prototype.concat=function(t,r){var a=this;if(t[0].dtype==="complex64"){var i=t.map(function(g){return da(g)}),o=t.map(function(g){return ja(g)});return Bn(this.concat(i,r),this.concat(o,r))}var u=t.map(function(g){var y=Ne(g.shape.slice(r));return g.as2D(-1,y)}),c=cl(u.map(function(g){return g.shape}),1),f=We(c,t[0].dtype).values;if(u[0].shape[0]===1){var h=0;u.forEach(function(g){f.set(a.readSync(g.dataId),h),h+=g.size})}else{var p=0;u.forEach(function(g){for(var y=a.readSync(g.dataId),b=0,E=0;E<g.shape[0];++E)for(var _=E*c[1]+p,w=0;w<g.shape[1];++w)f[_+w]=y[b++];p+=g.shape[1]})}var m=cl(t.map(function(g){return g.shape}),r);return Gn(f,m,t[0].dtype)},n.prototype.neg=function(t){return me(t,"neg"),this.multiply(Ee(-1),t)},n.prototype.add=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a+o,imag:i+u}}):this.broadcastedBinaryOp(t,r,Fn(t.dtype,r.dtype),function(a,i){return a+i})},n.prototype.addN=function(t){var r=this;me(t,"addN");for(var a=t.map(function(h){return r.readSync(h.dataId)}),i=We(t[0].shape,t[0].dtype),o=i.values,u=0;u<t.length;u++)for(var c=a[u],f=0;f<o.length;f++)o[f]+=c[f];return i.toTensor()},n.prototype.softmax=function(t,r){var a=Sn([r],t.shape),i=this.max(t,a),o=Ir(i.shape,a),u=this.subtract(t,i.reshape(o)),c=this.exp(u),f=this.sum(c,a).reshape(o);return this.realDivide(c,f)},n.prototype.subtract=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a-o,imag:i-u}}):this.broadcastedBinaryOp(t,r,Fn(t.dtype,r.dtype),function(a,i){return a-i})},n.prototype.pow=function(t,r){return me([t,r],"pow"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.pow(a,i)})},n.prototype.batchMatMul=function(t,r,a,i){me([t,r],"matMul");for(var o=a?t.shape[1]:t.shape[2],u=a?t.shape[2]:t.shape[1],c=i?r.shape[1]:r.shape[2],f=t.shape[0],h=this.readSync(t.dataId),p=this.readSync(r.dataId),m=a?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],g=m[0],y=m[1],b=m[2],E=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],_=E[0],w=E[1],I=E[2],R=u*c,C=We([f,u,c],t.dtype),O=C.values,D=this.blockSize,P=0;P<f;P++)for(var k=0;k<u;k+=D)for(var N=0;N<c;N+=D)for(var U=0;U<o;U+=D)for(var V=Math.min(k+D,u),ee=Math.min(N+D,c),re=Math.min(U+D,o),ne=k;ne<V;ne++)for(var z=N;z<ee;z++){for(var Z=0,$=U;$<re;$++)Z+=h[P*g+ne*y+$*b]*p[$*_+z*w+P*I];O[P*R+(ne*c+z)]+=Z}return C.toTensor()},n.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,i=t.transposeA,o=t.transposeB,u=t.bias,c=t.activation,f=t.preluActivationWeights,h=this.batchMatMul(r,a,i,o);return u&&(h=this.add(h,u)),c&&(h=o1(this,h,c,f)),h},n.prototype.multiply=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),function(a,i,o,u){return{real:a*o-i*u,imag:a*u+i*o}}):this.broadcastedBinaryOp(t,r,Fn(t.dtype,r.dtype),function(a,i){return a*i})},n.prototype.realDivide=function(t,r){return me([t,r],"realDivide"),this.broadcastedBinaryOp(t,r,"float32",function(a,i){return a/i})},n.prototype.floorDiv=function(t,r){return me([t,r],"floorDiv"),this.broadcastedBinaryOp(t,r,"int32",function(a,i){return Math.floor(a/i)})},n.prototype.sum=function(t,r){me(t,"sum"),Lr("sum",r,t.rank);for(var a=jn(t.shape,r),i=a[0],o=a[1],u=Ot(i,Fn(t.dtype,"int32")),c=Ne(o),f=this.readSync(u.dataId),h=this.readSync(t.dataId),p=0;p<f.length;++p){for(var m=p*c,g=0,y=0;y<c;++y)g+=h[m+y];f[p]=g}return u},n.prototype.prod=function(t,r){me(t,"sum");for(var a=jn(t.shape,r),i=a[0],o=a[1],u=Ot(i,Fn(t.dtype,"int32")),c=Ne(o),f=this.readSync(u.dataId),h=this.readSync(t.dataId),p=0;p<f.length;++p){for(var m=p*c,g=1,y=0;y<c;++y)g*=h[m+y];f[p]=g}return u},n.prototype.unsortedSegmentSum=function(t,r,a){me(t,"unsortedSegmentSum");for(var i=[],o=t.rank-r.rank,u=0;u<o;++u)r=r.expandDims(u+1);for(u=0;u<a;++u){var c=Ee(u,"int32"),f=Nk(c,r).asType("float32").mul(t).sum(0);i.push(f)}return qr(i)},n.prototype.argMin=function(t,r){me(t,"argMin");var a=[r];Lr("argMin",a,t.rank);for(var i=jn(t.shape,a),o=i[0],u=i[1],c=Ot(o,"int32"),f=Ne(u),h=this.readSync(c.dataId),p=this.readSync(t.dataId),m=0;m<h.length;++m){for(var g=m*f,y=p[g],b=0,E=0;E<f;++E){var _=p[g+E];_<y&&(y=_,b=E)}h[m]=b}return c},n.prototype.argMax=function(t,r){me(t,"argMax");var a=[r];Lr("argMax",a,t.rank);for(var i=jn(t.shape,a),o=i[0],u=i[1],c=Ot(o,"int32"),f=Ne(u),h=this.readSync(c.dataId),p=this.readSync(t.dataId),m=0;m<h.length;++m){for(var g=m*f,y=p[g],b=0,E=0;E<f;++E){var _=p[g+E];_>y&&(y=_,b=E)}h[m]=b}return c},n.prototype.cumsum=function(t,r,a,i){if(me(t,"cumsum"),r!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+r);for(var o=Fn(t.dtype,"int32"),u=Ot(t.shape,o),c=this.readSync(u.dataId),f=this.readSync(t.dataId),h=t.shape[t.rank-1],p=i?function(E,_){return E+h-_-1}:function(E,_){return E+_},m=0;m<f.length;m+=h)for(var g=0;g<h;g++){var y=p(m,g);if(g===0)c[y]=a?0:f[y];else{var b=p(m,g-1);c[y]=a?f[b]+c[b]:f[y]+c[b]}}return u},n.prototype.equal=function(t,r){return me([t,r],"equal"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a===i?1:0})},n.prototype.notEqual=function(t,r){return me([t,r],"notEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a!==i?1:0})},n.prototype.less=function(t,r){return me([t,r],"less"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a<i?1:0})},n.prototype.lessEqual=function(t,r){return me([t,r],"lessEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a<=i?1:0})},n.prototype.greater=function(t,r){return me([t,r],"greater"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a>i?1:0})},n.prototype.greaterEqual=function(t,r){return me([t,r],"greaterEqual"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a>=i?1:0})},n.prototype.logicalNot=function(t){me(t,"logicalNot");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)a[i]=r[i]?0:1;return this.makeOutput(a,t.shape,"bool")},n.prototype.logicalAnd=function(t,r){return me([t,r],"logicalAnd"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a&&i})},n.prototype.logicalOr=function(t,r){return me([t,r],"logicalOr"),this.broadcastedBinaryOp(t,r,"bool",function(a,i){return a||i})},n.prototype.select=function(t,r,a){me([t,r,a],"select");for(var i=this.readSync(t.dataId),o=this.readSync(r.dataId),u=this.readSync(a.dataId),c=Ot(r.shape,Fn(r.dtype,a.dtype)),f=this.readSync(c.dataId),h=0,p=t.rank===0||t.rank>1||r.rank===1?1:Ne(r.shape.slice(1)),m=0;m<i.length;m++)for(var g=0;g<p;g++)i[m]===1?f[h++]=o[m]:f[h++]=u[m];return c},n.prototype.where=function(t){me([t],"where");var r=this.readSync(t.dataId);return T2(t.shape,r)},n.prototype.topk=function(t,r,a){return me(t,"topk"),ik(this.readSync(t.dataId),t.shape,t.dtype,r)},n.prototype.min=function(t,r){me(t,"min"),Lr("min",r,t.rank);for(var a=jn(t.shape,r),i=a[0],o=a[1],u=Ot(i,t.dtype),c=Ne(o),f=this.readSync(u.dataId),h=this.readSync(t.dataId),p=0;p<f.length;++p){for(var m=p*c,g=h[m],y=0;y<c;++y){var b=h[m+y];b<g&&(g=b)}f[p]=g}return u},n.prototype.minimum=function(t,r){return me([t,r],"minimum"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.min(a,i)})},n.prototype.mod=function(t,r){return me([t,r],"mod"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){var o=a%i;return a<0&&i<0||a>=0&&i>=0?o:(o+i)%i})},n.prototype.max=function(t,r){me(t,"max"),Lr("max",r,t.rank);for(var a=jn(t.shape,r),i=a[0],o=a[1],u=Ot(i,t.dtype),c=Ne(o),f=this.readSync(u.dataId),h=this.readSync(t.dataId),p=0;p<f.length;++p){for(var m=p*c,g=h[m],y=0;y<c;++y){var b=h[m+y];b>g&&(g=b)}f[p]=g}return u},n.prototype.maximum=function(t,r){return me([t,r],"maximum"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.max(a,i)})},n.prototype.all=function(t,r){me(t,"all"),Lr("all",r,t.rank);for(var a=jn(t.shape,r),i=a[0],o=a[1],u=Ot(i,t.dtype),c=Ne(o),f=this.readSync(u.dataId),h=this.readSync(t.dataId),p=0;p<f.length;++p){for(var m=p*c,g=h[m],y=0;y<c;++y){var b=h[m+y];g=g&&b}f[p]=g}return u},n.prototype.any=function(t,r){me(t,"any"),Lr("any",r,t.rank);for(var a=jn(t.shape,r),i=a[0],o=a[1],u=Ot(i,t.dtype),c=Ne(o),f=this.readSync(u.dataId),h=this.readSync(t.dataId),p=0;p<f.length;++p){for(var m=p*c,g=h[m],y=0;y<c;++y){var b=h[m+y];g=g||b}f[p]=g}return u},n.prototype.squaredDifference=function(t,r){return me([t,r],"squaredDifference"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){var o=a-i;return o*o})},n.prototype.ceil=function(t){me(t,"ceil");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.ceil(r[i]);return this.makeOutput(a,t.shape,"float32")},n.prototype.floor=function(t){me(t,"floor");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.floor(r[i]);return this.makeOutput(a,t.shape,"float32")},n.prototype.sign=function(t){me(t,"x");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?a[i]=-1:r[i]>0?a[i]=1:a[i]=0;return this.makeOutput(a,t.shape,"float32")},n.prototype.isNaN=function(t){me(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},n.prototype.isInf=function(t){me(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},n.prototype.isFinite=function(t){me(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(a[i]=1);return this.makeOutput(a,t.shape,"bool")},n.prototype.round=function(t){me(t,"round");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=Math.floor(r[i]);r[i]-o<.5?a[i]=Math.floor(r[i]):r[i]-o>.5?a[i]=Math.ceil(r[i]):a[i]=o%2==0?o:o+1}return this.makeOutput(a,t.shape,"float32")},n.prototype.exp=function(t){me(t,"exp");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.exp(r[i]);return this.makeOutput(a,t.shape,"float32")},n.prototype.expm1=function(t){me(t,"expm1");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=Math.expm1(r[i]);return this.makeOutput(a,t.shape,"float32")},n.prototype.log=function(t){me(t,"log");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log(o)}return this.makeOutput(a,t.shape,"float32")},n.prototype.log1p=function(t){me(t,"log1p");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.log1p(o)}return this.makeOutput(a,t.shape,"float32")},n.prototype.sqrt=function(t){me(t,"sqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=Math.sqrt(o)}return this.makeOutput(a,t.shape,"float32")},n.prototype.rsqrt=function(t){me(t,"rsqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i){var o=r[i];a[i]=1/Math.sqrt(o)}return this.makeOutput(a,t.shape,"float32")},n.prototype.reciprocal=function(t){me(t,"reciprocal");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),i=0;i<r.length;++i)a[i]=1/r[i];return this.makeOutput(a,t.shape,"float32")},n.prototype.linear=function(t){return t},n.prototype.relu=function(t){me(t,"relu");for(var r=Ot(t.shape,t.dtype),a=this.readSync(r.dataId),i=this.readSync(t.dataId),o=0;o<i.length;++o)a[o]=Math.max(0,i[o]);return r},n.prototype.relu6=function(t){me(t,"relu");for(var r=Ot(t.shape,t.dtype),a=this.readSync(r.dataId),i=this.readSync(t.dataId),o=0;o<i.length;++o)a[o]=Math.min(Math.max(0,i[o]),6);return r},n.prototype.prelu=function(t,r){return me([t,r],"prelu"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return a<0?i*a:a})},n.prototype.elu=function(t){me(t,"elu");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var o=a[i];r[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(r,t.shape,"float32")},n.prototype.eluDer=function(t,r){me([t,r],"eluDer");for(var a=new Float32Array(r.size),i=this.readSync(r.dataId),o=this.readSync(t.dataId),u=0;u<i.length;++u){var c=i[u];a[u]=c>=1?o[u]:o[u]*(c+1)}return this.makeOutput(a,r.shape,"float32")},n.prototype.selu=function(t){me(t,"selu");for(var r=k2,a=x2,i=new Float32Array(t.size),o=this.readSync(t.dataId),u=0;u<o.length;++u){var c=o[u];i[u]=c>=0?a*c:r*(Math.exp(c)-1)}return this.makeOutput(i,t.shape,"float32")},n.prototype.clip=function(t,r,a){me(t,"clip");for(var i=new Float32Array(t.size),o=this.readSync(t.dataId),u=0;u<o.length;++u){var c=o[u];i[u]=c>a?a:c<r?r:c}return this.makeOutput(i,t.shape,"float32")},n.prototype.abs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.abs(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.complexAbs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<t.size;++i){var o=a[2*i],u=a[2*i+1];r[i]=Math.hypot(o,u)}return this.makeOutput(r,t.shape,"float32")},n.prototype.int=function(t){me(t,"int");for(var r=new Int32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=a[i];return this.makeOutput(r,t.shape,"int32")},n.prototype.sigmoid=function(t){me(t,"sigmoid");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=1/(1+Math.exp(-a[i]));return this.makeOutput(r,t.shape,"float32")},n.prototype.softplus=function(t){me(t,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o){var u=i[o]>-r,c=i[o]<r,f=Math.exp(i[o]),h=void 0;h=c?f:u?i[o]:Math.log(1+f),a[o]=h}return this.makeOutput(a,t.shape,"float32")},n.prototype.sin=function(t){me(t,"sin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.sin(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.cos=function(t){me(t,"cos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.cos(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.tan=function(t){me(t,"tan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.tan(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.asin=function(t){me(t,"asin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.asin(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.acos=function(t){me(t,"acos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.acos(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.atan=function(t){me(t,"atan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.atan(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.atan2=function(t,r){return me([t,r],"atan2"),this.broadcastedBinaryOp(t,r,t.dtype,function(a,i){return Math.atan2(a,i)})},n.prototype.sinh=function(t){me(t,"sinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.sinh(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.cosh=function(t){me(t,"cosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.cosh(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.tanh=function(t){me(t,"tanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=i5(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.asinh=function(t){me(t,"asinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.asinh(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.acosh=function(t){me(t,"acosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.acosh(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.atanh=function(t){me(t,"atanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i)r[i]=Math.atanh(a[i]);return this.makeOutput(r,t.shape,"float32")},n.prototype.erf=function(t){me(t,"erf");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),i=0;i<a.length;++i){var o=Math.sign(a[i]),u=Math.abs(a[i]),c=1/(1+.3275911*u);r[i]=o*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-u*u))}return this.makeOutput(r,t.shape,"float32")},n.prototype.step=function(t,r){r===void 0&&(r=0),me(t,"step");for(var a=new Float32Array(t.size),i=this.readSync(t.dataId),o=0;o<i.length;++o){var u=i[o];isNaN(u)?a[o]=NaN:a[o]=u>0?1:r}return this.makeOutput(a,t.shape,"float32")},n.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights,f=this.conv2d(r,a,i);return o&&(f=this.add(f,o)),u&&(f=o1(this,f,u,c)),f},n.prototype.conv2d=function(t,r,a){me([t,r],"conv2d");for(var i=a.filterHeight,o=a.filterWidth,u=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,h=a.padInfo.top,p=a.dataFormat==="channelsLast",m=We(a.outShape,t.dtype),g=t.strides[0],y=p?t.strides[1]:t.strides[2],b=p?t.strides[2]:1,E=p?1:t.strides[1],_=m.strides[0],w=p?m.strides[1]:m.strides[2],I=p?m.strides[2]:1,R=p?1:m.strides[1],C=this.readSync(t.dataId),O=this.readSync(r.dataId),D=m.values,P=0;P<a.batchSize;++P)for(var k=P*g,N=P*_,U=0;U<a.outHeight;++U)for(var V=N+U*w,ee=U*a.strideHeight-h,re=0;re<i;re++){var ne=ee+re*u;if(!(ne<0||ne>=a.inHeight))for(var z=re*r.strides[0],Z=k+ne*y,$=0;$<a.outWidth;++$)for(var oe=V+$*I,L=$*a.strideWidth-f,Y=0;Y<o;Y++){var Q=L+Y*c;if(!(Q<0||Q>=a.inWidth))for(var de=Z+Q*b,he=z+Y*r.strides[1],Se=0;Se<a.inChannels;++Se){for(var be=C[de+Se*E],Pe=0;Pe<a.outChannels;++Pe)D[oe+Pe*R]+=be*O[he+Pe];he+=a.outChannels}}}return m.toTensor()},n.prototype.conv3d=function(t,r,a){for(var i=a.filterDepth,o=a.filterHeight,u=a.filterWidth,c=a.dilationDepth,f=a.dilationHeight,h=a.dilationWidth,p=a.padInfo.front,m=a.padInfo.left,g=a.padInfo.top,y=We(a.outShape,t.dtype),b=this.readSync(t.dataId),E=this.readSync(r.dataId),_=y.values,w=0;w<a.batchSize;++w)for(var I=w*t.strides[0],R=w*y.strides[0],C=0;C<a.outDepth;++C)for(var O=R+C*y.strides[1],D=C*a.strideDepth-p,P=0;P<i;P++){var k=D+P*c;if(!(k<0||k>=a.inDepth))for(var N=P*r.strides[0],U=I+k*t.strides[1],V=0;V<a.outHeight;++V)for(var ee=O+V*y.strides[2],re=V*a.strideHeight-g,ne=0;ne<o;ne++){var z=re+ne*f;if(!(z<0||z>=a.inHeight))for(var Z=N+ne*r.strides[1],$=U+z*t.strides[2],oe=0;oe<a.outWidth;++oe)for(var L=ee+oe*a.outChannels,Y=oe*a.strideWidth-m,Q=0;Q<u;Q++){var de=Y+Q*h;if(!(de<0||de>=a.inWidth))for(var he=Z+Q*r.strides[2],Se=$+de*a.inChannels,be=he,Pe=0;Pe<a.inChannels;++Pe){for(var _e=b[Se+Pe],Ce=0;Ce<a.outChannels;++Ce)_[L+Ce]+=_e*E[be+Ce];be+=a.outChannels}}}}return y.toTensor()},n.prototype.conv2dDerInput=function(t,r,a){me([t,r],"conv2dDerInput");for(var i=We(a.inShape,"float32"),o=i.values,u=this.readSync(t.dataId),c=this.readSync(r.dataId),f=r.strides,h=f[0],p=f[1],m=f[2],g=a.batchSize,y=a.filterHeight,b=a.filterWidth,E=a.inChannels,_=a.inHeight,w=a.inWidth,I=a.outChannels,R=a.outHeight,C=a.outWidth,O=a.strideHeight,D=a.strideWidth,P=a.dataFormat,k=y-1-a.padInfo.top,N=b-1-a.padInfo.left,U=P==="channelsLast",V=i.strides[0],ee=U?i.strides[1]:i.strides[2],re=U?i.strides[2]:1,ne=U?1:i.strides[1],z=t.strides[0],Z=U?t.strides[1]:t.strides[2],$=U?t.strides[2]:1,oe=U?1:t.strides[1],L=0;L<g;++L)for(var Y=0;Y<E;++Y)for(var Q=0;Q<_;++Q)for(var de=Q-k,he=Math.max(0,Math.ceil(de/O)),Se=Math.min(R,(y+de)/O),be=0;be<w;++be){for(var Pe=be-N,_e=Math.max(0,Math.ceil(Pe/D)),Ce=Math.min(C,(b+Pe)/D),Be=0,Le=he;Le<Se;++Le)for(var qe=Le*O-de,ge=_e;ge<Ce;++ge)for(var ht=z*L+Z*Le+$*ge,pt=h*(y-1-qe)+p*(b-1-(ge*D-Pe))+m*Y,at=0;at<I;++at)Be+=u[ht+oe*at]*c[pt+at];o[V*L+ee*Q+re*be+ne*Y]=Be}return i.toTensor()},n.prototype.conv3dDerInput=function(t,r,a){for(var i=We(a.inShape,"float32"),o=i.values,u=i.strides,c=u[0],f=u[1],h=u[2],p=u[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],E=g[2],_=g[3],w=this.readSync(r.dataId),I=r.strides,R=I[0],C=I[1],O=I[2],D=I[3],P=a.batchSize,k=a.filterDepth,N=a.filterHeight,U=a.filterWidth,V=a.inChannels,ee=a.inDepth,re=a.inHeight,ne=a.inWidth,z=a.outChannels,Z=a.outDepth,$=a.outHeight,oe=a.outWidth,L=a.strideDepth,Y=a.strideHeight,Q=a.strideWidth,de=k-1-a.padInfo.front,he=N-1-a.padInfo.top,Se=U-1-a.padInfo.left,be=0;be<P;++be)for(var Pe=0;Pe<V;++Pe)for(var _e=0;_e<ee;++_e)for(var Ce=_e-de,Be=Math.max(0,Math.ceil(Ce/L)),Le=Math.min(Z,(k+Ce)/L),qe=0;qe<re;++qe)for(var ge=qe-he,ht=Math.max(0,Math.ceil(ge/Y)),pt=Math.min($,(N+ge)/Y),at=0;at<ne;++at){for(var _n=at-Se,yt=Math.max(0,Math.ceil(_n/Q)),Mt=Math.min(oe,(U+_n)/Q),zn=0,rr=Be;rr<Le;++rr)for(var Nr=rr*L-Ce,dr=ht;dr<pt;++dr)for(var tn=dr*Y-ge,hr=yt;hr<Mt;++hr)for(var pi=y*be+b*rr+E*dr+_*hr,Zr=R*(k-1-Nr)+C*(N-1-tn)+O*(U-1-(hr*Q-_n))+D*Pe,lt=0;lt<z;++lt)zn+=m[pi+lt]*w[Zr+lt];o[c*be+f*_e+h*qe+p*at+Pe]=zn}return i.toTensor()},n.prototype.conv2dDerFilter=function(t,r,a){me([t,r],"conv2dDerFilter");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=a.dataFormat==="channelsLast",h=We(a.filterShape,"float32"),p=a.padInfo.left,m=a.padInfo.top,g=this.bufferSync(t),y=this.bufferSync(r),b=0;b<u;++b)for(var E=Math.max(0,Math.ceil((m-b)/i)),_=Math.min(a.outHeight,(a.inHeight+m-b)/i),w=0;w<c;++w)for(var I=Math.max(0,Math.ceil((p-w)/o)),R=Math.min(a.outWidth,(a.inWidth+p-w)/o),C=0;C<a.inChannels;++C)for(var O=0;O<a.outChannels;++O){for(var D=0,P=0;P<a.batchSize;++P)for(var k=E;k<_;++k)for(var N=b+k*i-m,U=I;U<R;++U){var V=w+U*o-p;D+=f?g.get(P,N,V,C)*y.get(P,k,U,O):g.get(P,C,N,V)*y.get(P,O,k,U)}h.set(D,b,w,C,O)}return h.toTensor()},n.prototype.conv3dDerFilter=function(t,r,a){for(var i=a.strideDepth,o=a.strideHeight,u=a.strideWidth,c=a.filterDepth,f=a.filterHeight,h=a.filterWidth,p=We(a.filterShape,"float32"),m=p.values,g=p.strides,y=g[0],b=g[1],E=g[2],_=g[3],w=this.readSync(r.dataId),I=r.strides,R=I[0],C=I[1],O=I[2],D=I[3],P=this.readSync(t.dataId),k=t.strides,N=k[0],U=k[1],V=k[2],ee=k[3],re=a.padInfo.front,ne=a.padInfo.left,z=a.padInfo.top,Z=0;Z<c;++Z)for(var $=Math.max(0,Math.ceil((re-Z)/i)),oe=Math.min(a.outDepth,(a.inDepth+re-Z)/i),L=Z*y,Y=0;Y<f;++Y)for(var Q=Math.max(0,Math.ceil((z-Y)/o)),de=Math.min(a.outHeight,(a.inHeight+z-Y)/o),he=Y*b+L,Se=0;Se<h;++Se)for(var be=Math.max(0,Math.ceil((ne-Se)/u)),Pe=Math.min(a.outWidth,(a.inWidth+ne-Se)/u),_e=Se*E+he,Ce=0;Ce<a.inChannels;++Ce)for(var Be=Ce*_+_e,Le=0;Le<a.outChannels;++Le){for(var qe=0,ge=0;ge<a.batchSize;++ge)for(var ht=ge*N,pt=ge*R,at=$;at<oe;++at)for(var _n=(Z+at*i-re)*U+ht,yt=at*C+pt,Mt=Q;Mt<de;++Mt)for(var zn=(Y+Mt*o-z)*V+_n,rr=Mt*O+yt,Nr=be;Nr<Pe;++Nr){var dr=Nr*D+rr;qe+=P[(Se+Nr*u-ne)*ee+zn+Ce]*w[dr+Le]}m[Be+Le]=qe}return p.toTensor()},n.prototype.fusedDepthwiseConv2D=function(t){var r=t.input,a=t.filter,i=t.convInfo,o=t.bias,u=t.activation,c=t.preluActivationWeights,f=this.depthwiseConv2D(r,a,i);return o&&(f=this.add(f,o)),u&&(f=o1(this,f,u,c)),f},n.prototype.depthwiseConv2D=function(t,r,a){me([t,r],"depthwiseConv2D");for(var i=a.filterHeight,o=a.filterWidth,u=a.dilationHeight,c=a.dilationWidth,f=a.padInfo.left,h=a.padInfo.top,p=a.outChannels/a.inChannels,m=We(a.outShape,t.dtype),g=this.readSync(t.dataId),y=this.readSync(r.dataId),b=m.values,E=0;E<a.batchSize;++E)for(var _=E*t.strides[0],w=E*m.strides[0],I=0;I<a.outHeight;++I)for(var R=w+I*m.strides[1],C=I*a.strideHeight-f,O=0;O<i;++O){var D=C+O*u;if(!(D<0||D>=a.inHeight))for(var P=O*r.strides[0],k=_+D*t.strides[1],N=0;N<a.outWidth;++N)for(var U=R+N*m.strides[2],V=N*a.strideWidth-h,ee=0;ee<o;++ee){var re=V+ee*c;if(!(re<0||re>=a.inWidth))for(var ne=P+ee*r.strides[1],z=k+re*a.inChannels,Z=U,$=ne,oe=0;oe<a.inChannels;++oe){for(var L=g[z+oe],Y=0;Y<p;++Y)b[Z+Y]+=L*y[$+Y];Z+=p,$+=p}}}return m.toTensor()},n.prototype.depthwiseConv2DDerInput=function(t,r,a){me([t,r],"depthwiseConv2DDerInput");for(var i=We(a.inShape,"float32"),o=i.values,u=i.strides,c=u[0],f=u[1],h=u[2],p=this.readSync(t.dataId),m=t.strides,g=m[0],y=m[1],b=m[2],E=this.readSync(r.dataId),_=r.strides,w=_[0],I=_[1],R=_[2],C=a.batchSize,O=a.filterHeight,D=a.filterWidth,P=a.inChannels,k=a.inHeight,N=a.inWidth,U=a.outChannels,V=a.outHeight,ee=a.outWidth,re=a.strideHeight,ne=a.strideWidth,z=O-1-a.padInfo.top,Z=D-1-a.padInfo.left,$=U/P,oe=0;oe<C;++oe)for(var L=0;L<P;++L)for(var Y=0;Y<k;++Y)for(var Q=Y-z,de=Math.max(0,Math.ceil(Q/re)),he=Math.min(V,(O+Q)/re),Se=0;Se<N;++Se){for(var be=Se-Z,Pe=Math.max(0,Math.ceil(be/ne)),_e=Math.min(ee,(D+be)/ne),Ce=0,Be=de;Be<he;++Be)for(var Le=Be*re-Q,qe=Pe;qe<_e;++qe)for(var ge=g*oe+y*Be+b*qe,ht=w*(O-1-Le)+I*(D-1-(qe*ne-be))+R*L,pt=0;pt<$;++pt)Ce+=p[ge+(L*$+pt)]*E[ht+pt];o[c*oe+f*Y+h*Se+L]=Ce}return i.toTensor()},n.prototype.depthwiseConv2DDerFilter=function(t,r,a){me([t,r],"depthwiseConv2DDerFilter");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=We(a.filterShape,"float32"),h=a.padInfo.left,p=a.padInfo.top,m=a.outChannels/a.inChannels,g=this.bufferSync(t),y=this.bufferSync(r),b=0;b<u;++b)for(var E=Math.max(0,Math.ceil((p-b)/i)),_=Math.min(a.outHeight,(a.inHeight+p-b)/i),w=0;w<c;++w)for(var I=Math.max(0,Math.ceil((h-w)/o)),R=Math.min(a.outWidth,(a.inWidth+h-w)/o),C=0;C<a.outChannels;++C){for(var O=Math.trunc(C/m),D=C%m,P=0,k=0;k<a.batchSize;++k)for(var N=E;N<_;++N)for(var U=b+N*i-p,V=I;V<R;++V){var ee=w+V*o-h;P+=g.get(k,U,ee,O)*y.get(k,N,V,C)}f.set(P,b,w,O,D)}return f.toTensor()},n.prototype.tile=function(t,r){return me(t,"tile"),ak(this.bufferSync(t),r)},n.prototype.pad=function(t,r,a){me(t,"pad");var i=r.map(function(m,g){return m[0]+t.shape[g]+m[1]}),o=r.map(function(m){return m[0]}),u=this.bufferSync(t),c=We(i,t.dtype);a!==0&&c.values.fill(a);for(var f=0;f<t.size;f++){var h=u.indexToLoc(f),p=h.map(function(m,g){return m+o[g]});c.set.apply(c,[u.get.apply(u,h)].concat(p))}return c.toTensor()},n.prototype.transpose=function(t,r){me(t,"transpose");for(var a=new Array(t.rank),i=0;i<a.length;i++)a[i]=t.shape[r[i]];var o=this.readSync(t.dataId),u=We(a,t.dtype),c=this.bufferSync(t);for(i=0;i<t.size;++i){for(var f=c.indexToLoc(i),h=new Array(f.length),p=0;p<h.length;p++)h[p]=f[r[p]];var m=u.locToIndex(h);u.values[m]=o[i]}return u.toTensor()},n.prototype.gather=function(t,r,a){me([t,r],"gather");var i=t.shape.slice(),o=this.readSync(r.dataId);i[a]=o.length;for(var u=We(i,t.dtype),c=this.bufferSync(t),f=0;f<u.size;++f){var h=u.indexToLoc(f),p=h.slice();p[a]=o[h[a]];var m=c.locToIndex(p);u.values[f]=c.values[m]}return u.toTensor()},n.prototype.batchToSpaceND=function(t,r,a){me([t],"batchToSpaceND");var i=r.reduce(function(p,m){return p*m}),o=om(t.shape,r,i),u=sm(o.length,r.length),c=um(t.shape,r,i),f=KO(a,r.length),h=qO(c,a,r.length);return t.reshape(o).transpose(u).reshape(c).slice(f,h)},n.prototype.spaceToBatchND=function(t,r,a){me([t],"spaceToBatchND");var i=r.reduce(function(m,g){return m*g}),o=[[0,0]];o.push.apply(o,a);for(var u=1+r.length;u<t.shape.length;++u)o.push([0,0]);var c=t.pad(o),f=om(c.shape,r,i,!1),h=sm(f.length,r.length,!1),p=um(c.shape,r,i,!1);return c.reshape(f).transpose(h).reshape(p)},n.prototype.pool=function(t,r,a){me(t,"pool");for(var i=r.strideHeight,o=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,m=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(t.dataId),b=We(r.outShape,t.dtype),E=b.values,_=r.outShape[1]*r.outShape[2]*r.outShape[3],w=r.outShape[2]*r.outShape[3],I=r.outShape[3],R=0;R<r.batchSize;++R)for(var C=R*_,O=R*t.strides[0],D=0;D<r.inChannels;++D)for(var P=0;P<r.outHeight;++P)for(var k=P*i-p,N=Math.max(0,k),U=Math.min(r.inHeight,f+k),V=C+P*w,ee=0;ee<r.outWidth;++ee){for(var re=ee*o-m,ne=Math.max(0,re),z=Math.min(r.inWidth,h+re),Z=g,$=0,oe=0,L=N;L<U;L+=u){for(var Y=O+L*t.strides[1],Q=ne;Q<z;Q+=c){var de=y[Y+Q*t.strides[2]+D];a==="max"&&de>Z?Z=de:a==="avg"&&($+=de,oe++)}if(isNaN(Z))break}E[V+ee*I+D]=a==="avg"?$/oe:Z}return b.toTensor()},n.prototype.maxPool=function(t,r){return this.pool(t,r,"max")},n.prototype.maxPoolPositions=function(t,r){for(var a=We(r.outShape,"int32"),i=r.strideHeight,o=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,m=r.padInfo.left,g=this.bufferSync(t),y=0;y<r.batchSize;++y)for(var b=0;b<r.inChannels;++b)for(var E=0;E<r.outHeight;++E){for(var _=E*i-p,w=_;w<0;)w+=u;for(var I=Math.min(r.inHeight,f+_),R=0;R<r.outWidth;++R){for(var C=R*o-m,O=C;O<0;)O+=c;for(var D=Math.min(r.inWidth,h+C),P=Number.NEGATIVE_INFINITY,k=-1,N=w;N<I;N+=u)for(var U=N-_,V=O;V<D;V+=c){var ee=V-C,re=g.get(y,N,V,b);re>P&&(P=re,k=U*h+ee)}a.set(k,y,E,R,b)}}return a.toTensor()},n.prototype.maxPoolBackprop=function(t,r,a,i){me([r,a],"maxPoolBackprop");for(var o=this.maxPoolPositions(r,i),u=i.strideHeight,c=i.strideWidth,f=i.dilationHeight,h=i.dilationWidth,p=i.effectiveFilterHeight,m=i.effectiveFilterWidth,g=m-1-i.padInfo.left,y=p-1-i.padInfo.top,b=We(r.shape,"float32"),E=this.bufferSync(o),_=this.bufferSync(t),w=0;w<i.batchSize;++w)for(var I=0;I<i.inChannels;++I)for(var R=0;R<i.inHeight;++R)for(var C=0;C<i.inWidth;++C){for(var O=R-y,D=C-g,P=0,k=0;k<p;k+=f){var N=(O+k)/u;if(!(N<0||N>=i.outHeight||Math.floor(N)!==N))for(var U=0;U<m;U+=h){var V=(D+U)/c;if(!(V<0||V>=i.outWidth||Math.floor(V)!==V)){var ee=p*m-1-E.get(w,N,V,I)===k*m+U?1:0;ee!==0&&(P+=_.get(w,N,V,I)*ee)}}}b.set(P,w,R,C,I)}return b.toTensor()},n.prototype.avgPoolBackprop=function(t,r,a){me([t,r],"avgPoolBackprop");for(var i=a.strideHeight,o=a.strideWidth,u=a.filterHeight,c=a.filterWidth,f=a.dilationHeight,h=a.dilationWidth,p=a.effectiveFilterHeight,m=a.effectiveFilterWidth,g=m-1-a.padInfo.left,y=p-1-a.padInfo.top,b=We(r.shape,"float32"),E=1/(u*c),_=this.bufferSync(t),w=0;w<a.batchSize;++w)for(var I=0;I<a.inChannels;++I)for(var R=0;R<a.inHeight;++R)for(var C=0;C<a.inWidth;++C){for(var O=R-y,D=C-g,P=0,k=0;k<p;k+=f){var N=(O+k)/i;if(!(N<0||N>=a.outHeight||Math.floor(N)!==N))for(var U=0;U<m;U+=h){var V=(D+U)/o;V<0||V>=a.outWidth||Math.floor(V)!==V||(P+=_.get(w,N,V,I))}}b.set(P*E,w,R,C,I)}return b.toTensor()},n.prototype.pool3d=function(t,r,a){me(t,"pool3d");for(var i=r.strideDepth,o=r.strideHeight,u=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,h=r.dilationWidth,p=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,b=r.padInfo.top,E=r.padInfo.left,_=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=this.readSync(t.dataId),I=We(r.outShape,t.dtype),R=I.values,C=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],O=r.outShape[2]*r.outShape[3]*r.outShape[4],D=r.outShape[3]*r.outShape[4],P=r.outShape[4],k=0;k<r.batchSize;++k)for(var N=k*C,U=k*t.strides[0],V=0;V<r.inChannels;++V)for(var ee=0;ee<r.outDepth;++ee){for(var re=ee*i-y,ne=re;ne<0;)ne+=c;for(var z=Math.min(r.inDepth,p+re),Z=N+ee*O,$=0;$<r.outHeight;++$){for(var oe=$*o-b,L=oe;L<0;)L+=f;for(var Y=Math.min(r.inHeight,m+oe),Q=Z+$*D,de=0;de<r.outWidth;++de){for(var he=de*u-E,Se=he;Se<0;)Se+=h;for(var be=Math.min(r.inWidth,g+he),Pe=Q+de*P,_e=_,Ce=0,Be=0,Le=ne;Le<z;Le+=c){for(var qe=U+Le*t.strides[1],ge=L;ge<Y;ge+=f){for(var ht=qe+ge*t.strides[2],pt=Se;pt<be;pt+=h){var at=w[ht+pt*t.strides[3]+V];if(a==="max"&&at>_e?_e=at:a==="avg"&&(Ce+=at,Be++),isNaN(_e))break}if(isNaN(_e))break}if(isNaN(_e))break}R[Pe+V]=a==="avg"?Ce/Be:_e}}}return I.toTensor()},n.prototype.avgPool3d=function(t,r){return me(t,"avgPool3d"),this.pool3d(t,r,"avg").toFloat()},n.prototype.avgPool3dBackprop=function(t,r,a){me([t,r],"avgPool3dBackprop");for(var i=a.strideDepth,o=a.strideHeight,u=a.strideWidth,c=a.filterDepth,f=a.filterHeight,h=a.filterWidth,p=a.dilationDepth,m=a.dilationHeight,g=a.dilationWidth,y=a.effectiveFilterDepth,b=a.effectiveFilterHeight,E=a.effectiveFilterWidth,_=y-1-a.padInfo.front,w=E-1-a.padInfo.left,I=b-1-a.padInfo.top,R=We(r.shape,"float32"),C=1/(c*f*h),O=this.bufferSync(t),D=0;D<a.batchSize;++D)for(var P=0;P<a.inChannels;++P)for(var k=0;k<a.inDepth;++k)for(var N=0;N<a.inHeight;++N)for(var U=0;U<a.inWidth;++U){for(var V=k-_,ee=N-I,re=U-w,ne=0,z=0;z<y;z+=p){var Z=(V+z)/i;if(!(Z<0||Z>=a.outDepth||Math.floor(Z)!==Z))for(var $=0;$<b;$+=m){var oe=(ee+$)/o;if(!(oe<0||oe>=a.outHeight||Math.floor(oe)!==oe))for(var L=0;L<E;L+=g){var Y=(re+L)/u;Y<0||Y>=a.outWidth||Math.floor(Y)!==Y||(ne+=O.get(D,Z,oe,Y,P))}}}R.set(ne*C,D,k,N,U,P)}return R.toTensor()},n.prototype.maxPool3d=function(t,r){return me(t,"maxPool3d"),this.pool3d(t,r,"max").toFloat()},n.prototype.maxPool3dPositions=function(t,r){for(var a=We(r.outShape,"int32"),i=r.strideDepth,o=r.strideHeight,u=r.strideWidth,c=r.dilationDepth,f=r.dilationHeight,h=r.dilationWidth,p=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,y=r.padInfo.front,b=r.padInfo.top,E=r.padInfo.left,_=this.bufferSync(t),w=0;w<r.batchSize;++w)for(var I=0;I<r.inChannels;++I)for(var R=0;R<r.outDepth;++R){for(var C=R*i-y,O=C;O<0;)O+=c;for(var D=Math.min(r.inDepth,p+C),P=0;P<r.outHeight;++P){for(var k=P*o-b,N=k;N<0;)N+=f;for(var U=Math.min(r.inHeight,m+k),V=0;V<r.outWidth;++V){for(var ee=V*u-E,re=ee;re<0;)re+=h;for(var ne=Math.min(r.inWidth,g+ee),z=Number.NEGATIVE_INFINITY,Z=-1,$=O;$<D;$+=c)for(var oe=$-C,L=N;L<U;L+=f)for(var Y=L-k,Q=re;Q<ne;Q+=h){var de=Q-ee,he=_.get(w,$,L,Q,I);he>=z&&(z=he,Z=oe*m*g+Y*m+de)}a.set(Z,w,R,P,V,I)}}}return a.toTensor()},n.prototype.maxPool3dBackprop=function(t,r,a,i){me([r,a],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(r,i),u=i.strideDepth,c=i.strideHeight,f=i.strideWidth,h=i.dilationDepth,p=i.dilationHeight,m=i.dilationWidth,g=i.effectiveFilterDepth,y=i.effectiveFilterHeight,b=i.effectiveFilterWidth,E=g-1-i.padInfo.front,_=b-1-i.padInfo.left,w=y-1-i.padInfo.top,I=We(r.shape,"float32"),R=this.bufferSync(o),C=this.bufferSync(t),O=0;O<i.batchSize;++O)for(var D=0;D<i.inChannels;++D)for(var P=0;P<i.inDepth;++P)for(var k=0;k<i.inHeight;++k)for(var N=0;N<i.inWidth;++N){for(var U=P-E,V=k-w,ee=N-_,re=0,ne=0;ne<g;ne+=h){var z=(U+ne)/u;if(!(z<0||z>=i.outDepth||Math.floor(z)!==z))for(var Z=0;Z<y;Z+=p){var $=(V+Z)/c;if(!($<0||$>=i.outHeight||Math.floor($)!==$))for(var oe=0;oe<b;oe+=m){var L=(ee+oe)/f;if(!(L<0||L>=i.outWidth||Math.floor(L)!==L)){var Y=g*y*b-1-R.get(O,z,$,L,D)===ne*y*b+Z*b+oe?1:0;Y!==0&&(re+=C.get(O,z,$,L,D)*Y)}}}}I.set(re,O,P,k,N,D)}return I.toTensor()},n.prototype.cast=function(t,r){return ek(t,r,this)},n.prototype.reshape=function(t,r){return ay(t,r)},n.prototype.avgPool=function(t,r){return me(t,"avgPool"),this.pool(t,r,"avg").toFloat()},n.prototype.resizeBilinear=function(t,r,a,i){me(t,"resizeBilinear");for(var o=t.shape,u=o[0],c=o[1],f=o[2],h=o[3],p=this.readSync(t.dataId),m=new Float32Array(Ne([u,r,a,h])),g=[i&&r>1?c-1:c,i&&a>1?f-1:f],y=[i&&r>1?r-1:r,i&&a>1?a-1:a],b=0,E=g[0]/y[0],_=g[1]/y[1],w=0;w<u;w++)for(var I=0;I<r;I++)for(var R=E*I,C=Math.floor(R),O=R-C,D=Math.min(c-1,Math.ceil(R)),P=w*t.strides[0]+C*t.strides[1],k=w*t.strides[0]+D*t.strides[1],N=0;N<a;N++)for(var U=_*N,V=Math.floor(U),ee=U-V,re=Math.min(f-1,Math.ceil(U)),ne=P+V*t.strides[2],z=k+V*t.strides[2],Z=P+re*t.strides[2],$=k+re*t.strides[2],oe=0;oe<h;oe++){var L=p[ne+oe],Y=p[z+oe],Q=L+(p[Z+oe]-L)*ee,de=Q+(Y+(p[$+oe]-Y)*ee-Q)*O;m[b++]=de}return Gn(m,[u,r,a,h])},n.prototype.resizeBilinearBackprop=function(t,r,a){me([t,r],"resizeBilinearBackprop");for(var i=r.shape,o=i[0],u=i[1],c=i[2],f=i[3],h=t.shape,p=h[1],m=h[2],g=new Float32Array(o*u*c*f),y=[a&&p>1?u-1:u,a&&m>1?c-1:c],b=[a&&p>1?p-1:p,a&&m>1?m-1:m],E=y[0]/b[0],_=y[1]/b[1],w=this.readSync(t.dataId),I=0,R=0;R<o;R++)for(var C=R*r.strides[0],O=0;O<p;O++)for(var D=O*E,P=Math.floor(D),k=Math.min(Math.ceil(D),u-1),N=C+P*r.strides[1],U=C+k*r.strides[1],V=D-P,ee=1-V,re=0;re<m;re++)for(var ne=re*_,z=Math.floor(ne),Z=Math.min(Math.ceil(ne),c-1),$=ne-z,oe=1-$,L=N+z*r.strides[2],Y=N+Z*r.strides[2],Q=U+z*r.strides[2],de=U+Z*r.strides[2],he=ee*oe,Se=ee*$,be=V*oe,Pe=V*$,_e=0;_e<f;_e++){var Ce=w[I++];g[L+_e]+=Ce*he,g[Y+_e]+=Ce*Se,g[Q+_e]+=Ce*be,g[de+_e]+=Ce*Pe}return br(g,[o,c,u,f],r.dtype)},n.prototype.resizeNearestNeighbor=function(t,r,a,i){me(t,"resizeNearestNeighbor");for(var o=t.shape,u=o[0],c=o[1],f=o[2],h=o[3],p=this.readSync(t.dataId),m=new Float32Array(u*r*a*h),g=[i&&r>1?c-1:c,i&&a>1?f-1:f],y=[i&&r>1?r-1:r,i&&a>1?a-1:a],b=g[0]/y[0],E=g[1]/y[1],_=0,w=0;w<u;w++)for(var I=w*t.strides[0],R=0;R<r;R++)for(var C=b*R,O=I+Math.min(c-1,i?Math.round(C):Math.floor(C))*t.strides[1],D=0;D<a;D++)for(var P=E*D,k=O+Math.min(f-1,i?Math.round(P):Math.floor(P))*t.strides[2],N=0;N<h;N++){var U=p[k+N];m[_++]=U}return Gn(m,[u,r,a,h],t.dtype)},n.prototype.resizeNearestNeighborBackprop=function(t,r,a){me([t,r],"resizeNearestNeighborBackprop");for(var i=r.shape,o=i[0],u=i[1],c=i[2],f=i[3],h=t.shape,p=h[1],m=h[2],g=new Float32Array(o*u*c*f),y=this.readSync(t.dataId),b=[a&&p>1?u-1:u,a&&m>1?c-1:c],E=[a&&p>1?p-1:p,a&&m>1?m-1:m],_=b[0]/E[0],w=b[1]/E[1],I=1/_,R=1/w,C=2*Math.ceil(I)+2,O=2*Math.ceil(R)+2,D=0;D<o;D++)for(var P=D*r.strides[0],k=0;k<u;k++)for(var N=P+k*r.strides[1],U=Math.floor(k*I),V=Math.floor(U-C/2),ee=0;ee<c;ee++)for(var re=N+ee*r.strides[2],ne=Math.floor(ee*R),z=Math.floor(ne-O/2),Z=0;Z<f;Z++){for(var $=0,oe=0;oe<C;oe++){var L=oe+V;if(!(L<0||L>=p)){var Y=P+L*t.strides[1],Q=L*_;if(k===Math.min(u-1,a?Math.round(Q):Math.floor(Q)))for(var de=0;de<O;de++){var he=de+z;if(!(he<0||he>=m)){var Se=Y+he*t.strides[2],be=he*w;ee===Math.min(c-1,a?Math.round(be):Math.floor(be))&&($+=y[Se+Z])}}}}g[re+Z]=$}return br(g,r.shape,r.dtype)},n.prototype.batchNormalization=function(t,r,a,i,o,u){me([t,r,a,o,u],"batchNorm");for(var c=this.readSync(t.dataId),f=this.readSync(r.dataId),h=this.readSync(a.dataId),p=o?this.readSync(o.dataId):new Float32Array([1]),m=u?this.readSync(u.dataId):new Float32Array([0]),g=new Float32Array(c.length),y=m.length,b=p.length,E=h.length,_=f.length,w=0,I=0,R=0,C=0,O=0;O<c.length;++O)g[O]=m[w++]+(c[O]-f[I++])*p[R++]/Math.sqrt(h[C++]+i),w>=y&&(w=0),I>=_&&(I=0),R>=b&&(R=0),C>=E&&(C=0);return br(g,t.shape)},n.prototype.localResponseNormalization4D=function(t,r,a,i,o){me(t,"localResponseNormalization4D");var u=t.shape[3],c=u-1,f=this.readSync(t.dataId),h=t.size,p=new Float32Array(h);function m(E){for(var _=E%u,w=E-_+Math.max(0,_-r),I=E-_+Math.min(_+r,c),R=0;w<=I;w++){var C=f[w];R+=C*C}return R}for(var g=0;g<h;g++){var y=m(g),b=f[g]*Math.pow(a+i*y,-o);p[g]=b}return br(p,t.shape)},n.prototype.LRNGrad=function(t,r,a,i,o,u,c){me(t,"LRNGrad");for(var f=t.shape[3],h=this.readSync(t.dataId),p=this.readSync(r.dataId),m=this.readSync(a.dataId),g=new Float32Array(t.size),y=t.size,b=0;b<y;b++){for(var E=b%f,_=b-E+Math.max(0,E-i),w=b-E+Math.min(f,E+i+1),I=0,R=_;R<w;R++)I+=Math.pow(p[R],2);for(I=u*I+o,R=_;R<w;R++){var C=-2*u*c*p[R]*m[b]/I;b===R&&(C+=Math.pow(I,-c)),C*=h[b],g[R]+=C}}return br(g,t.shape)},n.prototype.multinomial=function(t,r,a,i){me(t,"multinomial");for(var o=r?t:$i(t),u=o.shape[0],c=o.shape[1],f=Ot([u,a],"int32"),h=this.readSync(f.dataId),p=this.readSync(o.dataId),m=0;m<u;++m){var g=m*c,y=new Float32Array(c-1);y[0]=p[g];for(var b=1;b<y.length;++b)y[b]=y[b-1]+p[g+b];for(var E=$m(i.toString()),_=m*a,w=0;w<a;++w){var I=E();h[_+w]=y.length;for(var R=0;R<y.length;R++)if(I<y[R]){h[_+w]=R;break}}}return f},n.prototype.oneHot=function(t,r,a,i){me(t,"oneHot");var o=new Float32Array(t.size*r);o.fill(i);for(var u=this.readSync(t.dataId),c=0;c<t.size;++c)u[c]>=0&&u[c]<r&&(o[c*r+u[c]]=a);return Do(o,[t.size,r],"int32")},n.prototype.nonMaxSuppression=function(t,r,a,i,o){return me(t,"nonMaxSuppression"),C2(this.readSync(t.dataId),this.readSync(r.dataId),a,i,o)},n.prototype.fft=function(t){return this.fftBatch(t,!1)},n.prototype.ifft=function(t){return this.fftBatch(t,!0)},n.prototype.fftBatch=function(t,r){for(var a=t.shape[0],i=t.shape[1],o=We(t.shape,"float32"),u=We(t.shape,"float32"),c=da(t).as2D(a,i),f=ja(t).as2D(a,i),h=0;h<a;h++)for(var p=c.slice([h,0],[1,i]),m=f.slice([h,0],[1,i]),g=Bn(p,m),y=this.readSync(this.fftImpl(g,r).dataId),b=0;b<i;b++){var E=Xw(y,b);o.values[h*i+b]=E.real,u.values[h*i+b]=E.imag}return Bn(o.toTensor(),u.toTensor()).as2D(a,i)},n.prototype.fftImpl=function(t,r){var a=t.as1D(),i=a.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(a,i,r).as2D(t.shape[0],t.shape[1]);return r&&(o=Bn(da(o).div(Ee(i)),ja(o).div(Ee(i)))),o}var u=this.readSync(t.dataId),c=function(f){for(var h=new Float32Array(f.length/2),p=new Float32Array(f.length/2),m=0;m<f.length;m+=2)h[m/2]=f[m],p[m/2]=f[m+1];return{real:h,imag:p}}(this.fourierTransformByMatmul(u,i,r));return Bn(c.real,c.imag).as2D(t.shape[0],t.shape[1])},n.prototype.isExponentOf2=function(t){return(t&t-1)==0},n.prototype.fftRadix2=function(t,r,a){if(r===1)return t;var i=this.readSync(t.dataId),o=r/2,u=function(_){for(var w=Math.ceil(_.length/4),I=new Float32Array(w),R=new Float32Array(w),C=0;C<_.length;C+=4)I[Math.floor(C/4)]=_[C],R[Math.floor(C/4)]=_[C+1];return{real:I,imag:R}}(i),c=Bn(u.real,u.imag).as1D(),f=function(_){for(var w=Math.floor(_.length/4),I=new Float32Array(w),R=new Float32Array(w),C=2;C<_.length;C+=4)I[Math.floor(C/4)]=_[C],R[Math.floor(C/4)]=_[C+1];return{real:I,imag:R}}(i),h=Bn(f.real,f.imag).as1D();c=this.fftRadix2(c,o,a),h=this.fftRadix2(h,o,a);var p=function(_,w){for(var I=new Float32Array(_/2),R=new Float32Array(_/2),C=0;C<Math.ceil(_/2);C++){var O=(w?2:-2)*Math.PI*(C/_);I[C]=Math.cos(O),R[C]=Math.sin(O)}return{real:I,imag:R}}(r,a),m=Bn(p.real,p.imag).mul(h),g=c.add(m),y=c.sub(m),b=da(g).concat(da(y)),E=ja(g).concat(ja(y));return Bn(b,E).as1D()},n.prototype.fourierTransformByMatmul=function(t,r,a){for(var i=new Float32Array(2*r),o=0;o<r;o++){for(var u=0,c=0,f=0;f<r;f++){var h=UV(o*f,r,a),p=Xw(t,f);u+=p.real*h.real-p.imag*h.imag,c+=p.real*h.imag+p.imag*h.real}a&&(u/=r,c/=r),BV(i,u,c,o)}return i},n.prototype.depthToSpace=function(t,r,a){F(a==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a}),F(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var i=t.shape[0],o=t.shape[1],u=t.shape[2],c=t.shape[3],f=o*r,h=u*r,p=c/(r*r),m=this.readSync(t.dataId),g=new Float32Array(i*f*h*p),y=0,b=0;b<i;++b)for(var E=0;E<f;++E)for(var _=Math.floor(E/r),w=E%r,I=0;I<h;++I)for(var R=Math.floor(I/r),C=(w*r+I%r)*p,O=0;O<p;++O){var D=O+C+c*(R+u*(_+o*b));g[y++]=m[D]}return br(g,[i,f,h,p])},n.prototype.broadcastedBinaryOp=function(t,r,a,i){var o=Je(t.shape,r.shape),u=We(o,a),c=this.readSync(t.dataId),f=this.readSync(r.dataId),h=Oo(t.shape,o),p=Oo(r.shape,o),m=u.values;if(h.length+p.length===0)for(var g=0;g<m.length;++g)m[g]=i(c[g%c.length],f[g%f.length]);else{var y=this.bufferSync(t),b=this.bufferSync(r),E=function(_){var w=u.indexToLoc(_),I=w.slice(-t.rank);h.forEach(function(D){return I[D]=0});var R=y.locToIndex(I),C=w.slice(-r.rank);p.forEach(function(D){return C[D]=0});var O=b.locToIndex(C);m[_]=i(c[R],f[O])};for(g=0;g<m.length;++g)E(g)}return u.toTensor()},n.prototype.broadcastedBinaryComplexOp=function(t,r,a){var i=Je(t.shape,r.shape),o=We(i,"float32"),u=We(i,"float32"),c=this.readSync(t.dataId),f=this.readSync(r.dataId),h=Oo(t.shape,i),p=Oo(r.shape,i),m=o.values,g=u.values;if(h.length+p.length===0)for(var y=0;y<m.length;y++){var b=y%c.length,E=y%f.length,_=a(c[2*b],c[2*b+1],f[2*E],f[2*E+1]);m[y]=_.real,g[y]=_.imag}else{var w=this.bufferSync(this.data.get(t.dataId).complexTensors.real),I=this.bufferSync(this.data.get(r.dataId).complexTensors.real),R=function(C){var O=o.indexToLoc(C),D=O.slice(-t.rank);h.forEach(function(V){return D[V]=0});var P=w.locToIndex(D),k=O.slice(-r.rank);p.forEach(function(V){return k[V]=0});var N=I.locToIndex(k),U=a(c[2*P],c[2*P+1],f[2*N],f[2*N+1]);m[C]=U.real,g[C]=U.imag};for(y=0;y<m.length;y++)R(y)}return this.complex(o.toTensor(),u.toTensor())},n.prototype.split=function(t,r,a){return rk(t,r,a)},n.prototype.dispose=function(){},n.prototype.floatPrecision=function(){return 32},n.prototype.epsilon=function(){return 1e-7},n.prototype.cropAndResize=function(t,r,a,i,o,u){for(var c=t.shape,f=c[0],h=c[1],p=c[2],m=c[3],g=r.shape[0],y=i[0],b=i[1],E=We([g,y,b,m],"float32"),_=this.readSync(r.dataId),w=this.readSync(a.dataId),I=this.readSync(t.dataId),R=t.strides,C=E.strides,O=0;O<g;O++){var D=4*O,P=_[D],k=_[D+1],N=_[D+2],U=_[D+3],V=w[O];if(!(V>=f))for(var ee=y>1?(N-P)*(h-1)/(y-1):0,re=b>1?(U-k)*(p-1)/(b-1):0,ne=0;ne<y;ne++){var z=y>1?P*(h-1)+ne*ee:.5*(P+N)*(h-1);if(z<0||z>h-1)for(var Z=0;Z<b;Z++)for(var $=0;$<m;$++){var oe=$+Z*C[2]+ne*C[1]+O*C[0];E.values[oe]=u}else if(o==="bilinear"){var L=Math.floor(z),Y=Math.ceil(z),Q=z-L;for(Z=0;Z<b;Z++)if((Le=b>1?k*(p-1)+Z*re:.5*(k+U)*(p-1))<0||Le>p-1)for($=0;$<m;$++)oe=$+Z*C[2]+ne*C[1]+O*C[0],E.values[oe]=u;else{var de=Math.floor(Le),he=Math.ceil(Le),Se=Le-de;for($=0;$<m;$++){var be=I[oe=$+de*R[2]+L*R[1]+V*R[0]],Pe=I[oe=$+he*R[2]+L*R[1]+V*R[0]],_e=I[oe=$+de*R[2]+Y*R[1]+V*R[0]],Ce=be+(Pe-be)*Se,Be=_e+(I[oe=$+he*R[2]+Y*R[1]+V*R[0]]-_e)*Se;oe=$+Z*C[2]+ne*C[1]+O*C[0],E.values[oe]=Ce+(Be-Ce)*Q}}}else for(Z=0;Z<b;++Z){var Le;if((Le=b>1?k*(p-1)+Z*re:.5*(k+U)*(p-1))<0||Le>p-1)for($=0;$<m;$++)oe=$+Z*C[2]+ne*C[1]+O*C[0],E.values[oe]=u;else{var qe=Math.round(Le),ge=Math.round(z);for($=0;$<m;$++){var ht=$+qe*R[2]+ge*R[1]+V*R[0],pt=$+Z*C[2]+ne*C[1]+O*C[0];E.values[pt]=I[ht]}}}}}return E.toTensor()},n.prototype.sparseToDense=function(t,r,a,i){var o=lm(0,t,a),u=o.sliceRank,c=o.numUpdates,f=o.sliceSize,h=o.strides,p=o.outputSize;return this.scatter(t,r,a,p,f,c,u,h,i,!1)},n.prototype.gatherND=function(t,r){var a=r.shape,i=a[a.length-1],o=YO(t,r),u=o[0],c=o[1],f=o[2],h=o[3];if(c===0)return Gn([],u,t.dtype);for(var p=new tf([c,f],t.dtype),m=this.readSync(r.dataId),g=this.readSync(t.dataId),y=0;y<c;y++){for(var b=[],E=0,_=0;_<i;_++){var w=m[y*i+_];E+=w*h[_],b.push(w)}if(E<0||E>=t.size/f)throw new Error("Invalid indices: "+b+" does not index into "+t.shape);for(var I=0;I<f;I++)p.values[y*f+I]=g[E*f+I]}return p.toTensor().reshape(u)},n.prototype.scatterND=function(t,r,a){var i=lm(0,t,a),o=i.sliceRank,u=i.numUpdates,c=i.sliceSize,f=i.strides,h=i.outputSize,p=Ee(0);return this.scatter(t,r,a,h,c,u,o,f,p,!0)},n.prototype.fill=function(t,r,a){var i=Jp(a=a||Sf(r),Ne(t));return i.fill(r),W.makeTensor(i,t,a,this)},n.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},n.prototype.zerosLike=function(t){var r=Jp(t.dtype,Ne(t.shape));return this.makeOutput(r,t.shape,t.dtype)},n.prototype.linspace=function(t,r,a){return tk(t,r,a)},n.prototype.scatter=function(t,r,a,i,o,u,c,f,h,p){var m=[i/o,o],g=this.readSync(t.dataId),y=this.readSync(r.dataId);if(i===0)return Gn([],a,r.dtype);var b=new tf(m,r.dtype);b.values.fill(this.readSync(h.dataId)[0]);for(var E=0;E<u;E++){for(var _=[],w=0,I=0;I<c;I++){var R=g[E*c+I];_.push(R),w+=R*f[I]}if(w<0||w>=i/o)throw new Error("Invalid indices: "+_+" does not index into "+a);for(var C=0;C<o;C++)p?b.values[w*o+C]+=y[E*o+C]:b.values[w*o+C]=r.rank===0?y[0]:y[E*o+C]}return b.toTensor().reshape(a)},n}(QO);W.registerBackend("cpu",function(){return new az},1);for(var s1=0,yI=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=e.attrs,a=n,i=a.boxes,o=a.scores,u=r,c=u.maxOutputSize,f=u.iouThreshold,h=u.scoreThreshold,p=u.softNmsSigma,m=t;me(i,"NonMaxSuppressionWithScore");var g=N2(m.data.get(i.dataId).values,m.data.get(o.dataId).values,c,f,h,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n.x,a=t;me(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),u=0;u<i.length;++u){var c=i[u];o[u]=c*c}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:af,backendName:"cpu",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n,a=r.a,i=r.b,o=t;me([a,i],af);var u=o.data.get(a.dataId).values,c=o.data.get(i.dataId).values,f=function(m,g,y,b,E,_){var w=Je(m,g),I=w.length,R=ri(w),C=ef(E,Ne(w)),O=m.length,D=g.length,P=ri(m),k=ri(g),N=Oo(m,w),U=Oo(g,w);if(N.length+U.length===0)for(var V=0;V<C.length;++V)C[V]=_(y[V%y.length],b[V%b.length]);else{var ee=function(re){var ne=p5(re,I,R),z=ne.slice(-O);N.forEach(function(L){return z[L]=0});var Z=Gw(z,O,P),$=ne.slice(-D);U.forEach(function(L){return $[L]=0});var oe=Gw($,D,k);C[re]=_(y[Z],b[oe])};for(V=0;V<C.length;++V)ee(V)}return[C,w]}(a.shape,i.shape,u,c,a.dtype,function(m,g){var y=m-g;return y*y}),h=f[0],p=f[1];return{dataId:o.write(h,p,a.dtype),shape:p,dtype:a.dtype}}}];s1<yI.length;s1++)RO(yI[s1]);var Vu,iz=function(e){this.variableNames=["A"];var n=Zn(),t=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+t+`.0);

        vec4 values = `+n.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},oz=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=Zn(),t=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+t+`.0);
            vec4 values = `+n.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+n.output+` = result;
      }
    `};for(var u1=0,bI=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=e.attrs,a=n.pixels,i=r.numChannels,o=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,u=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,c=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],f=c[0],h=c[1],p=[h,f],m=[h,f,i];(u||o)&&(Vu==null&&(Vu=document.createElement("canvas").getContext("2d")),Vu.canvas.width=f,Vu.canvas.height=h,Vu.drawImage(a,0,0,f,h),a=Vu.canvas);var g=t.makeTensorInfo(p,"int32");t.texData.get(g.dataId).usage=Fr.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(g.dataId),a);var y=le().getBool("WEBGL_PACK")?new oz(m):new iz(m),b=t.runWebGLProgram(y,[g],"int32");return t.disposeData(g.dataId),b}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=e.attrs;rm("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=n,i=a.boxes,o=a.scores,u=r,c=u.maxOutputSize,f=u.iouThreshold,h=u.scoreThreshold,p=u.softNmsSigma,m=t,g=N2(m.readSync(i.dataId),m.readSync(o.dataId),c,f,h,p);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n.x,a=t,i=new $e(r.shape,"return x * x;");return a.runWebGLProgram(i,[r],r.dtype)}},{kernelName:af,backendName:"webgl",kernelFunc:function(e){var n=e.inputs,t=e.backend,r=n,a=r.a,i=r.b,o=t,u=le().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mi("return (a - b) * (a - b);",a.shape,i.shape):new Kt("return (a - b) * (a - b);",a.shape,i.shape);return o.compileAndRun(u,[a,i])}}];u1<bI.length;u1++)RO(bI[u1]);for(var l1=0,SI=[{kernelName:"Square",gradFunc:function(e,n){var t=n[0];return{x:function(){return e.mul(t.toFloat().mul(2))}}}},{kernelName:af,gradFunc:function(e,n){var t=n[0],r=n[1],a=Ee(2);return{a:function(){return er(e,er(a,bn(t,r)))},b:function(){return er(e,er(a,bn(r,t)))}}}}];l1<SI.length;l1++)r5(SI[l1]);var sz=function(){function e(){}return e.prototype.fetch=function(n,t){return fetch(n,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(n,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+t);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)},e.prototype.decode=function(n,t){return new TextDecoder(t).decode(n)},e}();le().get("IS_BROWSER")&&le().setPlatform("browser",new sz);var c1,uz=function(){return require("node-fetch")},lz=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(n,t){return le().global.fetch!=null?le().global.fetch(n,t):(c1==null&&(c1=uz()),c1(n,t))},e.prototype.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6},e.prototype.encode=function(n,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(n)},e.prototype.decode=function(n,t){return n.length===0?"":new this.util.TextDecoder(t).decode(n)},e}();le().get("IS_NODE")&&le().setPlatform("node",new lz);var sy={float32:4,int32:4,uint16:2,uint8:1,bool:1},vm=4;function jk(e,n){for(var t={},r=0,a=function(u){var c=u.name,f=u.dtype,h=u.shape,p=Ne(h),m=void 0;if("quantization"in u){var g=u.quantization;if(g.dtype!=="uint8"&&g.dtype!=="uint16")throw new Error("Weight "+u.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var y=sy[g.dtype],b=e.slice(r,r+p*y),E=g.dtype==="uint8"?new Uint8Array(b):new Uint16Array(b);if(f==="float32")m=Float32Array.from(E,function(O){return O*g.scale+g.min});else{if(f!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+f);m=Int32Array.from(E,function(O){return Math.round(O*g.scale+g.min)})}r+=p*y}else if(f==="string"){var _=Ne(u.shape);m=[];for(var w=0;w<_;w++){var I=new Uint32Array(e.slice(r,r+vm))[0];r+=vm;var R=new Uint8Array(e.slice(r,r+I));m.push(R),r+=I}}else{var C=sy[f];if(b=e.slice(r,r+p*C),f==="float32")m=new Float32Array(b);else if(f==="int32")m=new Int32Array(b);else{if(f!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+f);m=new Uint8Array(b)}r+=p*C}t[c]=Gn(m,h,f)},i=0,o=n;i<o.length;i++)a(o[i]);return t}function cz(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var n=0,t=[];e.forEach(function(i){if(n+=i.byteLength,t.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var r=new Uint8Array(n),a=0;return t.forEach(function(i){r.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),r.buffer}var uy=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function EI(e){return uy?Buffer.byteLength(e):new Blob([e]).size}function Y2(e){var n=0;e.forEach(function(a){n+=a.byteLength});var t=new Uint8Array(n),r=0;return e.forEach(function(a){t.set(new Uint8Array(a),r),r+=a.byteLength}),t.buffer}function _I(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var n=e.split("/");return n[n.length-1]}function Cf(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:EI(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:EI(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var Vr=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(n){e.getInstance().saveRouters.push(n)},e.registerLoadRouter=function(n){e.getInstance().loadRouters.push(n)},e.getSaveHandlers=function(n){return e.getHandlers(n,"save")},e.getLoadHandlers=function(n,t){return e.getHandlers(n,"load",t)},e.getHandlers=function(n,t,r){var a=[];return(t==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(i){var o=i(n,r);o!==null&&a.push(o)}),a},e}(),Qu="://",Po=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(n,t){F(n!=null,function(){return"scheme must not be undefined or null."}),n.endsWith(Qu)&&(n=n.slice(0,n.indexOf(Qu))),F(n.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();F(r.managers[n]==null,function(){return"A model store manager is already registered for scheme '"+n+"'."}),r.managers[n]=t},e.getManager=function(n){var t=this.getInstance().managers[n];if(t==null)throw new Error("Cannot find model manager for scheme '"+n+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function bh(e){if(e.indexOf(Qu)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Po.getSchemes().join(","));return{scheme:e.split(Qu)[0],path:e.split(Qu)[1]}}function AI(e,n,t){return t===void 0&&(t=!1),Ie(this,void 0,void 0,function(){var r,a,i,o,u,c,f,h,p;return Re(this,function(m){switch(m.label){case 0:return F(e!==n,function(){return"Old path and new path are the same: '"+e+"'"}),F((r=Vr.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),F(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),a=r[0],F((i=Vr.getSaveHandlers(n)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+n+"."}),F(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+n+"."}),o=i[0],u=bh(e).scheme,c=bh(e).path,f=u===bh(e).scheme,[4,a.load()];case 1:return h=m.sent(),t&&f?[4,Po.getManager(u).removeModel(c)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[4,o.save(h)];case 4:return p=m.sent(),!t||f?[3,6]:[4,Po.getManager(u).removeModel(c)];case 5:m.sent(),m.label=6;case 6:return[2,p.modelArtifactsInfo]}})})}var As="models_store",ko="model_info_store";function Xk(){if(!le().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,n=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function ly(e){var n=e.result;n.createObjectStore(As,{keyPath:"modelPath"}),n.createObjectStore(ko,{keyPath:"modelPath"})}var Ju=function(){function e(n){if(this.indexedDB=Xk(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}return e.prototype.save=function(n){return Ie(this,void 0,void 0,function(){return Re(this,function(t){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,n)]})})},e.prototype.load=function(){return Ie(this,void 0,void 0,function(){return Re(this,function(n){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(n,t){var r=this;return new Promise(function(a,i){var o=r.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return ly(o)},o.onsuccess=function(){var u=o.result;if(t==null){var c=u.transaction(As,"readonly"),f=c.objectStore(As).get(r.modelPath);f.onsuccess=function(){if(f.result==null)return u.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(f.result.modelArtifacts)},f.onerror=function(b){return u.close(),i(f.error)},c.oncomplete=function(){return u.close()}}else{var h,p=Cf(t),m=u.transaction(ko,"readwrite"),g=m.objectStore(ko),y=g.put({modelPath:r.modelPath,modelArtifactsInfo:p});y.onsuccess=function(){var b=(h=u.transaction(As,"readwrite")).objectStore(As).put({modelPath:r.modelPath,modelArtifacts:t,modelArtifactsInfo:p});b.onsuccess=function(){return a({modelArtifactsInfo:p})},b.onerror=function(E){var _=(g=m.objectStore(ko)).delete(r.modelPath);_.onsuccess=function(){return u.close(),i(b.error)},_.onerror=function(w){return u.close(),i(b.error)}}},y.onerror=function(b){return u.close(),i(y.error)},m.oncomplete=function(){h==null?u.close():h.oncomplete=function(){return u.close()}}}},o.onerror=function(u){return i(o.error)}})},e.URL_SCHEME="indexeddb://",e}(),wI=function(e){return le().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ju.URL_SCHEME)?(n=e.slice(Ju.URL_SCHEME.length),new Ju(n)):null;var n};Vr.registerSaveRouter(wI),Vr.registerLoadRouter(wI);var fz=function(){function e(){this.indexedDB=Xk()}return e.prototype.listModels=function(){return Ie(this,void 0,void 0,function(){var n=this;return Re(this,function(t){return[2,new Promise(function(r,a){var i=n.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return ly(i)},i.onsuccess=function(){var o=i.result,u=o.transaction(ko,"readonly"),c=u.objectStore(ko).getAll();c.onsuccess=function(){for(var f={},h=0,p=c.result;h<p.length;h++){var m=p[h];f[m.modelPath]=m.modelArtifactsInfo}r(f)},c.onerror=function(f){return o.close(),a(c.error)},u.oncomplete=function(){return o.close()}},i.onerror=function(o){return a(i.error)}})]})})},e.prototype.removeModel=function(n){return Ie(this,void 0,void 0,function(){var t=this;return Re(this,function(r){var a;return n=(a=n).startsWith(Ju.URL_SCHEME)?a.slice(Ju.URL_SCHEME.length):a,[2,new Promise(function(i,o){var u=t.indexedDB.open("tensorflowjs",1);u.onupgradeneeded=function(){return ly(u)},u.onsuccess=function(){var c,f=u.result,h=f.transaction(ko,"readwrite"),p=h.objectStore(ko),m=p.get(n);m.onsuccess=function(){if(m.result==null)return f.close(),o(new Error("Cannot find model with path '"+n+"' in IndexedDB."));var g=p.delete(n),y=function(){var b=(c=f.transaction(As,"readwrite")).objectStore(As).delete(n);b.onsuccess=function(){return i(m.result.modelArtifactsInfo)},b.onerror=function(E){return o(m.error)}};g.onsuccess=y,g.onerror=function(b){return y(),f.close(),o(m.error)}},m.onerror=function(g){return f.close(),o(m.error)},h.oncomplete=function(){c==null?f.close():c.oncomplete=function(){return f.close()}}},u.onerror=function(c){return o(u.error)}})]})})},e}();if(le().getBool("IS_BROWSER"))try{Po.registerManager(Ju.URL_SCHEME,new fz)}catch{}var Bi="/",qu="tensorflowjs_models",Zk="info",dz="model_topology",hz="weight_specs",pz="weight_data",mz="model_metadata";function Qk(e){return{info:[qu,e,Zk].join(Bi),topology:[qu,e,dz].join(Bi),weightSpecs:[qu,e,hz].join(Bi),weightData:[qu,e,pz].join(Bi),modelMetadata:[qu,e,mz].join(Bi)}}function vz(e){var n=e.split(Bi);if(n.length<3)throw new Error("Invalid key format: "+e);return n.slice(1,n.length-1).join(Bi)}var el=function(){function e(n){if(!le().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=Qk(this.modelPath)}return e.prototype.save=function(n){return Ie(this,void 0,void 0,function(){var t,r,a;return Re(this,function(i){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(n.modelTopology),r=JSON.stringify(n.weightSpecs),a=Cf(n);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(o){if(uy)return Buffer.from(o).toString("base64");for(var u=new Uint8Array(o),c="",f=0,h=u.length;f<h;f++)c+=String.fromCharCode(u[f]);return btoa(c)}(n.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return Ie(this,void 0,void 0,function(){var n,t,r,a,i,o,u;return Re(this,function(c){if((n=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=a,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,t.userDefinedMetadata=o.userDefinedMetadata),(u=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(f){if(uy){var h=Buffer.from(f,"base64");return h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength)}for(var p=atob(f),m=new Uint8Array(p.length),g=0;g<p.length;++g)m.set([p.charCodeAt(g)],g);return m.buffer}(u),[2,t]})})},e.URL_SCHEME="localstorage://",e}(),II=function(e){return le().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(el.URL_SCHEME)?(n=e.slice(el.URL_SCHEME.length),new el(n)):null;var n};Vr.registerSaveRouter(II),Vr.registerLoadRouter(II);var gz=function(){function e(){F(le().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),F(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return Ie(this,void 0,void 0,function(){var n,t,r,a,i,o;return Re(this,function(u){for(n={},t=qu+Bi,r=Bi+Zk,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(t)&&i.endsWith(r)&&(o=vz(i),n[o]=JSON.parse(this.LS.getItem(i)));return[2,n]})})},e.prototype.removeModel=function(n){return Ie(this,void 0,void 0,function(){var t,r;return Re(this,function(a){var i;if(n=(i=n).startsWith(el.URL_SCHEME)?i.slice(el.URL_SCHEME.length):i,t=Qk(n),this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '"+n+"'");return r=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,r]})})},e}();if(le().getBool("IS_BROWSER"))try{Po.registerManager(el.URL_SCHEME,new gz)}catch{}var yz="model",bz=".json",Sz=".weights.bin";function RI(e){return new Promise(function(n){return setTimeout(n)}).then(e)}var f1=function(){function e(n){if(!le().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(e.URL_SCHEME)&&(n=n.slice(e.URL_SCHEME.length)),n!=null&&n.length!==0||(n=yz),this.modelTopologyFileName=n+bz,this.weightDataFileName=n+Sz}return e.prototype.save=function(n){return Ie(this,void 0,void 0,function(){var t,r,a,i,o,u;return Re(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([n.weightData],{type:"application/octet-stream"})),!(n.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],a={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,RI(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),n.weightData==null?[3,4]:((u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,u.href=t,[4,RI(function(){return u.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:Cf(n)}]}})})},e.URL_SCHEME="downloads://",e}(),Ez=function(){function e(n){if(n==null||n.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+n);this.files=n}return e.prototype.load=function(){return Ie(this,void 0,void 0,function(){var n,t,r=this;return Re(this,function(a){return n=this.files[0],t=this.files.slice(1),[2,new Promise(function(i,o){var u=new FileReader;u.onload=function(c){var f=JSON.parse(c.target.result),h=f.modelTopology;if(h!=null){t.length===0&&i({modelTopology:h});var p=f.weightsManifest;if(p!=null){var m;try{m=r.checkManifestAndWeightFiles(p,t)}catch(E){return void o(E)}var g=[],y=[],b=[];p.forEach(function(E){E.paths.forEach(function(_){y.push(_),b.push(null)}),g.push.apply(g,E.weights)}),p.forEach(function(E){E.paths.forEach(function(_){var w=new FileReader;w.onload=function(I){var R=I.target.result,C=y.indexOf(_);b[C]=R,b.indexOf(null)===-1&&i({modelTopology:h,weightSpecs:g,weightData:Y2(b),format:f.format,generatedBy:f.generatedBy,convertedBy:f.convertedBy,userDefinedMetadata:f.userDefinedMetadata})},w.onerror=function(I){return o("Failed to weights data from file of path '"+_+"'.")},w.readAsArrayBuffer(m[_])})})}else o(new Error("weightManifest field is missing from file "+n.name))}else o(new Error("modelTopology field is missing from file "+n.name))},u.onerror=function(c){return o("Failed to read model topology and weights manifest JSON from file '"+n.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},u.readAsText(n)})]})})},e.prototype.checkManifestAndWeightFiles=function(n,t){for(var r=[],a=t.map(function(c){return _I(c.name)}),i={},o=0,u=n;o<u.length;o++)u[o].paths.forEach(function(c){var f=_I(c);if(r.indexOf(f)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+f+"'");if(r.push(f),a.indexOf(f)===-1)throw new Error("Weight file with basename '"+f+"' is not provided.");i[c]=t[a.indexOf(f)]});if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+t.length+").");return i},e}();function CI(e,n,t,r){(function(i){F(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(e),function(i,o){F(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),F(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),F(o>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o})}(t=t??0,r=r??1);var a=0;return Promise.all(e.map(function(i){return i.then(function(o){var u=t+ ++a/e.length*(r-t);return n(u),o}),i}))}function Jk(e,n){return Ie(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,h;return Re(this,function(p){switch(p.label){case 0:return n==null&&(n={}),t=n.fetchFunc==null?le().platform.fetch:n.fetchFunc,r=e.map(function(m){return t(m,n.requestInit,{isBinary:!0})}),a=0,i=.5,n.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return o=p.sent(),[3,4];case 2:return[4,CI(r,n.onProgress,a,i)];case 3:o=p.sent(),p.label=4;case 4:return u=o.map(function(m){return m.arrayBuffer()}),c=.5,f=1,n.onProgress!=null?[3,6]:[4,Promise.all(u)];case 5:return h=p.sent(),[3,8];case 6:return[4,CI(u,n.onProgress,c,f)];case 7:h=p.sent(),p.label=8;case 8:return[2,h]}})})}function NI(e){var n=this;return function(t,r,a){return r===void 0&&(r=""),Ie(n,void 0,void 0,function(){var i,o,u,c,f,h,p,m,g,y;return Re(this,function(b){switch(b.label){case 0:if(i=t.map(function(){return!1}),o={},u=a!=null?a.map(function(){return!1}):[],c=[],t.forEach(function(E,_){var w=0;E.weights.forEach(function(I){var R="quantization"in I?I.quantization.dtype:I.dtype,C=sy[R]*Ne(I.shape),O=function(){i[_]=!0,o[_]==null&&(o[_]=[]),o[_].push({manifestEntry:I,groupOffset:w,sizeBytes:C})};a!=null?a.forEach(function(D,P){D===I.name&&(O(),u[P]=!0)}):O(),c.push(I.name),w+=C})}),!u.every(function(E){return E}))throw f=a.filter(function(E,_){return!u[_]}),new Error("Could not find weights in manifest with names: "+f.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return h=i.reduce(function(E,_,w){return _&&E.push(w),E},[]),p=[],h.forEach(function(E){t[E].paths.forEach(function(_){var w=r+(r.endsWith("/")?"":"/")+_;p.push(w)})}),[4,e(p)];case 1:return m=b.sent(),g={},y=0,h.forEach(function(E){for(var _=t[E].paths.length,w=0,I=0;I<_;I++)w+=m[y+I].byteLength;for(var R=new ArrayBuffer(w),C=new Uint8Array(R),O=0,D=0;D<_;D++){var P=new Uint8Array(m[y+D]);C.set(P,O),O+=P.byteLength}o[E].forEach(function(k){var N=jk(R.slice(k.groupOffset,k.groupOffset+k.sizeBytes),[k.manifestEntry]);for(var U in N)g[U]=N[U]}),y+=_}),[2,g]}})})}}Vr.registerSaveRouter(function(e){return le().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(f1.URL_SCHEME)?function(n){return n===void 0&&(n="model"),new f1(n)}(e.slice(f1.URL_SCHEME.length)):null});var ex=function(){function e(n,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,t.fetchFunc!=null?(F(typeof t.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=le().platform.fetch,F(n!=null&&n.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(n)&&F(n.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+n.length+")."}),this.path=n,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(n){return Ie(this,void 0,void 0,function(){var t,r,a,i;return Re(this,function(o){switch(o.label){case 0:if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],a={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,userDefinedMetadata:n.userDefinedMetadata,weightsManifest:r},t.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),n.weightData!=null&&t.body.append("model.weights.bin",new Blob([n.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:Cf(n),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return Ie(this,void 0,void 0,function(){var n,t,r,a,i,o,u,c,f,h,p,m;return Re(this,function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(n=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+n.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,n.json()];case 3:return t=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=t.modelTopology,i=t.weightsManifest,o=t.generatedBy,u=t.convertedBy,c=t.format,f=t.userDefinedMetadata,a==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:m=g.sent(),h=m[0],p=m[1],g.label=7;case 7:return[2,{modelTopology:a,weightSpecs:h,weightData:p,userDefinedMetadata:f,generatedBy:o,convertedBy:u,format:c}]}})})},e.prototype.loadWeights=function(n){return Ie(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,h,p,m;return Re(this,function(g){switch(g.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,r=function(y){var b=y.lastIndexOf("/"),E=y.lastIndexOf("?"),_=y.substring(0,b),w=E>b?y.substring(E):"";return[_+"/",w]}(t),a=r[0],i=r[1],o=this.weightPathPrefix||a,u=[],c=0,f=n;c<f.length;c++)h=f[c],u.push.apply(u,h.weights);return p=[],n.forEach(function(y){y.paths.forEach(function(b){p.push(o+b+i)})}),[4,Jk(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return m=g.sent(),[2,[u,Y2(m)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function cy(e){return e.match(ex.URL_SCHEME_REGEX)!=null}var TI=function(e,n){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(t){return cy(t)}):cy(e))?fy(e,{onProgress:n}):null};function fy(e,n){return new ex(e,n)}Vr.registerSaveRouter(TI),Vr.registerLoadRouter(TI);var d1=function(){function e(n){this.modelArtifacts=n}return e.prototype.load=function(){return Ie(this,void 0,void 0,function(){return Re(this,function(n){return[2,this.modelArtifacts]})})},e}(),_z=function(){function e(n){this.saveHandler=n}return e.prototype.save=function(n){return Ie(this,void 0,void 0,function(){return Re(this,function(t){return[2,this.saveHandler(n)]})})},e}(),tx=Object.freeze({browserFiles:function(e){return new Ez(e)},browserHTTPRequest:function(e,n){return fy(e,n)},concatenateArrayBuffers:Y2,decodeWeights:jk,encodeWeights:function(e,n){return Ie(this,void 0,void 0,function(){var t,r,a,i,o,u=this;return Re(this,function(c){switch(c.label){case 0:for(t=[],r=[],a=Array.isArray(e)?e.map(function(f){return f.name}):Object.keys(e),i=function(f){var h=a[f],p=Array.isArray(e)?e[f].tensor:e[h];if(p.dtype!=="float32"&&p.dtype!=="int32"&&p.dtype!=="bool"&&p.dtype!=="string")throw new Error("Unsupported dtype in weight '"+h+"': "+p.dtype);var m={name:h,shape:p.shape,dtype:p.dtype};if(p.dtype==="string"){var g=new Promise(function(y){return Ie(u,void 0,void 0,function(){var b,E,_,w,I,R,C;return Re(this,function(O){switch(O.label){case 0:return[4,p.bytes()];case 1:for(b=O.sent(),E=b.reduce(function(D,P){return D+P.length},0)+vm*b.length,_=new Uint8Array(E),w=0,I=0;I<b.length;I++)R=b[I],C=new Uint8Array(new Uint32Array([R.length]).buffer),_.set(C,w),w+=vm,_.set(R,w),w+=R.length;return y(_),[2]}})})});r.push(g)}else r.push(p.data());n!=null&&(m.group=n),t.push(m)},o=0;o<a.length;++o)i(o);return[4,Promise.all(r)];case 1:return[2,{data:cz(c.sent()),specs:t}]}})})},fromMemory:function(e,n,t,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new d1(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new d1({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new d1({modelTopology:e,weightSpecs:n,weightData:t,trainingConfig:r}))},getLoadHandlers:function(e,n){return Vr.getLoadHandlers(e,n)},getModelArtifactsInfoForJSON:Cf,getSaveHandlers:function(e){return Vr.getSaveHandlers(e)},http:fy,isHTTPScheme:cy,loadWeights:function(e,n,t,r){return n===void 0&&(n=""),Ie(this,void 0,void 0,function(){return Re(this,function(a){return[2,NI(function(i){return Jk(i,{requestInit:r})})(e,n,t)]})})},registerLoadRouter:function(e){return Vr.registerLoadRouter(e)},registerSaveRouter:function(e){return Vr.registerSaveRouter(e)},weightsLoaderFactory:NI,withSaveHandler:function(e){return new _z(e)},copyModel:function(e,n){return Ie(this,void 0,void 0,function(){return Re(this,function(t){return[2,AI(e,n,!1)]})})},listModels:function(){return Ie(this,void 0,void 0,function(){var e,n,t,r,a,i,o;return Re(this,function(u){switch(u.label){case 0:e=Po.getSchemes(),n={},t=0,r=e,u.label=1;case 1:return t<r.length?(a=r[t],[4,Po.getManager(a).listModels()]):[3,4];case 2:for(o in i=u.sent())n[a+Qu+o]=i[o];u.label=3;case 3:return t++,[3,1];case 4:return[2,n]}})})},moveModel:function(e,n){return Ie(this,void 0,void 0,function(){return Re(this,function(t){return[2,AI(e,n,!0)]})})},removeModel:function(e){return Ie(this,void 0,void 0,function(){var n;return Re(this,function(t){return n=bh(e),[2,Po.getManager(n.scheme).removeModel(n.path)]})})}}),Gu;H({confusionMatrix_:function(e,n,t){var r=M(e,"labels","confusionMatrix"),a=M(n,"predictions","confusionMatrix");F(t==null||t>0&&Number.isInteger(t),function(){return"If provided, numClasses must be a positive integer, but got "+t}),F(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),F(a.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+a.rank}),F(r.shape[0]===a.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."}),F(t>0&&Number.isInteger(t),function(){return"numClasses is required to be a positive integer, but got "+t});var i=ny(r.asType("int32"),t),o=ny(a.asType("int32"),t);return i.transpose().matMul(o).asType("int32")}});var Az=H({fromPixels_:function(e,n){if(n===void 0&&(n=3),n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var t=!1,r=!1,a=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(IO("FromPixels",W.backendName)!=null)return W.runKernel("FromPixels",{pixels:e},{numChannels:n});var u,c,f=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],h=f[0],p=f[1];if(o?u=e.getContext("2d").getImageData(0,0,h,p).data:r||t?u=e.data:(i||a)&&(Gu==null&&(Gu=document.createElement("canvas").getContext("2d")),Gu.canvas.width=h,Gu.canvas.height=p,Gu.drawImage(e,0,0,h,p),u=Gu.getImageData(0,0,h,p).data),n===4)c=new Int32Array(u);else{var m=h*p;c=new Int32Array(m*n);for(var g=0;g<m;g++)for(var y=0;y<n;++y)c[g*n+y]=u[4*g+y]}return _2(c,[p,h,n],"int32")}}),$2=Object.freeze({toPixels:function(e,n){return Ie(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,h,p,m,g,y,b,E,_,w,I,R,C,O,D,P;return Re(this,function(k){switch(k.label){case 0:if(t=M(e,"img","toPixels"),e instanceof Ut||(t=t.toInt()),t.rank!==2&&t.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+t.rank+".");if(r=t.shape.slice(0,2),a=r[0],i=r[1],(o=t.rank===2?1:t.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,t.data()];case 1:return u=k.sent(),c=t.min(),f=t.max(),[4,Promise.all([c.data(),f.data()])];case 2:if(h=k.sent(),p=h[0],m=h[1],g=p[0],y=m[0],c.dispose(),f.dispose(),t.dtype==="float32"){if(g<0||y>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+y+"].")}else{if(t.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+t.dtype+". Please use float32 or int32 tensors.");if(g<0||y>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+y+"].")}for(b=t.dtype==="float32"?255:1,E=new Uint8ClampedArray(i*a*4),_=0;_<a*i;++_)w=void 0,I=void 0,R=void 0,C=void 0,o===1?(w=u[_]*b,I=u[_]*b,R=u[_]*b,C=255):o===3?(w=u[3*_]*b,I=u[3*_+1]*b,R=u[3*_+2]*b,C=255):o===4&&(w=u[4*_]*b,I=u[4*_+1]*b,R=u[4*_+2]*b,C=u[4*_+3]*b),E[(O=4*_)+0]=Math.round(w),E[O+1]=Math.round(I),E[O+2]=Math.round(R),E[O+3]=Math.round(C);return n!=null&&(n.width=i,n.height=a,D=n.getContext("2d"),P=new ImageData(E,i,a),D.putImageData(P,0,0)),t!==e&&t.dispose(),[2,E]}})})},fromPixels:Az}),wz=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(n,t){return new n(t)},e}(),Iz=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(n){e.getMap().classNameMap[n.className]=[n,n.fromConfig]},e}();function js(e){F(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),F(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),F(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),Iz.register(e)}var Xs=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return Da(n,e),n.prototype.minimize=function(t,r,a){r===void 0&&(r=!1);var i=this.computeGradients(t,a),o=i.value,u=i.grads;if(a!=null){var c=a.map(function(f){return{name:f.name,tensor:u[f.name]}});this.applyGradients(c)}else this.applyGradients(u);return _r(u),r?o:(o.dispose(),null)},Object.defineProperty(n.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),n.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},n.prototype.computeGradients=function(t,r){return MV(t,r)},n.prototype.dispose=function(){this.iterations_!=null&&_r(this.iterations_)},n.prototype.saveIterations=function(){return Ie(this,void 0,void 0,function(){return Re(this,function(t){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Ee(this.iterations_,"int32")}]})})},n.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){return Re(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},n.prototype.setWeights=function(t){return Ie(this,void 0,void 0,function(){return Re(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},n.prototype.extractIterations=function(t){return Ie(this,void 0,void 0,function(){var r;return Re(this,function(a){switch(a.label){case 0:return r=this,[4,t[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,t.slice(1)]}})})},n}(wz);Object.defineProperty(Xs,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var Rz=function(e){function n(t,r,a){a===void 0&&(a=null);var i=e.call(this)||this;return i.learningRate=t,i.rho=r,i.epsilon=a,i.accumulatedGrads=[],i.accumulatedUpdates=[],a==null&&(i.epsilon=W.backend.epsilon()),i}return Da(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accum_grad",variable:Ae(function(){return rt(o).variable(!1)})}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:a+"/accum_var",variable:Ae(function(){return rt(o).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedGrads[i].variable,f=r.accumulatedUpdates[i].variable;Ae(function(){var h=c.mul(r.rho).add(u.square().mul(1-r.rho)),p=f.add(r.epsilon).sqrt().div(c.add(r.epsilon).sqrt()).mul(u),m=f.mul(r.rho).add(p.square().mul(1-r.rho));c.assign(h),f.assign(m);var g=p.mul(-r.learningRate).add(o);o.assign(g)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedUpdates!=null&&(_r(this.accumulatedGrads.map(function(t){return t.variable})),_r(this.accumulatedUpdates.map(function(t){return t.variable})))},n.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){var t;return Re(this,function(r){switch(r.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},n.prototype.setWeights=function(t){return Ie(this,void 0,void 0,function(){var r;return Re(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=t.length/2,this.accumulatedGrads=t.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},n.fromConfig=function(t,r){return new t(r.learningRate,r.rho,r.epsilon)},n.className="Adadelta",n}(Xs);js(Rz);var Cz=function(e){function n(t,r){r===void 0&&(r=.1);var a=e.call(this)||this;return a.learningRate=t,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return Da(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:a+"/accumulator",variable:Ae(function(){return ai(o.shape,r.initialAccumulatorValue).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedGrads[i].variable;Ae(function(){var f=c.add(u.square());c.assign(f);var h=u.div(f.add(W.backend.epsilon()).sqrt()).mul(-r.learningRate).add(o);o.assign(h)})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedGrads!=null&&_r(this.accumulatedGrads.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){return Re(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(t){return Ie(this,void 0,void 0,function(){return Re(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulatedGrads=t.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},n.fromConfig=function(t,r){return new t(r.learningRate,r.initialAccumulatorValue)},n.className="Adagrad",n}(Xs);js(Cz);var Nz=function(e){function n(t,r,a,i){i===void 0&&(i=null);var o=e.call(this)||this;return o.learningRate=t,o.beta1=r,o.beta2=a,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Ae(function(){o.accBeta1=Ee(r).variable(),o.accBeta2=Ee(a).variable()}),i==null&&(o.epsilon=W.backend.epsilon()),o}return Da(n,e),n.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);Ae(function(){var i=bn(1,r.accBeta1),o=bn(1,r.accBeta2);a.forEach(function(u,c){var f=W.registeredVariables[u];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:u+"/m",variable:Ae(function(){return rt(f).variable(!1)})}),r.accumulatedSecondMoment[c]==null&&(r.accumulatedSecondMoment[c]={originalName:u+"/v",variable:Ae(function(){return rt(f).variable(!1)})});var h=Array.isArray(t)?t[c].tensor:t[u];if(h!=null){var p=r.accumulatedFirstMoment[c].variable,m=r.accumulatedSecondMoment[c].variable,g=p.mul(r.beta1).add(h.mul(1-r.beta1)),y=m.mul(r.beta2).add(h.square().mul(1-r.beta2)),b=g.div(i),E=y.div(o);p.assign(g),m.assign(y);var _=b.div(E.sqrt().add(r.epsilon)).mul(-r.learningRate).add(f);f.assign(_)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&_r(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedSecondMoment!=null&&_r(this.accumulatedSecondMoment.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){var t;return Re(this,function(r){switch(r.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},n.prototype.setWeights=function(t){return Ie(this,void 0,void 0,function(){var r,a=this;return Re(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(t)];case 1:return t=i.sent(),Ae(function(){a.accBeta1.assign(pm(a.beta1,a.iterations_+1)),a.accBeta2.assign(pm(a.beta2,a.iterations_+1))}),r=t.length/2,this.accumulatedFirstMoment=t.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},n.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon)},n.className="Adam",n}(Xs);js(Nz);var Tz=function(e){function n(t,r,a,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var u=e.call(this)||this;return u.learningRate=t,u.beta1=r,u.beta2=a,u.epsilon=i,u.decay=o,u.accumulatedFirstMoment=[],u.accumulatedWeightedInfNorm=[],Ae(function(){u.iteration=Ee(0).variable(),u.accBeta1=Ee(r).variable()}),i==null&&(u.epsilon=W.backend.epsilon()),u}return Da(n,e),n.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map(function(i){return i.name}):Object.keys(t);Ae(function(){var i=bn(1,r.accBeta1),o=Ca(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach(function(u,c){var f=W.registeredVariables[u];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:u+"/m",variable:rt(f).variable(!1)}),r.accumulatedWeightedInfNorm[c]==null&&(r.accumulatedWeightedInfNorm[c]={originalName:u+"/v",variable:rt(f).variable(!1)});var h=Array.isArray(t)?t[c].tensor:t[u];if(h!=null){var p=r.accumulatedFirstMoment[c].variable,m=r.accumulatedWeightedInfNorm[c].variable,g=p.mul(r.beta1).add(h.mul(1-r.beta1)),y=m.mul(r.beta2),b=h.abs(),E=y.maximum(b);p.assign(g),m.assign(E);var _=o.div(i).mul(g.div(E.add(r.epsilon))).add(f);f.assign(_)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},n.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&_r(this.accumulatedFirstMoment.map(function(t){return t.variable})),this.accumulatedWeightedInfNorm!=null&&_r(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){return Re(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},n.prototype.setWeights=function(t){return Ie(this,void 0,void 0,function(){return Re(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},n.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},n.className="Adamax",n}(Xs);js(Tz);var nx=function(e){function n(t){var r=e.call(this)||this;return r.learningRate=t,r.setLearningRate(t),r}return Da(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=Array.isArray(t)?t[i].tensor:t[a];if(o!=null){var u=W.registeredVariables[a];Ae(function(){var c=r.c.mul(o).add(u);u.assign(c)})}}),this.incrementIterations()},n.prototype.setLearningRate=function(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=j5(Ee(-t))},n.prototype.dispose=function(){this.c.dispose()},n.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){return Re(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},n.prototype.setWeights=function(t){return Ie(this,void 0,void 0,function(){return Re(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:if((t=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate}},n.fromConfig=function(t,r){return new t(r.learningRate)},n.className="SGD",n}(Xs);js(nx);var Oz=function(e){function n(t,r,a){a===void 0&&(a=!1);var i=e.call(this,t)||this;return i.learningRate=t,i.momentum=r,i.useNesterov=a,i.accumulations=[],i.m=Ee(i.momentum),i}return Da(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulations[i]==null&&(r.accumulations[i]={originalName:a+"/momentum",variable:Ae(function(){return rt(o).variable(!1)})});var u=r.accumulations[i].variable,c=Array.isArray(t)?t[i].tensor:t[a];c!=null&&Ae(function(){var f,h=r.m.mul(u).add(c);f=r.useNesterov?r.c.mul(c.add(h.mul(r.m))).add(o):r.c.mul(h).add(o),u.assign(h),o.assign(f)})}),this.incrementIterations()},n.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&_r(this.accumulations.map(function(t){return t.variable}))},n.prototype.setMomentum=function(t){this.momentum=t},n.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){return Re(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},n.prototype.setWeights=function(t){return Ie(this,void 0,void 0,function(){return Re(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulations=t.map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},n.fromConfig=function(t,r){return new t(r.learningRate,r.momentum,r.useNesterov)},n.className="Momentum",n}(nx);js(Oz);var kz=function(e){function n(t,r,a,i,o){r===void 0&&(r=.9),a===void 0&&(a=0),i===void 0&&(i=null),o===void 0&&(o=!1);var u=e.call(this)||this;if(u.learningRate=t,u.decay=r,u.momentum=a,u.epsilon=i,u.accumulatedMeanSquares=[],u.accumulatedMoments=[],u.accumulatedMeanGrads=[],u.centered=o,i==null&&(u.epsilon=W.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return u}return Da(n,e),n.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map(function(a){return a.name}):Object.keys(t)).forEach(function(a,i){var o=W.registeredVariables[a];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:a+"/rms",variable:Ae(function(){return rt(o).variable(!1)})}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:a+"/momentum",variable:Ae(function(){return rt(o).variable(!1)})}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:a+"/mg",variable:Ae(function(){return rt(o).variable(!1)})});var u=Array.isArray(t)?t[i].tensor:t[a];if(u!=null){var c=r.accumulatedMeanSquares[i].variable,f=r.accumulatedMoments[i].variable;Ae(function(){var h=c.mul(r.decay).add(u.square().mul(1-r.decay));if(r.centered){var p=r.accumulatedMeanGrads[i].variable,m=p.mul(r.decay).add(u.mul(1-r.decay)),g=f.mul(r.momentum).add(u.mul(r.learningRate).div(h.sub(m.square().add(r.epsilon)).sqrt()));c.assign(h),p.assign(m),f.assign(g);var y=o.sub(g);o.assign(y)}else{var b=c.mul(r.decay).add(u.square().mul(1-r.decay));g=f.mul(r.momentum).add(u.mul(r.learningRate).div(b.add(r.epsilon).sqrt())),c.assign(b),f.assign(g),y=o.sub(g),o.assign(y)}})}}),this.incrementIterations()},n.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&_r(this.accumulatedMeanSquares.map(function(t){return t.variable})),this.accumulatedMeanGrads!=null&&this.centered&&_r(this.accumulatedMeanGrads.map(function(t){return t.variable})),this.accumulatedMoments!=null&&_r(this.accumulatedMoments.map(function(t){return t.variable}))},n.prototype.getWeights=function(){return Ie(this,void 0,void 0,function(){var t;return Re(this,function(r){switch(r.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map(function(a){return{name:a.originalName,tensor:a.variable}}))]}})})},n.prototype.setWeights=function(t){return Ie(this,void 0,void 0,function(){var r;return Re(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*r,3*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},n.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},n.fromConfig=function(t,r){return new t(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},n.className="RMSProp",n}(Xs);js(kz);Ut.prototype.squaredDifference=function(e){return gk(this,e)},se=rz;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dy=function(e,n){return dy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])},dy(e,n)};function He(e,n){dy(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var Xn=function(){return Xn=Object.assign||function(n){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Xn.apply(this,arguments)};function Oe(e,n,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function u(h){try{f(r.next(h))}catch(p){o(p)}}function c(h){try{f(r.throw(h))}catch(p){o(p)}}function f(h){h.done?i(h.value):a(h.value).then(u,c)}f((r=r.apply(e,[])).next())})}function ke(e,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=n.call(e,t)}catch(h){f=[6,h],a=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Gc(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;for(var r=Array(e),a=0,n=0;n<t;n++)for(var i=arguments[n],o=0,u=i.length;o<u;o++,a++)r[a]=i[o];return r}var tl=function(){function e(n,t){if(!Rs(n)||!Rs(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:n,height:t}));this._width=n,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function nv(e,n){return e instanceof Ut&&e.shape.length===n}function xz(e){return nv(e,2)}function rv(e){return nv(e,3)}function Mo(e){return nv(e,4)}function Dz(e){return e%1!==0}function OI(e){return e%2===0}function Pz(e,n){n===void 0&&(n=2);var t=Math.pow(10,n);return Math.floor(e*t)/t}function kI(e){return e&&e.width&&e.height}function Mz(e,n){var t=e.width,r=e.height,a=n/Math.max(r,t);return new tl(Math.round(t*a),Math.round(r*a))}function j2(e){return e.reduce(function(n,t){return n.add(t)},new dt(0,0)).div(new dt(e.length,e.length))}function of(e,n,t){return Array(e).fill(0).map(function(r,a){return n+a*t})}function Rs(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function xI(e){return Rs(e)&&0<=e&&e<=1}var dt=function(){function e(n,t){this._x=n,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(n){return new e(this.x+n.x,this.y+n.y)},e.prototype.sub=function(n){return new e(this.x-n.x,this.y-n.y)},e.prototype.mul=function(n){return new e(this.x*n.x,this.y*n.y)},e.prototype.div=function(n){return new e(this.x/n.x,this.y/n.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),Go=function(){function e(n,t){t===void 0&&(t=!0);var r=n||{},a=[r.left,r.top,r.right,r.bottom].every(Rs),i=[r.x,r.y,r.width,r.height].every(Rs);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var o=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],u=o[0],c=o[1],f=o[2],h=o[3];e.assertIsValidBox({x:u,y:c,width:f,height:h},"Box.constructor",t),this._x=u,this._y=c,this._width=f,this._height=h}return e.isRect=function(n){return!!n&&[n.x,n.y,n.width,n.height].every(Rs)},e.assertIsValidBox=function(n,t,r){if(r===void 0&&(r=!1),!e.isRect(n))throw new Error(t+" - invalid box: "+JSON.stringify(n)+", expected object with properties x, y, width, height");if(!r&&(n.width<0||n.height<0))throw new Error(t+" - width ("+n.width+") and height ("+n.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new dt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new dt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new dt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new dt(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var n=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),t=n[0],r=n[1],a=n[2],i=n[3];return new e({x:t,y:r,width:a,height:i})},e.prototype.floor=function(){var n=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),t=n[0],r=n[1],a=n[2],i=n[3];return new e({x:t,y:r,width:a,height:i})},e.prototype.toSquare=function(){var n=this,t=n.x,r=n.y,a=n.width,i=n.height,o=Math.abs(a-i);return a<i&&(t-=o/2,a+=o),i<a&&(r-=o/2,i+=o),new e({x:t,y:r,width:a,height:i})},e.prototype.rescale=function(n){var t=kI(n)?n.width:n,r=kI(n)?n.height:n;return new e({x:this.x*t,y:this.y*r,width:this.width*t,height:this.height*r})},e.prototype.pad=function(n,t){var r=[this.x-n/2,this.y-t/2,this.width+n,this.height+t],a=r[0],i=r[1],o=r[2],u=r[3];return new e({x:a,y:i,width:o,height:u})},e.prototype.clipAtImageBorders=function(n,t){var r=this,a=r.x,i=r.y,o=r.right,u=r.bottom,c=Math.max(a,0),f=Math.max(i,0),h=o-c,p=u-f,m=Math.min(h,n-c),g=Math.min(p,t-f);return new e({x:c,y:f,width:m,height:g}).floor()},e.prototype.shift=function(n,t){var r=this,a=r.width,i=r.height,o=this.x+n,u=this.y+t;return new e({x:o,y:u,width:a,height:i})},e.prototype.padAtBorders=function(n,t){var r=this.width+1,a=this.height+1,i=1,o=1,u=r,c=a,f=this.left,h=this.top,p=this.right,m=this.bottom;return p>t&&(u=-p+t+r,p=t),m>n&&(c=-m+n+a,m=n),f<1&&(c=2-f,f=1),h<1&&(c=2-h,h=1),{dy:o,edy:c,dx:i,edx:u,y:h,ey:m,x:f,ex:p,w:r,h:a}},e.prototype.calibrate=function(n){return new e({left:this.left+n.left*this.width,top:this.top+n.top*this.height,right:this.right+n.right*this.width,bottom:this.bottom+n.bottom*this.height}).toSquare().round()},e}(),av=function(e){He(n,e);function n(t,r,a,i,o){return o===void 0&&(o=!1),e.call(this,{left:t,top:r,right:a,bottom:i},o)||this}return n}(Go),rx=function(){function e(n,t,r,a,i){this._imageDims=new tl(i.width,i.height),this._score=n,this._classScore=t,this._className=r,this._box=new Go(a).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new Go(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(n,t){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:n,height:t})},e}(),di=function(e){He(n,e);function n(t,r,a){return e.call(this,t,t,"",r,a)||this}return n.prototype.forSize=function(t,r){var a=e.prototype.forSize.call(this,t,r),i=a.score,o=a.relativeBox,u=a.imageDims;return new n(i,o,u)},n}(rx);function Lz(e,n,t){t===void 0&&(t=!0);var r=Math.max(0,Math.min(e.right,n.right)-Math.max(e.left,n.left)),a=Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),i=r*a;return t?i/(e.area+n.area-i):i/Math.min(e.area,n.area)}function Bz(e){var n=e.map(function(u){return u.x}),t=e.map(function(u){return u.y}),r=n.reduce(function(u,c){return c<u?c:u},1/0),a=t.reduce(function(u,c){return c<u?c:u},1/0),i=n.reduce(function(u,c){return u<c?c:u},0),o=t.reduce(function(u,c){return u<c?c:u},0);return new av(r,a,i,o)}function sf(e,n,t,r){r===void 0&&(r=!0);for(var a=n.map(function(u,c){return{score:u,boxIndex:c}}).sort(function(u,c){return u.score-c.score}).map(function(u){return u.boxIndex}),i=[],o=function(){var u=a.pop();i.push(u);for(var c=a,f=[],h=0;h<c.length;h++){var p=c[h],m=e[u],g=e[p];f.push(Lz(m,g,r))}a=a.filter(function(y,b){return f[b]<=t})};a.length>0;)o();return i}function Nf(e,n){return Ae(function(){var t=n[0],r=n[1],a=n[2],i=ai(Gc(e.shape.slice(0,3),[1]),t),o=ai(Gc(e.shape.slice(0,3),[1]),r),u=ai(Gc(e.shape.slice(0,3),[1]),a),c=mn([i,o,u],3);return bn(e,c)})}function Uz(e,n){return n===void 0&&(n=!1),Ae(function(){var t=e.shape.slice(1),r=t[0],a=t[1];if(r===a)return e;var i=Math.abs(r-a),o=Math.round(i*(n?.5:1)),u=r>a?2:1,c=function(g){var y=e.shape.slice();return y[u]=g,ai(y,0)},f=c(o),h=i-f.shape[u],p=n&&h?c(h):null,m=[p,e,f].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return mn(m,u)})}function h1(e){return 1/(1+Math.exp(-e))}var X2=function(e){He(n,e);function n(t,r,a,i,o){return o===void 0&&(o=!1),e.call(this,{x:t,y:r,width:a,height:i},o)||this}return n}(Go),Fz=.5,Vz=.43,Gz=.45,gm=function(){function e(n,t,r){r===void 0&&(r=new dt(0,0));var a=t.width,i=t.height;this._imgDims=new tl(a,i),this._shift=r,this._positions=n.map(function(o){return o.mul(new dt(a,i)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new dt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var n=this;return this._positions.map(function(t){return t.sub(n._shift).div(new dt(n.imageWidth,n.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(n,t){return new this.constructor(this.relativePositions,{width:n,height:t})},e.prototype.shiftBy=function(n,t){return new this.constructor(this.relativePositions,this._imgDims,new dt(n,t))},e.prototype.shiftByPoint=function(n){return this.shiftBy(n.x,n.y)},e.prototype.align=function(n,t){if(t===void 0&&(t={}),n){var r=n instanceof di?n.box.floor():new Go(n);return this.shiftBy(r.x,r.y).align(null,t)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),i=a.useDlibAlignment,o=a.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var n=this.getRefPointsForAlignment(),t=n[0],r=n[1],a=n[2],i=function(p){return a.sub(p).magnitude()},o=(i(t)+i(r))/2,u=Math.floor(o/Gz),c=j2(n),f=Math.floor(Math.max(0,c.x-Fz*u)),h=Math.floor(Math.max(0,c.y-Vz*u));return new X2(f,h,Math.min(u,this.imageWidth+f),Math.min(u,this.imageHeight+h))},e.prototype.alignMinBbox=function(n){var t=Bz(this.positions);return t.pad(t.width*n,t.height*n)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),Hz=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],j2([t[3],t[4]])]},n}(gm),zz=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.getJawOutline=function(){return this.positions.slice(0,17)},n.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},n.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},n.prototype.getNose=function(){return this.positions.slice(27,36)},n.prototype.getLeftEye=function(){return this.positions.slice(36,42)},n.prototype.getRightEye=function(){return this.positions.slice(42,48)},n.prototype.getMouth=function(){return this.positions.slice(48,68)},n.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(j2)},n}(gm),DI=function(){function e(n,t){this._label=n,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(n){return n===void 0&&(n=!0),""+this.label+(n?" ("+Pz(this.distance)+")":"")},e}(),PI=function(e){He(n,e);function n(t,r){var a=e.call(this,t)||this;return a._label=r,a}return n.assertIsValidLabeledBox=function(t,r){if(Go.assertIsValidBox(t,r),!Rs(t.label))throw new Error(r+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),n}(Go),ah=function(){function e(n,t){if(typeof n!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=n,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(n){return Array.from(n)})}},e.fromJSON=function(n){var t=n.descriptors.map(function(r){return new Float32Array(r)});return new e(n.label,t)},e}();(function(e){He(n,e);function n(t,r,a,i){var o=e.call(this,t,r)||this;return o._score=a,o._classScore=i,o}return n.assertIsValidPredictedBox=function(t,r){if(PI.assertIsValidLabeledBox(t,r),!xI(t.score)||!xI(t.classScore))throw new Error(r+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),n})(PI);function Wz(e){return e.detection instanceof di}function Z2(e,n){var t={detection:n};return Object.assign({},e,t)}function ax(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},n=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:n}}function ix(e){var n="";if(!e)try{e=require("fs")}catch(r){n=r.toString()}var t=e?function(r){return new Promise(function(a,i){e.readFile(r,function(o,u){return o?i(o):a(u)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+n)};return{readFile:t}}function ox(){var e=global.Canvas||global.HTMLCanvasElement,n=global.Image||global.HTMLImageElement,t=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=ix();return Xn({Canvas:e||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:n||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:t,createImageElement:r,fetch:a},i)}function sx(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function ux(){return typeof global=="object"&&typeof require=="function"&&typeof L4<"u"&&typeof process<"u"&&!!process.version}var hn;function Kz(){if(!hn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return hn}function hy(e){hn=e}function Q2(){sx()&&hy(ax()),ux()&&hy(ox())}function qz(e){if(hn||Q2(),!hn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=e.Canvas,t=n===void 0?hn.Canvas:n,r=e.Image,a=r===void 0?hn.Image:r;hn.Canvas=t,hn.Image=a,hn.createCanvasElement=e.createCanvasElement||function(){return new t},hn.createImageElement=e.createImageElement||function(){return new a},hn.ImageData=e.ImageData||hn.ImageData,hn.Video=e.Video||hn.Video,hn.fetch=e.fetch||hn.fetch,hn.readFile=e.readFile||hn.readFile}var tr={getEnv:Kz,setEnv:hy,initialize:Q2,createBrowserEnv:ax,createFileSystem:ix,createNodejsEnv:ox,monkeyPatch:qz,isBrowser:sx,isNodejs:ux};Q2();function lx(e){return!tr.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Vs(e){var n=tr.getEnv(),t=n.Canvas,r=n.CanvasRenderingContext2D;if(e instanceof r)return e;var a=lx(e);if(!(a instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=a.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var MI;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(MI||(MI={}));function cx(e){var n=tr.getEnv(),t=n.Image,r=n.Video;return e instanceof t&&e.complete||e instanceof r&&e.readyState>=3}function Yz(e){return new Promise(function(n,t){if(e instanceof tr.getEnv().Canvas||cx(e))return n();function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),n(i))}function a(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",a),t(i))}e.addEventListener("load",r),e.addEventListener("error",a)})}function fx(e){var n=tr.getEnv(),t=n.Image,r=n.Video;return e instanceof t?new tl(e.naturalWidth,e.naturalHeight):e instanceof r?new tl(e.videoWidth,e.videoHeight):new tl(e.width,e.height)}function iv(e){var n=e.width,t=e.height,r=tr.getEnv().createCanvasElement,a=r();return a.width=n,a.height=t,a}function J2(e,n){var t=tr.getEnv().ImageData;if(!(e instanceof t)&&!cx(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=fx(e),a=r.width,i=r.height,o=iv({width:a,height:i});return e instanceof t?Vs(o).putImageData(e,0,0):Vs(o).drawImage(e,0,0,a,i),o}function $z(e,n){return Oe(this,void 0,void 0,function(){var t,r,a,i,o,u;return ke(this,function(c){switch(c.label){case 0:return t=tr.getEnv().createCanvasElement(),r=e.shape.slice(Mo(e)?1:0),a=r[0],i=r[1],o=r[2],u=Ae(function(){return e.as3D(a,i,o).toInt()}),[4,$2.toPixels(u,t)];case 1:return c.sent(),u.dispose(),[2,t]}})})}function LI(e){var n=tr.getEnv(),t=n.Image,r=n.Canvas,a=n.Video;return e instanceof t||e instanceof r||e instanceof a}function jz(e,n,t){t===void 0&&(t=!1);var r=tr.getEnv(),a=r.Image,i=r.Canvas;if(!(e instanceof a||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=fx(e),u=n/Math.max(o.height,o.width),c=u*o.width,f=u*o.height,h=iv({width:n,height:n}),p=e instanceof i?e:J2(e),m=Math.abs(c-f)/2,g=t&&c<f?m:0,y=t&&f<c?m:0;return Vs(h).drawImage(p,g,y,c,f),h}var ym=function(){function e(n,t){var r=this;if(t===void 0&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(n))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+n);this._treatAsBatchInput=t,this._batchSize=n.length,n.forEach(function(a,i){if(rv(a)){r._imageTensors[i]=a,r._inputDimensions[i]=a.shape;return}if(Mo(a)){var o=a.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");r._imageTensors[i]=a,r._inputDimensions[i]=a.shape.slice(1);return}var u=a instanceof tr.getEnv().Canvas?a:J2(a);r._canvases[i]=u,r._inputDimensions[i]=[u.height,u.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var n=this;return of(this.batchSize,0,1).map(function(t,r){return n.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(n){return this.canvases[n]||this.imageTensors[n]},e.prototype.getInputDimensions=function(n){return this._inputDimensions[n]},e.prototype.getInputHeight=function(n){return this._inputDimensions[n][0]},e.prototype.getInputWidth=function(n){return this._inputDimensions[n][1]},e.prototype.getReshapedInputDimensions=function(n){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(n),r=this.getInputHeight(n);return Mz({width:t,height:r},this.inputSize)},e.prototype.toBatchTensor=function(n,t){var r=this;return t===void 0&&(t=!0),this._inputSize=n,Ae(function(){var a=of(r.batchSize,0,1).map(function(o){var u=r.getInput(o);if(u instanceof Ut){var c=Mo(u)?u:u.expandDims();return c=Uz(c,t),(c.shape[1]!==n||c.shape[2]!==n)&&(c=H2.resizeBilinear(c,[n,n])),c.as3D(n,n,3)}if(u instanceof tr.getEnv().Canvas)return $2.fromPixels(jz(u,n,t));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+u)}),i=qr(a.map(function(o){return o.toFloat()})).as4D(r.batchSize,n,n,3);return i})},e}();function kn(e){return Oe(this,void 0,void 0,function(){var n,t,r;return ke(this,function(a){switch(a.label){case 0:if(e instanceof ym)return[2,e];if(n=Array.isArray(e)?e:[e],!n.length)throw new Error("toNetInput - empty array passed as input");return t=function(i){return Array.isArray(e)?" at input index "+i+":":""},r=n.map(lx),r.forEach(function(i,o){if(!LI(i)&&!rv(i)&&!Mo(i))throw typeof n[o]=="string"?new Error("toNetInput -"+t(o)+" string passed, but could not resolve HTMLElement for element id "+n[o]):new Error("toNetInput -"+t(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Mo(i)){var u=i.shape[0];if(u!==1)throw new Error("toNetInput -"+t(o)+" tf.Tensor4D with batchSize "+u+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return LI(i)&&Yz(i)}))];case 1:return a.sent(),[2,new ym(r,Array.isArray(e))]}})})}function eb(e,n){return Oe(this,void 0,void 0,function(){var t,r,a,i,o,u,c;return ke(this,function(f){switch(f.label){case 0:return t=tr.getEnv().Canvas,r=e,e instanceof t?[3,5]:[4,kn(e)];case 1:if(a=f.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=a.getInput(0),i instanceof t?(o=i,[3,4]):[3,2];case 2:return[4,$z(i)];case 3:o=f.sent(),f.label=4;case 4:r=o,f.label=5;case 5:return u=Vs(r),c=n.map(function(h){return h instanceof di?h.forSize(r.width,r.height).box.floor():h}).map(function(h){return h.clipAtImageBorders(r.width,r.height)}),[2,c.map(function(h){var p=h.x,m=h.y,g=h.width,y=h.height,b=iv({width:g,height:y});return Vs(b).putImageData(u.getImageData(p,m,g,y),0,0),b})]}})})}function tb(e,n){return Oe(this,void 0,void 0,function(){return ke(this,function(t){if(!rv(e)&&!Mo(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Mo(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Ae(function(){var r=e.shape.slice(Mo(e)?1:0),a=r[0],i=r[1],o=r[2],u=n.map(function(f){return f instanceof di?f.forSize(i,a).box:f}).map(function(f){return f.clipAtImageBorders(i,a)}),c=u.map(function(f){var h=f.x,p=f.y,m=f.width,g=f.height;return Uk(e.as3D(a,i,o),[p,h,0],[g,m,o])});return c})]})})}function Xz(e,n){return Oe(this,void 0,void 0,function(){var t,r;return ke(this,function(a){switch(a.label){case 0:return t=tr.getEnv().fetch,[4,t(e,n)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function Zz(e){return Oe(this,void 0,void 0,function(){return ke(this,function(n){switch(n.label){case 0:return[4,Xz(e)];case 1:return[2,n.sent().json()]}})})}function dx(e,n){var t=n+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:t};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+t};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var a=e.split("/").filter(function(u){return u}),i=e.endsWith(".json")?a[a.length-1]:t,o=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return o=e.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function Qz(e,n){return Oe(this,void 0,void 0,function(){var t,r,a,i;return ke(this,function(o){switch(o.label){case 0:return t=dx(e,n),r=t.manifestUri,a=t.modelBaseUri,[4,Zz(r)];case 1:return i=o.sent(),[2,tx.loadWeights(i,a)]}})})}var Xi=function(){function e(n){this._name=n,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(n){var t=this.traversePropertyPath(n),r=t.obj,a=t.objProp;return r[a]},e.prototype.reassignParamFromPath=function(n,t){var r=this.traversePropertyPath(n),a=r.obj,i=r.objProp;a[i].dispose(),a[i]=t},e.prototype.getParamList=function(){var n=this;return this._paramMappings.map(function(t){var r=t.paramPath;return{path:r,tensor:n.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(n){return n.tensor instanceof ll})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(n){return!(n.tensor instanceof ll)})},e.prototype.variable=function(){var n=this;this.getFrozenParams().forEach(function(t){var r=t.path,a=t.tensor;n.reassignParamFromPath(r,a.variable())})},e.prototype.freeze=function(){var n=this;this.getTrainableParams().forEach(function(t){var r=t.path,a=t.tensor,i=Gn(a.dataSync());a.dispose(),n.reassignParamFromPath(r,i)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.getParamList().forEach(function(t){if(n&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(n){var t=n.tensor;return Array.from(t.dataSync())}).reduce(function(n,t){return n.concat(t)}))},e.prototype.load=function(n){return Oe(this,void 0,void 0,function(){return ke(this,function(t){switch(t.label){case 0:return n instanceof Float32Array?(this.extractWeights(n),[2]):[4,this.loadFromUri(n)];case 1:return t.sent(),[2]}})})},e.prototype.loadFromUri=function(n){return Oe(this,void 0,void 0,function(){var t;return ke(this,function(r){switch(r.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,Qz(n,this.getDefaultModelName())];case 1:return t=r.sent(),this.loadFromWeightMap(t),[2]}})})},e.prototype.loadFromDisk=function(n){return Oe(this,void 0,void 0,function(){var t,r,a,i,o,u,c,f,h,p;return ke(this,function(m){switch(m.label){case 0:if(n&&typeof n!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return t=tr.getEnv().readFile,r=dx(n,this.getDefaultModelName()),a=r.manifestUri,i=r.modelBaseUri,o=function(g){return Promise.all(g.map(function(y){return t(y).then(function(b){return b.buffer})}))},u=tx.weightsLoaderFactory(o),h=(f=JSON).parse,[4,t(a)];case 1:return c=h.apply(f,[m.sent().toString()]),[4,u(c,i)];case 2:return p=m.sent(),this.loadFromWeightMap(p),[2]}})})},e.prototype.loadFromWeightMap=function(n){var t=this.extractParamsFromWeigthMap(n),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},e.prototype.extractWeights=function(n){var t=this.extractParams(n),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},e.prototype.traversePropertyPath=function(n){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=n.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+n);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),r=t.obj,a=t.objProp;if(!r||!a||!(r[a]instanceof Ut))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+n);return{obj:r,objProp:a}},e}();function Gr(e,n,t){return Ae(function(){var r=B2(e,n.depthwise_filter,n.pointwise_filter,t,"same");return r=Ze(r,n.bias),r})}function p1(e,n,t){return t===void 0&&(t=!1),Ae(function(){var r=Ft(t?Ze(Sa(e,n.conv0.filters,[2,2],"same"),n.conv0.bias):Gr(e,n.conv0,[2,2])),a=Gr(r,n.conv1,[1,1]),i=Ft(Ze(r,a)),o=Gr(i,n.conv2,[1,1]);return Ft(Ze(r,Ze(a,o)))})}function ih(e,n,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),Ae(function(){var a=Ft(t?Ze(Sa(e,n.conv0.filters,r?[2,2]:[1,1],"same"),n.conv0.bias):Gr(e,n.conv0,r?[2,2]:[1,1])),i=Gr(a,n.conv1,[1,1]),o=Ft(Ze(a,i)),u=Gr(o,n.conv2,[1,1]),c=Ft(Ze(a,Ze(i,u))),f=Gr(c,n.conv3,[1,1]);return Ft(Ze(a,Ze(i,Ze(u,f))))})}function Ta(e,n,t,r){return t===void 0&&(t="same"),r===void 0&&(r=!1),Ae(function(){var a=Ze(Sa(e,n.filters,[1,1],t),n.bias);return r?Ft(a):a})}function Zi(e,n){Object.keys(e).forEach(function(t){n.some(function(r){return r.originalPath===t})||e[t].dispose()})}function ov(e,n){return function(t,r,a,i){var o=br(e(t*r*a*a),[a,a,t,r]),u=un(e(r));return n.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:u}}}function nb(e,n){return function(t,r,a){var i=Do(e(t*r),[t,r]),o=un(e(r));return n.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:i,bias:o}}}var hx=function(){function e(n,t,r){this.depthwise_filter=n,this.pointwise_filter=t,this.bias=r}return e}();function rb(e,n){return function(t,r,a){var i=br(e(9*t),[3,3,t,1]),o=br(e(t*r),[1,1,t,r]),u=un(e(r));return n.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new hx(i,o,u)}}function ab(e){return function(n){var t=e(n+"/depthwise_filter",4),r=e(n+"/pointwise_filter",4),a=e(n+"/bias",1);return new hx(t,r,a)}}function qo(e,n){return function(t,r,a){var i=e[t];if(!nv(i,r))throw new Error("expected weightMap["+t+"] to be a Tensor"+r+"D, instead have "+i);return n.push({originalPath:t,paramPath:a||t}),i}}function Qi(e){var n=e;function t(a){var i=n.slice(0,a);return n=n.slice(a),i}function r(){return n}return{extractWeights:t,getRemainingWeights:r}}function px(e,n){var t=ov(e,n),r=rb(e,n);function a(o,u,c,f){f===void 0&&(f=!1);var h=f?t(o,u,3,c+"/conv0"):r(o,u,c+"/conv0"),p=r(u,u,c+"/conv1"),m=r(u,u,c+"/conv2");return{conv0:h,conv1:p,conv2:m}}function i(o,u,c,f){f===void 0&&(f=!1);var h=a(o,u,c,f),p=h.conv0,m=h.conv1,g=h.conv2,y=r(u,u,c+"/conv3");return{conv0:p,conv1:m,conv2:g,conv3:y}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function Jz(e){var n=[],t=Qi(e),r=t.extractWeights,a=t.getRemainingWeights,i=px(r,n).extractDenseBlock4Params,o=i(3,32,"dense0",!0),u=i(32,64,"dense1"),c=i(64,128,"dense2"),f=i(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{dense0:o,dense1:u,dense2:c,dense3:f}}}function mx(e){return function(n){var t=e(n+"/filters",4),r=e(n+"/bias",1);return{filters:t,bias:r}}}function vx(e,n){var t=qo(e,n),r=mx(t),a=ab(t);function i(u,c){c===void 0&&(c=!1);var f=c?r(u+"/conv0"):a(u+"/conv0"),h=a(u+"/conv1"),p=a(u+"/conv2");return{conv0:f,conv1:h,conv2:p}}function o(u,c){c===void 0&&(c=!1);var f=c?r(u+"/conv0"):a(u+"/conv0"),h=a(u+"/conv1"),p=a(u+"/conv2"),m=a(u+"/conv3");return{conv0:f,conv1:h,conv2:p,conv3:m}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function e9(e){var n=[],t=vx(e,n).extractDenseBlock4Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2"),dense3:t("dense3")};return Zi(e,n),{params:r,paramMappings:n}}var gx=function(e){He(n,e);function n(){return e.call(this,"FaceFeatureExtractor")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return Ae(function(){var a=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Nf(a,i).div(Ee(255)),u=ih(o,r.dense0,!0);return u=ih(u,r.dense1),u=ih(u,r.dense2),u=ih(u,r.dense3),u=Rf(u,[7,7],[2,2],"valid"),u})},n.prototype.forward=function(t){return Oe(this,void 0,void 0,function(){var r;return ke(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,kn(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},n.prototype.extractParamsFromWeigthMap=function(t){return e9(t)},n.prototype.extractParams=function(t){return Jz(t)},n}(Xi);function Qa(e,n){return Ae(function(){return Ze(Jm(e,n.weights),n.bias)})}function t9(e,n,t){var r=[],a=Qi(e),i=a.extractWeights,o=a.getRemainingWeights,u=nb(i,r),c=u(n,t,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:c}}}function n9(e){var n=[],t=qo(e,n);function r(i){var o=t(i+"/weights",2),u=t(i+"/bias",1);return{weights:o,bias:u}}var a={fc:r("fc")};return Zi(e,n),{params:a,paramMappings:n}}function yx(e){var n={},t={};return Object.keys(e).forEach(function(r){var a=r.startsWith("fc")?t:n;a[r]=e[r]}),{featureExtractorMap:n,classifierMap:t}}var bx=function(e){He(n,e);function n(t,r){var a=e.call(this,t)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Ae(function(){var i=t instanceof ym?r.faceFeatureExtractor.forwardInput(t):t;return Qa(i.as2D(i.shape[0],-1),a.fc)})},n.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},n.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},n.prototype.extractClassifierParams=function(t){return t9(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},n.prototype.extractParamsFromWeigthMap=function(t){var r=yx(t),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),n9(i)},n.prototype.extractParams=function(t){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),i=a*r+a,o=t.slice(0,t.length-i),u=t.slice(t.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(u)},n}(Xi),BI=["neutral","happy","sad","angry","fearful","disgusted","surprised"],r9=function(){function e(n){var t=this;if(n.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+n.length);BI.forEach(function(r,a){t[r]=n[a]})}return e.prototype.asSortedArray=function(){var n=this;return BI.map(function(t){return{expression:t,probability:n[t]}}).sort(function(t,r){return r.probability-t.probability})},e}(),a9=function(e){He(n,e);function n(t){return t===void 0&&(t=new gx),e.call(this,"FaceExpressionNet",t)||this}return n.prototype.forwardInput=function(t){var r=this;return Ae(function(){return $i(r.runNet(t))})},n.prototype.forward=function(t){return Oe(this,void 0,void 0,function(){var r;return ke(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,kn(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.predictExpressions=function(t){return Oe(this,void 0,void 0,function(){var r,a,i,o,u=this;return ke(this,function(c){switch(c.label){case 0:return[4,kn(t)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),[4,Promise.all(vn(a).map(function(f){return Oe(u,void 0,void 0,function(){var h;return ke(this,function(p){switch(p.label){case 0:return[4,f.data()];case 1:return h=p.sent(),f.dispose(),[2,h]}})})}))];case 3:return i=c.sent(),a.dispose(),o=i.map(function(f){return new r9(f)}),[2,r.isBatchInput?o:o[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_expression_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n.prototype.getClassifierChannelsOut=function(){return 7},n}(bx);function Sx(e,n){var t={expressions:n};return Object.assign({},e,t)}function i9(e){return Wz(e)&&e.landmarks instanceof gm&&e.unshiftedLandmarks instanceof gm&&e.alignedRect instanceof di}function ib(e,n){var t=e.detection.box,r=n.shiftBy(t.x,t.y),a=r.align(),i=e.detection.imageDims,o=new di(e.detection.score,a.rescale(i.reverse()),i),u={landmarks:r,unshiftedLandmarks:n,alignedRect:o};return Object.assign({},e,u)}function o9(e,n){var t=ov(e,n),r=rb(e,n);function a(o,u,c){var f=r(o,u,c+"/separable_conv0"),h=r(u,u,c+"/separable_conv1"),p=t(o,u,1,c+"/expansion_conv");return{separable_conv0:f,separable_conv1:h,expansion_conv:p}}function i(o,u){var c=r(o,o,u+"/separable_conv0"),f=r(o,o,u+"/separable_conv1"),h=r(o,o,u+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:h}}return{extractConvParams:t,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:i}}function s9(e,n){var t=[],r=Qi(e),a=r.extractWeights,i=r.getRemainingWeights,o=o9(a,t),u=o.extractConvParams,c=o.extractSeparableConvParams,f=o.extractReductionBlockParams,h=o.extractMainBlockParams,p=u(3,32,3,"entry_flow/conv_in"),m=f(32,64,"entry_flow/reduction_block_0"),g=f(64,128,"entry_flow/reduction_block_1"),y={conv_in:p,reduction_block_0:m,reduction_block_1:g},b={};of(n,0,1).forEach(function(I){b["main_block_"+I]=h(128,"middle_flow/main_block_"+I)});var E=f(128,256,"exit_flow/reduction_block"),_=c(256,512,"exit_flow/separable_conv"),w={reduction_block:E,separable_conv:_};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{entry_flow:y,middle_flow:b,exit_flow:w}}}function u9(e,n){var t=qo(e,n),r=mx(t),a=ab(t);function i(u){var c=a(u+"/separable_conv0"),f=a(u+"/separable_conv1"),h=r(u+"/expansion_conv");return{separable_conv0:c,separable_conv1:f,expansion_conv:h}}function o(u){var c=a(u+"/separable_conv0"),f=a(u+"/separable_conv1"),h=a(u+"/separable_conv2");return{separable_conv0:c,separable_conv1:f,separable_conv2:h}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:o}}function l9(e,n){var t=[],r=u9(e,t),a=r.extractConvParams,i=r.extractSeparableConvParams,o=r.extractReductionBlockParams,u=r.extractMainBlockParams,c=a("entry_flow/conv_in"),f=o("entry_flow/reduction_block_0"),h=o("entry_flow/reduction_block_1"),p={conv_in:c,reduction_block_0:f,reduction_block_1:h},m={};of(n,0,1).forEach(function(E){m["main_block_"+E]=u("middle_flow/main_block_"+E)});var g=o("exit_flow/reduction_block"),y=i("exit_flow/separable_conv"),b={reduction_block:g,separable_conv:y};return Zi(e,t),{params:{entry_flow:p,middle_flow:m,exit_flow:b},paramMappings:t}}function Ex(e,n,t){return Ze(Sa(e,n.filters,t,"same"),n.bias)}function m1(e,n,t){t===void 0&&(t=!0);var r=t?Ft(e):e;return r=Gr(r,n.separable_conv0,[1,1]),r=Gr(Ft(r),n.separable_conv1,[1,1]),r=Nn(r,[3,3],[2,2],"same"),r=Ze(r,Ex(e,n.expansion_conv,[2,2])),r}function c9(e,n){var t=Gr(Ft(e),n.separable_conv0,[1,1]);return t=Gr(Ft(t),n.separable_conv1,[1,1]),t=Gr(Ft(t),n.separable_conv2,[1,1]),t=Ze(t,e),t}var f9=function(e){He(n,e);function n(t){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=t,r}return n.prototype.forwardInput=function(t){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return Ae(function(){var i=t.toBatchTensor(112,!0),o=[122.782,117.001,104.298],u=Nf(i,o).div(Ee(256)),c=Ft(Ex(u,a.entry_flow.conv_in,[2,2]));return c=m1(c,a.entry_flow.reduction_block_0,!1),c=m1(c,a.entry_flow.reduction_block_1),of(r._numMainBlocks,0,1).forEach(function(f){c=c9(c,a.middle_flow["main_block_"+f])}),c=m1(c,a.exit_flow.reduction_block),c=Ft(Gr(c,a.exit_flow.separable_conv,[1,1])),c})},n.prototype.forward=function(t){return Oe(this,void 0,void 0,function(){var r;return ke(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,kn(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"tiny_xception_model"},n.prototype.extractParamsFromWeigthMap=function(t){return l9(t,this._numMainBlocks)},n.prototype.extractParams=function(t){return s9(t,this._numMainBlocks)},n}(Xi);function d9(e){var n=[],t=Qi(e),r=t.extractWeights,a=t.getRemainingWeights,i=nb(r,n),o=i(512,1,"fc/age"),u=i(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{fc:{age:o,gender:u}}}}function h9(e){var n=[],t=qo(e,n);function r(i){var o=t(i+"/weights",2),u=t(i+"/bias",1);return{weights:o,bias:u}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Zi(e,n),{params:a,paramMappings:n}}var bm;(function(e){e.FEMALE="female",e.MALE="male"})(bm||(bm={}));var p9=function(e){He(n,e);function n(t){t===void 0&&(t=new f9(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=t,r}return Object.defineProperty(n.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),n.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return Ae(function(){var i=t instanceof ym?r.faceFeatureExtractor.forwardInput(t):t,o=Rf(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),u=Qa(o,a.fc.age).as1D(),c=Qa(o,a.fc.gender);return{age:u,gender:c}})},n.prototype.forwardInput=function(t){var r=this;return Ae(function(){var a=r.runNet(t),i=a.age,o=a.gender;return{age:i,gender:$i(o)}})},n.prototype.forward=function(t){return Oe(this,void 0,void 0,function(){var r;return ke(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,kn(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.predictAgeAndGender=function(t){return Oe(this,void 0,void 0,function(){var r,a,i,o,u,c,f=this;return ke(this,function(h){switch(h.label){case 0:return[4,kn(t)];case 1:return r=h.sent(),[4,this.forwardInput(r)];case 2:return a=h.sent(),i=vn(a.age),o=vn(a.gender),u=i.map(function(p,m){return{ageTensor:p,genderTensor:o[m]}}),[4,Promise.all(u.map(function(p){var m=p.ageTensor,g=p.genderTensor;return Oe(f,void 0,void 0,function(){var y,b,E,_,w;return ke(this,function(I){switch(I.label){case 0:return[4,m.data()];case 1:return y=I.sent()[0],[4,g.data()];case 2:return b=I.sent()[0],E=b>.5,_=E?bm.MALE:bm.FEMALE,w=E?b:1-b,m.dispose(),g.dispose(),[2,{age:y,gender:_,genderProbability:w}]}})})}))];case 3:return c=h.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?c:c[0]]}})})},n.prototype.getDefaultModelName=function(){return"age_gender_model"},n.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},n.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,i=r.paramMappings;this._params=a,this._paramMappings=i},n.prototype.extractClassifierParams=function(t){return d9(t)},n.prototype.extractParamsFromWeigthMap=function(t){var r=yx(t),a=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),h9(i)},n.prototype.extractParams=function(t){var r=1539,a=t.slice(0,t.length-r),i=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)},n}(Xi),_x=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.postProcess=function(t,r,a){var i=a.map(function(u){var c=u.width,f=u.height,h=r/Math.max(f,c);return{width:c*h,height:f*h}}),o=i.length;return Ae(function(){var u=function(m,g){return qr([ai([68],m),ai([68],g)],1).as2D(1,136).as1D()},c=function(m,g){var y=i[m],b=y.width,E=y.height;return g(b,E)?Math.abs(b-E)/2:0},f=function(m){return c(m,function(g,y){return g<y})},h=function(m){return c(m,function(g,y){return y<g})},p=t.mul(ai([o,136],r)).sub(qr(Array.from(Array(o),function(m,g){return u(f(g),h(g))}))).div(qr(Array.from(Array(o),function(m,g){return u(i[g].width,i[g].height)})));return p})},n.prototype.forwardInput=function(t){var r=this;return Ae(function(){var a=r.runNet(t);return r.postProcess(a,t.inputSize,t.inputDimensions.map(function(i){var o=i[0],u=i[1];return{height:o,width:u}}))})},n.prototype.forward=function(t){return Oe(this,void 0,void 0,function(){var r;return ke(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,kn(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.detectLandmarks=function(t){return Oe(this,void 0,void 0,function(){var r,a,i,o=this;return ke(this,function(u){switch(u.label){case 0:return[4,kn(t)];case 1:return r=u.sent(),a=Ae(function(){return vn(o.forwardInput(r))}),[4,Promise.all(a.map(function(c,f){return Oe(o,void 0,void 0,function(){var h,p,m,g,y;return ke(this,function(b){switch(b.label){case 0:return m=(p=Array).from,[4,c.data()];case 1:return h=m.apply(p,[b.sent()]),g=h.filter(function(E,_){return OI(_)}),y=h.filter(function(E,_){return!OI(_)}),[2,new zz(Array(68).fill(0).map(function(E,_){return new dt(g[_],y[_])}),{height:r.getInputHeight(f),width:r.getInputWidth(f)})]}})})}))];case 2:return i=u.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},n.prototype.getClassifierChannelsOut=function(){return 136},n}(bx),Ax=function(e){He(n,e);function n(t){return t===void 0&&(t=new gx),e.call(this,"FaceLandmark68Net",t)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},n.prototype.getClassifierChannelsIn=function(){return 256},n}(_x);function m9(e){var n=[],t=vx(e,n).extractDenseBlock3Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2")};return Zi(e,n),{params:r,paramMappings:n}}function v9(e){var n=[],t=Qi(e),r=t.extractWeights,a=t.getRemainingWeights,i=px(r,n).extractDenseBlock3Params,o=i(3,32,"dense0",!0),u=i(32,64,"dense1"),c=i(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{dense0:o,dense1:u,dense2:c}}}var g9=function(e){He(n,e);function n(){return e.call(this,"TinyFaceFeatureExtractor")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Ae(function(){var a=t.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=Nf(a,i).div(Ee(255)),u=p1(o,r.dense0,!0);return u=p1(u,r.dense1),u=p1(u,r.dense2),u=Rf(u,[14,14],[2,2],"valid"),u})},n.prototype.forward=function(t){return Oe(this,void 0,void 0,function(){var r;return ke(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,kn(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},n.prototype.extractParamsFromWeigthMap=function(t){return m9(t)},n.prototype.extractParams=function(t){return v9(t)},n}(Xi),y9=function(e){He(n,e);function n(t){return t===void 0&&(t=new g9),e.call(this,"FaceLandmark68TinyNet",t)||this}return n.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},n.prototype.getClassifierChannelsIn=function(){return 128},n}(_x);(function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n})(Ax);function b9(e,n){return Ze(er(e,n.weights),n.biases)}function ob(e,n,t,r,a){a===void 0&&(a="same");var i=n.conv,o=i.filters,u=i.bias,c=Sa(e,o,t,a);return c=Ze(c,u),c=b9(c,n.scale),r?Ft(c):c}function S9(e,n){return ob(e,n,[1,1],!0)}function wx(e,n){return ob(e,n,[1,1],!1)}function Ix(e,n){return ob(e,n,[2,2],!0,"valid")}function E9(e,n){function t(u,c,f){var h=e(u),p=h.length/(c*f*f);if(Dz(p))throw new Error("depth has to be an integer: "+p+", weights.length: "+h.length+", numFilters: "+c+", filterSize: "+f);return Ae(function(){return Vo(br(h,[c,p,f,f]),[2,3,1,0])})}function r(u,c,f,h){var p=t(u,c,f),m=un(e(c));return n.push({paramPath:h+"/filters"},{paramPath:h+"/bias"}),{filters:p,bias:m}}function a(u,c){var f=un(e(u)),h=un(e(u));return n.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:f,biases:h}}function i(u,c,f,h){var p=r(u,c,f,h+"/conv"),m=a(c,h+"/scale");return{conv:p,scale:m}}function o(u,c,f,h,p){p===void 0&&(p=!1);var m=i((p?.5:1)*u,c,f,h+"/conv1"),g=i(u,c,f,h+"/conv2");return{conv1:m,conv2:g}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function _9(e){var n=Qi(e),t=n.extractWeights,r=n.getRemainingWeights,a=[],i=E9(t,a),o=i.extractConvLayerParams,u=i.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),f=u(9216,32,3,"conv32_1"),h=u(9216,32,3,"conv32_2"),p=u(9216,32,3,"conv32_3"),m=u(36864,64,3,"conv64_down",!0),g=u(36864,64,3,"conv64_1"),y=u(36864,64,3,"conv64_2"),b=u(36864,64,3,"conv64_3"),E=u(147456,128,3,"conv128_down",!0),_=u(147456,128,3,"conv128_1"),w=u(147456,128,3,"conv128_2"),I=u(589824,256,3,"conv256_down",!0),R=u(589824,256,3,"conv256_1"),C=u(589824,256,3,"conv256_2"),O=u(589824,256,3,"conv256_down_out"),D=Ae(function(){return Vo(Do(t(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var P={conv32_down:c,conv32_1:f,conv32_2:h,conv32_3:p,conv64_down:m,conv64_1:g,conv64_2:y,conv64_3:b,conv128_down:E,conv128_1:_,conv128_2:w,conv256_down:I,conv256_1:R,conv256_2:C,conv256_down_out:O,fc:D};return{params:P,paramMappings:a}}function A9(e,n){var t=qo(e,n);function r(o){var u=t(o+"/scale/weights",1),c=t(o+"/scale/biases",1);return{weights:u,biases:c}}function a(o){var u=t(o+"/conv/filters",4),c=t(o+"/conv/bias",1),f=r(o);return{conv:{filters:u,bias:c},scale:f}}function i(o){return{conv1:a(o+"/conv1"),conv2:a(o+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function w9(e){var n=[],t=A9(e,n),r=t.extractConvLayerParams,a=t.extractResidualLayerParams,i=r("conv32_down"),o=a("conv32_1"),u=a("conv32_2"),c=a("conv32_3"),f=a("conv64_down"),h=a("conv64_1"),p=a("conv64_2"),m=a("conv64_3"),g=a("conv128_down"),y=a("conv128_1"),b=a("conv128_2"),E=a("conv256_down"),_=a("conv256_1"),w=a("conv256_2"),I=a("conv256_down_out"),R=e.fc;if(n.push({originalPath:"fc",paramPath:"fc"}),!xz(R))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+R);var C={conv32_down:i,conv32_1:o,conv32_2:u,conv32_3:c,conv64_down:f,conv64_1:h,conv64_2:p,conv64_3:m,conv128_down:g,conv128_1:y,conv128_2:b,conv256_down:E,conv256_1:_,conv256_2:w,conv256_down_out:I,fc:R};return Zi(e,n),{params:C,paramMappings:n}}function Ga(e,n){var t=S9(e,n.conv1);return t=wx(t,n.conv2),t=Ze(t,e),t=Ft(t),t}function oh(e,n){var t=Ix(e,n.conv1);t=wx(t,n.conv2);var r=Rf(e,2,2,"valid"),a=Ot(r.shape),i=r.shape[3]!==t.shape[3],o=r.shape[1]!==t.shape[1]||r.shape[2]!==t.shape[2];if(o){var u=Gc(t.shape);u[1]=1;var c=Ot(u);t=mn([t,c],1);var f=Gc(t.shape);f[2]=1;var h=Ot(f);t=mn([t,h],2)}return r=i?mn([r,a],3):r,t=Ze(r,t),t=Ft(t),t}var I9=function(e){He(n,e);function n(){return e.call(this,"FaceRecognitionNet")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return Ae(function(){var a=t.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=Nf(a,i).div(Ee(256)),u=Ix(o,r.conv32_down);u=Nn(u,3,2,"valid"),u=Ga(u,r.conv32_1),u=Ga(u,r.conv32_2),u=Ga(u,r.conv32_3),u=oh(u,r.conv64_down),u=Ga(u,r.conv64_1),u=Ga(u,r.conv64_2),u=Ga(u,r.conv64_3),u=oh(u,r.conv128_down),u=Ga(u,r.conv128_1),u=Ga(u,r.conv128_2),u=oh(u,r.conv256_down),u=Ga(u,r.conv256_1),u=Ga(u,r.conv256_2),u=oh(u,r.conv256_down_out);var c=u.mean([1,2]),f=Jm(c,r.fc);return f})},n.prototype.forward=function(t){return Oe(this,void 0,void 0,function(){var r;return ke(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,kn(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.computeFaceDescriptor=function(t){return Oe(this,void 0,void 0,function(){var r,a,i,o=this;return ke(this,function(u){switch(u.label){case 0:return[4,kn(t)];case 1:return r=u.sent(),a=Ae(function(){return vn(o.forwardInput(r))}),[4,Promise.all(a.map(function(c){return c.data()}))];case 2:return i=u.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},n.prototype.getDefaultModelName=function(){return"face_recognition_model"},n.prototype.extractParamsFromWeigthMap=function(t){return w9(t)},n.prototype.extractParams=function(t){return _9(t)},n}(Xi);function Rx(e,n){var t={descriptor:n};return Object.assign({},e,t)}function Cx(e,n){var t={age:n};return Object.assign({},e,t)}function Nx(e,n,t){var r={gender:n,genderProbability:t};return Object.assign({},e,r)}var Tx=function(){function e(n){var t=n===void 0?{}:n,r=t.minFaceSize,a=t.scaleFactor,i=t.maxNumScales,o=t.scoreThresholds,u=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=u,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function R9(e,n){function t(c,f){var h=br(e(9*c),[3,3,c,1]),p=un(e(c)),m=un(e(c)),g=un(e(c)),y=un(e(c));return n.push({paramPath:f+"/filters"},{paramPath:f+"/batch_norm_scale"},{paramPath:f+"/batch_norm_offset"},{paramPath:f+"/batch_norm_mean"},{paramPath:f+"/batch_norm_variance"}),{filters:h,batch_norm_scale:p,batch_norm_offset:m,batch_norm_mean:g,batch_norm_variance:y}}function r(c,f,h,p,m){var g=br(e(c*f*h*h),[h,h,c,f]),y=un(e(f));return n.push({paramPath:p+"/filters"},{paramPath:p+"/"+(m?"batch_norm_offset":"bias")}),{filters:g,bias:y}}function a(c,f,h,p){var m=r(c,f,h,p,!0),g=m.filters,y=m.bias;return{filters:g,batch_norm_offset:y}}function i(c,f,h){var p=t(c,h+"/depthwise_conv"),m=a(c,f,1,h+"/pointwise_conv");return{depthwise_conv:p,pointwise_conv:m}}function o(){var c=a(3,32,3,"mobilenetv1/conv_0"),f=i(32,64,"mobilenetv1/conv_1"),h=i(64,128,"mobilenetv1/conv_2"),p=i(128,128,"mobilenetv1/conv_3"),m=i(128,256,"mobilenetv1/conv_4"),g=i(256,256,"mobilenetv1/conv_5"),y=i(256,512,"mobilenetv1/conv_6"),b=i(512,512,"mobilenetv1/conv_7"),E=i(512,512,"mobilenetv1/conv_8"),_=i(512,512,"mobilenetv1/conv_9"),w=i(512,512,"mobilenetv1/conv_10"),I=i(512,512,"mobilenetv1/conv_11"),R=i(512,1024,"mobilenetv1/conv_12"),C=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:f,conv_2:h,conv_3:p,conv_4:m,conv_5:g,conv_6:y,conv_7:b,conv_8:E,conv_9:_,conv_10:w,conv_11:I,conv_12:R,conv_13:C}}function u(){var c=a(1024,256,1,"prediction_layer/conv_0"),f=a(256,512,3,"prediction_layer/conv_1"),h=a(512,128,1,"prediction_layer/conv_2"),p=a(128,256,3,"prediction_layer/conv_3"),m=a(256,128,1,"prediction_layer/conv_4"),g=a(128,256,3,"prediction_layer/conv_5"),y=a(256,64,1,"prediction_layer/conv_6"),b=a(64,128,3,"prediction_layer/conv_7"),E=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),_=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),w=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),I=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),R=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),C=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),O=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),D=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),P=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),k=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),N=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),U=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),V={box_encoding_predictor:E,class_predictor:_},ee={box_encoding_predictor:w,class_predictor:I},re={box_encoding_predictor:R,class_predictor:C},ne={box_encoding_predictor:O,class_predictor:D},z={box_encoding_predictor:P,class_predictor:k},Z={box_encoding_predictor:N,class_predictor:U};return{conv_0:c,conv_1:f,conv_2:h,conv_3:p,conv_4:m,conv_5:g,conv_6:y,conv_7:b,box_predictor_0:V,box_predictor_1:ee,box_predictor_2:re,box_predictor_3:ne,box_predictor_4:z,box_predictor_5:Z}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:u}}function C9(e){var n=[],t=Qi(e),r=t.extractWeights,a=t.getRemainingWeights,i=R9(r,n),o=i.extractMobilenetV1Params,u=i.extractPredictionLayerParams,c=o(),f=u(),h=_2(r(5118*4),[1,5118,4]),p={extra_dim:h};if(n.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:c,prediction_layer:f,output_layer:p},paramMappings:n}}function N9(e,n){var t=qo(e,n);function r(f,h,p){var m=t(f+"/Conv2d_"+h+"_pointwise/weights",4,p+"/filters"),g=t(f+"/Conv2d_"+h+"_pointwise/convolution_bn_offset",1,p+"/batch_norm_offset");return{filters:m,batch_norm_offset:g}}function a(f){var h="mobilenetv1/conv_"+f,p="MobilenetV1/Conv2d_"+f+"_depthwise",m=h+"/depthwise_conv",g=h+"/pointwise_conv",y=t(p+"/depthwise_weights",4,m+"/filters"),b=t(p+"/BatchNorm/gamma",1,m+"/batch_norm_scale"),E=t(p+"/BatchNorm/beta",1,m+"/batch_norm_offset"),_=t(p+"/BatchNorm/moving_mean",1,m+"/batch_norm_mean"),w=t(p+"/BatchNorm/moving_variance",1,m+"/batch_norm_variance");return{depthwise_conv:{filters:y,batch_norm_scale:b,batch_norm_offset:E,batch_norm_mean:_,batch_norm_variance:w},pointwise_conv:r("MobilenetV1",f,g)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function o(f,h){var p=t(f+"/weights",4,h+"/filters"),m=t(f+"/biases",1,h+"/bias");return{filters:p,bias:m}}function u(f){var h=o("Prediction/BoxPredictor_"+f+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+f+"/box_encoding_predictor"),p=o("Prediction/BoxPredictor_"+f+"/ClassPredictor","prediction_layer/box_predictor_"+f+"/class_predictor");return{box_encoding_predictor:h,class_predictor:p}}function c(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:u(0),box_predictor_1:u(1),box_predictor_2:u(2),box_predictor_3:u(3),box_predictor_4:u(4),box_predictor_5:u(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:c}}function T9(e){var n=[],t=N9(e,n),r=t.extractMobilenetV1Params,a=t.extractPredictionLayerParams,i=e["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!rv(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:i}};return Zi(e,n),{params:o,paramMappings:n}}function Wa(e,n,t){return Ae(function(){var r=Sa(e,n.filters,t,"same");return r=Ze(r,n.batch_norm_offset),D2(r,0,6)})}var O9=.0010000000474974513;function k9(e,n,t){return Ae(function(){var r=Qm(e,n.filters,t,"same");return r=Ak(r,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,O9),D2(r,0,6)})}function x9(e){return[2,4,6,12].some(function(n){return n===e})?[2,2]:[1,1]}function D9(e,n){return Ae(function(){var t=null,r=Wa(e,n.conv_0,[2,2]),a=[n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13];if(a.forEach(function(i,o){var u=o+1,c=x9(u);r=k9(r,i.depthwise_conv,c),r=Wa(r,i.pointwise_conv,[1,1]),u===11&&(t=r)}),t===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:t}})}function P9(e,n,t,r,a){var i=e.shape[0],o=Math.min(t,i),u=n.map(function(h,p){return{score:h,boxIndex:p}}).filter(function(h){return h.score>a}).sort(function(h,p){return p.score-h.score}),c=function(h){return h<=r?1:0},f=[];return u.forEach(function(h){if(!(f.length>=o)){for(var p=h.score,m=f.length-1;m>=0;--m){var g=M9(e,h.boxIndex,f[m]);if(g!==0&&(h.score*=c(g),h.score<=a))break}p===h.score&&f.push(h.boxIndex)}}),f}function M9(e,n,t){var r=e.arraySync(),a=Math.min(r[n][0],r[n][2]),i=Math.min(r[n][1],r[n][3]),o=Math.max(r[n][0],r[n][2]),u=Math.max(r[n][1],r[n][3]),c=Math.min(r[t][0],r[t][2]),f=Math.min(r[t][1],r[t][3]),h=Math.max(r[t][0],r[t][2]),p=Math.max(r[t][1],r[t][3]),m=(o-a)*(u-i),g=(h-c)*(p-f);if(m<=0||g<=0)return 0;var y=Math.max(a,c),b=Math.max(i,f),E=Math.min(o,h),_=Math.min(u,p),w=Math.max(E-y,0)*Math.max(_-b,0);return w/(m+g-w)}function L9(e){var n=vn(Vo(e,[1,0])),t=[bn(n[2],n[0]),bn(n[3],n[1])],r=[Ze(n[0],Ca(t[0],Ee(2))),Ze(n[1],Ca(t[1],Ee(2)))];return{sizes:t,centers:r}}function B9(e,n){var t=L9(e),r=t.sizes,a=t.centers,i=vn(Vo(n,[1,0])),o=Ca(er(oy(Ca(i[2],Ee(5))),r[0]),Ee(2)),u=Ze(er(Ca(i[0],Ee(10)),r[0]),a[0]),c=Ca(er(oy(Ca(i[3],Ee(5))),r[1]),Ee(2)),f=Ze(er(Ca(i[1],Ee(10)),r[1]),a[1]);return Vo(qr([bn(u,o),bn(f,c),Ze(u,o),Ze(f,c)]),[1,0])}function U9(e,n,t){return Ae(function(){var r=e.shape[0],a=B9(Na(Xu(t.extra_dim,[r,1,1]),[-1,4]),Na(e,[-1,4]));a=Na(a,[r,a.shape[0]/r,4]);var i=bk(si(n,[0,0,1],[-1,-1,-1])),o=si(i,[0,0,0],[-1,-1,1]);o=Na(o,[r,o.shape[1]]);var u=vn(a),c=vn(o);return{boxes:u,scores:c}})}function Hu(e,n){return Ae(function(){var t=e.shape[0],r=Na(Ta(e,n.box_encoding_predictor),[t,-1,1,4]),a=Na(Ta(e,n.class_predictor),[t,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function F9(e,n,t){return Ae(function(){var r=Wa(e,t.conv_0,[1,1]),a=Wa(r,t.conv_1,[2,2]),i=Wa(a,t.conv_2,[1,1]),o=Wa(i,t.conv_3,[2,2]),u=Wa(o,t.conv_4,[1,1]),c=Wa(u,t.conv_5,[2,2]),f=Wa(c,t.conv_6,[1,1]),h=Wa(f,t.conv_7,[2,2]),p=Hu(n,t.box_predictor_0),m=Hu(e,t.box_predictor_1),g=Hu(a,t.box_predictor_2),y=Hu(o,t.box_predictor_3),b=Hu(c,t.box_predictor_4),E=Hu(h,t.box_predictor_5),_=mn([p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding,y.boxPredictionEncoding,b.boxPredictionEncoding,E.boxPredictionEncoding],1),w=mn([p.classPrediction,m.classPrediction,g.classPrediction,y.classPrediction,b.classPrediction,E.classPrediction],1);return{boxPredictions:_,classPredictions:w}})}var sb=function(){function e(n){var t=n===void 0?{}:n,r=t.minConfidence,a=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),Ox=function(e){He(n,e);function n(){return e.call(this,"SsdMobilenetv1")||this}return n.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return Ae(function(){var a=t.toBatchTensor(512,!1).toFloat(),i=bn(er(a,Ee(.007843137718737125)),Ee(1)),o=D9(i,r.mobilenetv1),u=F9(o.out,o.conv11,r.prediction_layer),c=u.boxPredictions,f=u.classPredictions;return U9(c,f,r.output_layer)})},n.prototype.forward=function(t){return Oe(this,void 0,void 0,function(){var r;return ke(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,kn(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},n.prototype.locateFaces=function(t,r){return r===void 0&&(r={}),Oe(this,void 0,void 0,function(){var a,i,o,u,c,f,h,p,m,g,y,b,E,_,w,I,R,C,O,D,P;return ke(this,function(k){switch(k.label){case 0:return a=new sb(r),i=a.maxResults,o=a.minConfidence,[4,kn(t)];case 1:for(u=k.sent(),c=this.forwardInput(u),f=c.boxes,h=c.scores,p=f[0],m=h[0],g=1;g<f.length;g++)f[g].dispose(),h[g].dispose();return E=(b=Array).from,[4,m.data()];case 2:return y=E.apply(b,[k.sent()]),_=.5,w=P9(p,y,i,_,o),I=u.getReshapedInputDimensions(0),R=u.inputSize,C=R/I.width,O=R/I.height,D=p.arraySync(),P=w.map(function(N){var U=[Math.max(0,D[N][0]),Math.min(1,D[N][2])].map(function(Z){return Z*O}),V=U[0],ee=U[1],re=[Math.max(0,D[N][1]),Math.min(1,D[N][3])].map(function(Z){return Z*C}),ne=re[0],z=re[1];return new di(y[N],new X2(ne,V,z-ne,ee-V),{height:u.getInputHeight(0),width:u.getInputWidth(0)})}),p.dispose(),m.dispose(),[2,P]}})})},n.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},n.prototype.extractParamsFromWeigthMap=function(t){return T9(t)},n.prototype.extractParams=function(t){return C9(t)},n}(Xi);(function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n})(Ox);var V9=.4,G9=[new dt(.738768,.874946),new dt(2.42204,2.65704),new dt(4.30971,7.04493),new dt(10.246,4.59428),new dt(12.6868,11.8741)],H9=[new dt(1.603231,2.094468),new dt(6.041143,7.080126),new dt(2.882459,3.518061),new dt(4.266906,5.178857),new dt(9.041765,10.66308)],z9=[117.001,114.697,97.404],W9="tiny_yolov2_model",K9="tiny_yolov2_separable_conv_model",sh=function(e){return typeof e=="number"};function q9(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!sh(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(n){return typeof n=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(n){return n||{}}).every(function(n){return sh(n.x)&&sh(n.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(sh)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function ub(e){return Ae(function(){var n=er(e,Ee(.10000000149011612));return Ze(Ft(bn(e,n)),n)})}function Io(e,n){return Ae(function(){var t=Ys(e,[[0,0],[1,1],[1,1],[0,0]]);return t=Sa(t,n.conv.filters,[1,1],"valid"),t=bn(t,n.bn.sub),t=er(t,n.bn.truediv),t=Ze(t,n.conv.bias),ub(t)})}function Ro(e,n){return Ae(function(){var t=Ys(e,[[0,0],[1,1],[1,1],[0,0]]);return t=B2(t,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),t=Ze(t,n.bias),ub(t)})}function Y9(e,n){var t=ov(e,n);function r(o,u){var c=un(e(o)),f=un(e(o));return n.push({paramPath:u+"/sub"},{paramPath:u+"/truediv"}),{sub:c,truediv:f}}function a(o,u,c){var f=t(o,u,3,c+"/conv"),h=r(u,c+"/bn");return{conv:f,bn:h}}var i=rb(e,n);return{extractConvParams:t,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function $9(e,n,t,r){var a=Qi(e),i=a.extractWeights,o=a.getRemainingWeights,u=[],c=Y9(i,u),f=c.extractConvParams,h=c.extractConvWithBatchNormParams,p=c.extractSeparableConvParams,m;if(n.withSeparableConvs){var g=r[0],y=r[1],b=r[2],E=r[3],_=r[4],w=r[5],I=r[6],R=r[7],C=r[8],O=n.isFirstLayerConv2d?f(g,y,3,"conv0"):p(g,y,"conv0"),D=p(y,b,"conv1"),P=p(b,E,"conv2"),k=p(E,_,"conv3"),N=p(_,w,"conv4"),U=p(w,I,"conv5"),V=R?p(I,R,"conv6"):void 0,ee=C?p(R,C,"conv7"):void 0,re=f(C||R||I,5*t,1,"conv8");m={conv0:O,conv1:D,conv2:P,conv3:k,conv4:N,conv5:U,conv6:V,conv7:ee,conv8:re}}else{var g=r[0],y=r[1],b=r[2],E=r[3],_=r[4],w=r[5],I=r[6],R=r[7],C=r[8],O=h(g,y,"conv0"),D=h(y,b,"conv1"),P=h(b,E,"conv2"),k=h(E,_,"conv3"),N=h(_,w,"conv4"),U=h(w,I,"conv5"),V=h(I,R,"conv6"),ee=h(R,C,"conv7"),re=f(C,5*t,1,"conv8");m={conv0:O,conv1:D,conv2:P,conv3:k,conv4:N,conv5:U,conv6:V,conv7:ee,conv8:re}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:m,paramMappings:u}}function j9(e,n){var t=qo(e,n);function r(u){var c=t(u+"/sub",1),f=t(u+"/truediv",1);return{sub:c,truediv:f}}function a(u){var c=t(u+"/filters",4),f=t(u+"/bias",1);return{filters:c,bias:f}}function i(u){var c=a(u+"/conv"),f=r(u+"/bn");return{conv:c,bn:f}}var o=ab(t);return{extractConvParams:a,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function X9(e,n){var t=[],r=j9(e,t),a=r.extractConvParams,i=r.extractConvWithBatchNormParams,o=r.extractSeparableConvParams,u;if(n.withSeparableConvs){var c=n.filterSizes&&n.filterSizes.length||9;u={conv0:n.isFirstLayerConv2d?a("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:c>7?o("conv6"):void 0,conv7:c>8?o("conv7"):void 0,conv8:a("conv8")}}else u={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return Zi(e,t),{params:u,paramMappings:t}}var UI;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(UI||(UI={}));var lb=function(){function e(n){var t=n===void 0?{}:n,r=t.inputSize,a=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),kx=function(e){He(n,e);function n(t){var r=e.call(this,"TinyYolov2")||this;return q9(t),r._config=t,r}return Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),n.prototype.runTinyYolov2=function(t,r){var a=Io(t,r.conv0);return a=Nn(a,[2,2],[2,2],"same"),a=Io(a,r.conv1),a=Nn(a,[2,2],[2,2],"same"),a=Io(a,r.conv2),a=Nn(a,[2,2],[2,2],"same"),a=Io(a,r.conv3),a=Nn(a,[2,2],[2,2],"same"),a=Io(a,r.conv4),a=Nn(a,[2,2],[2,2],"same"),a=Io(a,r.conv5),a=Nn(a,[2,2],[1,1],"same"),a=Io(a,r.conv6),a=Io(a,r.conv7),Ta(a,r.conv8,"valid",!1)},n.prototype.runMobilenet=function(t,r){var a=this.config.isFirstLayerConv2d?ub(Ta(t,r.conv0,"valid",!1)):Ro(t,r.conv0);return a=Nn(a,[2,2],[2,2],"same"),a=Ro(a,r.conv1),a=Nn(a,[2,2],[2,2],"same"),a=Ro(a,r.conv2),a=Nn(a,[2,2],[2,2],"same"),a=Ro(a,r.conv3),a=Nn(a,[2,2],[2,2],"same"),a=Ro(a,r.conv4),a=Nn(a,[2,2],[2,2],"same"),a=Ro(a,r.conv5),a=Nn(a,[2,2],[1,1],"same"),a=r.conv6?Ro(a,r.conv6):a,a=r.conv7?Ro(a,r.conv7):a,Ta(a,r.conv8,"valid",!1)},n.prototype.forwardInput=function(t,r){var a=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return Ae(function(){var o=t.toBatchTensor(r,!1).toFloat();return o=a.config.meanRgb?Nf(o,a.config.meanRgb):o,o=o.div(Ee(256)),a.config.withSeparableConvs?a.runMobilenet(o,i):a.runTinyYolov2(o,i)})},n.prototype.forward=function(t,r){return Oe(this,void 0,void 0,function(){var a;return ke(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,kn(t)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},n.prototype.detect=function(t,r){return r===void 0&&(r={}),Oe(this,void 0,void 0,function(){var a,i,o,u,c,f,h,p,m,g,y,b,E,_,w=this;return ke(this,function(I){switch(I.label){case 0:return a=new lb(r),i=a.inputSize,o=a.scoreThreshold,[4,kn(t)];case 1:return u=I.sent(),[4,this.forwardInput(u,i)];case 2:return c=I.sent(),f=Ae(function(){return vn(c)[0].expandDims()}),h={width:u.getInputWidth(0),height:u.getInputHeight(0)},[4,this.extractBoxes(f,u.getReshapedInputDimensions(0),o)];case 3:return p=I.sent(),c.dispose(),f.dispose(),m=p.map(function(R){return R.box}),g=p.map(function(R){return R.score}),y=p.map(function(R){return R.classScore}),b=p.map(function(R){return w.config.classes[R.label]}),E=sf(m.map(function(R){return R.rescale(i)}),g,this.config.iouThreshold,!0),_=E.map(function(R){return new rx(g[R],y[R],b[R],m[R],h)}),[2,_]}})})},n.prototype.getDefaultModelName=function(){return""},n.prototype.extractParamsFromWeigthMap=function(t){return X9(t,this.config)},n.prototype.extractParams=function(t){var r=this.config.filterSizes||n.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return $9(t,this.config,this.boxEncodingSize,r)},n.prototype.extractBoxes=function(t,r,a){return Oe(this,void 0,void 0,function(){var i,o,u,c,f,h,p,m,g,y,b,E,_,w,I,R,C,O,D,P,k,N,U,V,ee,re,ne,z,Z,$=this;return ke(this,function(oe){switch(oe.label){case 0:return i=r.width,o=r.height,u=Math.max(i,o),c=u/i,f=u/o,h=t.shape[1],p=this.config.anchors.length,m=Ae(function(){var L=t.reshape([h,h,p,$.boxEncodingSize]),Y=L.slice([0,0,0,0],[h,h,p,4]),Q=L.slice([0,0,0,4],[h,h,p,1]),de=$.withClassScores?$i(L.slice([0,0,0,5],[h,h,p,$.config.classes.length]),3):Ee(0);return[Y,Q,de]}),g=m[0],y=m[1],b=m[2],E=[],[4,y.array()];case 1:return _=oe.sent(),[4,g.array()];case 2:w=oe.sent(),I=0,oe.label=3;case 3:if(!(I<h))return[3,12];R=0,oe.label=4;case 4:if(!(R<h))return[3,11];C=0,oe.label=5;case 5:return C<p?(O=h1(_[I][R][C][0]),!a||O>a?(D=(R+h1(w[I][R][C][0]))/h*c,P=(I+h1(w[I][R][C][1]))/h*f,k=Math.exp(w[I][R][C][2])*this.config.anchors[C].x/h*c,N=Math.exp(w[I][R][C][3])*this.config.anchors[C].y/h*f,U=D-k/2,V=P-N/2,ee={row:I,col:R,anchor:C},this.withClassScores?[4,this.extractPredictedClass(b,ee)]:[3,7]):[3,9]):[3,10];case 6:return Z=oe.sent(),[3,8];case 7:Z={classScore:1,label:0},oe.label=8;case 8:re=Z,ne=re.classScore,z=re.label,E.push(Xn({box:new av(U,V,U+k,V+N),score:O,classScore:O*ne,label:z},ee)),oe.label=9;case 9:return C++,[3,5];case 10:return R++,[3,4];case 11:return I++,[3,3];case 12:return g.dispose(),y.dispose(),b.dispose(),[2,E]}})})},n.prototype.extractPredictedClass=function(t,r){return Oe(this,void 0,void 0,function(){var a,i,o,u;return ke(this,function(c){switch(c.label){case 0:return a=r.row,i=r.col,o=r.anchor,[4,t.array()];case 1:return u=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(f,h){return u[a][i][o][h]}).map(function(f,h){return{classScore:f,label:h}}).reduce(function(f,h){return f.classScore>h.classScore?f:h})]}})})},n.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],n}(Xi),Z9=function(e){He(n,e);function n(t){t===void 0&&(t=!0);var r=this,a=Object.assign({},{withSeparableConvs:t,iouThreshold:V9,classes:["face"]},t?{anchors:H9,meanRgb:z9}:{anchors:G9,withClassScores:!0});return r=e.call(this,a)||this,r}return Object.defineProperty(n.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(t,r){return Oe(this,void 0,void 0,function(){var a;return ke(this,function(i){switch(i.label){case 0:return[4,this.detect(t,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new di(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return this.withSeparableConvs?K9:W9},n.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},n}(kx),Q9=function(e){He(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return n}(lb),Tf=function(){function e(){}return e.prototype.then=function(n){return Oe(this,void 0,void 0,function(){var t;return ke(this,function(r){switch(r.label){case 0:return t=n,[4,this.run()];case 1:return[2,t.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return Oe(this,void 0,void 0,function(){return ke(this,function(n){throw new Error("ComposableTask - run is not implemented")})})},e}();function sv(e,n,t,r,a){return a===void 0&&(a=function(i){var o=i.alignedRect;return o}),Oe(this,void 0,void 0,function(){var i,o,u,c,f;return ke(this,function(h){switch(h.label){case 0:return i=e.map(function(p){return i9(p)?a(p):p.detection}),u=r,u?[3,5]:n instanceof Ut?[4,tb(n,i)]:[3,2];case 1:return c=h.sent(),[3,4];case 2:return[4,eb(n,i)];case 3:c=h.sent(),h.label=4;case 4:u=c,h.label=5;case 5:return o=u,[4,t(o)];case 6:return f=h.sent(),o.forEach(function(p){return p instanceof Ut&&p.dispose()}),[2,f]}})})}function cb(e,n,t,r,a){return Oe(this,void 0,void 0,function(){var i=this;return ke(this,function(o){return[2,sv([e],n,function(u){return Oe(i,void 0,void 0,function(){return ke(this,function(c){return[2,t(u[0])]})})},r,a)]})})}function J9(e){return Ae(function(){return qr(vn(e,3).reverse(),3)})}var uh=2,Sm=12;function eW(e,n){var t=ov(e,n),r=nb(e,n);function a(f,h){var p=un(e(f));return n.push({paramPath:h}),p}function i(f,h,p){p===void 0&&(p=!1);var m=t(f[0],f[1],3,h+"/conv1"),g=a(f[1],h+"/prelu1_alpha"),y=t(f[1],f[2],3,h+"/conv2"),b=a(f[2],h+"/prelu2_alpha"),E=t(f[2],f[3],p?2:3,h+"/conv3"),_=a(f[3],h+"/prelu3_alpha");return{conv1:m,prelu1_alpha:g,conv2:y,prelu2_alpha:b,conv3:E,prelu3_alpha:_}}function o(){var f=i([3,10,16,32],"pnet"),h=t(32,2,1,"pnet/conv4_1"),p=t(32,4,1,"pnet/conv4_2");return Xn(Xn({},f),{conv4_1:h,conv4_2:p})}function u(){var f=i([3,28,48,64],"rnet",!0),h=r(576,128,"rnet/fc1"),p=a(128,"rnet/prelu4_alpha"),m=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return Xn(Xn({},f),{fc1:h,prelu4_alpha:p,fc2_1:m,fc2_2:g})}function c(){var f=i([3,32,64,64],"onet"),h=t(64,128,2,"onet/conv4"),p=a(128,"onet/prelu4_alpha"),m=r(1152,256,"onet/fc1"),g=a(256,"onet/prelu5_alpha"),y=r(256,2,"onet/fc2_1"),b=r(256,4,"onet/fc2_2"),E=r(256,10,"onet/fc2_3");return Xn(Xn({},f),{conv4:h,prelu4_alpha:p,fc1:m,prelu5_alpha:g,fc2_1:y,fc2_2:b,fc2_3:E})}return{extractPNetParams:o,extractRNetParams:u,extractONetParams:c}}function tW(e){var n=Qi(e),t=n.extractWeights,r=n.getRemainingWeights,a=[],i=eW(t,a),o=i.extractPNetParams,u=i.extractRNetParams,c=i.extractONetParams,f=o(),h=u(),p=c();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:f,rnet:h,onet:p},paramMappings:a}}function nW(e,n){var t=qo(e,n);function r(h){var p=t(h+"/weights",4,h+"/filters"),m=t(h+"/bias",1);return{filters:p,bias:m}}function a(h){var p=t(h+"/weights",2),m=t(h+"/bias",1);return{weights:p,bias:m}}function i(h){return t(h,1)}function o(h){var p=r(h+"/conv1"),m=i(h+"/prelu1_alpha"),g=r(h+"/conv2"),y=i(h+"/prelu2_alpha"),b=r(h+"/conv3"),E=i(h+"/prelu3_alpha");return{conv1:p,prelu1_alpha:m,conv2:g,prelu2_alpha:y,conv3:b,prelu3_alpha:E}}function u(){var h=o("pnet"),p=r("pnet/conv4_1"),m=r("pnet/conv4_2");return Xn(Xn({},h),{conv4_1:p,conv4_2:m})}function c(){var h=o("rnet"),p=a("rnet/fc1"),m=i("rnet/prelu4_alpha"),g=a("rnet/fc2_1"),y=a("rnet/fc2_2");return Xn(Xn({},h),{fc1:p,prelu4_alpha:m,fc2_1:g,fc2_2:y})}function f(){var h=o("onet"),p=r("onet/conv4"),m=i("onet/prelu4_alpha"),g=a("onet/fc1"),y=i("onet/prelu5_alpha"),b=a("onet/fc2_1"),E=a("onet/fc2_2"),_=a("onet/fc2_3");return Xn(Xn({},h),{conv4:p,prelu4_alpha:m,fc1:g,prelu5_alpha:y,fc2_1:b,fc2_2:E,fc2_3:_})}return{extractPNetParams:u,extractRNetParams:c,extractONetParams:f}}function rW(e){var n=[],t=nW(e,n),r=t.extractPNetParams,a=t.extractRNetParams,i=t.extractONetParams,o=r(),u=a(),c=i();return Zi(e,n),{params:{pnet:o,rnet:u,onet:c},paramMappings:n}}function py(e,n){var t=n[0],r=n[1];return{height:Math.floor(t*e),width:Math.floor(r*e)}}function aW(e,n,t){for(var r=t[0],a=t[1],i=Sm/e,o=[],u=Math.min(r,a)*i,c=0;u>=12;)o.push(i*Math.pow(n,c)),u=u*n,c+=1;return o}var fb=function(e){He(n,e);function n(t,r,a,i){return e.call(this,{left:t,top:r,right:a,bottom:i},!0)||this}return n}(Go);function xx(e){return Ae(function(){return er(bn(e,Ee(127.5)),Ee(.0078125))})}function nl(e,n){return Ae(function(){return Ze(Ft(e),er(n,hm(Ft(hm(e)))))})}function db(e,n,t){return t===void 0&&(t=!1),Ae(function(){var r=Ta(e,n.conv1,"valid");return r=nl(r,n.prelu1_alpha),r=Nn(r,t?[2,2]:[3,3],[2,2],"same"),r=Ta(r,n.conv2,"valid"),r=nl(r,n.prelu2_alpha),r=t?r:Nn(r,[3,3],[2,2],"valid"),r=Ta(r,n.conv3,"valid"),r=nl(r,n.prelu3_alpha),r})}function iW(e,n){return Ae(function(){var t=db(e,n,!0),r=Ta(t,n.conv4_1,"valid"),a=fa(ev(r,3),3),i=$i(bn(r,a),3),o=Ta(t,n.conv4_2,"valid");return{prob:i,regions:o}})}function oW(e,n){return Ae(function(){var t=py(n,e.shape.slice(1)),r=t.height,a=t.width,i=H2.resizeBilinear(e,[r,a]),o=xx(i);return Vo(o,[0,2,1,3])})}function sW(e,n,t,r){for(var a=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var u=0;u<e.shape[1];u++)i[o][u]>=r&&a.push(new dt(u,o));var c=a.map(function(f){var h=new av(Math.round((f.y*uh+1)/t),Math.round((f.x*uh+1)/t),Math.round((f.y*uh+Sm)/t),Math.round((f.x*uh+Sm)/t)),p=i[f.y][f.x],m=n.arraySync(),g=new fb(m[f.y][f.x][0],m[f.y][f.x][1],m[f.y][f.x][2],m[f.y][f.x][3]);return{cell:h,score:p,region:g}});return c}function uW(e,n,t,r,a){a.stage1=[];var i=n.map(function(m){return Ae(function(){var g={scale:m},y=oW(e,m),b=Date.now(),E=iW(y,r),_=E.prob,w=E.regions;g.pnet=Date.now()-b;var I=vn(vn(_,3)[1])[0],R=vn(w)[0];return{scoresTensor:I,regionsTensor:R,scale:m,statsForScale:g}})}),o=i.map(function(m){var g=m.scoresTensor,y=m.regionsTensor,b=m.scale,E=m.statsForScale,_=sW(g,y,b,t);if(g.dispose(),y.dispose(),!_.length)return a.stage1.push(E),[];var w=Date.now(),I=sf(_.map(function(R){return R.cell}),_.map(function(R){return R.score}),.5);return E.nms=Date.now()-w,E.numBoxes=I.length,a.stage1.push(E),I.map(function(R){return _[R]})}),u=o.reduce(function(m,g){return m.concat(g)},[]),c=[],f=[];if(u.length>0){var h=Date.now(),p=sf(u.map(function(m){return m.cell}),u.map(function(m){return m.score}),.7);a.stage1_nms=Date.now()-h,f=p.map(function(m){return u[m].score}),c=p.map(function(m){return u[m]}).map(function(m){var g=m.cell,y=m.region;return new av(g.left+y.left*g.width,g.top+y.top*g.height,g.right+y.right*g.width,g.bottom+y.bottom*g.height).toSquare().round()})}return{boxes:c,scores:f}}function Dx(e,n,t){var r=t.width,a=t.height;return Oe(this,void 0,void 0,function(){var i,o,u,c=this;return ke(this,function(f){switch(f.label){case 0:return i=Vs(e),[4,Promise.all(n.map(function(h){return Oe(c,void 0,void 0,function(){var p,m,g,y,b,E,_,w;return ke(this,function(I){return p=h.padAtBorders(e.height,e.width),m=p.y,g=p.ey,y=p.x,b=p.ex,E=y-1,_=m-1,w=i.getImageData(E,_,b-E,g-_),[2,tr.isNodejs()?J2(w):createImageBitmap(w)]})})}))];case 1:return o=f.sent(),u=[],o.forEach(function(h){var p=iv({width:r,height:a}),m=Vs(p);m.drawImage(h,0,0,r,a);for(var g=m.getImageData(0,0,r,a).data,y=[],b=0;b<g.length;b+=4)y.push(g[b+2]),y.push(g[b+1]),y.push(g[b]);u.push(y)}),[2,u.map(function(h){var p=Ae(function(){var m=Vo(br(h,[1,r,a,3]),[0,2,1,3]).toFloat();return xx(m)});return p})]}})})}function lW(e,n){return Ae(function(){var t=db(e,n),r=Na(t,[t.shape[0],n.fc1.weights.shape[0]]),a=Qa(r,n.fc1),i=nl(a,n.prelu4_alpha),o=Qa(i,n.fc2_1),u=fa(ev(o,1),1),c=$i(bn(o,u),1),f=Qa(i,n.fc2_2),h=vn(c,1)[1];return{scores:h,regions:f}})}function cW(e,n,t,r,a){return Oe(this,void 0,void 0,function(){var i,o,u,c,f,h,p,m,g,y,b,E,_,w;return ke(this,function(I){switch(I.label){case 0:return i=Date.now(),[4,Dx(e,n,{width:24,height:24})];case 1:return o=I.sent(),a.stage2_extractImagePatches=Date.now()-i,i=Date.now(),u=o.map(function(R){var C=lW(R,r);return R.dispose(),C}),a.stage2_rnet=Date.now()-i,c=u.length>1?mn(u.map(function(R){return R.scores})):u[0].scores,p=(h=Array).from,[4,c.data()];case 2:return f=p.apply(h,[I.sent()]),c.dispose(),m=f.map(function(R,C){return{score:R,idx:C}}).filter(function(R){return R.score>t}).map(function(R){var C=R.idx;return C}),g=m.map(function(R){return n[R]}),y=m.map(function(R){return f[R]}),b=[],E=[],g.length>0&&(i=Date.now(),_=sf(g,y,.7),a.stage2_nms=Date.now()-i,w=_.map(function(R){var C=u[m[R]].regions.arraySync();return new fb(C[0][0],C[0][1],C[0][2],C[0][3])}),E=_.map(function(R){return y[R]}),b=_.map(function(R,C){return g[R].calibrate(w[C])})),u.forEach(function(R){R.regions.dispose(),R.scores.dispose()}),[2,{boxes:b,scores:E}]}})})}function fW(e,n){return Ae(function(){var t=db(e,n);t=Nn(t,[2,2],[2,2],"same"),t=Ta(t,n.conv4,"valid"),t=nl(t,n.prelu4_alpha);var r=Na(t,[t.shape[0],n.fc1.weights.shape[0]]),a=Qa(r,n.fc1),i=nl(a,n.prelu5_alpha),o=Qa(i,n.fc2_1),u=fa(ev(o,1),1),c=$i(bn(o,u),1),f=Qa(i,n.fc2_2),h=Qa(i,n.fc2_3),p=vn(c,1)[1];return{scores:p,regions:f,points:h}})}function dW(e,n,t,r,a){return Oe(this,void 0,void 0,function(){var i,o,u,c,f,h,p,m,g,y,b,E,_,w,I;return ke(this,function(R){switch(R.label){case 0:return i=Date.now(),[4,Dx(e,n,{width:48,height:48})];case 1:return o=R.sent(),a.stage3_extractImagePatches=Date.now()-i,i=Date.now(),u=o.map(function(C){var O=fW(C,r);return C.dispose(),O}),a.stage3_onet=Date.now()-i,c=u.length>1?mn(u.map(function(C){return C.scores})):u[0].scores,p=(h=Array).from,[4,c.data()];case 2:return f=p.apply(h,[R.sent()]),c.dispose(),m=f.map(function(C,O){return{score:C,idx:O}}).filter(function(C){return C.score>t}).map(function(C){var O=C.idx;return O}),g=m.map(function(C){var O=u[C].regions.arraySync();return new fb(O[0][0],O[0][1],O[0][2],O[0][3])}),y=m.map(function(C,O){return n[C].calibrate(g[O])}),b=m.map(function(C){return f[C]}),E=[],_=[],w=[],y.length>0&&(i=Date.now(),I=sf(y,b,.7,!1),a.stage3_nms=Date.now()-i,E=I.map(function(C){return y[C]}),_=I.map(function(C){return b[C]}),w=I.map(function(C,O){return Array(5).fill(0).map(function(D,P){var k=u[C].points.arraySync();return new dt(k[0][P]*(E[O].width+1)+E[O].left,k[0][P+5]*(E[O].height+1)+E[O].top)})})),u.forEach(function(C){C.regions.dispose(),C.scores.dispose(),C.points.dispose()}),[2,{boxes:E,scores:_,points:w}]}})})}var hW=function(e){He(n,e);function n(){return e.call(this,"Mtcnn")||this}return n.prototype.load=function(t){return Oe(this,void 0,void 0,function(){return ke(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]})})},n.prototype.loadFromDisk=function(t){return Oe(this,void 0,void 0,function(){return ke(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]})})},n.prototype.forwardInput=function(t,r){return r===void 0&&(r={}),Oe(this,void 0,void 0,function(){var a,i,o,u,c,f,h,p,m,g,y,b,E,_,w,I,R,C,O,D,P;return ke(this,function(k){switch(k.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(i=t.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},u=Date.now(),c=Ae(function(){return J9(fa($2.fromPixels(i)).toFloat())}),f=function(N){return c.dispose(),o.total=Date.now()-u,N},h=c.shape.slice(1),p=h[0],m=h[1],g=new Tx(r),y=g.minFaceSize,b=g.scaleFactor,E=g.maxNumScales,_=g.scoreThresholds,w=g.scaleSteps,I=(w||aW(y,b,[p,m])).filter(function(N){var U=py(N,[p,m]);return Math.min(U.width,U.height)>Sm}).slice(0,E),o.scales=I,o.pyramid=I.map(function(N){return py(N,[p,m])}),R=Date.now(),[4,uW(c,I,_[0],a.pnet,o)];case 1:return C=k.sent(),o.total_stage1=Date.now()-R,C.boxes.length?(o.stage2_numInputBoxes=C.boxes.length,R=Date.now(),[4,cW(i,C.boxes,_[1],a.rnet,o)]):[2,f({results:[],stats:o})];case 2:return O=k.sent(),o.total_stage2=Date.now()-R,O.boxes.length?(o.stage3_numInputBoxes=O.boxes.length,R=Date.now(),[4,dW(i,O.boxes,_[2],a.onet,o)]):[2,f({results:[],stats:o})];case 3:return D=k.sent(),o.total_stage3=Date.now()-R,P=D.boxes.map(function(N,U){return ib(Z2({},new di(D.scores[U],new X2(N.left/m,N.top/p,N.width/m,N.height/p),{height:p,width:m})),new Hz(D.points[U].map(function(V){return V.sub(new dt(N.left,N.top)).div(new dt(N.width,N.height))}),{width:N.width,height:N.height}))}),[2,f({results:P,stats:o})]}})})},n.prototype.forward=function(t,r){return r===void 0&&(r={}),Oe(this,void 0,void 0,function(){var a;return ke(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,kn(t)];case 1:return[4,a.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},n.prototype.forwardWithStats=function(t,r){return r===void 0&&(r={}),Oe(this,void 0,void 0,function(){var a;return ke(this,function(i){switch(i.label){case 0:return a=this.forwardInput,[4,kn(t)];case 1:return[2,a.apply(this,[i.sent(),r])]}})})},n.prototype.getDefaultModelName=function(){return"mtcnn_model"},n.prototype.extractParamsFromWeigthMap=function(t){return rW(t)},n.prototype.extractParams=function(t){return tW(t)},n}(Xi),pW=.4,mW=[new dt(1.603231,2.094468),new dt(6.041143,7.080126),new dt(2.882459,3.518061),new dt(4.266906,5.178857),new dt(9.041765,10.66308)],vW=[117.001,114.697,97.404],gW=function(e){He(n,e);function n(){var t=this,r={withSeparableConvs:!0,iouThreshold:pW,classes:["face"],anchors:mW,meanRgb:vW,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t=e.call(this,r)||this,t}return Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(t,r){return Oe(this,void 0,void 0,function(){var a;return ke(this,function(i){switch(i.label){case 0:return[4,this.detect(t,r)];case 1:return a=i.sent(),[2,a.map(function(o){return new di(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},n.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},n}(kx),pa={ssdMobilenetv1:new Ox,tinyFaceDetector:new gW,tinyYolov2:new Z9,mtcnn:new hW,faceLandmark68Net:new Ax,faceLandmark68TinyNet:new y9,faceRecognitionNet:new I9,faceExpressionNet:new a9,ageGenderNet:new p9},Px=function(e){He(n,e);function n(t,r,a){var i=e.call(this)||this;return i.parentTask=t,i.input=r,i.extractedFaces=a,i}return n}(Tf),hb=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Oe(this,void 0,void 0,function(){var t,r,a=this;return ke(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,sv(t,this.input,function(o){return Oe(a,void 0,void 0,function(){return ke(this,function(u){switch(u.label){case 0:return[4,Promise.all(o.map(function(c){return pa.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,u.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,t.map(function(o,u){return Sx(o,r[u])})]}})})},n.prototype.withAgeAndGender=function(){return new gb(this,this.input)},n}(Px),pb=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Oe(this,void 0,void 0,function(){var t,r;return ke(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,cb(t,this.input,function(i){return pa.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,Sx(t,r)]}})})},n.prototype.withAgeAndGender=function(){return new yb(this,this.input)},n}(Px),mb=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new bb(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Eb(this,this.input)},n}(hb),vb=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withAgeAndGender=function(){return new Sb(this,this.input)},n.prototype.withFaceDescriptor=function(){return new _b(this,this.input)},n}(pb),Mx=function(e){He(n,e);function n(t,r,a){var i=e.call(this)||this;return i.parentTask=t,i.input=r,i.extractedFaces=a,i}return n}(Tf),gb=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Oe(this,void 0,void 0,function(){var t,r,a=this;return ke(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return t=i.sent(),[4,sv(t,this.input,function(o){return Oe(a,void 0,void 0,function(){return ke(this,function(u){switch(u.label){case 0:return[4,Promise.all(o.map(function(c){return pa.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,u.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,t.map(function(o,u){var c=r[u],f=c.age,h=c.gender,p=c.genderProbability;return Cx(Nx(o,h,p),f)})]}})})},n.prototype.withFaceExpressions=function(){return new hb(this,this.input)},n}(Mx),yb=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Oe(this,void 0,void 0,function(){var t,r,a,i,o;return ke(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return t=u.sent(),t?[4,cb(t,this.input,function(c){return pa.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return r=u.sent(),a=r.age,i=r.gender,o=r.genderProbability,[2,Cx(Nx(t,i,o),a)]}})})},n.prototype.withFaceExpressions=function(){return new pb(this,this.input)},n}(Mx),bb=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new mb(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Eb(this,this.input)},n}(gb),Sb=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.withFaceExpressions=function(){return new vb(this,this.input)},n.prototype.withFaceDescriptor=function(){return new _b(this,this.input)},n}(yb),Lx=function(e){He(n,e);function n(t,r){var a=e.call(this)||this;return a.parentTask=t,a.input=r,a}return n}(Tf),Eb=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Oe(this,void 0,void 0,function(){var t,r;return ke(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),[4,sv(t,this.input,function(i){return Promise.all(i.map(function(o){return pa.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(i,o){return Rx(t[o],i)})]}})})},n.prototype.withFaceExpressions=function(){return new mb(this,this.input)},n.prototype.withAgeAndGender=function(){return new bb(this,this.input)},n}(Lx),_b=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Oe(this,void 0,void 0,function(){var t,r;return ke(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,cb(t,this.input,function(i){return pa.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,Rx(t,r)]}})})},n.prototype.withFaceExpressions=function(){return new vb(this,this.input)},n.prototype.withAgeAndGender=function(){return new Sb(this,this.input)},n}(Lx),Bx=function(e){He(n,e);function n(t,r,a){var i=e.call(this)||this;return i.parentTask=t,i.input=r,i.useTinyLandmarkNet=a,i}return Object.defineProperty(n.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?pa.faceLandmark68TinyNet:pa.faceLandmark68Net},enumerable:!0,configurable:!0}),n}(Tf),yW=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Oe(this,void 0,void 0,function(){var t,r,a,i,o,u=this;return ke(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return t=c.sent(),r=t.map(function(f){return f.detection}),this.input instanceof Ut?[4,tb(this.input,r)]:[3,3];case 2:return i=c.sent(),[3,5];case 3:return[4,eb(this.input,r)];case 4:i=c.sent(),c.label=5;case 5:return a=i,[4,Promise.all(a.map(function(f){return u.landmarkNet.detectLandmarks(f)}))];case 6:return o=c.sent(),a.forEach(function(f){return f instanceof Ut&&f.dispose()}),[2,t.map(function(f,h){return ib(f,o[h])})]}})})},n.prototype.withFaceExpressions=function(){return new mb(this,this.input)},n.prototype.withAgeAndGender=function(){return new bb(this,this.input)},n.prototype.withFaceDescriptors=function(){return new Eb(this,this.input)},n}(Bx),bW=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Oe(this,void 0,void 0,function(){var t,r,a,i,o;return ke(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return t=u.sent(),t?(r=t.detection,this.input instanceof Ut?[4,tb(this.input,[r])]:[3,3]):[2];case 2:return i=u.sent(),[3,5];case 3:return[4,eb(this.input,[r])];case 4:i=u.sent(),u.label=5;case 5:return a=i,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return o=u.sent(),a.forEach(function(c){return c instanceof Ut&&c.dispose()}),[2,ib(t,o)]}})})},n.prototype.withFaceExpressions=function(){return new vb(this,this.input)},n.prototype.withAgeAndGender=function(){return new Sb(this,this.input)},n.prototype.withFaceDescriptor=function(){return new _b(this,this.input)},n}(Bx),Ux=function(e){He(n,e);function n(t,r){r===void 0&&(r=new sb);var a=e.call(this)||this;return a.input=t,a.options=r,a}return n}(Tf),SW=function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Oe(this,void 0,void 0,function(){var t,r,a,i;return ke(this,function(o){switch(o.label){case 0:return t=this,r=t.input,a=t.options,a instanceof Tx?[4,pa.mtcnn.forward(r,a)]:[3,2];case 1:return[2,o.sent().map(function(u){return u.detection})];case 2:if(i=a instanceof Q9?function(u){return pa.tinyFaceDetector.locateFaces(u,a)}:a instanceof sb?function(u){return pa.ssdMobilenetv1.locateFaces(u,a)}:a instanceof lb?function(u){return pa.tinyYolov2.locateFaces(u,a)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},n.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(r){return Oe(t,void 0,void 0,function(){var a;return ke(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a.map(function(o){return Z2({},o)}))]}})})})},n.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new yW(this.runAndExtendWithFaceDetections(),this.input,t)},n.prototype.withFaceExpressions=function(){return new hb(this.runAndExtendWithFaceDetections(),this.input)},n.prototype.withAgeAndGender=function(){return new gb(this.runAndExtendWithFaceDetections(),this.input)},n}(Ux);(function(e){He(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.run=function(){return Oe(this,void 0,void 0,function(){var t,r;return ke(this,function(a){switch(a.label){case 0:return[4,new SW(this.input,this.options)];case 1:return t=a.sent(),r=t[0],t.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},n.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(r){return Oe(t,void 0,void 0,function(){var a;return ke(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return a=i.sent(),[2,r(a?Z2({},a):void 0)]}})})})},n.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new bW(this.runAndExtendWithFaceDetection(),this.input,t)},n.prototype.withFaceExpressions=function(){return new pb(this.runAndExtendWithFaceDetection(),this.input)},n.prototype.withAgeAndGender=function(){return new yb(this.runAndExtendWithFaceDetection(),this.input)},n})(Ux);function EW(e,n){if(e.length!==n.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var t=Array.from(e),r=Array.from(n);return Math.sqrt(t.map(function(a,i){return a-r[i]}).reduce(function(a,i){return a+Math.pow(i,2)},0))}(function(){function e(n,t){t===void 0&&(t=.6),this._distanceThreshold=t;var r=Array.isArray(n)?n:[n];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,i=function(){return"person "+a++};this._labeledDescriptors=r.map(function(o){if(o instanceof ah)return o;if(o instanceof Float32Array)return new ah(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new ah(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(n,t){return t.map(function(r){return EW(r,n)}).reduce(function(r,a){return r+a},0)/(t.length||1)},e.prototype.matchDescriptor=function(n){var t=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,i=r.label;return new DI(i,t.computeMeanDistance(n,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},e.prototype.findBestMatch=function(n){var t=this.matchDescriptor(n);return t.distance<this.distanceThreshold?t:new DI("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(n){return n.toJSON()})}},e.fromJSON=function(n){var t=n.labeledDescriptors.map(function(r){return ah.fromJSON(r)});return new e(t,n.distanceThreshold)},e})();function _W(e){return typeof e=="function"&&typeof e.delegate=="function"}function my(e,n){let t;const r=(...a)=>(typeof t<"u"||(t=n.apply(r.thisArg,a)),t);return r.delegate=n,r.thisArg=e,r}const Fx=e=>Object.entries(e);function De(e,n,t){const r=Array.isArray(n)?n:[],a=typeof n=="function"?n:t;if(!a)throw new TypeError("[Injectable] Received invalid arguments. The factory function must be either the second or third argument.");if(a.length!==r.length)throw new TypeError(`[Injectable] Function arity does not match the number of dependencies. Function has arity ${a.length}, but ${r.length} dependencies were specified.
Dependencies: ${JSON.stringify(r)}`);const i=(...o)=>a(...o);return i.token=e,i.dependencies=r,i}function Vx(e,n){const t=(...r)=>new n(...r);return t.token=e,t.dependencies=n.dependencies,t}function v1(e,n,t){const r=Array.isArray(n)?n:[],a=typeof n=="function"?n:t;if(!a)throw new TypeError("[ConcatInjectable] Received invalid arguments. The factory function must be either the second or third argument.");if(a.length!==r.length)throw new TypeError(`[Injectable] Function arity does not match the number of dependencies. Function has arity ${a.length}, but ${r.length} dependencies were specified.
Dependencies: ${JSON.stringify(r)}`);const i=(o,...u)=>o.concat(a(...u));return i.token=e,i.dependencies=[e,...r],i}class xo{constructor(n){qn(this,"injectables");qn(this,"providesValue",(n,t)=>this.provides(De(n,[],()=>t)));qn(this,"providesClass",(n,t)=>this.provides(Vx(n,t)));this.injectables=n}provides(n){return new xo({...this.injectables,[n.token]:n})}getFactories(n){let t;return t=Object.fromEntries(Fx(this.injectables).map(([r,a])=>[r,my(n,()=>a(...a.dependencies.map(i=>i===r?n.get(i):t[i]?t[i]():n.get(i))))]))}getTokens(){return Object.keys(this.injectables)}}const Gx="$container";class Mr{constructor(n){qn(this,"factories");qn(this,"providesClass",(n,t)=>this.providesService(Vx(n,t)));qn(this,"providesValue",(n,t)=>this.providesService(De(n,[],()=>t)));qn(this,"appendValue",(n,t)=>this.providesService(v1(n,()=>t)));qn(this,"appendClass",(n,t)=>this.providesService(v1(n,()=>this.providesClass(n,t).get(n))));qn(this,"append",n=>this.providesService(v1(n.token,()=>this.providesService(n).get(n.token))));const t={};for(const r in n){const a=n[r];_W(a)?(t[r]=a,a.thisArg=this):t[r]=my(this,a)}this.factories=t}static provides(n){return n instanceof xo?new Mr({}).provides(n):n instanceof Mr?new Mr({}).provides(n):new Mr({}).provides(n)}static providesValue(n,t){return new Mr({}).providesValue(n,t)}static fromObject(n){return Fx(n).reduce((t,[r,a])=>t.providesValue(r,a),new Mr({}))}copy(n){const t={...this.factories};return(n||[]).forEach(r=>{t[r]=this.factories[r].delegate}),new Mr(t)}get(n){if(n===Gx)return this;const t=this.factories[n];if(!t)throw new Error(`[Container::get] Could not find Service for Token "${String(n)}". This should've caused a compile-time error. If the Token is 'undefined', check all your calls to the Injectable function. Make sure you define dependencies using string literals or string constants that are definitely initialized before the call to Injectable.`);return t()}run(n){if(n instanceof xo){const t=this.provides(n);for(const r of n.getTokens())t.get(r)}else this.provides(n).get(n.token);return this}provides(n){if(n instanceof xo||n instanceof Mr){const t=n instanceof xo?n.getFactories(this):n.factories;return new Mr({...this.factories,...t})}return this.providesService(n)}providesService(n){const t=n.token,r=n.dependencies,a=r.indexOf(t)===-1?void 0:()=>this.get(t),i=my(this,function(){return n(...r.map(u=>u===t?a():this.get(u)))}),o={...this.factories,[t]:i};return new Mr(o)}}function Gs(e){return Object.fromEntries(Object.entries(e).filter(([n,t])=>t!==void 0))}const Sh="__snap_camkit_override__",AW=["wasmEndpointOverride","logger","logLevel","userAgentFlavor"];AW.forEach(e=>{wW(e)});function wW(e){typeof window>"u"||Object.defineProperty(window,`${Sh}${e}`,{get(){var n;return(n=Em())===null||n===void 0?void 0:n[e]},set(n){const t=Object.assign(Object.assign({},Em()),{[e]:n});Object.values(t).every(r=>typeof r>"u")?sessionStorage.removeItem(Sh):sessionStorage.setItem(Sh,JSON.stringify(t))},enumerable:!1,configurable:!0})}function Em(){if(!sessionStorage)return;const e=sessionStorage.getItem(Sh);return e&&JSON.parse(e)}const g1={lensPerformance:{cluster:0,benchmarks:[],webglRendererInfo:"unknown"},logger:"noop",logLevel:"info",shouldUseWorker:!0,apiHostname:"camera-kit-api.snapar.com",userAgentFlavor:"release",fonts:[]},Ea="configuration";function IW(){return/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>2}const RW=e=>{const n=Em();return n&&console.warn("Configuration overrides applied",n),De(Ea,()=>{const t=Object.assign(Object.assign({},e),{lensPerformance:e.lensPerformance instanceof Promise?e.lensPerformance.catch(()=>g1.lensPerformance):e.lensPerformance});return Object.assign(Object.assign(Object.assign(Object.assign({},g1),{shouldUseWorker:IW()?!1:g1.shouldUseWorker}),Gs(t)),Gs(n??{}))})};var vy=function(e,n){return vy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},vy(e,n)};function hi(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");vy(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}function CW(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t}function Un(e,n,t,r,a,i){function o(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var u=r.kind,c=u==="getter"?"get":u==="setter"?"set":"value",f=e?r.static?e:e.prototype:null,h=f?Object.getOwnPropertyDescriptor(f,r.name):{},p,m=!1,g=t.length-1;g>=0;g--){var y={};for(var b in r)y[b]=b==="access"?{}:r[b];for(var b in r.access)y.access[b]=r.access[b];y.addInitializer=function(_){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(_||null))};var E=(0,t[g])(u==="accessor"?{get:h.get,set:h.set}:h[c],y);if(u==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(p=o(E.get))&&(h.get=p),(p=o(E.set))&&(h.set=p),(p=o(E.init))&&a.unshift(p)}else(p=o(E))&&(u==="field"?a.unshift(p):h[c]=p)}f&&Object.defineProperty(f,r.name,h),m=!0}function Of(e,n,t){for(var r=arguments.length>2,a=0;a<n.length;a++)t=r?n[a].call(e,t):n[a].call(e);return r?t:void 0}function ye(e,n,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function u(h){try{f(r.next(h))}catch(p){o(p)}}function c(h){try{f(r.throw(h))}catch(p){o(p)}}function f(h){h.done?i(h.value):a(h.value).then(u,c)}f((r=r.apply(e,n||[])).next())})}function Hx(e,n){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(r=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){t.label=f[1];break}if(f[0]===6&&t.label<i[1]){t.label=i[1],i=f;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(f);break}i[2]&&t.ops.pop(),t.trys.pop();continue}f=n.call(e,t)}catch(h){f=[6,h],a=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function dl(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function $r(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r=t.call(e),a,i=[],o;try{for(;(n===void 0||n-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(u){o={error:u}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return i}function ya(e,n,t){if(t||arguments.length===2)for(var r=0,a=n.length,i;r<a;r++)(i||!(r in n))&&(i||(i=Array.prototype.slice.call(n,0,r)),i[r]=n[r]);return e.concat(i||Array.prototype.slice.call(n))}function rl(e){return this instanceof rl?(this.v=e,this):new rl(e)}function NW(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(e,n||[]),a,i=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(m){r[m]&&(a[m]=function(g){return new Promise(function(y,b){i.push([m,g,y,b])>1||u(m,g)})})}function u(m,g){try{c(r[m](g))}catch(y){p(i[0][3],y)}}function c(m){m.value instanceof rl?Promise.resolve(m.value.v).then(f,h):p(i[0][2],m)}function f(m){u("next",m)}function h(m){u("throw",m)}function p(m,g){m(g),i.shift(),i.length&&u(i[0][0],i[0][1])}}function TW(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof dl=="function"?dl(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(o){return new Promise(function(u,c){o=e[i](o),a(u,c,o.done,o.value)})}}function a(i,o,u,c){Promise.resolve(c).then(function(f){i({value:f,done:u})},o)}}function OW(e){const[n,t,...r]=e.split(`
`);return[n,...r].join(`
`)}function nr(e){return(n,t)=>{const r=new Error(n,{cause:t});return r.name=e,r.stack=r.stack&&OW(r.stack),r}}const kW=nr("LegalError"),xW=nr("LensContentValidationError"),DW=nr("LensError"),y1=nr("CameraKitSourceError"),PW=nr("LensImagePickerError"),MW=nr("CacheKeyNotFoundError"),LW=nr("ConfigurationError"),uf=nr("PlatformNotSupportedError"),BW=nr("LensExecutionError"),UW=nr("LensAbortError"),FW=nr("PersistentStoreError"),VW=nr("LensAssetError"),GW=nr("BootstrapError"),HW=nr("ArgumentValidationError"),uv=()=>e=>(n,t)=>ye(void 0,void 0,void 0,function*(){const r=yield e(n,t);let a;try{a=yield r.arrayBuffer()}catch{a=new ArrayBuffer(0)}return[a,r]});class jr{constructor(n){this.inner=n}get handler(){return this.inner}map(n){const t=(r,a)=>{var i;const o=new AbortController,u=o.signal;let c=!1;const f=()=>{var m;u.aborted||c||(o.abort(),(m=a==null?void 0:a.signal)===null||m===void 0||m.removeEventListener("abort",f))};(i=a==null?void 0:a.signal)===null||i===void 0||i.addEventListener("abort",f);const h=new Proxy(this.inner,{apply:(m,g,y)=>{const[b,E]=y;E!=null&&E.isSideEffect&&(c=!0);const _=[];u.addEventListener=new Proxy(u.addEventListener,{apply:(R,C,O)=>(_.push(O[1]),Reflect.apply(R,C,O))});const w=()=>{var R;(R=E==null?void 0:E.signal)===null||R===void 0||R.removeEventListener("abort",f),_.forEach(C=>u.removeEventListener("abort",C)),c=!0},I=Reflect.apply(m,g,[b,Object.assign(Object.assign({},E),{isSideEffect:!1,signal:u})]);return I.catch(()=>{}).then(w),I}}),p=n(h)(r,a);return p.catch(()=>{}).then(f),p};return new jr(t)}}function _t(e){return typeof e=="function"}function Ab(e){var n=function(r){Error.call(r),r.stack=new Error().stack},t=e(n);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var b1=Ab(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(r,a){return a+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function _m(e,n){if(e){var t=e.indexOf(n);0<=t&&e.splice(t,1)}}var kf=function(){function e(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var n,t,r,a,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var u=dl(o),c=u.next();!c.done;c=u.next()){var f=c.value;f.remove(this)}}catch(b){n={error:b}}finally{try{c&&!c.done&&(t=u.return)&&t.call(u)}finally{if(n)throw n.error}}else o.remove(this);var h=this.initialTeardown;if(_t(h))try{h()}catch(b){i=b instanceof b1?b.errors:[b]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var m=dl(p),g=m.next();!g.done;g=m.next()){var y=g.value;try{FI(y)}catch(b){i=i??[],b instanceof b1?i=ya(ya([],$r(i)),$r(b.errors)):i.push(b)}}}catch(b){r={error:b}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(r)throw r.error}}}if(i)throw new b1(i)}},e.prototype.add=function(n){var t;if(n&&n!==this)if(this.closed)FI(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(n)}},e.prototype._hasParent=function(n){var t=this._parentage;return t===n||Array.isArray(t)&&t.includes(n)},e.prototype._addParent=function(n){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n},e.prototype._removeParent=function(n){var t=this._parentage;t===n?this._parentage=null:Array.isArray(t)&&_m(t,n)},e.prototype.remove=function(n){var t=this._finalizers;t&&_m(t,n),n instanceof e&&n._removeParent(this)},e.EMPTY=function(){var n=new e;return n.closed=!0,n}(),e}(),zx=kf.EMPTY;function Wx(e){return e instanceof kf||e&&"closed"in e&&_t(e.remove)&&_t(e.add)&&_t(e.unsubscribe)}function FI(e){_t(e)?e():e.unsubscribe()}var zW={Promise:void 0},WW={setTimeout:function(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return setTimeout.apply(void 0,ya([e,n],$r(t)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function Kx(e){WW.setTimeout(function(){throw e})}function hl(){}function Eh(e){e()}var wb=function(e){hi(n,e);function n(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,Wx(t)&&t.add(r)):r.destination=YW,r}return n.create=function(t,r,a){return new pl(t,r,a)},n.prototype.next=function(t){this.isStopped||this._next(t)},n.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(t){this.destination.next(t)},n.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n}(kf),KW=function(){function e(n){this.partialObserver=n}return e.prototype.next=function(n){var t=this.partialObserver;if(t.next)try{t.next(n)}catch(r){lh(r)}},e.prototype.error=function(n){var t=this.partialObserver;if(t.error)try{t.error(n)}catch(r){lh(r)}else lh(n)},e.prototype.complete=function(){var n=this.partialObserver;if(n.complete)try{n.complete()}catch(t){lh(t)}},e}(),pl=function(e){hi(n,e);function n(t,r,a){var i=e.call(this)||this,o;return _t(t)||!t?o={next:t??void 0,error:r??void 0,complete:a??void 0}:o=t,i.destination=new KW(o),i}return n}(wb);function lh(e){Kx(e)}function qW(e){throw e}var YW={closed:!0,next:hl,error:qW,complete:hl},Ib=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Zs(e){return e}function $W(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return qx(e)}function qx(e){return e.length===0?Zs:e.length===1?e[0]:function(t){return e.reduce(function(r,a){return a(r)},t)}}var Xt=function(){function e(n){n&&(this._subscribe=n)}return e.prototype.lift=function(n){var t=new e;return t.source=this,t.operator=n,t},e.prototype.subscribe=function(n,t,r){var a=this,i=XW(n)?n:new pl(n,t,r);return Eh(function(){var o=a,u=o.operator,c=o.source;i.add(u?u.call(i,c):c?a._subscribe(i):a._trySubscribe(i))}),i},e.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(t){n.error(t)}},e.prototype.forEach=function(n,t){var r=this;return t=VI(t),new t(function(a,i){var o=new pl({next:function(u){try{n(u)}catch(c){i(c),o.unsubscribe()}},error:i,complete:a});r.subscribe(o)})},e.prototype._subscribe=function(n){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(n)},e.prototype[Ib]=function(){return this},e.prototype.pipe=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return qx(n)(this)},e.prototype.toPromise=function(n){var t=this;return n=VI(n),new n(function(r,a){var i;t.subscribe(function(o){return i=o},function(o){return a(o)},function(){return r(i)})})},e.create=function(n){return new e(n)},e}();function VI(e){var n;return(n=e??zW.Promise)!==null&&n!==void 0?n:Promise}function jW(e){return e&&_t(e.next)&&_t(e.error)&&_t(e.complete)}function XW(e){return e&&e instanceof wb||jW(e)&&Wx(e)}function ZW(e){return _t(e==null?void 0:e.lift)}function en(e){return function(n){if(ZW(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pt(e,n,t,r,a){return new QW(e,n,t,r,a)}var QW=function(e){hi(n,e);function n(t,r,a,i,o,u){var c=e.call(this,t)||this;return c.onFinalize=o,c.shouldUnsubscribe=u,c._next=r?function(f){try{r(f)}catch(h){t.error(h)}}:e.prototype._next,c._error=i?function(f){try{i(f)}catch(h){t.error(h)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=a?function(){try{a()}catch(f){t.error(f)}finally{this.unsubscribe()}}:e.prototype._complete,c}return n.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},n}(wb),JW=Ab(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),fr=function(e){hi(n,e);function n(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return n.prototype.lift=function(t){var r=new GI(this,this);return r.operator=t,r},n.prototype._throwIfClosed=function(){if(this.closed)throw new JW},n.prototype.next=function(t){var r=this;Eh(function(){var a,i;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=dl(r.currentObservers),u=o.next();!u.done;u=o.next()){var c=u.value;c.next(t)}}catch(f){a={error:f}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}}})},n.prototype.error=function(t){var r=this;Eh(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var a=r.observers;a.length;)a.shift().error(t)}})},n.prototype.complete=function(){var t=this;Eh(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var r=t.observers;r.length;)r.shift().complete()}})},n.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(n.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),n.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},n.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},n.prototype._innerSubscribe=function(t){var r=this,a=this,i=a.hasError,o=a.isStopped,u=a.observers;return i||o?zx:(this.currentObservers=null,u.push(t),new kf(function(){r.currentObservers=null,_m(u,t)}))},n.prototype._checkFinalizedStatuses=function(t){var r=this,a=r.hasError,i=r.thrownError,o=r.isStopped;a?t.error(i):o&&t.complete()},n.prototype.asObservable=function(){var t=new Xt;return t.source=this,t},n.create=function(t,r){return new GI(t,r)},n}(Xt),GI=function(e){hi(n,e);function n(t,r){var a=e.call(this)||this;return a.destination=t,a.source=r,a}return n.prototype.next=function(t){var r,a;(a=(r=this.destination)===null||r===void 0?void 0:r.next)===null||a===void 0||a.call(r,t)},n.prototype.error=function(t){var r,a;(a=(r=this.destination)===null||r===void 0?void 0:r.error)===null||a===void 0||a.call(r,t)},n.prototype.complete=function(){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||r===void 0||r.call(t)},n.prototype._subscribe=function(t){var r,a;return(a=(r=this.source)===null||r===void 0?void 0:r.subscribe(t))!==null&&a!==void 0?a:zx},n}(fr),eK=function(e){hi(n,e);function n(t){var r=e.call(this)||this;return r._value=t,r}return Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),n.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return!r.closed&&t.next(this._value),r},n.prototype.getValue=function(){var t=this,r=t.hasError,a=t.thrownError,i=t._value;if(r)throw a;return this._throwIfClosed(),i},n.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},n}(fr),Rb={now:function(){return(Rb.delegate||Date).now()},delegate:void 0},tK=function(e){hi(n,e);function n(t,r,a){t===void 0&&(t=1/0),r===void 0&&(r=1/0),a===void 0&&(a=Rb);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=r,i._timestampProvider=a,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=r===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,r),i}return n.prototype.next=function(t){var r=this,a=r.isStopped,i=r._buffer,o=r._infiniteTimeWindow,u=r._timestampProvider,c=r._windowTime;a||(i.push(t),!o&&i.push(u.now()+c)),this._trimBuffer(),e.prototype.next.call(this,t)},n.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(t),a=this,i=a._infiniteTimeWindow,o=a._buffer,u=o.slice(),c=0;c<u.length&&!t.closed;c+=i?1:2)t.next(u[c]);return this._checkFinalizedStatuses(t),r},n.prototype._trimBuffer=function(){var t=this,r=t._bufferSize,a=t._timestampProvider,i=t._buffer,o=t._infiniteTimeWindow,u=(o?1:2)*r;if(r<1/0&&u<i.length&&i.splice(0,i.length-u),!o){for(var c=a.now(),f=0,h=1;h<i.length&&i[h]<=c;h+=2)f=h;f&&i.splice(0,f+1)}},n}(fr),nK=function(e){hi(n,e);function n(t,r){return e.call(this)||this}return n.prototype.schedule=function(t,r){return this},n}(kf),HI={setInterval:function(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return setInterval.apply(void 0,ya([e,n],$r(t)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},rK=function(e){hi(n,e);function n(t,r){var a=e.call(this,t,r)||this;return a.scheduler=t,a.work=r,a.pending=!1,a}return n.prototype.schedule=function(t,r){var a;if(r===void 0&&(r=0),this.closed)return this;this.state=t;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,r)),this.pending=!0,this.delay=r,this.id=(a=this.id)!==null&&a!==void 0?a:this.requestAsyncId(o,this.id,r),this},n.prototype.requestAsyncId=function(t,r,a){return a===void 0&&(a=0),HI.setInterval(t.flush.bind(t,this),a)},n.prototype.recycleAsyncId=function(t,r,a){if(a===void 0&&(a=0),a!=null&&this.delay===a&&this.pending===!1)return r;r!=null&&HI.clearInterval(r)},n.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(t,r);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(t,r){var a=!1,i;try{this.work(t)}catch(o){a=!0,i=o||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),i},n.prototype.unsubscribe=function(){if(!this.closed){var t=this,r=t.id,a=t.scheduler,i=a.actions;this.work=this.state=this.scheduler=null,this.pending=!1,_m(i,this),r!=null&&(this.id=this.recycleAsyncId(a,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},n}(nK),zI=function(){function e(n,t){t===void 0&&(t=e.now),this.schedulerActionCtor=n,this.now=t}return e.prototype.schedule=function(n,t,r){return t===void 0&&(t=0),new this.schedulerActionCtor(this,n).schedule(r,t)},e.now=Rb.now,e}(),aK=function(e){hi(n,e);function n(t,r){r===void 0&&(r=zI.now);var a=e.call(this,t,r)||this;return a.actions=[],a._active=!1,a}return n.prototype.flush=function(t){var r=this.actions;if(this._active){r.push(t);return}var a;this._active=!0;do if(a=t.execute(t.state,t.delay))break;while(t=r.shift());if(this._active=!1,a){for(;t=r.shift();)t.unsubscribe();throw a}},n}(zI),Cb=new aK(rK),iK=Cb,Yx=new Xt(function(e){return e.complete()});function oK(e){return e&&_t(e.schedule)}function Nb(e){return e[e.length-1]}function Tb(e){return _t(Nb(e))?e.pop():void 0}function lv(e){return oK(Nb(e))?e.pop():void 0}function sK(e,n){return typeof Nb(e)=="number"?e.pop():n}var Ob=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function $x(e){return _t(e==null?void 0:e.then)}function jx(e){return _t(e[Ib])}function Xx(e){return Symbol.asyncIterator&&_t(e==null?void 0:e[Symbol.asyncIterator])}function Zx(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function uK(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Qx=uK();function Jx(e){return _t(e==null?void 0:e[Qx])}function eD(e){return NW(this,arguments,function(){var t,r,a,i;return Hx(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,rl(t.read())];case 3:return r=o.sent(),a=r.value,i=r.done,i?[4,rl(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,rl(a)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function tD(e){return _t(e==null?void 0:e.getReader)}function En(e){if(e instanceof Xt)return e;if(e!=null){if(jx(e))return lK(e);if(Ob(e))return cK(e);if($x(e))return fK(e);if(Xx(e))return nD(e);if(Jx(e))return dK(e);if(tD(e))return hK(e)}throw Zx(e)}function lK(e){return new Xt(function(n){var t=e[Ib]();if(_t(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function cK(e){return new Xt(function(n){for(var t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}function fK(e){return new Xt(function(n){e.then(function(t){n.closed||(n.next(t),n.complete())},function(t){return n.error(t)}).then(null,Kx)})}function dK(e){return new Xt(function(n){var t,r;try{for(var a=dl(e),i=a.next();!i.done;i=a.next()){var o=i.value;if(n.next(o),n.closed)return}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}n.complete()})}function nD(e){return new Xt(function(n){pK(e,n).catch(function(t){return n.error(t)})})}function hK(e){return nD(eD(e))}function pK(e,n){var t,r,a,i;return ye(this,void 0,void 0,function(){var o,u;return Hx(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=TW(e),c.label=1;case 1:return[4,t.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(o=r.value,n.next(o),n.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=c.sent(),a={error:u},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(i=t.return)?[4,i.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})})}function Cs(e,n,t,r,a){r===void 0&&(r=0),a===void 0&&(a=!1);var i=n.schedule(function(){t(),a?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!a)return i}function rD(e,n){return n===void 0&&(n=0),en(function(t,r){t.subscribe(Pt(r,function(a){return Cs(r,e,function(){return r.next(a)},n)},function(){return Cs(r,e,function(){return r.complete()},n)},function(a){return Cs(r,e,function(){return r.error(a)},n)}))})}function aD(e,n){return n===void 0&&(n=0),en(function(t,r){r.add(e.schedule(function(){return t.subscribe(r)},n))})}function mK(e,n){return En(e).pipe(aD(n),rD(n))}function vK(e,n){return En(e).pipe(aD(n),rD(n))}function gK(e,n){return new Xt(function(t){var r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}function yK(e,n){return new Xt(function(t){var r;return Cs(t,n,function(){r=e[Qx](),Cs(t,n,function(){var a,i,o;try{a=r.next(),i=a.value,o=a.done}catch(u){t.error(u);return}o?t.complete():t.next(i)},0,!0)}),function(){return _t(r==null?void 0:r.return)&&r.return()}})}function iD(e,n){if(!e)throw new Error("Iterable cannot be null");return new Xt(function(t){Cs(t,n,function(){var r=e[Symbol.asyncIterator]();Cs(t,n,function(){r.next().then(function(a){a.done?t.complete():t.next(a.value)})},0,!0)})})}function bK(e,n){return iD(eD(e),n)}function SK(e,n){if(e!=null){if(jx(e))return mK(e,n);if(Ob(e))return gK(e,n);if($x(e))return vK(e,n);if(Xx(e))return iD(e,n);if(Jx(e))return yK(e,n);if(tD(e))return bK(e,n)}throw Zx(e)}function Er(e,n){return n?SK(e,n):En(e)}function Tn(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=lv(e);return Er(e,t)}var EK=Ab(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function lf(e,n){var t=typeof n=="object";return new Promise(function(r,a){var i=new pl({next:function(o){r(o),i.unsubscribe()},error:a,complete:function(){t?r(n.defaultValue):a(new EK)}});e.subscribe(i)})}function _K(e){return e instanceof Date&&!isNaN(e)}function Ve(e,n){return en(function(t,r){var a=0;t.subscribe(Pt(r,function(i){r.next(e.call(n,i,a++))}))})}var AK=Array.isArray;function wK(e,n){return AK(n)?e.apply(void 0,ya([],$r(n))):e(n)}function kb(e){return Ve(function(n){return wK(e,n)})}var IK=Array.isArray,RK=Object.getPrototypeOf,CK=Object.prototype,NK=Object.keys;function TK(e){if(e.length===1){var n=e[0];if(IK(n))return{args:n,keys:null};if(OK(n)){var t=NK(n);return{args:t.map(function(r){return n[r]}),keys:t}}}return{args:e,keys:null}}function OK(e){return e&&typeof e=="object"&&RK(e)===CK}function kK(e,n){return e.reduce(function(t,r,a){return t[r]=n[a],t},{})}function xK(e,n,t){return t===void 0&&(t=Zs),function(r){WI(n,function(){for(var a=e.length,i=new Array(a),o=a,u=a,c=function(h){WI(n,function(){var p=Er(e[h],n),m=!1;p.subscribe(Pt(r,function(g){i[h]=g,m||(m=!0,u--),u||r.next(t(i.slice()))},function(){--o||r.complete()}))},r)},f=0;f<a;f++)c(f)})}}function WI(e,n,t){n()}function DK(e,n,t,r,a,i,o,u){var c=[],f=0,h=0,p=!1,m=function(){p&&!c.length&&!f&&n.complete()},g=function(b){return f<r?y(b):c.push(b)},y=function(b){f++;var E=!1;En(t(b,h++)).subscribe(Pt(n,function(_){n.next(_)},function(){E=!0},void 0,function(){if(E)try{f--;for(var _=function(){var w=c.shift();o||y(w)};c.length&&f<r;)_();m()}catch(w){n.error(w)}}))};return e.subscribe(Pt(n,g,function(){p=!0,m()})),function(){}}function ur(e,n,t){return t===void 0&&(t=1/0),_t(n)?ur(function(r,a){return Ve(function(i,o){return n(r,i,a,o)})(En(e(r,a)))},t):(typeof n=="number"&&(t=n),en(function(r,a){return DK(r,a,e,t)}))}function oD(e){return e===void 0&&(e=1/0),ur(Zs,e)}function PK(){return oD(1)}function KI(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return PK()(Er(e,lv(e)))}function MK(e){return new Xt(function(n){En(e()).subscribe(n)})}function sD(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=Tb(e),r=TK(e),a=r.args,i=r.keys,o=new Xt(function(u){var c=a.length;if(!c){u.complete();return}for(var f=new Array(c),h=c,p=c,m=function(y){var b=!1;En(a[y]).subscribe(Pt(u,function(E){b||(b=!0,p--),f[y]=E},function(){return h--},void 0,function(){(!h||!b)&&(p||u.next(i?kK(i,f):f),u.complete())}))},g=0;g<c;g++)m(g)});return t?o.pipe(kb(t)):o}var LK=["addListener","removeListener"],BK=["addEventListener","removeEventListener"],UK=["on","off"];function Hs(e,n,t,r){if(_t(t)&&(r=t,t=void 0),r)return Hs(e,n,t).pipe(kb(r));var a=$r(GK(e)?BK.map(function(u){return function(c){return e[u](n,c,t)}}):FK(e)?LK.map(qI(e,n)):VK(e)?UK.map(qI(e,n)):[],2),i=a[0],o=a[1];if(!i&&Ob(e))return ur(function(u){return Hs(u,n,t)})(En(e));if(!i)throw new TypeError("Invalid event target");return new Xt(function(u){var c=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];return u.next(1<f.length?f:f[0])};return i(c),function(){return o(c)}})}function qI(e,n){return function(t){return function(r){return e[t](n,r)}}}function FK(e){return _t(e.addListener)&&_t(e.removeListener)}function VK(e){return _t(e.on)&&_t(e.off)}function GK(e){return _t(e.addEventListener)&&_t(e.removeEventListener)}function HK(e,n,t){return e===void 0&&(e=0),t===void 0&&(t=iK),new Xt(function(r){var a=_K(e)?+e-t.now():e;a<0&&(a=0);var i=0;return t.schedule(function(){r.closed||(r.next(i++),r.complete())},a)})}function Yo(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=lv(e),r=sK(e,1/0),a=e;return a.length?a.length===1?En(a[0]):oD(r)(Er(a,t)):Yx}var zK=new Xt(hl),WK=Array.isArray;function KK(e){return e.length===1&&WK(e[0])?e[0]:e}function Jn(e,n){return en(function(t,r){var a=0;t.subscribe(Pt(r,function(i){return e.call(n,i,a++)&&r.next(i)}))})}function qK(e){return function(n){for(var t=[],r=function(i){t.push(En(e[i]).subscribe(Pt(n,function(o){if(t){for(var u=0;u<t.length;u++)u!==i&&t[u].unsubscribe();t=null}n.next(o)})))},a=0;t&&!n.closed&&a<e.length;a++)r(a)}}function YK(e){return en(function(n,t){var r=[];return n.subscribe(Pt(t,function(a){return r.push(a)},function(){t.next(r),t.complete()})),En(e).subscribe(Pt(t,function(){var a=r;r=[],t.next(a)},hl)),function(){r=null}})}function Ho(e){return en(function(n,t){var r=null,a=!1,i;r=n.subscribe(Pt(t,void 0,void 0,function(o){i=En(e(o,Ho(e)(n))),r?(r.unsubscribe(),r=null,i.subscribe(t)):a=!0})),a&&(r.unsubscribe(),r=null,i.subscribe(t))})}function $K(e,n,t,r,a){return function(i,o){var u=t,c=n,f=0;i.subscribe(Pt(o,function(h){var p=f++;c=u?e(c,h,p):(u=!0,h),o.next(c)},a))}}function uD(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=Tb(e);return t?$W(uD.apply(void 0,ya([],$r(e))),kb(t)):en(function(r,a){xK(ya([r],$r(KK(e))))(a)})}function lD(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return uD.apply(void 0,ya([],$r(e)))}function jK(e,n){return n===void 0&&(n=Cb),en(function(t,r){var a=null,i=null,o=null,u=function(){if(a){a.unsubscribe(),a=null;var f=i;i=null,r.next(f)}};function c(){var f=o+e,h=n.now();if(h<f){a=this.schedule(void 0,f-h),r.add(a);return}u()}t.subscribe(Pt(r,function(f){i=f,o=n.now(),a||(a=n.schedule(c,e),r.add(a))},function(){u(),r.complete()},void 0,function(){i=a=null}))})}function ma(e){return e<=0?function(){return Yx}:en(function(n,t){var r=0;n.subscribe(Pt(t,function(a){++r<=e&&(t.next(a),e<=r&&t.complete())}))})}function XK(e,n){return en(function(t,r){var a=0,i=null,o=!1;t.subscribe(Pt(r,function(u){i||(i=Pt(r,void 0,function(){i=null,o&&r.complete()}),En(e(u,a++)).subscribe(i))},function(){o=!0,!i&&r.complete()}))})}function ZK(e){return en(function(n,t){try{n.subscribe(t)}finally{t.add(e)}})}function cD(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length?en(function(t,r){qK(ya([t],$r(e)))(r)}):Zs}function QK(e){e===void 0&&(e=1/0);var n;e&&typeof e=="object"?n=e:n={count:e};var t=n.count,r=t===void 0?1/0:t,a=n.delay,i=n.resetOnSuccess,o=i===void 0?!1:i;return r<=0?Zs:en(function(u,c){var f=0,h,p=function(){var m=!1;h=u.subscribe(Pt(c,function(g){o&&(f=0),c.next(g)},void 0,function(g){if(f++<r){var y=function(){h?(h.unsubscribe(),h=null,p()):m=!0};if(a!=null){var b=typeof a=="number"?HK(a):En(a(g,f)),E=Pt(c,function(){E.unsubscribe(),y()},function(){c.complete()});b.subscribe(E)}else y()}else c.error(g)})),m&&(h.unsubscribe(),h=null,p())};p()})}function JK(e,n){return en($K(e,n,arguments.length>=2,!0))}function eq(e){e===void 0&&(e={});var n=e.connector,t=n===void 0?function(){return new fr}:n,r=e.resetOnError,a=r===void 0?!0:r,i=e.resetOnComplete,o=i===void 0?!0:i,u=e.resetOnRefCountZero,c=u===void 0?!0:u;return function(f){var h,p,m,g=0,y=!1,b=!1,E=function(){p==null||p.unsubscribe(),p=void 0},_=function(){E(),h=m=void 0,y=b=!1},w=function(){var I=h;_(),I==null||I.unsubscribe()};return en(function(I,R){g++,!b&&!y&&E();var C=m=m??t();R.add(function(){g--,g===0&&!b&&!y&&(p=S1(w,c))}),C.subscribe(R),!h&&g>0&&(h=new pl({next:function(O){return C.next(O)},error:function(O){b=!0,E(),p=S1(_,a,O),C.error(O)},complete:function(){y=!0,E(),p=S1(_,o),C.complete()}}),En(I).subscribe(h))})(f)}}function S1(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];if(n===!0){e();return}if(n!==!1){var a=new pl({next:function(){a.unsubscribe(),e()}});return En(n.apply(void 0,ya([],$r(t)))).subscribe(a)}}function E1(e,n,t){var r,a=!1;return r=e,eq({connector:function(){return new tK(r,n,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function tq(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=lv(e);return en(function(r,a){(t?KI(e,r,t):KI(e,r)).subscribe(a)})}function Ns(e,n){return en(function(t,r){var a=null,i=0,o=!1,u=function(){return o&&!a&&r.complete()};t.subscribe(Pt(r,function(c){a==null||a.unsubscribe();var f=0,h=i++;En(e(c,h)).subscribe(a=Pt(r,function(p){return r.next(n?n(c,p,h,f++):p)},function(){a=null,u()}))},function(){o=!0,u()}))})}function zo(e){return en(function(n,t){En(e).subscribe(Pt(t,function(){return t.complete()},hl)),!t.closed&&n.subscribe(t)})}function va(e,n,t){var r=_t(e)||n||t?{next:e,error:n,complete:t}:e;return r?en(function(a,i){var o;(o=r.subscribe)===null||o===void 0||o.call(r);var u=!0;a.subscribe(Pt(i,function(c){var f;(f=r.next)===null||f===void 0||f.call(r,c),i.next(c)},function(){var c;u=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},function(c){var f;u=!1,(f=r.error)===null||f===void 0||f.call(r,c),i.error(c)},function(){var c,f;u&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):Zs}function nq(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=Tb(e);return en(function(r,a){for(var i=e.length,o=new Array(i),u=e.map(function(){return!1}),c=!1,f=function(p){En(e[p]).subscribe(Pt(a,function(m){o[p]=m,!c&&!u[p]&&(u[p]=!0,(c=u.every(Zs))&&(u=null))},hl))},h=0;h<i;h++)f(h);r.subscribe(Pt(a,function(p){if(c){var m=ya([p],$r(o));a.next(t?t.apply(void 0,ya([],$r(m))):m)}}))})}const cv=e=>Object.entries(e),rq=e=>Object.fromEntries(e);let fD=new fr;const Am={error:3,warn:2,log:1,info:1,debug:0};function dD(){return fD=new fr}function gt(e){return cv(Am).reduce((n,[t])=>(n[t]=(...r)=>{fD.next({time:new Date,module:e,level:t,messages:r})},n),{})}const aq=gt("retryingHandler"),YI=(e,n)=>{aq.warn("Retrying handler got failed response:",e,`Waited ${n} millis, attempting retry now.`)},iq=e=>new Promise(n=>setTimeout(n,e)),oq=(e,n)=>Math.round(Math.random()*(n-e)+e),sq={backoffMultiple:3,baseSleep:500,maxSleep:5*1e3,maxRetries:10,retryPredicate:e=>e instanceof Response?!e.ok:!0};function _h(e){return e instanceof Request?e.clone():e}const hD=(e={})=>{const n=Gs(e),{backoffMultiple:t,baseSleep:r,maxSleep:a,maxRetries:i,retryPredicate:o}=Object.assign(Object.assign({},sq),n),u=c=>ye(void 0,void 0,void 0,function*(){const f=Math.min(a,oq(r,c*t));return yield iq(f),f});return c=>(f,h)=>{const p=(m,g)=>ye(void 0,void 0,void 0,function*(){var y,b;try{const E=yield c(_h(f),h);if(g<i&&o(E,g)){const _=yield u(m);return!((y=h==null?void 0:h.signal)===null||y===void 0)&&y.aborted?E:(YI(E,_),p(_,g+1))}return E}catch(E){if(!(E instanceof Error))throw new Error(`Invalid type caught by retrying handler. Handlers may only throw Errors. Got ${JSON.stringify(E)}`);if(E.name==="AbortError")throw E;if(g<i&&o(E,g)){const _=yield u(m);if(!((b=h==null?void 0:h.signal)===null||b===void 0)&&b.aborted)throw E;return YI(E,_),p(_,g+1)}throw E}});return p(r,0)}},uq=gt("noCorsRetryingFetchHandler"),lq=e=>{uq.warn("NoCorsRetrying handler got failed response:",e,'Retrying request with {mode: "no-cors"}.')},cq=()=>{const e=new Map;return n=>(t,r={})=>ye(void 0,void 0,void 0,function*(){var a;let i=typeof t=="string"?t:t.url;try{i=new URL(i,location.origin).host}catch{}try{return yield n(_h(t),r)}catch(o){if(o instanceof Error&&o.name==="AbortError")throw o;lq(o);const u=(a=e.get(i))!==null&&a!==void 0?a:n(_h(t),Object.assign(Object.assign({},r),{mode:"no-cors"}));return e.set(i,u),yield u,e.delete(i),n(_h(t),r)}})};function Rt(e){return typeof e=="string"}function wm(e){return Rt(e)&&encodeURIComponent(e)===e}function zs(e){return typeof e=="number"}function ml(e){return zs(e)&&!Number.isNaN(e)&&Number.isFinite(e)}function pD(e){return ln(e)||ml(e)}function Hi(e,n){return Array.isArray(n)&&n.every(t=>e(t))}function fq(e){return Hi(wm,e)}function Li(e){return ln(e)||Rt(e)}function dq(e){return e instanceof ArrayBuffer}function mD(e){return e instanceof Object.getPrototypeOf(Uint8Array)}function ln(e){return typeof e>"u"}function vD(e){return e===""}function Zt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function $I(e){return typeof e=="function"}function hq(e){return e instanceof Date}function jI(e){return ln(e)||hq(e)}function xb(e){return n=>{for(const t of Object.values(n))if(!e(t))return!1;return!0}}function XI(e){if(!e)return!0;try{const n=new URL(e);return n.protocol==="https:"||n.protocol==="http:"}catch{return!1}}function pq(e){if(!e)return!1;const n=e;return typeof n.then=="function"&&typeof n.catch=="function"}const mq=e=>new Promise(n=>setTimeout(n,e)),vq={createError:e=>{const n=Rt(e)?`for ${e}`:e instanceof Request?`for ${e.url}`:"";return new Error(`Request ${n} timed out by client timeout handler.`)},timeout:30*1e3},gD=(e={})=>{const n=Gs(e),{createError:t,timeout:r}=Object.assign(Object.assign({},vq),n);return a=>(i,o)=>Promise.race([a(i,o),mq(r).then(()=>Promise.reject(t(i,o)))])},Qs=De("defaultFetchHandler",()=>new jr(fetch).map(gD({timeout:20*1e3})).map(cq()).map(hD({maxRetries:3,retryPredicate:e=>!(e instanceof Response&&(e.ok||e.status%400<100))})).handler);function fv(e,n){return n?Object.assign(Object.assign({},e),{priority:"low"}):e}const yD=De("remoteMediaAssetLoader",[Qs.token],e=>{const n=new jr(e).map(uv()).handler;return function({assetDescriptor:{assetId:r},lowPriority:a}){return ye(this,void 0,void 0,function*(){const[i,o]=yield n(r,fv({cache:"force-cache"},a));if(!o.ok)throw o;return i})}});var al;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.LENS_CORE=64]="LENS_CORE",e[e.CAMERA_KIT_CORE=65]="CAMERA_KIT_CORE",e[e.LENS_CORE_CONFIG=143]="LENS_CORE_CONFIG",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(al||(al={}));function gq(){let e=0,n=0;for(let r=0;r<28;r+=7){let a=this.buf[this.pos++];if(e|=(a&127)<<r,(a&128)==0)return this.assertBounds(),[e,n]}let t=this.buf[this.pos++];if(e|=(t&15)<<28,n=(t&112)>>4,(t&128)==0)return this.assertBounds(),[e,n];for(let r=3;r<=31;r+=7){let a=this.buf[this.pos++];if(n|=(a&127)<<r,(a&128)==0)return this.assertBounds(),[e,n]}throw new Error("invalid varint")}function _1(e,n,t){for(let i=0;i<28;i=i+7){const o=e>>>i,u=!(!(o>>>7)&&n==0),c=(u?o|128:o)&255;if(t.push(c),!u)return}const r=e>>>28&15|(n&7)<<4,a=n>>3!=0;if(t.push((a?r|128:r)&255),!!a){for(let i=3;i<31;i=i+7){const o=n>>>i,u=!!(o>>>7),c=(u?o|128:o)&255;if(t.push(c),!u)return}t.push(n>>>31&1)}}const Ah=4294967296;function ZI(e){const n=e[0]==="-";n&&(e=e.slice(1));const t=1e6;let r=0,a=0;function i(o,u){const c=Number(e.slice(o,u));a*=t,r=r*t+c,r>=Ah&&(a=a+(r/Ah|0),r=r%Ah)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),n?SD(r,a):Db(r,a)}function yq(e,n){let t=Db(e,n);const r=t.hi&2147483648;r&&(t=SD(t.lo,t.hi));const a=bD(t.lo,t.hi);return r?"-"+a:a}function bD(e,n){if({lo:e,hi:n}=bq(e,n),n<=2097151)return String(Ah*n+e);const t=e&16777215,r=(e>>>24|n<<8)&16777215,a=n>>16&65535;let i=t+r*6777216+a*6710656,o=r+a*8147497,u=a*2;const c=1e7;return i>=c&&(o+=Math.floor(i/c),i%=c),o>=c&&(u+=Math.floor(o/c),o%=c),u.toString()+QI(o)+QI(i)}function bq(e,n){return{lo:e>>>0,hi:n>>>0}}function Db(e,n){return{lo:e|0,hi:n|0}}function SD(e,n){return n=~n,e?e=~e+1:n+=1,Db(e,n)}const QI=e=>{const n=String(e);return"0000000".slice(n.length)+n};function JI(e,n){if(e>=0){for(;e>127;)n.push(e&127|128),e=e>>>7;n.push(e)}else{for(let t=0;t<9;t++)n.push(e&127|128),e=e>>7;n.push(1)}}function Sq(){let e=this.buf[this.pos++],n=e&127;if((e&128)==0)return this.assertBounds(),n;if(e=this.buf[this.pos++],n|=(e&127)<<7,(e&128)==0)return this.assertBounds(),n;if(e=this.buf[this.pos++],n|=(e&127)<<14,(e&128)==0)return this.assertBounds(),n;if(e=this.buf[this.pos++],n|=(e&127)<<21,(e&128)==0)return this.assertBounds(),n;e=this.buf[this.pos++],n|=(e&15)<<28;for(let t=5;(e&128)!==0&&t<10;t++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),n>>>0}var eR={};const Xa=Eq();function Eq(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof eR!="object"||eR.BUF_BIGINT_DISABLE!=="1")){const t=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),a=BigInt("0"),i=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(o){const u=typeof o=="bigint"?o:BigInt(o);if(u>r||u<t)throw new Error(`invalid int64: ${o}`);return u},uParse(o){const u=typeof o=="bigint"?o:BigInt(o);if(u>i||u<a)throw new Error(`invalid uint64: ${o}`);return u},enc(o){return e.setBigInt64(0,this.parse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(o){return e.setBigInt64(0,this.uParse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(o,u){return e.setInt32(0,o,!0),e.setInt32(4,u,!0),e.getBigInt64(0,!0)},uDec(o,u){return e.setInt32(0,o,!0),e.setInt32(4,u,!0),e.getBigUint64(0,!0)}}}return{zero:"0",supported:!1,parse(t){return typeof t!="string"&&(t=t.toString()),tR(t),t},uParse(t){return typeof t!="string"&&(t=t.toString()),nR(t),t},enc(t){return typeof t!="string"&&(t=t.toString()),tR(t),ZI(t)},uEnc(t){return typeof t!="string"&&(t=t.toString()),nR(t),ZI(t)},dec(t,r){return yq(t,r)},uDec(t,r){return bD(t,r)}}}function tR(e){if(!/^-?[0-9]+$/.test(e))throw new Error("invalid int64: "+e)}function nR(e){if(!/^[0-9]+$/.test(e))throw new Error("invalid uint64: "+e)}const A1=Symbol.for("@bufbuild/protobuf/text-encoding");function ED(){if(globalThis[A1]==null){const e=new globalThis.TextEncoder,n=new globalThis.TextDecoder;globalThis[A1]={encodeUtf8(t){return e.encode(t)},decodeUtf8(t){return n.decode(t)},checkUtf8(t){try{return encodeURIComponent(t),!0}catch{return!1}}}}return globalThis[A1]}var Co;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(Co||(Co={}));const _q=34028234663852886e22,Aq=-34028234663852886e22,wq=4294967295,Iq=2147483647,Rq=-2147483648;class X{constructor(n=ED().encodeUtf8){this.encodeUtf8=n,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let n=0;for(let a=0;a<this.chunks.length;a++)n+=this.chunks[a].length;let t=new Uint8Array(n),r=0;for(let a=0;a<this.chunks.length;a++)t.set(this.chunks[a],r),r+=this.chunks[a].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let n=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(n.byteLength),this.raw(n)}tag(n,t){return this.uint32((n<<3|t)>>>0)}raw(n){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(n),this}uint32(n){for(rR(n);n>127;)this.buf.push(n&127|128),n=n>>>7;return this.buf.push(n),this}int32(n){return w1(n),JI(n,this.buf),this}bool(n){return this.buf.push(n?1:0),this}bytes(n){return this.uint32(n.byteLength),this.raw(n)}string(n){let t=this.encodeUtf8(n);return this.uint32(t.byteLength),this.raw(t)}float(n){Cq(n);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,n,!0),this.raw(t)}double(n){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,n,!0),this.raw(t)}fixed32(n){rR(n);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,n,!0),this.raw(t)}sfixed32(n){w1(n);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,n,!0),this.raw(t)}sint32(n){return w1(n),n=(n<<1^n>>31)>>>0,JI(n,this.buf),this}sfixed64(n){let t=new Uint8Array(8),r=new DataView(t.buffer),a=Xa.enc(n);return r.setInt32(0,a.lo,!0),r.setInt32(4,a.hi,!0),this.raw(t)}fixed64(n){let t=new Uint8Array(8),r=new DataView(t.buffer),a=Xa.uEnc(n);return r.setInt32(0,a.lo,!0),r.setInt32(4,a.hi,!0),this.raw(t)}int64(n){let t=Xa.enc(n);return _1(t.lo,t.hi,this.buf),this}sint64(n){const t=Xa.enc(n),r=t.hi>>31,a=t.lo<<1^r,i=(t.hi<<1|t.lo>>>31)^r;return _1(a,i,this.buf),this}uint64(n){const t=Xa.uEnc(n);return _1(t.lo,t.hi,this.buf),this}}class B{constructor(n,t=ED().decodeUtf8){this.decodeUtf8=t,this.varint64=gq,this.uint32=Sq,this.buf=n,this.len=n.length,this.pos=0,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength)}tag(){let n=this.uint32(),t=n>>>3,r=n&7;if(t<=0||r<0||r>5)throw new Error("illegal tag: field no "+t+" wire type "+r);return[t,r]}skip(n,t){let r=this.pos;switch(n){case Co.Varint:for(;this.buf[this.pos++]&128;);break;case Co.Bit64:this.pos+=4;case Co.Bit32:this.pos+=4;break;case Co.LengthDelimited:let a=this.uint32();this.pos+=a;break;case Co.StartGroup:for(;;){const[i,o]=this.tag();if(o===Co.EndGroup){if(t!==void 0&&i!==t)throw new Error("invalid end group tag");break}this.skip(o,i)}break;default:throw new Error("cant skip wire type "+n)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let n=this.uint32();return n>>>1^-(n&1)}int64(){return Xa.dec(...this.varint64())}uint64(){return Xa.uDec(...this.varint64())}sint64(){let[n,t]=this.varint64(),r=-(n&1);return n=(n>>>1|(t&1)<<31)^r,t=t>>>1^r,Xa.dec(n,t)}bool(){let[n,t]=this.varint64();return n!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Xa.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Xa.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let n=this.uint32(),t=this.pos;return this.pos+=n,this.assertBounds(),this.buf.subarray(t,t+n)}string(){return this.decodeUtf8(this.bytes())}}function w1(e){if(typeof e=="string")e=Number(e);else if(typeof e!="number")throw new Error("invalid int32: "+typeof e);if(!Number.isInteger(e)||e>Iq||e<Rq)throw new Error("invalid int32: "+e)}function rR(e){if(typeof e=="string")e=Number(e);else if(typeof e!="number")throw new Error("invalid uint32: "+typeof e);if(!Number.isInteger(e)||e>wq||e<0)throw new Error("invalid uint32: "+e)}function Cq(e){if(typeof e=="string"){const n=e;if(e=Number(e),Number.isNaN(e)&&n!=="NaN")throw new Error("invalid float32: "+n)}else if(typeof e!="number")throw new Error("invalid float32: "+typeof e);if(Number.isFinite(e)&&(e>_q||e<Aq))throw new Error("invalid float32: "+e)}function aR(){return{typeUrl:"",value:new Uint8Array(0)}}const Yr={encode(e,n=new X){return e.typeUrl!==""&&n.uint32(10).string(e.typeUrl),e.value.length!==0&&n.uint32(18).bytes(e.value),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=aR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.typeUrl=t.string();continue}case 2:{if(i!==18)break;a.value=t.bytes();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Yr.fromPartial(e??{})},fromPartial(e){var n,t;const r=aR();return r.typeUrl=(n=e.typeUrl)!==null&&n!==void 0?n:"",r.value=(t=e.value)!==null&&t!==void 0?t:new Uint8Array(0),r}};var iR;(function(e){e[e.CAMERA_KIT_FLAVOR_UNSET=0]="CAMERA_KIT_FLAVOR_UNSET",e[e.CAMERA_KIT_FLAVOR_DEBUG=1]="CAMERA_KIT_FLAVOR_DEBUG",e[e.CAMERA_KIT_FLAVOR_RELEASE=2]="CAMERA_KIT_FLAVOR_RELEASE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(iR||(iR={}));var oR;(function(e){e[e.CAMERA_KIT_CONNECTIVITY_TYPE_UNSET=0]="CAMERA_KIT_CONNECTIVITY_TYPE_UNSET",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_WIFI=1]="CAMERA_KIT_CONNECTIVITY_TYPE_WIFI",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_MOBILE=2]="CAMERA_KIT_CONNECTIVITY_TYPE_MOBILE",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_UNREACHABLE=3]="CAMERA_KIT_CONNECTIVITY_TYPE_UNREACHABLE",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_BLUETOOTH=4]="CAMERA_KIT_CONNECTIVITY_TYPE_BLUETOOTH",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(oR||(oR={}));var sR;(function(e){e[e.CAMERA_KIT_ENVIRONMENT_UNSET=0]="CAMERA_KIT_ENVIRONMENT_UNSET",e[e.CAMERA_KIT_ENVIRONMENT_STAGING=1]="CAMERA_KIT_ENVIRONMENT_STAGING",e[e.CAMERA_KIT_ENVIRONMENT_PRODUCTION=2]="CAMERA_KIT_ENVIRONMENT_PRODUCTION",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(sR||(sR={}));function uR(){return{extensionName:"",extensionVersion:"",deviceCluster:"0",cameraKitVersion:"",lensCoreVersion:"",deviceModel:"",cameraKitFlavor:0,appId:"",deviceConnectivity:0,sessionId:"",cameraKitEnvironment:0}}const wh={encode(e,n=new X){return e.extensionName!==""&&n.uint32(10).string(e.extensionName),e.extensionVersion!==""&&n.uint32(18).string(e.extensionVersion),e.deviceCluster!=="0"&&n.uint32(24).int64(e.deviceCluster),e.cameraKitVersion!==""&&n.uint32(34).string(e.cameraKitVersion),e.lensCoreVersion!==""&&n.uint32(42).string(e.lensCoreVersion),e.deviceModel!==""&&n.uint32(50).string(e.deviceModel),e.cameraKitFlavor!==0&&n.uint32(56).int32(e.cameraKitFlavor),e.appId!==""&&n.uint32(66).string(e.appId),e.deviceConnectivity!==0&&n.uint32(72).int32(e.deviceConnectivity),e.sessionId!==""&&n.uint32(82).string(e.sessionId),e.cameraKitEnvironment!==0&&n.uint32(88).int32(e.cameraKitEnvironment),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=uR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.extensionName=t.string();continue}case 2:{if(i!==18)break;a.extensionVersion=t.string();continue}case 3:{if(i!==24)break;a.deviceCluster=t.int64().toString();continue}case 4:{if(i!==34)break;a.cameraKitVersion=t.string();continue}case 5:{if(i!==42)break;a.lensCoreVersion=t.string();continue}case 6:{if(i!==50)break;a.deviceModel=t.string();continue}case 7:{if(i!==56)break;a.cameraKitFlavor=t.int32();continue}case 8:{if(i!==66)break;a.appId=t.string();continue}case 9:{if(i!==72)break;a.deviceConnectivity=t.int32();continue}case 10:{if(i!==82)break;a.sessionId=t.string();continue}case 11:{if(i!==88)break;a.cameraKitEnvironment=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return wh.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p;const m=uR();return m.extensionName=(n=e.extensionName)!==null&&n!==void 0?n:"",m.extensionVersion=(t=e.extensionVersion)!==null&&t!==void 0?t:"",m.deviceCluster=(r=e.deviceCluster)!==null&&r!==void 0?r:"0",m.cameraKitVersion=(a=e.cameraKitVersion)!==null&&a!==void 0?a:"",m.lensCoreVersion=(i=e.lensCoreVersion)!==null&&i!==void 0?i:"",m.deviceModel=(o=e.deviceModel)!==null&&o!==void 0?o:"",m.cameraKitFlavor=(u=e.cameraKitFlavor)!==null&&u!==void 0?u:0,m.appId=(c=e.appId)!==null&&c!==void 0?c:"",m.deviceConnectivity=(f=e.deviceConnectivity)!==null&&f!==void 0?f:0,m.sessionId=(h=e.sessionId)!==null&&h!==void 0?h:"",m.cameraKitEnvironment=(p=e.cameraKitEnvironment)!==null&&p!==void 0?p:0,m}};function lR(){return{seconds:"0",nanos:0}}const Hr={encode(e,n=new X){return e.seconds!=="0"&&n.uint32(8).int64(e.seconds),e.nanos!==0&&n.uint32(16).int32(e.nanos),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=lR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.seconds=t.int64().toString();continue}case 2:{if(i!==16)break;a.nanos=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Hr.fromPartial(e??{})},fromPartial(e){var n,t;const r=lR();return r.seconds=(n=e.seconds)!==null&&n!==void 0?n:"0",r.nanos=(t=e.nanos)!==null&&t!==void 0?t:0,r}};var Lo;(function(e){e[e.UNSET=0]="UNSET",e[e.TERMS_OF_SERVICE=1]="TERMS_OF_SERVICE",e[e.PRIVACY_POLICY=2]="PRIVACY_POLICY",e[e.LEARN_MORE=3]="LEARN_MORE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Lo||(Lo={}));function cR(){return{documents:[],disabled:!1}}const il={encode(e,n=new X){for(const t of e.documents)Ts.encode(t,n.uint32(10).fork()).join();return e.disabled!==!1&&n.uint32(16).bool(e.disabled),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=cR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.documents.push(Ts.decode(t,t.uint32()));continue}case 2:{if(i!==16)break;a.disabled=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return il.fromPartial(e??{})},fromPartial(e){var n,t;const r=cR();return r.documents=((n=e.documents)===null||n===void 0?void 0:n.map(a=>Ts.fromPartial(a)))||[],r.disabled=(t=e.disabled)!==null&&t!==void 0?t:!1,r}};function fR(){return{type:0,webUrl:"",version:"",timestamp:void 0}}const Ts={encode(e,n=new X){return e.type!==0&&n.uint32(8).int32(e.type),e.webUrl!==""&&n.uint32(18).string(e.webUrl),e.version!==""&&n.uint32(26).string(e.version),e.timestamp!==void 0&&Hr.encode(Nq(e.timestamp),n.uint32(34).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=fR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.type=t.int32();continue}case 2:{if(i!==18)break;a.webUrl=t.string();continue}case 3:{if(i!==26)break;a.version=t.string();continue}case 4:{if(i!==34)break;a.timestamp=Tq(Hr.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ts.fromPartial(e??{})},fromPartial(e){var n,t,r,a;const i=fR();return i.type=(n=e.type)!==null&&n!==void 0?n:0,i.webUrl=(t=e.webUrl)!==null&&t!==void 0?t:"",i.version=(r=e.version)!==null&&r!==void 0?r:"",i.timestamp=(a=e.timestamp)!==null&&a!==void 0?a:void 0,i}};function Nq(e){const n=Math.trunc(e.getTime()/1e3).toString(),t=e.getTime()%1e3*1e6;return{seconds:n,nanos:t}}function Tq(e){let n=(globalThis.Number(e.seconds)||0)*1e3;return n+=(e.nanos||0)/1e6,new globalThis.Date(n)}var dR;(function(e){e[e.CAMERA_FACING_UNSET=0]="CAMERA_FACING_UNSET",e[e.CAMERA_FACING_FRONT=1]="CAMERA_FACING_FRONT",e[e.CAMERA_FACING_BACK=2]="CAMERA_FACING_BACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(dR||(dR={}));var Hc;(function(e){e[e.DEVICE_DEPENDENT_ASSET_UNSET=0]="DEVICE_DEPENDENT_ASSET_UNSET",e[e.ASSET=1]="ASSET",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Hc||(Hc={}));var vl;(function(e){e[e.PRELOAD_UNSET=0]="PRELOAD_UNSET",e[e.ON_DEMAND=1]="ON_DEMAND",e[e.REQUIRED=2]="REQUIRED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(vl||(vl={}));function hR(){return{id:"",name:"",vendorData:{},content:void 0,isThirdParty:!1,cameraFacingPreference:0,featureMetadata:[],lensCreator:void 0,scannable:void 0}}const zr={encode(e,n=new X){e.id!==""&&n.uint32(10).string(e.id),e.name!==""&&n.uint32(18).string(e.name),Object.entries(e.vendorData).forEach(([t,r])=>{gy.encode({key:t,value:r},n.uint32(26).fork()).join()}),e.content!==void 0&&Ih.encode(e.content,n.uint32(34).fork()).join(),e.isThirdParty!==!1&&n.uint32(40).bool(e.isThirdParty),e.cameraFacingPreference!==0&&n.uint32(48).int32(e.cameraFacingPreference);for(const t of e.featureMetadata)Yr.encode(t,n.uint32(58).fork()).join();return e.lensCreator!==void 0&&Nh.encode(e.lensCreator,n.uint32(66).fork()).join(),e.scannable!==void 0&&Th.encode(e.scannable,n.uint32(74).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=hR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.id=t.string();continue}case 2:{if(i!==18)break;a.name=t.string();continue}case 3:{if(i!==26)break;const o=gy.decode(t,t.uint32());o.value!==void 0&&(a.vendorData[o.key]=o.value);continue}case 4:{if(i!==34)break;a.content=Ih.decode(t,t.uint32());continue}case 5:{if(i!==40)break;a.isThirdParty=t.bool();continue}case 6:{if(i!==48)break;a.cameraFacingPreference=t.int32();continue}case 7:{if(i!==58)break;a.featureMetadata.push(Yr.decode(t,t.uint32()));continue}case 8:{if(i!==66)break;a.lensCreator=Nh.decode(t,t.uint32());continue}case 9:{if(i!==74)break;a.scannable=Th.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return zr.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o;const u=hR();return u.id=(n=e.id)!==null&&n!==void 0?n:"",u.name=(t=e.name)!==null&&t!==void 0?t:"",u.vendorData=Object.entries((r=e.vendorData)!==null&&r!==void 0?r:{}).reduce((c,[f,h])=>(h!==void 0&&(c[f]=globalThis.String(h)),c),{}),u.content=e.content!==void 0&&e.content!==null?Ih.fromPartial(e.content):void 0,u.isThirdParty=(a=e.isThirdParty)!==null&&a!==void 0?a:!1,u.cameraFacingPreference=(i=e.cameraFacingPreference)!==null&&i!==void 0?i:0,u.featureMetadata=((o=e.featureMetadata)===null||o===void 0?void 0:o.map(c=>Yr.fromPartial(c)))||[],u.lensCreator=e.lensCreator!==void 0&&e.lensCreator!==null?Nh.fromPartial(e.lensCreator):void 0,u.scannable=e.scannable!==void 0&&e.scannable!==null?Th.fromPartial(e.scannable):void 0,u}};function pR(){return{key:"",value:""}}const gy={encode(e,n=new X){return e.key!==""&&n.uint32(10).string(e.key),e.value!==""&&n.uint32(18).string(e.value),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=pR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.key=t.string();continue}case 2:{if(i!==18)break;a.value=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return gy.fromPartial(e??{})},fromPartial(e){var n,t;const r=pR();return r.key=(n=e.key)!==null&&n!==void 0?n:"",r.value=(t=e.value)!==null&&t!==void 0?t:"",r}};function mR(){return{lnsUrl:"",lnsSha256:"",iconUrl:"",preview:void 0,assetManifest:[],defaultHintId:"",hintTranslations:{},lnsUrlBolt:"",iconUrlBolt:""}}const Ih={encode(e,n=new X){e.lnsUrl!==""&&n.uint32(10).string(e.lnsUrl),e.lnsSha256!==""&&n.uint32(18).string(e.lnsSha256),e.iconUrl!==""&&n.uint32(26).string(e.iconUrl),e.preview!==void 0&&Ch.encode(e.preview,n.uint32(34).fork()).join();for(const t of e.assetManifest)Rh.encode(t,n.uint32(42).fork()).join();return e.defaultHintId!==""&&n.uint32(50).string(e.defaultHintId),Object.entries(e.hintTranslations).forEach(([t,r])=>{yy.encode({key:t,value:r},n.uint32(58).fork()).join()}),e.lnsUrlBolt!==""&&n.uint32(66).string(e.lnsUrlBolt),e.iconUrlBolt!==""&&n.uint32(74).string(e.iconUrlBolt),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=mR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.lnsUrl=t.string();continue}case 2:{if(i!==18)break;a.lnsSha256=t.string();continue}case 3:{if(i!==26)break;a.iconUrl=t.string();continue}case 4:{if(i!==34)break;a.preview=Ch.decode(t,t.uint32());continue}case 5:{if(i!==42)break;a.assetManifest.push(Rh.decode(t,t.uint32()));continue}case 6:{if(i!==50)break;a.defaultHintId=t.string();continue}case 7:{if(i!==58)break;const o=yy.decode(t,t.uint32());o.value!==void 0&&(a.hintTranslations[o.key]=o.value);continue}case 8:{if(i!==66)break;a.lnsUrlBolt=t.string();continue}case 9:{if(i!==74)break;a.iconUrlBolt=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ih.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u,c;const f=mR();return f.lnsUrl=(n=e.lnsUrl)!==null&&n!==void 0?n:"",f.lnsSha256=(t=e.lnsSha256)!==null&&t!==void 0?t:"",f.iconUrl=(r=e.iconUrl)!==null&&r!==void 0?r:"",f.preview=e.preview!==void 0&&e.preview!==null?Ch.fromPartial(e.preview):void 0,f.assetManifest=((a=e.assetManifest)===null||a===void 0?void 0:a.map(h=>Rh.fromPartial(h)))||[],f.defaultHintId=(i=e.defaultHintId)!==null&&i!==void 0?i:"",f.hintTranslations=Object.entries((o=e.hintTranslations)!==null&&o!==void 0?o:{}).reduce((h,[p,m])=>(m!==void 0&&(h[p]=globalThis.String(m)),h),{}),f.lnsUrlBolt=(u=e.lnsUrlBolt)!==null&&u!==void 0?u:"",f.iconUrlBolt=(c=e.iconUrlBolt)!==null&&c!==void 0?c:"",f}};function vR(){return{key:"",value:""}}const yy={encode(e,n=new X){return e.key!==""&&n.uint32(10).string(e.key),e.value!==""&&n.uint32(18).string(e.value),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=vR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.key=t.string();continue}case 2:{if(i!==18)break;a.value=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return yy.fromPartial(e??{})},fromPartial(e){var n,t;const r=vR();return r.key=(n=e.key)!==null&&n!==void 0?n:"",r.value=(t=e.value)!==null&&t!==void 0?t:"",r}};function gR(){return{type:0,id:"",requestTiming:0,assetUrl:"",assetChecksum:""}}const Rh={encode(e,n=new X){return e.type!==0&&n.uint32(8).int32(e.type),e.id!==""&&n.uint32(18).string(e.id),e.requestTiming!==0&&n.uint32(24).int32(e.requestTiming),e.assetUrl!==""&&n.uint32(34).string(e.assetUrl),e.assetChecksum!==""&&n.uint32(42).string(e.assetChecksum),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=gR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.type=t.int32();continue}case 2:{if(i!==18)break;a.id=t.string();continue}case 3:{if(i!==24)break;a.requestTiming=t.int32();continue}case 4:{if(i!==34)break;a.assetUrl=t.string();continue}case 5:{if(i!==42)break;a.assetChecksum=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Rh.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i;const o=gR();return o.type=(n=e.type)!==null&&n!==void 0?n:0,o.id=(t=e.id)!==null&&t!==void 0?t:"",o.requestTiming=(r=e.requestTiming)!==null&&r!==void 0?r:0,o.assetUrl=(a=e.assetUrl)!==null&&a!==void 0?a:"",o.assetChecksum=(i=e.assetChecksum)!==null&&i!==void 0?i:"",o}};function yR(){return{imageUrl:"",imageSequenceSize:0,imageSequenceWebpUrlPattern:""}}const Ch={encode(e,n=new X){return e.imageUrl!==""&&n.uint32(10).string(e.imageUrl),e.imageSequenceSize!==0&&n.uint32(16).int32(e.imageSequenceSize),e.imageSequenceWebpUrlPattern!==""&&n.uint32(26).string(e.imageSequenceWebpUrlPattern),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=yR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.imageUrl=t.string();continue}case 2:{if(i!==16)break;a.imageSequenceSize=t.int32();continue}case 3:{if(i!==26)break;a.imageSequenceWebpUrlPattern=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ch.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=yR();return a.imageUrl=(n=e.imageUrl)!==null&&n!==void 0?n:"",a.imageSequenceSize=(t=e.imageSequenceSize)!==null&&t!==void 0?t:0,a.imageSequenceWebpUrlPattern=(r=e.imageSequenceWebpUrlPattern)!==null&&r!==void 0?r:"",a}};function bR(){return{displayName:""}}const Nh={encode(e,n=new X){return e.displayName!==""&&n.uint32(10).string(e.displayName),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=bR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.displayName=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Nh.fromPartial(e??{})},fromPartial(e){var n;const t=bR();return t.displayName=(n=e.displayName)!==null&&n!==void 0?n:"",t}};function SR(){return{snapcodeImageUrl:"",snapcodeDeeplink:""}}const Th={encode(e,n=new X){return e.snapcodeImageUrl!==""&&n.uint32(10).string(e.snapcodeImageUrl),e.snapcodeDeeplink!==""&&n.uint32(18).string(e.snapcodeDeeplink),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=SR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.snapcodeImageUrl=t.string();continue}case 2:{if(i!==18)break;a.snapcodeDeeplink=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Th.fromPartial(e??{})},fromPartial(e){var n,t;const r=SR();return r.snapcodeImageUrl=(n=e.snapcodeImageUrl)!==null&&n!==void 0?n:"",r.snapcodeDeeplink=(t=e.snapcodeDeeplink)!==null&&t!==void 0?t:"",r}};function ER(){return{name:"",timestamp:void 0,metric:void 0}}const Oh={encode(e,n=new X){var t;switch(e.name!==""&&n.uint32(10).string(e.name),e.timestamp!==void 0&&Hr.encode(Oq(e.timestamp),n.uint32(18).fork()).join(),(t=e.metric)===null||t===void 0?void 0:t.$case){case"count":n.uint32(24).uint64(e.metric.count);break;case"latencyMillis":n.uint32(32).uint64(e.metric.latencyMillis);break;case"histogram":n.uint32(40).int64(e.metric.histogram);break}return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=ER();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.name=t.string();continue}case 2:{if(i!==18)break;a.timestamp=kq(Hr.decode(t,t.uint32()));continue}case 3:{if(i!==24)break;a.metric={$case:"count",count:t.uint64().toString()};continue}case 4:{if(i!==32)break;a.metric={$case:"latencyMillis",latencyMillis:t.uint64().toString()};continue}case 5:{if(i!==40)break;a.metric={$case:"histogram",histogram:t.int64().toString()};continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Oh.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p;const m=ER();return m.name=(n=e.name)!==null&&n!==void 0?n:"",m.timestamp=(t=e.timestamp)!==null&&t!==void 0?t:void 0,((r=e.metric)===null||r===void 0?void 0:r.$case)==="count"&&((a=e.metric)===null||a===void 0?void 0:a.count)!==void 0&&((i=e.metric)===null||i===void 0?void 0:i.count)!==null&&(m.metric={$case:"count",count:e.metric.count}),((o=e.metric)===null||o===void 0?void 0:o.$case)==="latencyMillis"&&((u=e.metric)===null||u===void 0?void 0:u.latencyMillis)!==void 0&&((c=e.metric)===null||c===void 0?void 0:c.latencyMillis)!==null&&(m.metric={$case:"latencyMillis",latencyMillis:e.metric.latencyMillis}),((f=e.metric)===null||f===void 0?void 0:f.$case)==="histogram"&&((h=e.metric)===null||h===void 0?void 0:h.histogram)!==void 0&&((p=e.metric)===null||p===void 0?void 0:p.histogram)!==null&&(m.metric={$case:"histogram",histogram:e.metric.histogram}),m}};function _R(){return{metrics:[]}}const kh={encode(e,n=new X){for(const t of e.metrics)Oh.encode(t,n.uint32(10).fork()).join();return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=_R();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.metrics.push(Oh.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return kh.fromPartial(e??{})},fromPartial(e){var n;const t=_R();return t.metrics=((n=e.metrics)===null||n===void 0?void 0:n.map(r=>Oh.fromPartial(r)))||[],t}};function Oq(e){const n=Math.trunc(e.getTime()/1e3).toString(),t=e.getTime()%1e3*1e6;return{seconds:n,nanos:t}}function kq(e){let n=(globalThis.Number(e.seconds)||0)*1e3;return n+=(e.nanos||0)/1e6,new globalThis.Date(n)}var AR;(function(e){e[e.OS_TYPE_UNSET=0]="OS_TYPE_UNSET",e[e.OS_TYPE_ANDROID=1]="OS_TYPE_ANDROID",e[e.OS_TYPE_IOS=2]="OS_TYPE_IOS",e[e.OS_TYPE_IPAD_OS=3]="OS_TYPE_IPAD_OS",e[e.OS_TYPE_MAC_OS=4]="OS_TYPE_MAC_OS",e[e.OS_TYPE_WINDOWS=5]="OS_TYPE_WINDOWS",e[e.OS_TYPE_LINUX=6]="OS_TYPE_LINUX",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(AR||(AR={}));var wR;(function(e){e[e.CONNECTIVITY_TYPE_UNSET=0]="CONNECTIVITY_TYPE_UNSET",e[e.CONNECTIVITY_TYPE_WIFI=1]="CONNECTIVITY_TYPE_WIFI",e[e.CONNECTIVITY_TYPE_MOBILE=2]="CONNECTIVITY_TYPE_MOBILE",e[e.CONNECTIVITY_TYPE_UNREACHABLE=3]="CONNECTIVITY_TYPE_UNREACHABLE",e[e.CONNECTIVITY_TYPE_BLUETOOTH=4]="CONNECTIVITY_TYPE_BLUETOOTH",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(wR||(wR={}));function IR(){return{sessionId:"",locale:"",osType:0,connectivityType:0}}const xh={encode(e,n=new X){return e.sessionId!==""&&n.uint32(10).string(e.sessionId),e.locale!==""&&n.uint32(18).string(e.locale),e.osType!==0&&n.uint32(24).int32(e.osType),e.connectivityType!==0&&n.uint32(32).int32(e.connectivityType),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=IR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.sessionId=t.string();continue}case 2:{if(i!==18)break;a.locale=t.string();continue}case 3:{if(i!==24)break;a.osType=t.int32();continue}case 4:{if(i!==32)break;a.connectivityType=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return xh.fromPartial(e??{})},fromPartial(e){var n,t,r,a;const i=IR();return i.sessionId=(n=e.sessionId)!==null&&n!==void 0?n:"",i.locale=(t=e.locale)!==null&&t!==void 0?t:"",i.osType=(r=e.osType)!==null&&r!==void 0?r:0,i.connectivityType=(a=e.connectivityType)!==null&&a!==void 0?a:0,i}};function RR(){return{id:"",rankingData:void 0}}const _D={encode(e,n=new X){return e.id!==""&&n.uint32(10).string(e.id),e.rankingData!==void 0&&xh.encode(e.rankingData,n.uint32(18).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=RR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.id=t.string();continue}case 2:{if(i!==18)break;a.rankingData=xh.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return _D.fromPartial(e??{})},fromPartial(e){var n;const t=RR();return t.id=(n=e.id)!==null&&n!==void 0?n:"",t.rankingData=e.rankingData!==void 0&&e.rankingData!==null?xh.fromPartial(e.rankingData):void 0,t}};function CR(){return{id:"",lenses:[]}}const AD={encode(e,n=new X){e.id!==""&&n.uint32(10).string(e.id);for(const t of e.lenses)zr.encode(t,n.uint32(18).fork()).join();return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=CR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.id=t.string();continue}case 2:{if(i!==18)break;a.lenses.push(zr.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return AD.fromPartial(e??{})},fromPartial(e){var n,t;const r=CR();return r.id=(n=e.id)!==null&&n!==void 0?n:"",r.lenses=((t=e.lenses)===null||t===void 0?void 0:t.map(a=>zr.fromPartial(a)))||[],r}};function NR(){return{lensId:"",groupId:""}}const zc={encode(e,n=new X){return e.lensId!==""&&n.uint32(10).string(e.lensId),e.groupId!==""&&n.uint32(18).string(e.groupId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=NR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.lensId=t.string();continue}case 2:{if(i!==18)break;a.groupId=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return zc.fromPartial(e??{})},fromPartial(e){var n,t;const r=NR();return r.lensId=(n=e.lensId)!==null&&n!==void 0?n:"",r.groupId=(t=e.groupId)!==null&&t!==void 0?t:"",r}};function TR(){return{lens:void 0,groupId:""}}const Wc={encode(e,n=new X){return e.lens!==void 0&&zr.encode(e.lens,n.uint32(10).fork()).join(),e.groupId!==""&&n.uint32(18).string(e.groupId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=TR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.lens=zr.decode(t,t.uint32());continue}case 2:{if(i!==18)break;a.groupId=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Wc.fromPartial(e??{})},fromPartial(e){var n;const t=TR();return t.lens=e.lens!==void 0&&e.lens!==null?zr.fromPartial(e.lens):void 0,t.groupId=(n=e.groupId)!==null&&n!==void 0?n:"",t}};function OR(){return{getRequests:[]}}const wD={encode(e,n=new X){for(const t of e.getRequests)zc.encode(t,n.uint32(10).fork()).join();return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=OR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.getRequests.push(zc.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return wD.fromPartial(e??{})},fromPartial(e){var n;const t=OR();return t.getRequests=((n=e.getRequests)===null||n===void 0?void 0:n.map(r=>zc.fromPartial(r)))||[],t}};function kR(){return{getResponses:[]}}const ID={encode(e,n=new X){for(const t of e.getResponses)Wc.encode(t,n.uint32(10).fork()).join();return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=kR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.getResponses.push(Wc.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return ID.fromPartial(e??{})},fromPartial(e){var n;const t=kR();return t.getResponses=((n=e.getResponses)===null||n===void 0?void 0:n.map(r=>Wc.fromPartial(r)))||[],t}};function xR(){return{}}const RD={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=xR();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return RD.fromPartial(e??{})},fromPartial(e){return xR()}};function DR(){return{configs:{}}}const CD={encode(e,n=new X){return Object.entries(e.configs).forEach(([t,r])=>{by.encode({key:t,value:r},n.uint32(10).fork()).join()}),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=DR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;const o=by.decode(t,t.uint32());o.value!==void 0&&(a.configs[o.key]=o.value);continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return CD.fromPartial(e??{})},fromPartial(e){var n;const t=DR();return t.configs=Object.entries((n=e.configs)!==null&&n!==void 0?n:{}).reduce((r,[a,i])=>(i!==void 0&&(r[a]=globalThis.String(i)),r),{}),t}};function PR(){return{key:"",value:""}}const by={encode(e,n=new X){return e.key!==""&&n.uint32(10).string(e.key),e.value!==""&&n.uint32(18).string(e.value),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=PR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.key=t.string();continue}case 2:{if(i!==18)break;a.value=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return by.fromPartial(e??{})},fromPartial(e){var n,t;const r=PR();return r.key=(n=e.key)!==null&&n!==void 0?n:"",r.value=(t=e.value)!==null&&t!==void 0?t:"",r}};function MR(){return{}}const ND={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=MR();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return ND.fromPartial(e??{})},fromPartial(e){return MR()}};function LR(){return{appVendorUuidOptIn:!1,watermarkEnabled:!1,childrenProtectionActRestricted:!1,legalPrompt:void 0}}const Pb={encode(e,n=new X){return e.appVendorUuidOptIn!==!1&&n.uint32(8).bool(e.appVendorUuidOptIn),e.watermarkEnabled!==!1&&n.uint32(16).bool(e.watermarkEnabled),e.childrenProtectionActRestricted!==!1&&n.uint32(24).bool(e.childrenProtectionActRestricted),e.legalPrompt!==void 0&&il.encode(e.legalPrompt,n.uint32(34).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=LR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.appVendorUuidOptIn=t.bool();continue}case 2:{if(i!==16)break;a.watermarkEnabled=t.bool();continue}case 3:{if(i!==24)break;a.childrenProtectionActRestricted=t.bool();continue}case 4:{if(i!==34)break;a.legalPrompt=il.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Pb.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=LR();return a.appVendorUuidOptIn=(n=e.appVendorUuidOptIn)!==null&&n!==void 0?n:!1,a.watermarkEnabled=(t=e.watermarkEnabled)!==null&&t!==void 0?t:!1,a.childrenProtectionActRestricted=(r=e.childrenProtectionActRestricted)!==null&&r!==void 0?r:!1,a.legalPrompt=e.legalPrompt!==void 0&&e.legalPrompt!==null?il.fromPartial(e.legalPrompt):void 0,a}};function BR(){return{metrics:void 0}}const TD={encode(e,n=new X){return e.metrics!==void 0&&kh.encode(e.metrics,n.uint32(10).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=BR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.metrics=kh.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return TD.fromPartial(e??{})},fromPartial(e){const n=BR();return n.metrics=e.metrics!==void 0&&e.metrics!==null?kh.fromPartial(e.metrics):void 0,n}};function UR(){return{}}const OD={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=UR();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return OD.fromPartial(e??{})},fromPartial(e){return UR()}};function FR(){return{batchEvents:void 0}}const kD={encode(e,n=new X){return e.batchEvents!==void 0&&Yr.encode(e.batchEvents,n.uint32(10).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=FR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.batchEvents=Yr.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return kD.fromPartial(e??{})},fromPartial(e){const n=FR();return n.batchEvents=e.batchEvents!==void 0&&e.batchEvents!==null?Yr.fromPartial(e.batchEvents):void 0,n}};function VR(){return{}}const xD={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=VR();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return xD.fromPartial(e??{})},fromPartial(e){return VR()}};function GR(){return{events:[],extensionEventBase:void 0}}const DD={encode(e,n=new X){for(const t of e.events)Yr.encode(t,n.uint32(10).fork()).join();return e.extensionEventBase!==void 0&&wh.encode(e.extensionEventBase,n.uint32(18).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=GR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.events.push(Yr.decode(t,t.uint32()));continue}case 2:{if(i!==18)break;a.extensionEventBase=wh.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return DD.fromPartial(e??{})},fromPartial(e){var n;const t=GR();return t.events=((n=e.events)===null||n===void 0?void 0:n.map(r=>Yr.fromPartial(r)))||[],t.extensionEventBase=e.extensionEventBase!==void 0&&e.extensionEventBase!==null?wh.fromPartial(e.extensionEventBase):void 0,t}};function HR(){return{}}const PD={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=HR();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return PD.fromPartial(e??{})},fromPartial(e){return HR()}},xq={fullName:"com.snap.camerakit.v3.Lenses",methods:{getGroup:{name:"GetGroup",requestType:_D,requestStream:!1,responseType:AD,responseStream:!1,options:{idempotencyLevel:"NO_SIDE_EFFECTS",_unknownFields:{578365826:[new Uint8Array([43,18,41,47,99,111,109,46,115,110,97,112,46,99,97,109,101,114,97,107,105,116,46,118,51,46,76,101,110,115,101,115,47,103,114,111,117,112,115,47,123,105,100,125])]}}},getGroupLens:{name:"GetGroupLens",requestType:zc,requestStream:!1,responseType:Wc,responseStream:!1,options:{idempotencyLevel:"NO_SIDE_EFFECTS",_unknownFields:{578365826:[new Uint8Array([66,18,64,47,99,111,109,46,115,110,97,112,46,99,97,109,101,114,97,107,105,116,46,118,51,46,76,101,110,115,101,115,47,103,114,111,117,112,115,47,123,103,114,111,117,112,95,105,100,125,47,108,101,110,115,101,115,47,123,108,101,110,115,95,105,100,125])]}}},batchGetGroupLens:{name:"BatchGetGroupLens",requestType:wD,requestStream:!1,responseType:ID,responseStream:!1,options:{idempotencyLevel:"NO_SIDE_EFFECTS",_unknownFields:{578365826:[new Uint8Array([58,34,53,47,99,111,109,46,115,110,97,112,46,99,97,109,101,114,97,107,105,116,46,118,51,46,76,101,110,115,101,115,47,103,114,111,117,112,115,95,108,101,110,115,101,115,47,98,97,116,99,104,95,103,101,116,58,1,42])]}}},getPlaceholderConfig:{name:"GetPlaceholderConfig",requestType:RD,requestStream:!1,responseType:CD,responseStream:!1,options:{idempotencyLevel:"NO_SIDE_EFFECTS",_unknownFields:{578365826:[new Uint8Array([50,18,48,47,99,111,109,46,115,110,97,112,46,99,97,109,101,114,97,107,105,116,46,118,51,46,76,101,110,115,101,115,47,112,108,97,99,101,104,111,108,100,101,114,95,99,111,110,102,105,103])]}}}}},Im={fullName:"com.snap.camerakit.v3.Metrics",methods:{setOperationalMetrics:{name:"SetOperationalMetrics",requestType:TD,requestStream:!1,responseType:OD,responseStream:!1,options:{_unknownFields:{578365826:[new Uint8Array([63,34,58,47,99,111,109,46,115,110,97,112,46,99,97,109,101,114,97,107,105,116,46,118,51,46,77,101,116,114,105,99,115,47,109,101,116,114,105,99,115,47,111,112,101,114,97,116,105,111,110,97,108,95,109,101,116,114,105,99,115,58,1,42])]}}},setBusinessEvents:{name:"SetBusinessEvents",requestType:kD,requestStream:!1,responseType:xD,responseStream:!1,options:{_unknownFields:{578365826:[new Uint8Array([59,34,54,47,99,111,109,46,115,110,97,112,46,99,97,109,101,114,97,107,105,116,46,118,51,46,77,101,116,114,105,99,115,47,109,101,116,114,105,99,115,47,98,117,115,105,110,101,115,115,95,101,118,101,110,116,115,58,1,42])]}}},setExtensionBusinessEvents:{name:"SetExtensionBusinessEvents",requestType:DD,requestStream:!1,responseType:PD,responseStream:!1,options:{_unknownFields:{578365826:[new Uint8Array([69,34,64,47,99,111,109,46,115,110,97,112,46,99,97,109,101,114,97,107,105,116,46,118,51,46,77,101,116,114,105,99,115,47,109,101,116,114,105,99,115,47,101,120,116,101,110,115,105,111,110,95,98,117,115,105,110,101,115,115,95,101,118,101,110,116,115,58,1,42])]}}},getInitializationConfig:{name:"GetInitializationConfig",requestType:ND,requestStream:!1,responseType:Pb,responseStream:!1,options:{idempotencyLevel:"NO_SIDE_EFFECTS",_unknownFields:{578365826:[new Uint8Array([62,18,60,47,99,111,109,46,115,110,97,112,46,99,97,109,101,114,97,107,105,116,46,118,51,46,77,101,116,114,105,99,115,47,109,101,116,114,105,99,115,47,105,110,105,116,105,97,108,105,122,97,116,105,111,110,95,99,111,110,102,105,103])]}}}}};var Dh={exports:{}},Dq=Dh.exports,zR;function Pq(){return zR||(zR=1,function(e,n){(function(t,r){e.exports=r()})(Dq,function(){return t={418:function(a,i){(function(o,u){for(var c in u)o[c]=u[c]})(i,function(o){var u={};function c(f){if(u[f])return u[f].exports;var h=u[f]={i:f,l:!1,exports:{}};return o[f].call(h.exports,h,h.exports,c),h.l=!0,h.exports}return c.m=o,c.c=u,c.i=function(f){return f},c.d=function(f,h,p){c.o(f,h)||Object.defineProperty(f,h,{configurable:!1,enumerable:!0,get:p})},c.n=function(f){var h=f&&f.__esModule?function(){return f.default}:function(){return f};return c.d(h,"a",h),h},c.o=function(f,h){return Object.prototype.hasOwnProperty.call(f,h)},c.p="",c(c.s=1)}([function(o,u,c){Object.defineProperty(u,"__esModule",{value:!0});var f=c(3),h=function(){function p(m,g){m===void 0&&(m={}),g===void 0&&(g={splitValues:!1});var y,b=this;this.headersMap={},m&&(typeof Headers<"u"&&m instanceof Headers?f.getHeaderKeys(m).forEach(function(E){f.getHeaderValues(m,E).forEach(function(_){g.splitValues?b.append(E,f.splitHeaderValue(_)):b.append(E,_)})}):typeof(y=m)=="object"&&typeof y.headersMap=="object"&&typeof y.forEach=="function"?m.forEach(function(E,_){b.append(E,_)}):typeof Map<"u"&&m instanceof Map?m.forEach(function(E,_){b.append(_,E)}):typeof m=="string"?this.appendFromString(m):typeof m=="object"&&Object.getOwnPropertyNames(m).forEach(function(E){var _=m[E];Array.isArray(_)?_.forEach(function(w){b.append(E,w)}):b.append(E,_)}))}return p.prototype.appendFromString=function(m){for(var g=m.split(`\r
`),y=0;y<g.length;y++){var b=g[y],E=b.indexOf(":");if(E>0){var _=b.substring(0,E).trim(),w=b.substring(E+1).trim();this.append(_,w)}}},p.prototype.delete=function(m,g){var y=f.normalizeName(m);if(g===void 0)delete this.headersMap[y];else{var b=this.headersMap[y];if(b){var E=b.indexOf(g);E>=0&&b.splice(E,1),b.length===0&&delete this.headersMap[y]}}},p.prototype.append=function(m,g){var y=this,b=f.normalizeName(m);Array.isArray(this.headersMap[b])||(this.headersMap[b]=[]),Array.isArray(g)?g.forEach(function(E){y.headersMap[b].push(f.normalizeValue(E))}):this.headersMap[b].push(f.normalizeValue(g))},p.prototype.set=function(m,g){var y=f.normalizeName(m);if(Array.isArray(g)){var b=[];g.forEach(function(E){b.push(f.normalizeValue(E))}),this.headersMap[y]=b}else this.headersMap[y]=[f.normalizeValue(g)]},p.prototype.has=function(m,g){var y=this.headersMap[f.normalizeName(m)];if(!Array.isArray(y))return!1;if(g!==void 0){var b=f.normalizeValue(g);return y.indexOf(b)>=0}return!0},p.prototype.get=function(m){var g=this.headersMap[f.normalizeName(m)];return g!==void 0?g.concat():[]},p.prototype.forEach=function(m){var g=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(y){m(y,g.headersMap[y])},this)},p.prototype.toHeaders=function(){if(typeof Headers<"u"){var m=new Headers;return this.forEach(function(g,y){y.forEach(function(b){m.append(g,b)})}),m}throw new Error("Headers class is not defined")},p}();u.BrowserHeaders=h},function(o,u,c){Object.defineProperty(u,"__esModule",{value:!0});var f=c(0);u.BrowserHeaders=f.BrowserHeaders},function(o,u,c){Object.defineProperty(u,"__esModule",{value:!0}),u.iterateHeaders=function(f,h){for(var p=f[Symbol.iterator](),m=p.next();!m.done;)h(m.value[0]),m=p.next()},u.iterateHeadersKeys=function(f,h){for(var p=f.keys(),m=p.next();!m.done;)h(m.value),m=p.next()}},function(o,u,c){Object.defineProperty(u,"__esModule",{value:!0});var f=c(2);u.normalizeName=function(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(h))throw new TypeError("Invalid character in header field name");return h.toLowerCase()},u.normalizeValue=function(h){return typeof h!="string"&&(h=String(h)),h},u.getHeaderValues=function(h,p){var m=h;if(m instanceof Headers&&m.getAll)return m.getAll(p);var g=m.get(p);return g&&typeof g=="string"?[g]:g},u.getHeaderKeys=function(h){var p=h,m={},g=[];return p.keys?f.iterateHeadersKeys(p,function(y){m[y]||(m[y]=!0,g.push(y))}):p.forEach?p.forEach(function(y,b){m[b]||(m[b]=!0,g.push(b))}):f.iterateHeaders(p,function(y){var b=y[0];m[b]||(m[b]=!0,g.push(b))}),g},u.splitHeaderValue=function(h){var p=[];return h.split(", ").forEach(function(m){m.split(",").forEach(function(g){p.push(g)})}),p}}]))},617:function(a,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.ChunkParser=i.ChunkType=i.encodeASCII=i.decodeASCII=void 0;var u,c=o(65);function f(E){return(_=E)===9||_===10||_===13||E>=32&&E<=126;var _}function h(E){for(var _=0;_!==E.length;++_)if(!f(E[_]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(E))}function p(E){return(128&E.getUint8(0))==128}function m(E){return E.getUint32(1,!1)}function g(E,_,w){return E.byteLength-_>=w}function y(E,_,w){if(E.slice)return E.slice(_,w);var I=E.length;w!==void 0&&(I=w);for(var R=new Uint8Array(I-_),C=0,O=_;O<I;O++)R[C++]=E[O];return R}i.decodeASCII=h,i.encodeASCII=function(E){for(var _=new Uint8Array(E.length),w=0;w!==E.length;++w){var I=E.charCodeAt(w);if(!f(I))throw new Error("Metadata contains invalid ASCII");_[w]=I}return _},function(E){E[E.MESSAGE=1]="MESSAGE",E[E.TRAILERS=2]="TRAILERS"}(u=i.ChunkType||(i.ChunkType={}));var b=function(){function E(){this.buffer=null,this.position=0}return E.prototype.parse=function(_,w){if(_.length===0&&w)return[];var I,R=[];if(this.buffer==null)this.buffer=_,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=_,this.position=0;else{var C=this.buffer.byteLength-this.position,O=new Uint8Array(C+_.byteLength),D=y(this.buffer,this.position);O.set(D,0);var P=new Uint8Array(_);O.set(P,C),this.buffer=O,this.position=0}for(;;){if(!g(this.buffer,this.position,5))return R;var k=y(this.buffer,this.position,this.position+5),N=new DataView(k.buffer,k.byteOffset,k.byteLength),U=m(N);if(!g(this.buffer,this.position,5+U))return R;var V=y(this.buffer,this.position+5,this.position+5+U);if(this.position+=5+U,p(N))return R.push({chunkType:u.TRAILERS,trailers:(I=V,new c.Metadata(h(I)))}),R;R.push({chunkType:u.MESSAGE,data:V})}},E}();i.ChunkParser=b},8:function(a,i){var o;Object.defineProperty(i,"__esModule",{value:!0}),i.httpStatusToCode=i.Code=void 0,function(u){u[u.OK=0]="OK",u[u.Canceled=1]="Canceled",u[u.Unknown=2]="Unknown",u[u.InvalidArgument=3]="InvalidArgument",u[u.DeadlineExceeded=4]="DeadlineExceeded",u[u.NotFound=5]="NotFound",u[u.AlreadyExists=6]="AlreadyExists",u[u.PermissionDenied=7]="PermissionDenied",u[u.ResourceExhausted=8]="ResourceExhausted",u[u.FailedPrecondition=9]="FailedPrecondition",u[u.Aborted=10]="Aborted",u[u.OutOfRange=11]="OutOfRange",u[u.Unimplemented=12]="Unimplemented",u[u.Internal=13]="Internal",u[u.Unavailable=14]="Unavailable",u[u.DataLoss=15]="DataLoss",u[u.Unauthenticated=16]="Unauthenticated"}(o=i.Code||(i.Code={})),i.httpStatusToCode=function(u){switch(u){case 0:return o.Internal;case 200:return o.OK;case 400:return o.InvalidArgument;case 401:return o.Unauthenticated;case 403:return o.PermissionDenied;case 404:return o.NotFound;case 409:return o.Aborted;case 412:return o.FailedPrecondition;case 429:return o.ResourceExhausted;case 499:return o.Canceled;case 500:return o.Unknown;case 501:return o.Unimplemented;case 503:return o.Unavailable;case 504:return o.DeadlineExceeded;default:return o.Unknown}}},934:function(a,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.client=void 0;var u=o(65),c=o(617),f=o(8),h=o(346),p=o(57),m=o(882);i.client=function(b,E){return new g(b,E)};var g=function(){function b(E,_){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new c.ChunkParser,this.methodDefinition=E,this.props=_,this.createTransport()}return b.prototype.createTransport=function(){var E=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,_={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:E,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(_):this.transport=p.makeDefaultTransport(_)},b.prototype.onTransportHeaders=function(E,_){if(this.props.debug&&h.debug("onHeaders",E,_),this.closed)this.props.debug&&h.debug("grpc.onHeaders received after request was closed - ignoring");else if(_!==0){this.responseHeaders=E,this.props.debug&&h.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var w=y(E);this.props.debug&&h.debug("onHeaders.gRPCStatus",w);var I=w&&w>=0?w:f.httpStatusToCode(_);this.props.debug&&h.debug("onHeaders.code",I);var R=E.get("grpc-message")||[];if(this.props.debug&&h.debug("onHeaders.gRPCMessage",R),this.rawOnHeaders(E),I!==f.Code.OK){var C=this.decodeGRPCStatus(R[0]);this.rawOnError(I,C,E)}}},b.prototype.onTransportChunk=function(E){var _=this;if(this.closed)this.props.debug&&h.debug("grpc.onChunk received after request was closed - ignoring");else{var w=[];try{w=this.parser.parse(E)}catch(I){return this.props.debug&&h.debug("onChunk.parsing error",I,I.message),void this.rawOnError(f.Code.Internal,"parsing error: "+I.message)}w.forEach(function(I){if(I.chunkType===c.ChunkType.MESSAGE){var R=_.methodDefinition.responseType.deserializeBinary(I.data);_.rawOnMessage(R)}else I.chunkType===c.ChunkType.TRAILERS&&(_.responseHeaders?(_.responseTrailers=new u.Metadata(I.trailers),_.props.debug&&h.debug("onChunk.trailers",_.responseTrailers)):(_.responseHeaders=new u.Metadata(I.trailers),_.rawOnHeaders(_.responseHeaders)))})}},b.prototype.onTransportEnd=function(){if(this.props.debug&&h.debug("grpc.onEnd"),this.closed)this.props.debug&&h.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var E=y(this.responseTrailers);if(E!==null){var _=this.responseTrailers.get("grpc-message"),w=this.decodeGRPCStatus(_[0]);this.rawOnEnd(E,w,this.responseTrailers)}else this.rawOnError(f.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(f.Code.Unknown,"Response closed without headers");var I=y(this.responseHeaders),R=this.responseHeaders.get("grpc-message");if(this.props.debug&&h.debug("grpc.headers only response ",I,R),I===null)return void this.rawOnEnd(f.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var C=this.decodeGRPCStatus(R[0]);this.rawOnEnd(I,C,this.responseHeaders)}},b.prototype.decodeGRPCStatus=function(E){if(!E)return"";try{return decodeURIComponent(E)}catch{return E}},b.prototype.rawOnEnd=function(E,_,w){var I=this;this.props.debug&&h.debug("rawOnEnd",E,_,w),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(R){if(!I.closed)try{R(E,_,w)}catch(C){setTimeout(function(){throw C},0)}}))},b.prototype.rawOnHeaders=function(E){this.props.debug&&h.debug("rawOnHeaders",E),this.completed||this.onHeadersCallbacks.forEach(function(_){try{_(E)}catch(w){setTimeout(function(){throw w},0)}})},b.prototype.rawOnError=function(E,_,w){var I=this;w===void 0&&(w=new u.Metadata),this.props.debug&&h.debug("rawOnError",E,_),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(R){if(!I.closed)try{R(E,_,w)}catch(C){setTimeout(function(){throw C},0)}}))},b.prototype.rawOnMessage=function(E){var _=this;this.props.debug&&h.debug("rawOnMessage",E.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(w){if(!_.closed)try{w(E)}catch(I){setTimeout(function(){throw I},0)}})},b.prototype.onHeaders=function(E){this.onHeadersCallbacks.push(E)},b.prototype.onMessage=function(E){this.onMessageCallbacks.push(E)},b.prototype.onEnd=function(E){this.onEndCallbacks.push(E)},b.prototype.start=function(E){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var _=new u.Metadata(E||{});_.set("content-type","application/grpc-web+proto"),_.set("x-grpc-web","1"),this.transport.start(_)},b.prototype.send=function(E){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var _=m.frameRequest(E);this.transport.sendMessage(_)},b.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},b.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&h.debug("request.abort aborting request"),this.transport.cancel()},b}();function y(b){var E=b.get("grpc-status")||[];if(E.length>0)try{var _=E[0];return parseInt(_,10)}catch{return null}return null}},346:function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.debug=void 0,i.debug=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];console.debug?console.debug.apply(null,o):console.log.apply(null,o)}},607:function(a,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.grpc=void 0;var u,c=o(418),f=o(57),h=o(229),p=o(540),m=o(210),g=o(859),y=o(8),b=o(938),E=o(35),_=o(934);(u=i.grpc||(i.grpc={})).setDefaultTransport=f.setDefaultTransportFactory,u.CrossBrowserHttpTransport=g.CrossBrowserHttpTransport,u.FetchReadableStreamTransport=h.FetchReadableStreamTransport,u.XhrTransport=m.XhrTransport,u.WebsocketTransport=p.WebsocketTransport,u.Code=y.Code,u.Metadata=c.BrowserHeaders,u.client=function(w,I){return _.client(w,I)},u.invoke=b.invoke,u.unary=E.unary},938:function(a,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.invoke=void 0;var u=o(934);i.invoke=function(c,f){if(c.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var h=u.client(c,{host:f.host,transport:f.transport,debug:f.debug});return f.onHeaders&&h.onHeaders(f.onHeaders),f.onMessage&&h.onMessage(f.onMessage),f.onEnd&&h.onEnd(f.onEnd),h.start(f.metadata),h.send(f.request),h.finishSend(),{close:function(){h.close()}}}},65:function(a,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var u=o(418);Object.defineProperty(i,"Metadata",{enumerable:!0,get:function(){return u.BrowserHeaders}})},57:function(a,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.makeDefaultTransport=i.setDefaultTransportFactory=void 0;var u=o(859),c=function(f){return u.CrossBrowserHttpTransport({withCredentials:!1})(f)};i.setDefaultTransportFactory=function(f){c=f},i.makeDefaultTransport=function(f){return c(f)}},229:function(a,i,o){var u=this&&this.__assign||function(){return(u=Object.assign||function(p){for(var m,g=1,y=arguments.length;g<y;g++)for(var b in m=arguments[g])Object.prototype.hasOwnProperty.call(m,b)&&(p[b]=m[b]);return p}).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0}),i.detectFetchSupport=i.FetchReadableStreamTransport=void 0;var c=o(65),f=o(346);i.FetchReadableStreamTransport=function(p){return function(m){return function(g,y){return g.debug&&f.debug("fetchRequest",g),new h(g,y)}(m,p)}};var h=function(){function p(m,g){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=m,this.init=g}return p.prototype.pump=function(m,g){var y=this;if(this.reader=m,this.cancelled)return this.options.debug&&f.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(b){y.options.debug&&f.debug("Fetch.pump.reader.cancel exception",b)});this.reader.read().then(function(b){if(b.done)return y.options.onEnd(),g;y.options.onChunk(b.value),y.pump(y.reader,g)}).catch(function(b){y.cancelled?y.options.debug&&f.debug("Fetch.catch - request cancelled"):(y.cancelled=!0,y.options.debug&&f.debug("Fetch.catch",b.message),y.options.onEnd(b))})},p.prototype.send=function(m){var g=this;fetch(this.options.url,u(u({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:m,signal:this.controller&&this.controller.signal})).then(function(y){if(g.options.debug&&f.debug("Fetch.response",y),g.options.onHeaders(new c.Metadata(y.headers),y.status),!y.body)return y;g.pump(y.body.getReader(),y)}).catch(function(y){g.cancelled?g.options.debug&&f.debug("Fetch.catch - request cancelled"):(g.cancelled=!0,g.options.debug&&f.debug("Fetch.catch",y.message),g.options.onEnd(y))})},p.prototype.sendMessage=function(m){this.send(m)},p.prototype.finishSend=function(){},p.prototype.start=function(m){this.metadata=m},p.prototype.cancel=function(){var m=this;this.cancelled?this.options.debug&&f.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&f.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&f.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&f.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(g){m.options.debug&&f.debug("Fetch.cancel.reader.cancel exception",g)})):this.options.debug&&f.debug("Fetch.cancel before reader"))},p}();i.detectFetchSupport=function(){return typeof Response<"u"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(a,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.CrossBrowserHttpTransport=void 0;var u=o(229),c=o(210);i.CrossBrowserHttpTransport=function(f){if(u.detectFetchSupport()){var h={credentials:f.withCredentials?"include":"same-origin"};return u.FetchReadableStreamTransport(h)}return c.XhrTransport({withCredentials:f.withCredentials})}},210:function(a,i,o){var u,c=this&&this.__extends||(u=function(E,_){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,I){w.__proto__=I}||function(w,I){for(var R in I)Object.prototype.hasOwnProperty.call(I,R)&&(w[R]=I[R])})(E,_)},function(E,_){function w(){this.constructor=E}u(E,_),E.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)});Object.defineProperty(i,"__esModule",{value:!0}),i.stringToArrayBuffer=i.MozChunkedArrayBufferXHR=i.XHR=i.XhrTransport=void 0;var f=o(65),h=o(346),p=o(849);i.XhrTransport=function(E){return function(_){if(p.detectMozXHRSupport())return new g(_,E);if(p.detectXHROverrideMimeTypeSupport())return new m(_,E);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var m=function(){function E(_,w){this.options=_,this.init=w}return E.prototype.onProgressEvent=function(){this.options.debug&&h.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var _=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var w=b(_);this.options.onChunk(w)},E.prototype.onLoadEvent=function(){this.options.debug&&h.debug("XHR.onLoadEvent"),this.options.onEnd()},E.prototype.onStateChange=function(){this.options.debug&&h.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new f.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},E.prototype.sendMessage=function(_){this.xhr.send(_)},E.prototype.finishSend=function(){},E.prototype.start=function(_){var w=this;this.metadata=_;var I=new XMLHttpRequest;this.xhr=I,I.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(R,C){I.setRequestHeader(R,C.join(", "))}),I.withCredentials=!!this.init.withCredentials,I.addEventListener("readystatechange",this.onStateChange.bind(this)),I.addEventListener("progress",this.onProgressEvent.bind(this)),I.addEventListener("loadend",this.onLoadEvent.bind(this)),I.addEventListener("error",function(R){w.options.debug&&h.debug("XHR.error",R),w.options.onEnd(R.error)})},E.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},E.prototype.cancel=function(){this.options.debug&&h.debug("XHR.abort"),this.xhr.abort()},E}();i.XHR=m;var g=function(E){function _(){return E!==null&&E.apply(this,arguments)||this}return c(_,E),_.prototype.configureXhr=function(){this.options.debug&&h.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},_.prototype.onProgressEvent=function(){var w=this.xhr.response;this.options.debug&&h.debug("MozXHR.onProgressEvent: ",new Uint8Array(w)),this.options.onChunk(new Uint8Array(w))},_}(m);function y(E,_){var w=E.charCodeAt(_);if(w>=55296&&w<=56319){var I=E.charCodeAt(_+1);I>=56320&&I<=57343&&(w=65536+(w-55296<<10)+(I-56320))}return w}function b(E){for(var _=new Uint8Array(E.length),w=0,I=0;I<E.length;I++){var R=String.prototype.codePointAt?E.codePointAt(I):y(E,I);_[w++]=255&R}return _}i.MozChunkedArrayBufferXHR=g,i.stringToArrayBuffer=b},849:function(a,i){var o;function u(){if(o!==void 0)return o;if(XMLHttpRequest){o=new XMLHttpRequest;try{o.open("GET","https://localhost")}catch{}}return o}function c(f){var h=u();if(!h)return!1;try{return h.responseType=f,h.responseType===f}catch{}return!1}Object.defineProperty(i,"__esModule",{value:!0}),i.detectXHROverrideMimeTypeSupport=i.detectMozXHRSupport=i.xhrSupportsResponseType=void 0,i.xhrSupportsResponseType=c,i.detectMozXHRSupport=function(){return typeof XMLHttpRequest<"u"&&c("moz-chunked-arraybuffer")},i.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(a,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.WebsocketTransport=void 0;var u,c=o(346),f=o(617);(function(p){p[p.FINISH_SEND=1]="FINISH_SEND"})(u||(u={}));var h=new Uint8Array([1]);i.WebsocketTransport=function(){return function(p){return function(m){m.debug&&c.debug("websocketRequest",m);var g,y=function(_){if(_.substr(0,8)==="https://")return"wss://"+_.substr(8);if(_.substr(0,7)==="http://")return"ws://"+_.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(m.url),b=[];function E(_){if(_===u.FINISH_SEND)g.send(h);else{var w=_,I=new Int8Array(w.byteLength+1);I.set(new Uint8Array([0])),I.set(w,1),g.send(I)}}return{sendMessage:function(_){g&&g.readyState!==g.CONNECTING?E(_):b.push(_)},finishSend:function(){g&&g.readyState!==g.CONNECTING?E(u.FINISH_SEND):b.push(u.FINISH_SEND)},start:function(_){(g=new WebSocket(y,["grpc-websockets"])).binaryType="arraybuffer",g.onopen=function(){var w;m.debug&&c.debug("websocketRequest.onopen"),g.send((w="",_.forEach(function(I,R){w+=I+": "+R.join(", ")+`\r
`}),f.encodeASCII(w))),b.forEach(function(I){E(I)})},g.onclose=function(w){m.debug&&c.debug("websocketRequest.onclose",w),m.onEnd()},g.onerror=function(w){m.debug&&c.debug("websocketRequest.onerror",w)},g.onmessage=function(w){m.onChunk(new Uint8Array(w.data))}},cancel:function(){m.debug&&c.debug("websocket.abort"),g.close()}}}(p)}}},35:function(a,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.unary=void 0;var u=o(65),c=o(934);i.unary=function(f,h){if(f.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(f.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var p=null,m=null,g=c.client(f,{host:h.host,transport:h.transport,debug:h.debug});return g.onHeaders(function(y){p=y}),g.onMessage(function(y){m=y}),g.onEnd(function(y,b,E){h.onEnd({status:y,statusMessage:b,headers:p||new u.Metadata,message:m,trailers:E})}),g.start(h.metadata),g.send(h.request),g.finishSend(),{close:function(){g.close()}}}},882:function(a,i){Object.defineProperty(i,"__esModule",{value:!0}),i.frameRequest=void 0,i.frameRequest=function(o){var u=o.serializeBinary(),c=new ArrayBuffer(u.byteLength+5);return new DataView(c,1,4).setUint32(0,u.length,!1),new Uint8Array(c,5).set(u),new Uint8Array(c)}}},r={},function a(i){if(r[i])return r[i].exports;var o=r[i]={exports:{}};return t[i].call(o.exports,o,o.exports,a),o.exports}(607);var t,r})}(Dh)),Dh.exports}var cf=Pq();class Mb{constructor(n){this.value=n,this.ok=!0}unwrap(){return this.value}unwrapErr(){throw new Error("Ok Result cannot unwrapErr.")}map(n){return new Mb(n(this.value))}flatMap(n){return n(this.value)}}const Mq=e=>new Mb(e);class Lq{constructor(n){this.value=n,this.ok=!1}unwrap(){throw this.value}unwrapErr(){return this.value}map(){return this}flatMap(){return this}}const Bq=e=>new Lq(e);function dv(e){let n;const t=(...r)=>(typeof n<"u"||(n=e(...r)),n);return t.delegate=e,t}const Sy={PACKAGE_VERSION:"1.8.0"},ff={version:"321",buildNumber:"f0dcf22e9e600f2f958cb3d88e7e3382d61a3c7b",baseUrl:"https://cf-st.sc-cdn.net/d/kBNrxHyWHvtw40dRbIB7O?go=IgsKCTIBBEgBUFxgAQ%3D%3D&uc=92"};function Uq(e){return Zt(e)&&Array.isArray(e.brands)&&e.brands.every(n=>Zt(n)&&typeof n.brand=="string"&&typeof n.version=="string")&&typeof e.mobile=="boolean"&&typeof e.platform=="string"}function Fq(e){const n=e.match(/;[^;]+?;([^\)]+?)\)/);if(n)return n[1].trim();const t=e.match(/\(([^;]+);/);return t?t[1].trim():"unknown"}function Vq(){var e,n,t;if(location.hostname!=="")return location.hostname;const r=location.ancestorOrigins===void 0&&typeof window<"u"?[window.parent.origin,(n=(e=window.top)===null||e===void 0?void 0:e.origin)!==null&&n!==void 0?n:""]:(t=location.ancestorOrigins)!==null&&t!==void 0?t:[];for(let a of r)try{if(a=new URL(a).hostname,a)return a}catch{}return"unknown"}function MD(e){const n=new Map([["android","android"],["linux","linux"],["iphone os","ios"],["ipad","ipados"],["mac os","macos"],["macos","macos"],["windows","windows"]]),t=e.toLowerCase();for(const[r,a]of n.entries())if(t.includes(r))return a;return"unknown"}function Gq(e){const n=e.match(/\s([\d][\d_.]*[\d])(;|\)|\s)/);return n!=null?n[1].replace(/_/g,"."):""}function Hq(e){let n;if(/Chrome/.test(e)){const a=e.match(/Chrome\/([\d.]+)/);n={brand:"Chrome",version:a!==null?a[1]:"unknown"}}else if(/Safari/.test(e)){let a=e.match(/Version\/([\d.]+)/);a===null&&(a=e.match(/Safari\/([\d.]+)/)),n={brand:"Safari",version:a!==null?a[1]:"unknown"}}else n={brand:"Firefox",version:"0"};const t=!1,r=MD(e);return{brands:[n],mobile:t,platform:r}}function zq(e){const n=new Map([["Google Chrome","Chrome"],["Chrome","Chrome"],["Chromium","Chrome"],["Firefox","Firefox"],["Microsoft Edge","Chrome"],["Safari","Safari"]]),t=e.filter(({brand:r})=>n.has(r)).map(r=>({brand:n.get(r.brand),version:r.version}));return t.length===0?[{brand:"Firefox",version:"0"}]:t}function Wq(e){return{brands:zq(e.brands),mobile:e.mobile,platform:MD(e.platform)}}const zi=dv(function(){var n,t,r;const a=navigator.userAgent,i=Uq(navigator.userAgentData)?Wq(navigator.userAgentData):Hq(a),o=Gq(a),u=Fq(a),c=Sy.PACKAGE_VERSION.replace(/[-+]\S+$/,""),f=navigator.language,h=((n=navigator.languages)!==null&&n!==void 0?n:[]).map((p,m)=>{const g=Math.max(0,(10-m)/10);return`${p};q=${g.toFixed(1)}`}).join(", ")||f;return{sdkShortVersion:c,sdkLongVersion:Sy.PACKAGE_VERSION,lensCore:ff,browser:i.brands[0],osName:i.platform,osVersion:o,deviceModel:u,locale:f,fullLocale:h,origin:Vq(),connectionType:(r=(t=navigator.connection)===null||t===void 0?void 0:t.type)!==null&&r!==void 0?r:"unknown"}}),Lb=dv(function(){var n;const{browser:t,deviceModel:r,origin:a,osName:i,osVersion:o,sdkShortVersion:u,lensCore:c}=zi(),{userAgentFlavor:f}=(n=Em())!==null&&n!==void 0?n:{userAgentFlavor:"release"};return`CameraKitWeb/${u} ${f==="release"?"":"DEBUG "}(${r}; ${i} ${o}) ${t.brand}/${t.version} Core/${c.version} AppId/${a}`}),Kq=e=>n=>(t,r)=>{const a=r&&r.headers?new Headers(r.headers):typeof t=="string"?new Headers:t.headers,i=e(a);return n(t,Object.assign(Object.assign({},r),{headers:i}))},LD=De("cameraKitServiceFetchHandler",[Ea,Qs.token],({apiToken:e},n)=>new jr(n).map(Kq(t=>(t.append("x-snap-client-user-agent",Lb()),t.append("authorization",`Bearer ${e}`),t))).handler);function hv(e){var n;const t=(n=e.stack)!==null&&n!==void 0?n:"";return e.cause?`${t}
Caused by:
	${hv($o(e.cause))}`:t}function Bb(e){const n=e.cause?`; Caused by ${Bb($o(e.cause))}`:"";return`${e.name}: ${e.message}${n}`}function $o(e){if(e instanceof Error)return e;try{return new Error(`Non-Error type exception thrown. Serialized error value: ${JSON.stringify(e)}`)}catch{return new Error("Non-Error type exception thrown. Original error value could not be serialized.")}}class Hn extends CustomEvent{constructor(n,t,r={}){super(n,Object.assign(Object.assign({},r),{detail:t}))}}class Al{constructor(){this.listeners=new Map,this.options=new Map}addEventListener(n,t,r){var a;const i=t,o=(a=this.listeners.get(n))!==null&&a!==void 0?a:[];this.listeners.set(n,[...o,i]),r&&this.options.set(i,r)}dispatchEvent(n){const t=this.listeners.get(n.type);return t&&t.forEach(r=>{var a;const i=(a=this.options.get(r))!==null&&a!==void 0?a:{};try{r(n)}catch(o){window&&window.dispatchEvent(new CustomEvent("error",{detail:o}))}i.once&&this.removeEventListener(n.type,r)}),!0}removeEventListener(n,t){const r=t,a=this.listeners.get(n);a&&(this.listeners.set(n,a.filter(i=>i!==r)),this.options.delete(r))}}const Ui=()=>performance.now(),BD=e=>e*24*60*60,Rm="_",I1=".",qq=new RegExp(`^${Rm}+|${Rm}+$`,"g");class Ub{constructor(n,t={}){this.name=n,this.dimensions=t}child(n,t,r={}){return new n(`${this.name}${Rm}${t}`,r)}}function Os(e){return e.join(Rm).replace(qq,"")}function Fb(e){return Object.keys(e).length===0?"":`${I1}${Array.from(Object.entries(e)).map(n=>n.join(I1)).join(I1)}`}class xf extends Ub{constructor(n,t={}){super(n,t),this.name=n,this.startTime=Ui(),this.stopped=!1,this.marks=new Set,this.measures=new Set}getMeasures(){return Array.from(this.measures.values()).concat(...Array.from(this.marks.values()).map(n=>n.getMeasures()))}mark(n,t={}){const r=new xf(Os([this.name,n]),t);return this.stopped&&r.stop(),this.marks.add(r),r}measure(n,t){if(this.stopped)return;const r=typeof n=="string"?n:"",a=typeof n=="string"?t:n,o={name:Os([this.name,r]),duration:Ui()-this.startTime,dimensions:a??this.dimensions};return this.measures.add(o),o}clear(){this.measures.clear(),this.marks.forEach(n=>n.clear())}stop(){this.stopped=!0,this.marks.forEach(n=>n.stop())}stopAndReport(n){return ye(this,void 0,void 0,function*(){n.setOperationalMetrics(this),this.stop(),this.clear()})}toOperationalMetric(){const n=new Date;return this.getMeasures().map(t=>({name:`${t.name}${Fb(t.dimensions)}`,timestamp:n,metric:{$case:"latencyMillis",latencyMillis:`${Math.ceil(t.duration)}`}}))}}let Yq=0;const $q=e=>{if(e==null)return 0;const n=parseInt(e);return isNaN(n)?0:n},Vb=(e,n)=>{const t=Object.assign(Object.assign({},n),{requestId:Yq++,timer:new xf("download_latency")});return e.dispatchEvent(new Hn("started",t)),t},Gb=(e,n)=>(e.dispatchEvent(new Hn("completed",n)),n),Hb=(e,n)=>(e.dispatchEvent(new Hn("errored",n)),n),zb=e=>n=>([t,r],a)=>ye(void 0,void 0,void 0,function*(){const{requestId:i}=Vb(e,{dimensions:r});try{const o=yield n(t,a),u=o.status,c=$q(o.headers.get("content-length"));return Gb(e,{requestId:i,dimensions:r,status:u,sizeByte:c}),o}catch(o){throw Hb(e,{requestId:i,dimensions:r,error:$o(o)}),o}}),jo=De("requestStateEventTarget",()=>new Al),Wb="grpc_call";function jq(e){return e===Im.methods.setOperationalMetrics.name||e===Im.methods.setBusinessEvents.name}const Df=De("grpcHandlerFactory",[Ea,LD.token,jo.token],(e,n,t)=>{const r=`https://${e.apiHostname}`,a=new jr(n).map(zb(t)).handler,i=o=>{let u;const c=globalThis.AbortController?new AbortController:void 0;let f=!1;return{sendMessage(h){var p;const m={headers:(p=u==null?void 0:u.toHeaders())!==null&&p!==void 0?p:{},method:"POST",body:h,signal:c==null?void 0:c.signal},g={requestType:Wb,methodName:o.methodDefinition.methodName};(jq(o.methodDefinition.methodName)?n(o.url,m):a([o.url,g],m)).then(b=>(o.onHeaders(new cf.grpc.Metadata(b.headers),b.status),b.arrayBuffer())).then(b=>{f||(o.onChunk(new Uint8Array(b)),o.onEnd())}).catch(b=>{f||(f=!0,o.onEnd(b))})},start(h){u=h},finishSend(){},cancel(){f||(f=!0,c==null||c.abort())}}};return o=>ye(void 0,void 0,void 0,function*(){return new Promise(u=>{cf.grpc.unary({methodName:o.methodName,service:{serviceName:o.serviceName},requestStream:!1,responseStream:!1,requestType:o.requestType,responseType:o.responseType},{request:new o.requestType,host:r,onEnd:c=>{Xq(c)?u(Mq(c)):u(Bq(c))},transport:i})})})});function Xq(e){return e.status===cf.grpc.Code.OK}function Ey(e,n){return class{constructor(){Object.assign(this,e.fromPartial(n))}static deserializeBinary(r){return new(Ey(e,e.decode(r)))}serializeBinary(){return e.encode(this).finish()}toObject(){return this}}}function pv(e,n){return rq(cv(e.methods).map(([t,r])=>[t,a=>ye(this,void 0,void 0,function*(){const i=Ey(r.requestType,a),o=Ey(r.responseType,{});return n({serviceName:e.fullName,methodName:r.name,requestType:i,responseType:o})})]))}var Ph={exports:{}},Zq=Ph.exports,WR;function Qq(){return WR||(WR=1,function(e,n){(function(r,a){e.exports=a()})(Zq,function(){return function(t){var r={};function a(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=t,a.c=r,a.i=function(i){return i},a.d=function(i,o,u){a.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:u})},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=1)}([function(t,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(3);function o(c){return typeof c=="object"&&typeof c.headersMap=="object"&&typeof c.forEach=="function"}var u=function(){function c(f,h){f===void 0&&(f={}),h===void 0&&(h={splitValues:!1});var p=this;if(this.headersMap={},f)if(typeof Headers<"u"&&f instanceof Headers){var m=i.getHeaderKeys(f);m.forEach(function(y){var b=i.getHeaderValues(f,y);b.forEach(function(E){h.splitValues?p.append(y,i.splitHeaderValue(E)):p.append(y,E)})})}else if(o(f))f.forEach(function(y,b){p.append(y,b)});else if(typeof Map<"u"&&f instanceof Map){var g=f;g.forEach(function(y,b){p.append(b,y)})}else typeof f=="string"?this.appendFromString(f):typeof f=="object"&&Object.getOwnPropertyNames(f).forEach(function(y){var b=f,E=b[y];Array.isArray(E)?E.forEach(function(_){p.append(y,_)}):p.append(y,E)})}return c.prototype.appendFromString=function(f){for(var h=f.split(`\r
`),p=0;p<h.length;p++){var m=h[p],g=m.indexOf(":");if(g>0){var y=m.substring(0,g).trim(),b=m.substring(g+1).trim();this.append(y,b)}}},c.prototype.delete=function(f,h){var p=i.normalizeName(f);if(h===void 0)delete this.headersMap[p];else{var m=this.headersMap[p];if(m){var g=m.indexOf(h);g>=0&&m.splice(g,1),m.length===0&&delete this.headersMap[p]}}},c.prototype.append=function(f,h){var p=this,m=i.normalizeName(f);Array.isArray(this.headersMap[m])||(this.headersMap[m]=[]),Array.isArray(h)?h.forEach(function(g){p.headersMap[m].push(i.normalizeValue(g))}):this.headersMap[m].push(i.normalizeValue(h))},c.prototype.set=function(f,h){var p=i.normalizeName(f);if(Array.isArray(h)){var m=[];h.forEach(function(g){m.push(i.normalizeValue(g))}),this.headersMap[p]=m}else this.headersMap[p]=[i.normalizeValue(h)]},c.prototype.has=function(f,h){var p=this.headersMap[i.normalizeName(f)],m=Array.isArray(p);if(!m)return!1;if(h!==void 0){var g=i.normalizeValue(h);return p.indexOf(g)>=0}else return!0},c.prototype.get=function(f){var h=this.headersMap[i.normalizeName(f)];return h!==void 0?h.concat():[]},c.prototype.forEach=function(f){var h=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(p){f(p,h.headersMap[p])},this)},c.prototype.toHeaders=function(){if(typeof Headers<"u"){var f=new Headers;return this.forEach(function(h,p){p.forEach(function(m){f.append(h,m)})}),f}else throw new Error("Headers class is not defined")},c}();r.BrowserHeaders=u},function(t,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0);r.BrowserHeaders=i.BrowserHeaders},function(t,r,a){Object.defineProperty(r,"__esModule",{value:!0});function i(u,c){for(var f=u[Symbol.iterator](),h=f.next();!h.done;)c(h.value[0]),h=f.next()}r.iterateHeaders=i;function o(u,c){for(var f=u.keys(),h=f.next();!h.done;)c(h.value),h=f.next()}r.iterateHeadersKeys=o},function(t,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2);function o(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(m))throw new TypeError("Invalid character in header field name");return m.toLowerCase()}r.normalizeName=o;function u(m){return typeof m!="string"&&(m=String(m)),m}r.normalizeValue=u;function c(m,g){var y=m;if(y instanceof Headers&&y.getAll)return y.getAll(g);var b=y.get(g);return b&&typeof b=="string"?[b]:b}r.getHeaderValues=c;function f(m){return m}function h(m){var g=m,y={},b=[];return g.keys?i.iterateHeadersKeys(g,function(E){y[E]||(y[E]=!0,b.push(E))}):g.forEach?g.forEach(function(E,_){y[_]||(y[_]=!0,b.push(_))}):i.iterateHeaders(g,function(E){var _=E[0];y[_]||(y[_]=!0,b.push(_))}),b}r.getHeaderKeys=h;function p(m){var g=[],y=m.split(", ");return y.forEach(function(b){b.split(",").forEach(function(E){g.push(E)})}),g}r.splitHeaderValue=p}])})}(Ph)),Ph.exports}var UD=Qq();function Jq(e,...n){const t=()=>{throw new Error("Iteratee must be a function or a valid property key of the item")},r=new Map;for(const a of n.flat()){const i=typeof a=="object"&&a!==null&&e in a?a[e]:t();r.set(i,a)}return Array.from(r.values())}var KR;(function(e){e[e.UNSET=0]="UNSET",e[e.USER=1]="USER",e[e.DEVICE=2]="DEVICE",e[e.WEB_CLIENT=3]="WEB_CLIENT",e[e.AD_ACCOUNT=4]="AD_ACCOUNT",e[e.USERNAME=5]="USERNAME",e[e.AD_MODERATION_AD=6]="AD_MODERATION_AD",e[e.WEB_SNAPCHAT_USER=7]="WEB_SNAPCHAT_USER",e[e.INTERNAL=8]="INTERNAL",e[e.AM_ORGANIZATION=9]="AM_ORGANIZATION",e[e.AM_MEMBER=10]="AM_MEMBER",e[e.AM_SESSION=11]="AM_SESSION",e[e.AM_PROFILE=12]="AM_PROFILE",e[e.AM_SNAPCHAT_USER=13]="AM_SNAPCHAT_USER",e[e.SNAPCHAT_ADVERTISING=14]="SNAPCHAT_ADVERTISING",e[e.AM_CLIENT=15]="AM_CLIENT",e[e.MISCHIEF=16]="MISCHIEF",e[e.ARES_VISITOR=17]="ARES_VISITOR",e[e.POD_NAME=18]="POD_NAME",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(KR||(KR={}));function qR(){return{type:0,stringValue:"",loggingIdValue:""}}const ii={encode(e,n=new X){return e.type!==0&&n.uint32(8).int32(e.type),e.stringValue!==""&&n.uint32(18).string(e.stringValue),e.loggingIdValue!==""&&n.uint32(26).string(e.loggingIdValue),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=qR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.type=t.int32();continue}case 2:{if(i!==18)break;a.stringValue=t.string();continue}case 3:{if(i!==26)break;a.loggingIdValue=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return ii.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=qR();return a.type=(n=e.type)!==null&&n!==void 0?n:0,a.stringValue=(t=e.stringValue)!==null&&t!==void 0?t:"",a.loggingIdValue=(r=e.loggingIdValue)!==null&&r!==void 0?r:"",a}};function YR(){return{value:!1}}const Bc={encode(e,n=new X){return e.value!==!1&&n.uint32(8).bool(e.value),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=YR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.value=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Bc.fromPartial(e??{})},fromPartial(e){var n;const t=YR();return t.value=(n=e.value)!==null&&n!==void 0?n:!1,t}};function $R(){return{intValue:void 0,longValue:void 0,boolValue:void 0,floatValue:void 0}}const Mh={encode(e,n=new X){return e.intValue!==void 0&&n.uint32(8).int32(e.intValue),e.longValue!==void 0&&n.uint32(16).int64(e.longValue),e.boolValue!==void 0&&n.uint32(24).bool(e.boolValue),e.floatValue!==void 0&&n.uint32(37).float(e.floatValue),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=$R();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.intValue=t.int32();continue}case 2:{if(i!==16)break;a.longValue=t.int64().toString();continue}case 3:{if(i!==24)break;a.boolValue=t.bool();continue}case 4:{if(i!==37)break;a.floatValue=t.float();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Mh.fromPartial(e??{})},fromPartial(e){var n,t,r,a;const i=$R();return i.intValue=(n=e.intValue)!==null&&n!==void 0?n:void 0,i.longValue=(t=e.longValue)!==null&&t!==void 0?t:void 0,i.boolValue=(r=e.boolValue)!==null&&r!==void 0?r:void 0,i.floatValue=(a=e.floatValue)!==null&&a!==void 0?a:void 0,i}};function jR(){return{benchmarkNames:[],expirationTimestamp:void 0}}const Lh={encode(e,n=new X){n.uint32(10).fork();for(const t of e.benchmarkNames)n.int32(t);return n.join(),e.expirationTimestamp!==void 0&&Hr.encode(eY(e.expirationTimestamp),n.uint32(18).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=jR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i===8){a.benchmarkNames.push(t.int32());continue}if(i===10){const o=t.uint32()+t.pos;for(;t.pos<o;)a.benchmarkNames.push(t.int32());continue}break}case 2:{if(i!==18)break;a.expirationTimestamp=tY(Hr.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Lh.fromPartial(e??{})},fromPartial(e){var n,t;const r=jR();return r.benchmarkNames=((n=e.benchmarkNames)===null||n===void 0?void 0:n.map(a=>a))||[],r.expirationTimestamp=(t=e.expirationTimestamp)!==null&&t!==void 0?t:void 0,r}};function XR(){return{name:0,value:void 0}}const Bh={encode(e,n=new X){return e.name!==0&&n.uint32(8).int32(e.name),e.value!==void 0&&Mh.encode(e.value,n.uint32(18).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=XR();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.name=t.int32();continue}case 2:{if(i!==18)break;a.value=Mh.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Bh.fromPartial(e??{})},fromPartial(e){var n;const t=XR();return t.name=(n=e.name)!==null&&n!==void 0?n:0,t.value=e.value!==void 0&&e.value!==null?Mh.fromPartial(e.value):void 0,t}};function eY(e){const n=Math.trunc(e.getTime()/1e3).toString(),t=e.getTime()%1e3*1e6;return{seconds:n,nanos:t}}function tY(e){let n=(globalThis.Number(e.seconds)||0)*1e3;return n+=(e.nanos||0)/1e6,new globalThis.Date(n)}var ZR;(function(e){e[e.UNKNOWN_EVENT_TYPE=0]="UNKNOWN_EVENT_TYPE",e[e.COLD_START=1]="COLD_START",e[e.WARM_START=2]="WARM_START",e[e.FOREGROUND_TRIGGER=3]="FOREGROUND_TRIGGER",e[e.BACKGROUND_TRIGGER=4]="BACKGROUND_TRIGGER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ZR||(ZR={}));var QR;(function(e){e[e.UNKNOWN_APP_STATE=0]="UNKNOWN_APP_STATE",e[e.FOREGROUND=1]="FOREGROUND",e[e.BACKGROUND=2]="BACKGROUND",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(QR||(QR={}));var JR;(function(e){e[e.DEFAULT_INSTRUMENTATION=0]="DEFAULT_INSTRUMENTATION",e[e.USER_AUTHENTICATION=1]="USER_AUTHENTICATION",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(JR||(JR={}));var eC;(function(e){e[e.UNKNOWN_NETWORK_TYPE=0]="UNKNOWN_NETWORK_TYPE",e[e.CELLULAR=1]="CELLULAR",e[e.WIFI=2]="WIFI",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(eC||(eC={}));function tC(){return{configResultsEtag:"",namespaces:[],ghostId:"",countryCode:"",screenWidth:0,screenHeight:0,connectivity:void 0,maxVideoWidthPx:0,maxVideoHeightPx:0,benchmarkResults:[],deltaSync:!1,userAgent:"",triggerEventType:0,appState:0,locale:"",deviceId:"",userId:"",clientIp:"",isUnAuthorized:!1,appLocale:"",instrumentation:0,lastSuccessfulSync:"0",isLogout:!1,packageInstaller:"",syncTriggerBlizzardSessionId:"",syncExecutionBlizzardSessionId:"",cofSyncTriggerDelayFromStartupMs:0,cofSyncExecutionDelayFromStartupMs:0,syncTriggerTime:"0",decoderEncoderAvailability:void 0,snapkitAppId:"",lenscoreVersion:0,ruid:void 0,configNames:[],includeTestUserTreatments:!1,disableExposureLogging:!1,lensClusterOrig4:0,clientId:"",propertyOverrides:void 0,forLockscreenMode:!1,osBuildVersion:""}}const ol={encode(e,n=new X){e.configResultsEtag!==""&&n.uint32(10).string(e.configResultsEtag),n.uint32(18).fork();for(const t of e.namespaces)n.int32(t);n.join(),e.ghostId!==""&&n.uint32(26).string(e.ghostId),e.countryCode!==""&&n.uint32(34).string(e.countryCode),e.screenWidth!==0&&n.uint32(40).int32(e.screenWidth),e.screenHeight!==0&&n.uint32(48).int32(e.screenHeight),e.connectivity!==void 0&&Fh.encode(e.connectivity,n.uint32(58).fork()).join(),e.maxVideoWidthPx!==0&&n.uint32(64).int32(e.maxVideoWidthPx),e.maxVideoHeightPx!==0&&n.uint32(72).int32(e.maxVideoHeightPx);for(const t of e.benchmarkResults)Bh.encode(t,n.uint32(82).fork()).join();e.deltaSync!==!1&&n.uint32(88).bool(e.deltaSync),e.userAgent!==""&&n.uint32(98).string(e.userAgent),e.triggerEventType!==0&&n.uint32(104).int32(e.triggerEventType),e.appState!==0&&n.uint32(112).int32(e.appState),e.locale!==""&&n.uint32(122).string(e.locale),e.deviceId!==""&&n.uint32(130).string(e.deviceId),e.userId!==""&&n.uint32(138).string(e.userId),e.clientIp!==""&&n.uint32(146).string(e.clientIp),e.isUnAuthorized!==!1&&n.uint32(152).bool(e.isUnAuthorized),e.appLocale!==""&&n.uint32(162).string(e.appLocale),e.instrumentation!==0&&n.uint32(168).int32(e.instrumentation),e.lastSuccessfulSync!=="0"&&n.uint32(176).int64(e.lastSuccessfulSync),e.isLogout!==!1&&n.uint32(184).bool(e.isLogout),e.packageInstaller!==""&&n.uint32(194).string(e.packageInstaller),e.syncTriggerBlizzardSessionId!==""&&n.uint32(202).string(e.syncTriggerBlizzardSessionId),e.syncExecutionBlizzardSessionId!==""&&n.uint32(210).string(e.syncExecutionBlizzardSessionId),e.cofSyncTriggerDelayFromStartupMs!==0&&n.uint32(216).int32(e.cofSyncTriggerDelayFromStartupMs),e.cofSyncExecutionDelayFromStartupMs!==0&&n.uint32(224).int32(e.cofSyncExecutionDelayFromStartupMs),e.syncTriggerTime!=="0"&&n.uint32(232).int64(e.syncTriggerTime),e.decoderEncoderAvailability!==void 0&&Vh.encode(e.decoderEncoderAvailability,n.uint32(242).fork()).join(),e.snapkitAppId!==""&&n.uint32(250).string(e.snapkitAppId),e.lenscoreVersion!==0&&n.uint32(256).int32(e.lenscoreVersion),e.ruid!==void 0&&ii.encode(e.ruid,n.uint32(266).fork()).join();for(const t of e.configNames)n.uint32(274).string(t);return e.includeTestUserTreatments!==!1&&n.uint32(288).bool(e.includeTestUserTreatments),e.disableExposureLogging!==!1&&n.uint32(296).bool(e.disableExposureLogging),e.lensClusterOrig4!==0&&n.uint32(304).int32(e.lensClusterOrig4),e.clientId!==""&&n.uint32(314).string(e.clientId),e.propertyOverrides!==void 0&&Uh.encode(e.propertyOverrides,n.uint32(322).fork()).join(),e.forLockscreenMode!==!1&&n.uint32(328).bool(e.forLockscreenMode),e.osBuildVersion!==""&&n.uint32(338).string(e.osBuildVersion),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=tC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.configResultsEtag=t.string();continue}case 2:{if(i===16){a.namespaces.push(t.int32());continue}if(i===18){const o=t.uint32()+t.pos;for(;t.pos<o;)a.namespaces.push(t.int32());continue}break}case 3:{if(i!==26)break;a.ghostId=t.string();continue}case 4:{if(i!==34)break;a.countryCode=t.string();continue}case 5:{if(i!==40)break;a.screenWidth=t.int32();continue}case 6:{if(i!==48)break;a.screenHeight=t.int32();continue}case 7:{if(i!==58)break;a.connectivity=Fh.decode(t,t.uint32());continue}case 8:{if(i!==64)break;a.maxVideoWidthPx=t.int32();continue}case 9:{if(i!==72)break;a.maxVideoHeightPx=t.int32();continue}case 10:{if(i!==82)break;a.benchmarkResults.push(Bh.decode(t,t.uint32()));continue}case 11:{if(i!==88)break;a.deltaSync=t.bool();continue}case 12:{if(i!==98)break;a.userAgent=t.string();continue}case 13:{if(i!==104)break;a.triggerEventType=t.int32();continue}case 14:{if(i!==112)break;a.appState=t.int32();continue}case 15:{if(i!==122)break;a.locale=t.string();continue}case 16:{if(i!==130)break;a.deviceId=t.string();continue}case 17:{if(i!==138)break;a.userId=t.string();continue}case 18:{if(i!==146)break;a.clientIp=t.string();continue}case 19:{if(i!==152)break;a.isUnAuthorized=t.bool();continue}case 20:{if(i!==162)break;a.appLocale=t.string();continue}case 21:{if(i!==168)break;a.instrumentation=t.int32();continue}case 22:{if(i!==176)break;a.lastSuccessfulSync=t.int64().toString();continue}case 23:{if(i!==184)break;a.isLogout=t.bool();continue}case 24:{if(i!==194)break;a.packageInstaller=t.string();continue}case 25:{if(i!==202)break;a.syncTriggerBlizzardSessionId=t.string();continue}case 26:{if(i!==210)break;a.syncExecutionBlizzardSessionId=t.string();continue}case 27:{if(i!==216)break;a.cofSyncTriggerDelayFromStartupMs=t.int32();continue}case 28:{if(i!==224)break;a.cofSyncExecutionDelayFromStartupMs=t.int32();continue}case 29:{if(i!==232)break;a.syncTriggerTime=t.int64().toString();continue}case 30:{if(i!==242)break;a.decoderEncoderAvailability=Vh.decode(t,t.uint32());continue}case 31:{if(i!==250)break;a.snapkitAppId=t.string();continue}case 32:{if(i!==256)break;a.lenscoreVersion=t.int32();continue}case 33:{if(i!==266)break;a.ruid=ii.decode(t,t.uint32());continue}case 34:{if(i!==274)break;a.configNames.push(t.string());continue}case 36:{if(i!==288)break;a.includeTestUserTreatments=t.bool();continue}case 37:{if(i!==296)break;a.disableExposureLogging=t.bool();continue}case 38:{if(i!==304)break;a.lensClusterOrig4=t.int32();continue}case 39:{if(i!==314)break;a.clientId=t.string();continue}case 40:{if(i!==322)break;a.propertyOverrides=Uh.decode(t,t.uint32());continue}case 41:{if(i!==328)break;a.forLockscreenMode=t.bool();continue}case 42:{if(i!==338)break;a.osBuildVersion=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return ol.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p,m,g,y,b,E,_,w,I,R,C,O,D,P,k,N,U,V,ee,re,ne,z,Z,$,oe,L,Y;const Q=tC();return Q.configResultsEtag=(n=e.configResultsEtag)!==null&&n!==void 0?n:"",Q.namespaces=((t=e.namespaces)===null||t===void 0?void 0:t.map(de=>de))||[],Q.ghostId=(r=e.ghostId)!==null&&r!==void 0?r:"",Q.countryCode=(a=e.countryCode)!==null&&a!==void 0?a:"",Q.screenWidth=(i=e.screenWidth)!==null&&i!==void 0?i:0,Q.screenHeight=(o=e.screenHeight)!==null&&o!==void 0?o:0,Q.connectivity=e.connectivity!==void 0&&e.connectivity!==null?Fh.fromPartial(e.connectivity):void 0,Q.maxVideoWidthPx=(u=e.maxVideoWidthPx)!==null&&u!==void 0?u:0,Q.maxVideoHeightPx=(c=e.maxVideoHeightPx)!==null&&c!==void 0?c:0,Q.benchmarkResults=((f=e.benchmarkResults)===null||f===void 0?void 0:f.map(de=>Bh.fromPartial(de)))||[],Q.deltaSync=(h=e.deltaSync)!==null&&h!==void 0?h:!1,Q.userAgent=(p=e.userAgent)!==null&&p!==void 0?p:"",Q.triggerEventType=(m=e.triggerEventType)!==null&&m!==void 0?m:0,Q.appState=(g=e.appState)!==null&&g!==void 0?g:0,Q.locale=(y=e.locale)!==null&&y!==void 0?y:"",Q.deviceId=(b=e.deviceId)!==null&&b!==void 0?b:"",Q.userId=(E=e.userId)!==null&&E!==void 0?E:"",Q.clientIp=(_=e.clientIp)!==null&&_!==void 0?_:"",Q.isUnAuthorized=(w=e.isUnAuthorized)!==null&&w!==void 0?w:!1,Q.appLocale=(I=e.appLocale)!==null&&I!==void 0?I:"",Q.instrumentation=(R=e.instrumentation)!==null&&R!==void 0?R:0,Q.lastSuccessfulSync=(C=e.lastSuccessfulSync)!==null&&C!==void 0?C:"0",Q.isLogout=(O=e.isLogout)!==null&&O!==void 0?O:!1,Q.packageInstaller=(D=e.packageInstaller)!==null&&D!==void 0?D:"",Q.syncTriggerBlizzardSessionId=(P=e.syncTriggerBlizzardSessionId)!==null&&P!==void 0?P:"",Q.syncExecutionBlizzardSessionId=(k=e.syncExecutionBlizzardSessionId)!==null&&k!==void 0?k:"",Q.cofSyncTriggerDelayFromStartupMs=(N=e.cofSyncTriggerDelayFromStartupMs)!==null&&N!==void 0?N:0,Q.cofSyncExecutionDelayFromStartupMs=(U=e.cofSyncExecutionDelayFromStartupMs)!==null&&U!==void 0?U:0,Q.syncTriggerTime=(V=e.syncTriggerTime)!==null&&V!==void 0?V:"0",Q.decoderEncoderAvailability=e.decoderEncoderAvailability!==void 0&&e.decoderEncoderAvailability!==null?Vh.fromPartial(e.decoderEncoderAvailability):void 0,Q.snapkitAppId=(ee=e.snapkitAppId)!==null&&ee!==void 0?ee:"",Q.lenscoreVersion=(re=e.lenscoreVersion)!==null&&re!==void 0?re:0,Q.ruid=e.ruid!==void 0&&e.ruid!==null?ii.fromPartial(e.ruid):void 0,Q.configNames=((ne=e.configNames)===null||ne===void 0?void 0:ne.map(de=>de))||[],Q.includeTestUserTreatments=(z=e.includeTestUserTreatments)!==null&&z!==void 0?z:!1,Q.disableExposureLogging=(Z=e.disableExposureLogging)!==null&&Z!==void 0?Z:!1,Q.lensClusterOrig4=($=e.lensClusterOrig4)!==null&&$!==void 0?$:0,Q.clientId=(oe=e.clientId)!==null&&oe!==void 0?oe:"",Q.propertyOverrides=e.propertyOverrides!==void 0&&e.propertyOverrides!==null?Uh.fromPartial(e.propertyOverrides):void 0,Q.forLockscreenMode=(L=e.forLockscreenMode)!==null&&L!==void 0?L:!1,Q.osBuildVersion=(Y=e.osBuildVersion)!==null&&Y!==void 0?Y:"",Q}};function nC(){return{isWeb:!1}}const Uh={encode(e,n=new X){return e.isWeb!==!1&&n.uint32(8).bool(e.isWeb),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=nC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.isWeb=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Uh.fromPartial(e??{})},fromPartial(e){var n;const t=nC();return t.isWeb=(n=e.isWeb)!==null&&n!==void 0?n:!1,t}};function rC(){return{networkType:0,isMetered:void 0,isRoaming:void 0,carrier:""}}const Fh={encode(e,n=new X){return e.networkType!==0&&n.uint32(8).int32(e.networkType),e.isMetered!==void 0&&Bc.encode({value:e.isMetered},n.uint32(18).fork()).join(),e.isRoaming!==void 0&&Bc.encode({value:e.isRoaming},n.uint32(26).fork()).join(),e.carrier!==""&&n.uint32(34).string(e.carrier),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=rC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.networkType=t.int32();continue}case 2:{if(i!==18)break;a.isMetered=Bc.decode(t,t.uint32()).value;continue}case 3:{if(i!==26)break;a.isRoaming=Bc.decode(t,t.uint32()).value;continue}case 4:{if(i!==34)break;a.carrier=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Fh.fromPartial(e??{})},fromPartial(e){var n,t,r,a;const i=rC();return i.networkType=(n=e.networkType)!==null&&n!==void 0?n:0,i.isMetered=(t=e.isMetered)!==null&&t!==void 0?t:void 0,i.isRoaming=(r=e.isRoaming)!==null&&r!==void 0?r:void 0,i.carrier=(a=e.carrier)!==null&&a!==void 0?a:"",i}};function aC(){return{isSnapVp9DecoderAvailable:!1,isSnapAv1DecoderAvailable:!1}}const Vh={encode(e,n=new X){return e.isSnapVp9DecoderAvailable!==!1&&n.uint32(8).bool(e.isSnapVp9DecoderAvailable),e.isSnapAv1DecoderAvailable!==!1&&n.uint32(16).bool(e.isSnapAv1DecoderAvailable),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=aC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.isSnapVp9DecoderAvailable=t.bool();continue}case 2:{if(i!==16)break;a.isSnapAv1DecoderAvailable=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Vh.fromPartial(e??{})},fromPartial(e){var n,t;const r=aC();return r.isSnapVp9DecoderAvailable=(n=e.isSnapVp9DecoderAvailable)!==null&&n!==void 0?n:!1,r.isSnapAv1DecoderAvailable=(t=e.isSnapAv1DecoderAvailable)!==null&&t!==void 0?t:!1,r}};function iC(){return{key:"",value:""}}const Gh={encode(e,n=new X){return e.key!==""&&n.uint32(10).string(e.key),e.value!==""&&n.uint32(18).string(e.value),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=iC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.key=t.string();continue}case 2:{if(i!==18)break;a.value=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Gh.fromPartial(e??{})},fromPartial(e){var n,t;const r=iC();return r.key=(n=e.key)!==null&&n!==void 0?n:"",r.value=(t=e.value)!==null&&t!==void 0?t:"",r}};function oC(){return{records:[]}}const Hh={encode(e,n=new X){for(const t of e.records)Gh.encode(t,n.uint32(10).fork()).join();return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=oC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.records.push(Gh.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Hh.fromPartial(e??{})},fromPartial(e){var n;const t=oC();return t.records=((n=e.records)===null||n===void 0?void 0:n.map(r=>Gh.fromPartial(r)))||[],t}};function sC(){return{value:[]}}const zh={encode(e,n=new X){for(const t of e.value)n.uint32(10).string(t);return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=sC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.value.push(t.string());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return zh.fromPartial(e??{})},fromPartial(e){var n;const t=sC();return t.value=((n=e.value)===null||n===void 0?void 0:n.map(r=>r))||[],t}};function uC(){return{intValue:void 0,longValue:void 0,floatValue:void 0,doubleValue:void 0,boolValue:void 0,stringValue:void 0,anyValue:void 0,mapValue:void 0,intPairValue:void 0,stringArrayValue:void 0}}const Oa={encode(e,n=new X){return e.intValue!==void 0&&n.uint32(8).int32(e.intValue),e.longValue!==void 0&&n.uint32(16).int64(e.longValue),e.floatValue!==void 0&&n.uint32(29).float(e.floatValue),e.doubleValue!==void 0&&n.uint32(73).double(e.doubleValue),e.boolValue!==void 0&&n.uint32(32).bool(e.boolValue),e.stringValue!==void 0&&n.uint32(42).string(e.stringValue),e.anyValue!==void 0&&Yr.encode(e.anyValue,n.uint32(50).fork()).join(),e.mapValue!==void 0&&Hh.encode(e.mapValue,n.uint32(58).fork()).join(),e.intPairValue!==void 0&&n.uint32(65).fixed64(e.intPairValue),e.stringArrayValue!==void 0&&zh.encode(e.stringArrayValue,n.uint32(82).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=uC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.intValue=t.int32();continue}case 2:{if(i!==16)break;a.longValue=t.int64().toString();continue}case 3:{if(i!==29)break;a.floatValue=t.float();continue}case 9:{if(i!==73)break;a.doubleValue=t.double();continue}case 4:{if(i!==32)break;a.boolValue=t.bool();continue}case 5:{if(i!==42)break;a.stringValue=t.string();continue}case 6:{if(i!==50)break;a.anyValue=Yr.decode(t,t.uint32());continue}case 7:{if(i!==58)break;a.mapValue=Hh.decode(t,t.uint32());continue}case 8:{if(i!==65)break;a.intPairValue=t.fixed64().toString();continue}case 10:{if(i!==82)break;a.stringArrayValue=zh.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Oa.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u;const c=uC();return c.intValue=(n=e.intValue)!==null&&n!==void 0?n:void 0,c.longValue=(t=e.longValue)!==null&&t!==void 0?t:void 0,c.floatValue=(r=e.floatValue)!==null&&r!==void 0?r:void 0,c.doubleValue=(a=e.doubleValue)!==null&&a!==void 0?a:void 0,c.boolValue=(i=e.boolValue)!==null&&i!==void 0?i:void 0,c.stringValue=(o=e.stringValue)!==null&&o!==void 0?o:void 0,c.anyValue=e.anyValue!==void 0&&e.anyValue!==null?Yr.fromPartial(e.anyValue):void 0,c.mapValue=e.mapValue!==void 0&&e.mapValue!==null?Hh.fromPartial(e.mapValue):void 0,c.intPairValue=(u=e.intPairValue)!==null&&u!==void 0?u:void 0,c.stringArrayValue=e.stringArrayValue!==void 0&&e.stringArrayValue!==null?zh.fromPartial(e.stringArrayValue):void 0,c}};var lC;(function(e){e[e.UNKNOWN_CONTEXT_PLATFORM=0]="UNKNOWN_CONTEXT_PLATFORM",e[e.IOS_PLATFORM=1]="IOS_PLATFORM",e[e.ANDROID_PLATFORM=2]="ANDROID_PLATFORM",e[e.SERVER_PLATFORM=3]="SERVER_PLATFORM",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(lC||(lC={}));var cC;(function(e){e[e.UNKNOWN_OPERATOR=0]="UNKNOWN_OPERATOR",e[e.AND=1]="AND",e[e.OR=2]="OR",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(cC||(cC={}));var fC;(function(e){e[e.UNKNOWN_PREDICATE_OPERATOR=0]="UNKNOWN_PREDICATE_OPERATOR",e[e.EQUAL=1]="EQUAL",e[e.NOT_EQUAL=2]="NOT_EQUAL",e[e.GREATER_THAN_OR_EQUAL_TO=3]="GREATER_THAN_OR_EQUAL_TO",e[e.LESS_THAN_OR_EQUAL_TO=4]="LESS_THAN_OR_EQUAL_TO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(fC||(fC={}));var dC;(function(e){e[e.UNSET=0]="UNSET",e[e.CLIENT=1]="CLIENT",e[e.SERVER=2]="SERVER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(dC||(dC={}));var hC;(function(e){e[e.UNKNOWN_PROPERTY=0]="UNKNOWN_PROPERTY",e[e.BATTERY_LEVEL=1]="BATTERY_LEVEL",e[e.IS_OFFLINE=2]="IS_OFFLINE",e[e.IS_CHARGING=3]="IS_CHARGING",e[e.BANDWIDTH=4]="BANDWIDTH",e[e.DISK_SIZE=5]="DISK_SIZE",e[e.DISK_AVAILABLE=6]="DISK_AVAILABLE",e[e.MEDIA_TYPE_DEPRECATED=7]="MEDIA_TYPE_DEPRECATED",e[e.IS_PUBLIC_STORY=8]="IS_PUBLIC_STORY",e[e.IS_OFFICIAL_STORY=9]="IS_OFFICIAL_STORY",e[e.CAMERA_DIRECTION=10]="CAMERA_DIRECTION",e[e.CAMERA_CONTEXT=11]="CAMERA_CONTEXT",e[e.CAMERA_API=12]="CAMERA_API",e[e.CAMERA_FLASH_STATE=13]="CAMERA_FLASH_STATE",e[e.SNAP_SOURCE=14]="SNAP_SOURCE",e[e.LEGACY_MUSHROOM_CONTENT_TYPE=15]="LEGACY_MUSHROOM_CONTENT_TYPE",e[e.UPLOAD_BANDWIDTH=16]="UPLOAD_BANDWIDTH",e[e.CAMERA2_LEVEL=17]="CAMERA2_LEVEL",e[e.CAMERA_NIGHT_MODE_STATE=18]="CAMERA_NIGHT_MODE_STATE",e[e.USER_LANGUAGE=19]="USER_LANGUAGE",e[e.VIDEO_DURATION=20]="VIDEO_DURATION",e[e.REALTIME_MOBILE_NETWORK_GENERATION=21]="REALTIME_MOBILE_NETWORK_GENERATION",e[e.REALTIME_NETWORK_TYPE=22]="REALTIME_NETWORK_TYPE",e[e.REALTIME_NETWORK_IS_METERED=23]="REALTIME_NETWORK_IS_METERED",e[e.REALTIME_NETWORK_IS_ROAMING=24]="REALTIME_NETWORK_IS_ROAMING",e[e.CAMERA_IS_FIRST_CAPTURE=25]="CAMERA_IS_FIRST_CAPTURE",e[e.PICTURE_MODE=26]="PICTURE_MODE",e[e.BOLT_USE_CASE=27]="BOLT_USE_CASE",e[e.BOLT_CDN_EXPERIMENTATION_ID=28]="BOLT_CDN_EXPERIMENTATION_ID",e[e.MINS_SINCE_LAST_LENS_ACTIVATION=29]="MINS_SINCE_LAST_LENS_ACTIVATION",e[e.MINS_SINCE_LAST_SNAPPABLE_LENS_ACTIVATION=30]="MINS_SINCE_LAST_SNAPPABLE_LENS_ACTIVATION",e[e.DAYS_SINCE_LAST_LOGIN_OR_OPEN=31]="DAYS_SINCE_LAST_LOGIN_OR_OPEN",e[e.SPECTACLES_VERSION=32]="SPECTACLES_VERSION",e[e.STICKY_MAX_CONNECTION_TYPE=33]="STICKY_MAX_CONNECTION_TYPE",e[e.WITH_ANIMATED_OVERLAY=34]="WITH_ANIMATED_OVERLAY",e[e.ESTIMATED_DURATION_FOR_EVENT_MS=35]="ESTIMATED_DURATION_FOR_EVENT_MS",e[e.URL=36]="URL",e[e.MEDIA_SOURCE=37]="MEDIA_SOURCE",e[e.ASSET_TYPE=38]="ASSET_TYPE",e[e.BOLT_IS_CONTENT_POPULAR=39]="BOLT_IS_CONTENT_POPULAR",e[e.CAPTURE_MODE=40]="CAPTURE_MODE",e[e.VP9_SOFTWARE_DECODING_SUPPORTED=41]="VP9_SOFTWARE_DECODING_SUPPORTED",e[e.AV1_SOFTWARE_DECODING_SUPPORTED=42]="AV1_SOFTWARE_DECODING_SUPPORTED",e[e.WITH_MUSIC=43]="WITH_MUSIC",e[e.FEATURE_PROVIDED_SIZE=44]="FEATURE_PROVIDED_SIZE",e[e.MEDIA_TYPE=45]="MEDIA_TYPE",e[e.SCANNED_CATEGORY_IDS=46]="SCANNED_CATEGORY_IDS",e[e.CONTENT_VIEW_SOURCE=47]="CONTENT_VIEW_SOURCE",e[e.RECIPIENTS_SUPPORT_HEVC=48]="RECIPIENTS_SUPPORT_HEVC",e[e.COGNAC_APP_ID=49]="COGNAC_APP_ID",e[e.EMAIL_VERIFIED=50]="EMAIL_VERIFIED",e[e.PHONE_VERIFIED=51]="PHONE_VERIFIED",e[e.NOTIFICATION_PERM_GRANTED=52]="NOTIFICATION_PERM_GRANTED",e[e.CONTACT_PERM_GRANTED=53]="CONTACT_PERM_GRANTED",e[e.MUTUAL_FRIENDS_COUNT=54]="MUTUAL_FRIENDS_COUNT",e[e.GROUPS_COUNT=55]="GROUPS_COUNT",e[e.HAS_NON_TEAM_SNAPCHAT_CONVERSATIONS=56]="HAS_NON_TEAM_SNAPCHAT_CONVERSATIONS",e[e.PLAYBACK_ITEM_TYPE=57]="PLAYBACK_ITEM_TYPE",e[e.SUP_BOOLEAN_PROPERTY=58]="SUP_BOOLEAN_PROPERTY",e[e.SUP_INTEGER_PROPERTY=59]="SUP_INTEGER_PROPERTY",e[e.SUP_LONG_PROPERTY=60]="SUP_LONG_PROPERTY",e[e.SUP_STRING_PROPERTY=61]="SUP_STRING_PROPERTY",e[e.SUP_DOUBLE_PROPERTY=62]="SUP_DOUBLE_PROPERTY",e[e.SUP_MILLIS_PROPERTY_TO_NOW=63]="SUP_MILLIS_PROPERTY_TO_NOW",e[e.HAS_USED_SPECTACLES=64]="HAS_USED_SPECTACLES",e[e.SUP_SECS_PROPERTY_TO_NOW=65]="SUP_SECS_PROPERTY_TO_NOW",e[e.BOLT_CLIENT_APP_STATE=66]="BOLT_CLIENT_APP_STATE",e[e.EMAIL_SET=67]="EMAIL_SET",e[e.BITMOJI_SET=68]="BITMOJI_SET",e[e.QUICK_TAP_CAMERA_SUPPORTED_ENABLED=69]="QUICK_TAP_CAMERA_SUPPORTED_ENABLED",e[e.HAS_ADD_FRIENDS_REQUEST=70]="HAS_ADD_FRIENDS_REQUEST",e[e.APP_LAUNCH_FROM_PUSH=71]="APP_LAUNCH_FROM_PUSH",e[e.APP_LAUNCH_TYPE=72]="APP_LAUNCH_TYPE",e[e.BILLBOARD_CAMPAIGN_LOCAL_IMPRESSION_COUNT=73]="BILLBOARD_CAMPAIGN_LOCAL_IMPRESSION_COUNT",e[e.BILLBOARD_CAMPAIGN_LOCAL_LAST_IMPRESSION_TIME_SECS_TO_NOW=74]="BILLBOARD_CAMPAIGN_LOCAL_LAST_IMPRESSION_TIME_SECS_TO_NOW",e[e.BILLBOARD_CAMPAIGN_LOCAL_CONTINUOUS_DISMISS_COUNT=75]="BILLBOARD_CAMPAIGN_LOCAL_CONTINUOUS_DISMISS_COUNT",e[e.FST_NUM_IN_APP_WARNINGS=76]="FST_NUM_IN_APP_WARNINGS",e[e.FST_SHOULD_CHANGE_PASSWORD=77]="FST_SHOULD_CHANGE_PASSWORD",e[e.FST_IS_BACKGROUND_CHECK=78]="FST_IS_BACKGROUND_CHECK",e[e.AUDIO_RECORD_PERM_GRANTED=79]="AUDIO_RECORD_PERM_GRANTED",e[e.MUTUAL_FRIENDS_WITH_BIRTHDAY_COUNT=80]="MUTUAL_FRIENDS_WITH_BIRTHDAY_COUNT",e[e.BILLBOARD_CAMPAIGN_LOCAL_DISMISS_COUNT=81]="BILLBOARD_CAMPAIGN_LOCAL_DISMISS_COUNT",e[e.USE_VERTICAL_NAVIGATION=82]="USE_VERTICAL_NAVIGATION",e[e.FREEABLE_DISK_AVAILABLE=83]="FREEABLE_DISK_AVAILABLE",e[e.MEMORIES_COUNT=84]="MEMORIES_COUNT",e[e.DEVICE_MODEL=85]="DEVICE_MODEL",e[e.COUNTRY=86]="COUNTRY",e[e.OS=87]="OS",e[e.OS_VERSION=88]="OS_VERSION",e[e.APP_VERSION=89]="APP_VERSION",e[e.BUILD_FLAVOR=90]="BUILD_FLAVOR",e[e.USER_ID=91]="USER_ID",e[e.LOCALE=92]="LOCALE",e[e.DEVICE_CLUSTER=93]="DEVICE_CLUSTER",e[e.DEVICE_BRAND=94]="DEVICE_BRAND",e[e.IS_EMPLOYEE=95]="IS_EMPLOYEE",e[e.USERNAME=96]="USERNAME",e[e.IS_TEST_USER=97]="IS_TEST_USER",e[e.USER_PROFILE=98]="USER_PROFILE",e[e.SCREEN_WIDTH=99]="SCREEN_WIDTH",e[e.SCREEN_HEIGHT=100]="SCREEN_HEIGHT",e[e.HEVC_SUPPORT=101]="HEVC_SUPPORT",e[e.NETWORK_TYPE=102]="NETWORK_TYPE",e[e.MAX_VIDEO_WIDTH=103]="MAX_VIDEO_WIDTH",e[e.MAX_VIDEO_HEIGHT=104]="MAX_VIDEO_HEIGHT",e[e.IS_NETWORK_METERED=105]="IS_NETWORK_METERED",e[e.IS_ROAMING=106]="IS_ROAMING",e[e.APP_ENGAGEMENT_LEVEL=107]="APP_ENGAGEMENT_LEVEL",e[e.COMMUNICATION_ENGAGEMENT_LEVEL=108]="COMMUNICATION_ENGAGEMENT_LEVEL",e[e.FRIEND_STORY_ENGAGEMENT_LEVEL=109]="FRIEND_STORY_ENGAGEMENT_LEVEL",e[e.PUBLIC_USER_STORY_ENGAGEMENT_LEVEL=110]="PUBLIC_USER_STORY_ENGAGEMENT_LEVEL",e[e.PUBLISHER_STORY_ENGAGEMENT_LEVEL=111]="PUBLISHER_STORY_ENGAGEMENT_LEVEL",e[e.LENS_ENGAGEMENT_LEVEL=112]="LENS_ENGAGEMENT_LEVEL",e[e.NON_FRIEND_STORY_ENGAGEMENT_LEVEL=113]="NON_FRIEND_STORY_ENGAGEMENT_LEVEL",e[e.FOLLOWER_SIZE_LEVEL=114]="FOLLOWER_SIZE_LEVEL",e[e.DAYS_SINCE_CREATION=115]="DAYS_SINCE_CREATION",e[e.USER_PERSONA=116]="USER_PERSONA",e[e.USER_CREATION_TIME=117]="USER_CREATION_TIME",e[e.MOBILE_NETWORK_TYPE=118]="MOBILE_NETWORK_TYPE",e[e.AGGREGATED_USER_BANDWIDTH=119]="AGGREGATED_USER_BANDWIDTH",e[e.LENS_CLUSTER_BIASED=120]="LENS_CLUSTER_BIASED",e[e.LENS_CLUSTER_LOG=121]="LENS_CLUSTER_LOG",e[e.LENS_CLUSTER_ORIG=122]="LENS_CLUSTER_ORIG",e[e.LENS_CLUSTER_ORIG_4=123]="LENS_CLUSTER_ORIG_4",e[e.LENS_CLUSTER_BIASED_LOG=124]="LENS_CLUSTER_BIASED_LOG",e[e.APP_LOCALE=125]="APP_LOCALE",e[e.DEVICE_COMMON_NAME=126]="DEVICE_COMMON_NAME",e[e.USER_FRIEND_COUNT=127]="USER_FRIEND_COUNT",e[e.L90_COUNTRY=128]="L90_COUNTRY",e[e.STUB=129]="STUB",e[e.IS_TRUE=130]="IS_TRUE",e[e.STORY_POST_RATIO=131]="STORY_POST_RATIO",e[e.GENDER=132]="GENDER",e[e.INFERRED_AGE_BUCKET=133]="INFERRED_AGE_BUCKET",e[e.STORIES=134]="STORIES",e[e.SENDS=135]="SENDS",e[e.SNAP_CREATE_L7=136]="SNAP_CREATE_L7",e[e.STORY_POST_L7=137]="STORY_POST_L7",e[e.COMMUNICATION_L7=138]="COMMUNICATION_L7",e[e.DF_L7=139]="DF_L7",e[e.APP_L7=140]="APP_L7",e[e.DAYS_SINCE_CREATION_BUCKET=141]="DAYS_SINCE_CREATION_BUCKET",e[e.BIDIRECTIONAL_FRIEND_STATUS=142]="BIDIRECTIONAL_FRIEND_STATUS",e[e.STORY_POST_PREDICTION=143]="STORY_POST_PREDICTION",e[e.APP_OPENS=144]="APP_OPENS",e[e.LENS_SWIPES=145]="LENS_SWIPES",e[e.LENS_SNAPS=146]="LENS_SNAPS",e[e.LENS_OPS=147]="LENS_OPS",e[e.W1_APP_OPENS=148]="W1_APP_OPENS",e[e.W1_LENS_SWIPES=149]="W1_LENS_SWIPES",e[e.W1_LENS_SNAPS=150]="W1_LENS_SNAPS",e[e.W1_LENS_OPS=151]="W1_LENS_OPS",e[e.W2_APP_OPENS=152]="W2_APP_OPENS",e[e.W2_LENS_SWIPES=153]="W2_LENS_SWIPES",e[e.W2_LENS_SNAPS=154]="W2_LENS_SNAPS",e[e.W2_LENS_OPS=155]="W2_LENS_OPS",e[e.W34_APP_OPENS=156]="W34_APP_OPENS",e[e.W34_LENS_SWIPES=157]="W34_LENS_SWIPES",e[e.W34_LENS_SNAPS=158]="W34_LENS_SNAPS",e[e.W34_LENS_OPS=159]="W34_LENS_OPS",e[e.LENS_SWIPES_PREDICTION=160]="LENS_SWIPES_PREDICTION",e[e.REGISTRATION_COUNTRY=161]="REGISTRATION_COUNTRY",e[e.IP_ASN=162]="IP_ASN",e[e.IP_REGION=163]="IP_REGION",e[e.IP_CITY=164]="IP_CITY",e[e.HAS_USER_ID=165]="HAS_USER_ID",e[e.HAS_BITMOJI=166]="HAS_BITMOJI",e[e.NUM_APP_OPENS_LAST_8_DAYS=167]="NUM_APP_OPENS_LAST_8_DAYS",e[e.NUM_FEATURE_STORY_VIEW_DAYS_L7=168]="NUM_FEATURE_STORY_VIEW_DAYS_L7",e[e.NUM_FEATURE_STORY_SYNC_DAYS_L7=169]="NUM_FEATURE_STORY_SYNC_DAYS_L7",e[e.HEXAGON_NN_SUPPORTED_VERSION=170]="HEXAGON_NN_SUPPORTED_VERSION",e[e.NETWORK_QUALITY=171]="NETWORK_QUALITY",e[e.DEVICE_MEMORY_MB=172]="DEVICE_MEMORY_MB",e[e.DEVICE_GL_VERSION=173]="DEVICE_GL_VERSION",e[e.SNAP_PRO_STATUS=174]="SNAP_PRO_STATUS",e[e.DEVICE_VP9_DECODING_SUPPORT=175]="DEVICE_VP9_DECODING_SUPPORT",e[e.AVG_FRIEND_STORY_VIEW_COUNT_L7=176]="AVG_FRIEND_STORY_VIEW_COUNT_L7",e[e.GAME_JOIN_TIME=177]="GAME_JOIN_TIME",e[e.GAME_LAST_ACTIVE_TIME=178]="GAME_LAST_ACTIVE_TIME",e[e.DAYS_SINCE_FIRST_GAME_ACTIVITY=179]="DAYS_SINCE_FIRST_GAME_ACTIVITY",e[e.DAYS_SINCE_LAST_GAME_ACTIVITY=180]="DAYS_SINCE_LAST_GAME_ACTIVITY",e[e.PF_PAGE_SESSIONS_WITH_LONG_IMP=181]="PF_PAGE_SESSIONS_WITH_LONG_IMP",e[e.WIRELESS_CARRIER=182]="WIRELESS_CARRIER",e[e.MINIS_JOIN_TIME=183]="MINIS_JOIN_TIME",e[e.MINIS_LAST_ACTIVE_TIME=184]="MINIS_LAST_ACTIVE_TIME",e[e.DAYS_SINCE_FIRST_MINIS_ACTIVITY=185]="DAYS_SINCE_FIRST_MINIS_ACTIVITY",e[e.DAYS_SINCE_LAST_MINIS_ACTIVITY=186]="DAYS_SINCE_LAST_MINIS_ACTIVITY",e[e.DEVICE_AV1_DECODING_SUPPORT=187]="DEVICE_AV1_DECODING_SUPPORT",e[e.APP_PACKAGE_INSTALLER=188]="APP_PACKAGE_INSTALLER",e[e.STORY_VIEWS_5TH_TAB_ENGAGEMENT_LEVEL=189]="STORY_VIEWS_5TH_TAB_ENGAGEMENT_LEVEL",e[e.REPORTED_AGE=190]="REPORTED_AGE",e[e.ANDROID_MOBILE_SERVICES_PROVIDER=191]="ANDROID_MOBILE_SERVICES_PROVIDER",e[e.IS_ACQUIRED_USER=192]="IS_ACQUIRED_USER",e[e.YDPI=193]="YDPI",e[e.BIDIRECTIONAL_FRIEND_STATUS_VELLUM=194]="BIDIRECTIONAL_FRIEND_STATUS_VELLUM",e[e.ORIGIN=195]="ORIGIN",e[e.LENSCORE_VERSION=196]="LENSCORE_VERSION",e[e.SNAPKIT_APP_ID=197]="SNAPKIT_APP_ID",e[e.GPU=198]="GPU",e[e.CHIPSET_NAME=199]="CHIPSET_NAME",e[e.CHIPSET_VERSION=200]="CHIPSET_VERSION",e[e.HAS_ZERO_IDFA=201]="HAS_ZERO_IDFA",e[e.LIMIT_AD_TRACKING=202]="LIMIT_AD_TRACKING",e[e.ATT_AUTH_STATUS=203]="ATT_AUTH_STATUS",e[e.CAMERA2_FRONT_SS_GAIN_OVER_TPA=204]="CAMERA2_FRONT_SS_GAIN_OVER_TPA",e[e.ATTACHMENT_TOOL_V2=205]="ATTACHMENT_TOOL_V2",e[e.USER_PERSONA_V3=206]="USER_PERSONA_V3",e[e.SNAPS_SEND_WITH_HEVC=207]="SNAPS_SEND_WITH_HEVC",e[e.SNAPS_SEND_WITHOUT_HEVC=208]="SNAPS_SEND_WITHOUT_HEVC",e[e.CAMERA2_NATIVE_CRASH_OVER_CAMERA1=209]="CAMERA2_NATIVE_CRASH_OVER_CAMERA1",e[e.CAMERA2_G2S_LATENCY_OVER_CAMERA1=210]="CAMERA2_G2S_LATENCY_OVER_CAMERA1",e[e.IS_INTERNAL=211]="IS_INTERNAL",e[e.IS_WEB=212]="IS_WEB",e[e.APP_OPEN_TO_MAP=213]="APP_OPEN_TO_MAP",e[e.APP_OPEN_TO_FRIENDSFEED=214]="APP_OPEN_TO_FRIENDSFEED",e[e.APP_OPEN_TO_LENSES=215]="APP_OPEN_TO_LENSES",e[e.APP_OPEN_TO_MEMORIES=216]="APP_OPEN_TO_MEMORIES",e[e.APP_OPEN_TO_COMMUNITY=217]="APP_OPEN_TO_COMMUNITY",e[e.APP_OPEN_TO_SPOTLIGHT=218]="APP_OPEN_TO_SPOTLIGHT",e[e.IS_IMPACTED_BY_PINC_893=219]="IS_IMPACTED_BY_PINC_893",e[e.DAYS_BEFORE_BIRTHDAY=220]="DAYS_BEFORE_BIRTHDAY",e[e.HAS_BIPA=221]="HAS_BIPA",e[e.SPOTLIGHT_STORY_ENGAGEMENT_STATUS=222]="SPOTLIGHT_STORY_ENGAGEMENT_STATUS",e[e.INCLUSION_PANEL_MEMBER=223]="INCLUSION_PANEL_MEMBER",e[e.HEVC_HW_DECODER=224]="HEVC_HW_DECODER",e[e.HEVC_SW_DECODER=225]="HEVC_SW_DECODER",e[e.HASH_MURMUR3_128_MOD_100=226]="HASH_MURMUR3_128_MOD_100",e[e.HAS_ACTIVE_SNAPCHAT_PLUS=227]="HAS_ACTIVE_SNAPCHAT_PLUS",e[e.SNAP_KIT_OAUTH_ID=228]="SNAP_KIT_OAUTH_ID",e[e.ORGANIZATION_TYPE=229]="ORGANIZATION_TYPE",e[e.CHUNK_UPLOAD_SUPPORT_REQUIRED=230]="CHUNK_UPLOAD_SUPPORT_REQUIRED",e[e.CLOUDFRONT_POP=231]="CLOUDFRONT_POP",e[e.BILLBOARD_CAMPAIGN_LOCAL_FIRST_IMPRESSION_TIME_SECS_TO_NOW=232]="BILLBOARD_CAMPAIGN_LOCAL_FIRST_IMPRESSION_TIME_SECS_TO_NOW",e[e.BILLBOARD_CAMPAIGN_LOCAL_CLICK_COUNT=233]="BILLBOARD_CAMPAIGN_LOCAL_CLICK_COUNT",e[e.BILLBOARD_CAMPAIGN_LOCAL_INTERACTION_COUNT=234]="BILLBOARD_CAMPAIGN_LOCAL_INTERACTION_COUNT",e[e.BILLBOARD_CAMPAIGN_LOCAL_LAST_INTERACTION_TIME_SECS_TO_NOW=235]="BILLBOARD_CAMPAIGN_LOCAL_LAST_INTERACTION_TIME_SECS_TO_NOW",e[e.FST_LOCK_SCREEN_WIDGET_BILLBOARD_LAUNCHED_FROM_PUSH=236]="FST_LOCK_SCREEN_WIDGET_BILLBOARD_LAUNCHED_FROM_PUSH",e[e.WEB_SCREEN_WIDTH=237]="WEB_SCREEN_WIDTH",e[e.WEB_SCREEN_HEIGHT=238]="WEB_SCREEN_HEIGHT",e[e.SUP_IOS_LOCK_SCREEN_WIDGET_ENABLED=239]="SUP_IOS_LOCK_SCREEN_WIDGET_ENABLED",e[e.SNAP_PRIVACY=240]="SNAP_PRIVACY",e[e.ADS_INTERFACES_IS_NEW_ORGANIZATION=241]="ADS_INTERFACES_IS_NEW_ORGANIZATION",e[e.SERVER_ONLY=242]="SERVER_ONLY",e[e.GHE_ORGANIZATION=243]="GHE_ORGANIZATION",e[e.GHE_REPOSITORY=244]="GHE_REPOSITORY",e[e.GHE_USER_EMAIL=245]="GHE_USER_EMAIL",e[e.BUILD_DEFINITION_ID=246]="BUILD_DEFINITION_ID",e[e.BUILD_DEFINITION_NAME=247]="BUILD_DEFINITION_NAME",e[e.LCA_PRINCIPAL=248]="LCA_PRINCIPAL",e[e.MEDIA_PERFORMANCE_CLASS=249]="MEDIA_PERFORMANCE_CLASS",e[e.COMMUNITY_COUNT=250]="COMMUNITY_COUNT",e[e.RECIPIENTS_SUPPORT_FMP4=251]="RECIPIENTS_SUPPORT_FMP4",e[e.SCREEN_ASPECT_RATIO=252]="SCREEN_ASPECT_RATIO",e[e.USER_GROUP=253]="USER_GROUP",e[e.USER_HAS_DENIED_CAMERA_PERM=254]="USER_HAS_DENIED_CAMERA_PERM",e[e.CAMEOS_ENGAGEMENT_LEVEL=255]="CAMEOS_ENGAGEMENT_LEVEL",e[e.HAS_CAMEOS=256]="HAS_CAMEOS",e[e.IS_ACTIVE_LENS_VIDEO_CHAT_USER=257]="IS_ACTIVE_LENS_VIDEO_CHAT_USER",e[e.NUM_SPOTLIGHT_POSTS_L7=258]="NUM_SPOTLIGHT_POSTS_L7",e[e.NUM_MAP_POSTS_L7=259]="NUM_MAP_POSTS_L7",e[e.HAS_CREATED_PUBLIC_PROFILE=260]="HAS_CREATED_PUBLIC_PROFILE",e[e.HAS_PUBLIC_PROFILE_ACCESS_VIA_ROLE=261]="HAS_PUBLIC_PROFILE_ACCESS_VIA_ROLE",e[e.DAYS_SINCE_LAST_CAMERA_PERM_DENY=262]="DAYS_SINCE_LAST_CAMERA_PERM_DENY",e[e.DAYS_SINCE_AD_ORG_JOIN=263]="DAYS_SINCE_AD_ORG_JOIN",e[e.DAYS_SINCE_FIRST_AD_CREATE=264]="DAYS_SINCE_FIRST_AD_CREATE",e[e.ORGANIZATION_COUNTRY=265]="ORGANIZATION_COUNTRY",e[e.DAYS_SINCE_FIRST_DWEB_VISIT=266]="DAYS_SINCE_FIRST_DWEB_VISIT",e[e.DAYS_SINCE_LAST_DWEB_VISIT=267]="DAYS_SINCE_LAST_DWEB_VISIT",e[e.WEEKS_SINCE_USING_DWEB=268]="WEEKS_SINCE_USING_DWEB",e[e.HAS_LENS=269]="HAS_LENS",e[e.BILLBOARD_SERVER_IMPRESSION_COUNT=270]="BILLBOARD_SERVER_IMPRESSION_COUNT",e[e.BILLBOARD_SERVER_CLICK_COUNT=271]="BILLBOARD_SERVER_CLICK_COUNT",e[e.BILLBOARD_SERVER_DISMISS_COUNT=272]="BILLBOARD_SERVER_DISMISS_COUNT",e[e.BILLBOARD_SERVER_INTERACTION_COUNT=273]="BILLBOARD_SERVER_INTERACTION_COUNT",e[e.BILLBOARD_SERVER_FIRST_IMPRESSION_TIME_SECS_TO_NOW=274]="BILLBOARD_SERVER_FIRST_IMPRESSION_TIME_SECS_TO_NOW",e[e.BILLBOARD_SERVER_LAST_IMPRESSION_TIME_SECS_TO_NOW=275]="BILLBOARD_SERVER_LAST_IMPRESSION_TIME_SECS_TO_NOW",e[e.BILLBOARD_SERVER_FIRST_CLICK_TIME_SECS_TO_NOW=276]="BILLBOARD_SERVER_FIRST_CLICK_TIME_SECS_TO_NOW",e[e.BILLBOARD_SERVER_LAST_CLICK_TIME_SECS_TO_NOW=277]="BILLBOARD_SERVER_LAST_CLICK_TIME_SECS_TO_NOW",e[e.BILLBOARD_SERVER_FIRST_DISMISS_TIME_SECS_TO_NOW=278]="BILLBOARD_SERVER_FIRST_DISMISS_TIME_SECS_TO_NOW",e[e.BILLBOARD_SERVER_LAST_DISMISS_TIME_SECS_TO_NOW=279]="BILLBOARD_SERVER_LAST_DISMISS_TIME_SECS_TO_NOW",e[e.BILLBOARD_SERVER_FIRST_INTERACTION_TIME_SECS_TO_NOW=280]="BILLBOARD_SERVER_FIRST_INTERACTION_TIME_SECS_TO_NOW",e[e.BILLBOARD_SERVER_LAST_INTERACTION_TIME_SECS_TO_NOW=281]="BILLBOARD_SERVER_LAST_INTERACTION_TIME_SECS_TO_NOW",e[e.BILLBOARD_SERVER_CONTINUOUS_DISMISS_COUNT=282]="BILLBOARD_SERVER_CONTINUOUS_DISMISS_COUNT",e[e.BILLBOARD_CAMPAIGN_LOCAL_FIRST_CLICK_TIME_SECS_TO_NOW=283]="BILLBOARD_CAMPAIGN_LOCAL_FIRST_CLICK_TIME_SECS_TO_NOW",e[e.BILLBOARD_CAMPAIGN_LOCAL_LAST_CLICK_TIME_SECS_TO_NOW=284]="BILLBOARD_CAMPAIGN_LOCAL_LAST_CLICK_TIME_SECS_TO_NOW",e[e.BILLBOARD_CAMPAIGN_LOCAL_FIRST_DISMISS_TIME_SECS_TO_NOW=285]="BILLBOARD_CAMPAIGN_LOCAL_FIRST_DISMISS_TIME_SECS_TO_NOW",e[e.BILLBOARD_CAMPAIGN_LOCAL_LAST_DISMISS_TIME_SECS_TO_NOW=286]="BILLBOARD_CAMPAIGN_LOCAL_LAST_DISMISS_TIME_SECS_TO_NOW",e[e.BILLBOARD_CAMPAIGN_LOCAL_FIRST_INTERACTION_TIME_SECS_TO_NOW=287]="BILLBOARD_CAMPAIGN_LOCAL_FIRST_INTERACTION_TIME_SECS_TO_NOW",e[e.DAYS_SINCE_FIRST_AD_SPEND=288]="DAYS_SINCE_FIRST_AD_SPEND",e[e.DAYS_SINCE_LAST_AD_SPEND=289]="DAYS_SINCE_LAST_AD_SPEND",e[e.SPOTLIGHT_2_PLUS_STORY_SESSION_7D_STATUS_DETAILED=290]="SPOTLIGHT_2_PLUS_STORY_SESSION_7D_STATUS_DETAILED",e[e.SPOTLIGHT_5_PLUS_STORY_SESSION_7D_STATUS_DETAILED=291]="SPOTLIGHT_5_PLUS_STORY_SESSION_7D_STATUS_DETAILED",e[e.SPOTLIGHT_STORY_VIEW_7D_STATUS_DETAILED=292]="SPOTLIGHT_STORY_VIEW_7D_STATUS_DETAILED",e[e.LAST_USER_ACCEPTED_TOS=293]="LAST_USER_ACCEPTED_TOS",e[e.UPDATED_DEVICE_CLUSTER=294]="UPDATED_DEVICE_CLUSTER",e[e.CREATOR_TIER=295]="CREATOR_TIER",e[e.AV1_SW_DECODER=296]="AV1_SW_DECODER",e[e.AV1_HW_DECODER=297]="AV1_HW_DECODER",e[e.HAS_EXPLICIT_PUBLIC_PROFILE=298]="HAS_EXPLICIT_PUBLIC_PROFILE",e[e.LARGER_TEXT_DISPLAY_OPTION_ENABLED=299]="LARGER_TEXT_DISPLAY_OPTION_ENABLED",e[e.IS_PUBLIC_POSTING_PREFERRED_USER=300]="IS_PUBLIC_POSTING_PREFERRED_USER",e[e.RUID=301]="RUID",e[e.MUTABLE_USERNAME=302]="MUTABLE_USERNAME",e[e.BUDGET_GROUP_ID=303]="BUDGET_GROUP_ID",e[e.AB_POPULATION_RANGE_HASH_FUNC=304]="AB_POPULATION_RANGE_HASH_FUNC",e[e.AB_TREATMENT_RANGE_HASH_FUNC=305]="AB_TREATMENT_RANGE_HASH_FUNC",e[e.REGISTRATION_IP_REGION=306]="REGISTRATION_IP_REGION",e[e.RUID_TYPE=307]="RUID_TYPE",e[e.PLUS_INTERNAL_ONLY=308]="PLUS_INTERNAL_ONLY",e[e.COF_ROLLOUT_RANGE_HASH_FUNC=309]="COF_ROLLOUT_RANGE_HASH_FUNC",e[e.SUP_HAS_AI_SELFIE=341]="SUP_HAS_AI_SELFIE",e[e.SUP_HAS_DREAMS=342]="SUP_HAS_DREAMS",e[e.DAYS_SINCE_LAST_ACTIVITY=343]="DAYS_SINCE_LAST_ACTIVITY",e[e.CONTACT_PERM_OS_GRANTED=344]="CONTACT_PERM_OS_GRANTED",e[e.CONTACT_PERM_USER_GRANTED=345]="CONTACT_PERM_USER_GRANTED",e[e.LENS_CLUSTER_GPU_V2=346]="LENS_CLUSTER_GPU_V2",e[e.CAN_ACCESS_ADS_TAB=347]="CAN_ACCESS_ADS_TAB",e[e.GOOGLE_CDN_POP=348]="GOOGLE_CDN_POP",e[e.NUM_STRONG_RELATIONSHIPS_V3=349]="NUM_STRONG_RELATIONSHIPS_V3",e[e.NUM_CLOSE_PLUS_RELATIONSHIPS_V3=350]="NUM_CLOSE_PLUS_RELATIONSHIPS_V3",e[e.NUM_ACQUAINTANCE_PLUS_RELATIONSHIPS_V3=351]="NUM_ACQUAINTANCE_PLUS_RELATIONSHIPS_V3",e[e.DREAMS_ENGAGEMENT_STATUS=352]="DREAMS_ENGAGEMENT_STATUS",e[e.IS_LOW_LIGHT=353]="IS_LOW_LIGHT",e[e.GALLERY_HAS_2023_YEAR_END_STORY=354]="GALLERY_HAS_2023_YEAR_END_STORY",e[e.CHUNK_UPLOAD_PREFERENCE=355]="CHUNK_UPLOAD_PREFERENCE",e[e.ADMIN_USE_ONLY_IN_AB_TRAFFIC_SPLIT=356]="ADMIN_USE_ONLY_IN_AB_TRAFFIC_SPLIT",e[e.IS_IPHONE=357]="IS_IPHONE",e[e.IS_S11_COUNTRY=358]="IS_S11_COUNTRY",e[e.IS_S11_L90_COUNTRY=359]="IS_S11_L90_COUNTRY",e[e.NUM_ACTIVE_FRIENDS_L7=360]="NUM_ACTIVE_FRIENDS_L7",e[e.NUM_BIDIRECTIONAL_COMMUNICATION_FRIENDS_L7=361]="NUM_BIDIRECTIONAL_COMMUNICATION_FRIENDS_L7",e[e.FULLY_ROLLED_OUT_STUDIES_OPTIMIZATION_ENABLED=362]="FULLY_ROLLED_OUT_STUDIES_OPTIMIZATION_ENABLED",e[e.HAS_USER_ONBOARDED=367]="HAS_USER_ONBOARDED",e[e.ADS_STANDARD_AB_HASH_FUNC=368]="ADS_STANDARD_AB_HASH_FUNC",e[e.IS_TOP_STORY_POSTER=369]="IS_TOP_STORY_POSTER",e[e.COMMUNITY_COUNT_SERVER=370]="COMMUNITY_COUNT_SERVER",e[e.REPORT_VOLUME_LAST_14_DAYS=371]="REPORT_VOLUME_LAST_14_DAYS",e[e.IS_CONCURRENT_CAMERA_SUPPORTED=372]="IS_CONCURRENT_CAMERA_SUPPORTED",e[e.CONTACT_AUTHORIZATION_STATUS=373]="CONTACT_AUTHORIZATION_STATUS",e[e.DISCOVER_FEED_TYPE=374]="DISCOVER_FEED_TYPE",e[e.JOINED_VIA_USER_INVITE=377]="JOINED_VIA_USER_INVITE",e[e.STICKY_REGION=378]="STICKY_REGION",e[e.BIPA_REGION=379]="BIPA_REGION",e[e.GRADUAL_ROLLOUT_HASH_FUNC=380]="GRADUAL_ROLLOUT_HASH_FUNC",e[e.IS_COF_EDGE_CLIENT=381]="IS_COF_EDGE_CLIENT",e[e.COF_EDGE_CLIENT_VERSION=382]="COF_EDGE_CLIENT_VERSION",e[e.IS_DORMANT=383]="IS_DORMANT",e[e.HAS_FORMER_PHONE_NUMBER=384]="HAS_FORMER_PHONE_NUMBER",e[e.OS_BUILD_VERSION=385]="OS_BUILD_VERSION",e[e.SNAP_PROMOTE_DAYS_SINCE_FIRST_AD_CREATE=386]="SNAP_PROMOTE_DAYS_SINCE_FIRST_AD_CREATE",e[e.SNAP_PROMOTE_DAYS_SINCE_LAST_AD_CREATE=387]="SNAP_PROMOTE_DAYS_SINCE_LAST_AD_CREATE",e[e.SNAP_PROMOTE_DAYS_SINCE_FIRST_SPEND=388]="SNAP_PROMOTE_DAYS_SINCE_FIRST_SPEND",e[e.SNAP_PROMOTE_DAYS_SINCE_LAST_SPEND=389]="SNAP_PROMOTE_DAYS_SINCE_LAST_SPEND",e[e.SNAP_PROMOTE_TOTAL_SPEND_USD=390]="SNAP_PROMOTE_TOTAL_SPEND_USD",e[e.SNAP_PROMOTE_AVG_DAILY_SPEND_USD=391]="SNAP_PROMOTE_AVG_DAILY_SPEND_USD",e[e.SNAP_PROMOTE_LAST_OBJECTIVE=392]="SNAP_PROMOTE_LAST_OBJECTIVE",e[e.SNAP_PROMOTE_BUDGET_REMAINING=393]="SNAP_PROMOTE_BUDGET_REMAINING",e[e.IS_MONETIZATION_ELIGIBLE=394]="IS_MONETIZATION_ELIGIBLE",e[e.IS_OPTED_IN_DATA_SHARING=395]="IS_OPTED_IN_DATA_SHARING",e[e.ADS_BUDGET_AB_MACROSTATE_HASH_FUNC=396]="ADS_BUDGET_AB_MACROSTATE_HASH_FUNC",e[e.AB_TREATMENT=397]="AB_TREATMENT",e[e.DREAMS_IN_SNAPFEED_VIEW_ACTIVE_DAYS_L7=398]="DREAMS_IN_SNAPFEED_VIEW_ACTIVE_DAYS_L7",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(hC||(hC={}));var pC;(function(e){e[e.UNKNOWN_SIGNAL_TO_HASH=0]="UNKNOWN_SIGNAL_TO_HASH",e[e.HASH_SEED_AND_USER_ID=1]="HASH_SEED_AND_USER_ID",e[e.HASH_USER_ID_AND_NAMESPACE=2]="HASH_USER_ID_AND_NAMESPACE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(pC||(pC={}));function mC(){return{configId:"",value:void 0,targetingExpression:void 0,ttlSeconds:"0",configRuleUuidBytes:new Uint8Array(0),priority:0,namespace:0,studyName:"",experimentId:0,delete:!1,servePlatforms:[],sequenceId:0,ruidType:0,segmentOrdinal:0,generatedFromAbAllowlists:!1,internalFields:void 0,configIntId:0}}const gn={encode(e,n=new X){e.configId!==""&&n.uint32(10).string(e.configId),e.value!==void 0&&Oa.encode(e.value,n.uint32(18).fork()).join(),e.targetingExpression!==void 0&&Ja.encode(e.targetingExpression,n.uint32(26).fork()).join(),e.ttlSeconds!=="0"&&n.uint32(32).int64(e.ttlSeconds),e.configRuleUuidBytes.length!==0&&n.uint32(42).bytes(e.configRuleUuidBytes),e.priority!==0&&n.uint32(48).int32(e.priority),e.namespace!==0&&n.uint32(56).int32(e.namespace),e.studyName!==""&&n.uint32(66).string(e.studyName),e.experimentId!==0&&n.uint32(72).int32(e.experimentId),e.delete!==!1&&n.uint32(80).bool(e.delete),n.uint32(90).fork();for(const t of e.servePlatforms)n.int32(t);return n.join(),e.sequenceId!==0&&n.uint32(96).int32(e.sequenceId),e.ruidType!==0&&n.uint32(104).int32(e.ruidType),e.segmentOrdinal!==0&&n.uint32(112).int32(e.segmentOrdinal),e.generatedFromAbAllowlists!==!1&&n.uint32(120).bool(e.generatedFromAbAllowlists),e.internalFields!==void 0&&Wh.encode(e.internalFields,n.uint32(130).fork()).join(),e.configIntId!==0&&n.uint32(149).sfixed32(e.configIntId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=mC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.configId=t.string();continue}case 2:{if(i!==18)break;a.value=Oa.decode(t,t.uint32());continue}case 3:{if(i!==26)break;a.targetingExpression=Ja.decode(t,t.uint32());continue}case 4:{if(i!==32)break;a.ttlSeconds=t.int64().toString();continue}case 5:{if(i!==42)break;a.configRuleUuidBytes=t.bytes();continue}case 6:{if(i!==48)break;a.priority=t.int32();continue}case 7:{if(i!==56)break;a.namespace=t.int32();continue}case 8:{if(i!==66)break;a.studyName=t.string();continue}case 9:{if(i!==72)break;a.experimentId=t.int32();continue}case 10:{if(i!==80)break;a.delete=t.bool();continue}case 11:{if(i===88){a.servePlatforms.push(t.int32());continue}if(i===90){const o=t.uint32()+t.pos;for(;t.pos<o;)a.servePlatforms.push(t.int32());continue}break}case 12:{if(i!==96)break;a.sequenceId=t.int32();continue}case 13:{if(i!==104)break;a.ruidType=t.int32();continue}case 14:{if(i!==112)break;a.segmentOrdinal=t.int32();continue}case 15:{if(i!==120)break;a.generatedFromAbAllowlists=t.bool();continue}case 16:{if(i!==130)break;a.internalFields=Wh.decode(t,t.uint32());continue}case 18:{if(i!==149)break;a.configIntId=t.sfixed32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return gn.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p,m,g,y;const b=mC();return b.configId=(n=e.configId)!==null&&n!==void 0?n:"",b.value=e.value!==void 0&&e.value!==null?Oa.fromPartial(e.value):void 0,b.targetingExpression=e.targetingExpression!==void 0&&e.targetingExpression!==null?Ja.fromPartial(e.targetingExpression):void 0,b.ttlSeconds=(t=e.ttlSeconds)!==null&&t!==void 0?t:"0",b.configRuleUuidBytes=(r=e.configRuleUuidBytes)!==null&&r!==void 0?r:new Uint8Array(0),b.priority=(a=e.priority)!==null&&a!==void 0?a:0,b.namespace=(i=e.namespace)!==null&&i!==void 0?i:0,b.studyName=(o=e.studyName)!==null&&o!==void 0?o:"",b.experimentId=(u=e.experimentId)!==null&&u!==void 0?u:0,b.delete=(c=e.delete)!==null&&c!==void 0?c:!1,b.servePlatforms=((f=e.servePlatforms)===null||f===void 0?void 0:f.map(E=>E))||[],b.sequenceId=(h=e.sequenceId)!==null&&h!==void 0?h:0,b.ruidType=(p=e.ruidType)!==null&&p!==void 0?p:0,b.segmentOrdinal=(m=e.segmentOrdinal)!==null&&m!==void 0?m:0,b.generatedFromAbAllowlists=(g=e.generatedFromAbAllowlists)!==null&&g!==void 0?g:!1,b.internalFields=e.internalFields!==void 0&&e.internalFields!==null?Wh.fromPartial(e.internalFields):void 0,b.configIntId=(y=e.configIntId)!==null&&y!==void 0?y:0,b}};function vC(){return{configBitmapIndex:0,configResultBitmapIndex:0,hasServerPropertiesOnly:!1,globalPriority:0,sequenceIds:[],studySegmentOrdinal:0,experimentGuid:"0",isAbStudyStatusCompleted:!1,gradualRolloutId:"",gradualRolloutIsControl:!1,gradualRolloutIsDeleted:!1}}const Wh={encode(e,n=new X){e.configBitmapIndex!==0&&n.uint32(8).int32(e.configBitmapIndex),e.configResultBitmapIndex!==0&&n.uint32(16).int32(e.configResultBitmapIndex),e.hasServerPropertiesOnly!==!1&&n.uint32(24).bool(e.hasServerPropertiesOnly),e.globalPriority!==0&&n.uint32(32).int32(e.globalPriority);for(const t of e.sequenceIds)Kh.encode(t,n.uint32(42).fork()).join();return e.studySegmentOrdinal!==0&&n.uint32(48).int32(e.studySegmentOrdinal),e.experimentGuid!=="0"&&n.uint32(56).uint64(e.experimentGuid),e.isAbStudyStatusCompleted!==!1&&n.uint32(64).bool(e.isAbStudyStatusCompleted),e.gradualRolloutId!==""&&n.uint32(74).string(e.gradualRolloutId),e.gradualRolloutIsControl!==!1&&n.uint32(80).bool(e.gradualRolloutIsControl),e.gradualRolloutIsDeleted!==!1&&n.uint32(88).bool(e.gradualRolloutIsDeleted),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=vC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.configBitmapIndex=t.int32();continue}case 2:{if(i!==16)break;a.configResultBitmapIndex=t.int32();continue}case 3:{if(i!==24)break;a.hasServerPropertiesOnly=t.bool();continue}case 4:{if(i!==32)break;a.globalPriority=t.int32();continue}case 5:{if(i!==42)break;a.sequenceIds.push(Kh.decode(t,t.uint32()));continue}case 6:{if(i!==48)break;a.studySegmentOrdinal=t.int32();continue}case 7:{if(i!==56)break;a.experimentGuid=t.uint64().toString();continue}case 8:{if(i!==64)break;a.isAbStudyStatusCompleted=t.bool();continue}case 9:{if(i!==74)break;a.gradualRolloutId=t.string();continue}case 10:{if(i!==80)break;a.gradualRolloutIsControl=t.bool();continue}case 11:{if(i!==88)break;a.gradualRolloutIsDeleted=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Wh.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p;const m=vC();return m.configBitmapIndex=(n=e.configBitmapIndex)!==null&&n!==void 0?n:0,m.configResultBitmapIndex=(t=e.configResultBitmapIndex)!==null&&t!==void 0?t:0,m.hasServerPropertiesOnly=(r=e.hasServerPropertiesOnly)!==null&&r!==void 0?r:!1,m.globalPriority=(a=e.globalPriority)!==null&&a!==void 0?a:0,m.sequenceIds=((i=e.sequenceIds)===null||i===void 0?void 0:i.map(g=>Kh.fromPartial(g)))||[],m.studySegmentOrdinal=(o=e.studySegmentOrdinal)!==null&&o!==void 0?o:0,m.experimentGuid=(u=e.experimentGuid)!==null&&u!==void 0?u:"0",m.isAbStudyStatusCompleted=(c=e.isAbStudyStatusCompleted)!==null&&c!==void 0?c:!1,m.gradualRolloutId=(f=e.gradualRolloutId)!==null&&f!==void 0?f:"",m.gradualRolloutIsControl=(h=e.gradualRolloutIsControl)!==null&&h!==void 0?h:!1,m.gradualRolloutIsDeleted=(p=e.gradualRolloutIsDeleted)!==null&&p!==void 0?p:!1,m}};function gC(){return{targetingExpression:void 0,sequenceId:0}}const Kh={encode(e,n=new X){return e.targetingExpression!==void 0&&Ja.encode(e.targetingExpression,n.uint32(10).fork()).join(),e.sequenceId!==0&&n.uint32(16).int32(e.sequenceId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=gC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.targetingExpression=Ja.decode(t,t.uint32());continue}case 2:{if(i!==16)break;a.sequenceId=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Kh.fromPartial(e??{})},fromPartial(e){var n;const t=gC();return t.targetingExpression=e.targetingExpression!==void 0&&e.targetingExpression!==null?Ja.fromPartial(e.targetingExpression):void 0,t.sequenceId=(n=e.sequenceId)!==null&&n!==void 0?n:0,t}};function yC(){return{operator:0,children:[],property:0,predicateOperator:0,value:void 0,propertyMetadata:void 0}}const Ja={encode(e,n=new X){e.operator!==0&&n.uint32(8).int32(e.operator);for(const t of e.children)Ja.encode(t,n.uint32(18).fork()).join();return e.property!==0&&n.uint32(24).int32(e.property),e.predicateOperator!==0&&n.uint32(32).int32(e.predicateOperator),e.value!==void 0&&Oa.encode(e.value,n.uint32(42).fork()).join(),e.propertyMetadata!==void 0&&qh.encode(e.propertyMetadata,n.uint32(50).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=yC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.operator=t.int32();continue}case 2:{if(i!==18)break;a.children.push(Ja.decode(t,t.uint32()));continue}case 3:{if(i!==24)break;a.property=t.int32();continue}case 4:{if(i!==32)break;a.predicateOperator=t.int32();continue}case 5:{if(i!==42)break;a.value=Oa.decode(t,t.uint32());continue}case 6:{if(i!==50)break;a.propertyMetadata=qh.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ja.fromPartial(e??{})},fromPartial(e){var n,t,r,a;const i=yC();return i.operator=(n=e.operator)!==null&&n!==void 0?n:0,i.children=((t=e.children)===null||t===void 0?void 0:t.map(o=>Ja.fromPartial(o)))||[],i.property=(r=e.property)!==null&&r!==void 0?r:0,i.predicateOperator=(a=e.predicateOperator)!==null&&a!==void 0?a:0,i.value=e.value!==void 0&&e.value!==null?Oa.fromPartial(e.value):void 0,i.propertyMetadata=e.propertyMetadata!==void 0&&e.propertyMetadata!==null?qh.fromPartial(e.propertyMetadata):void 0,i}};function bC(){return{itemId:0,signalToHash:0,abNamespaceForHashing:"",abSeedForHashing:"",ruidType:void 0,cofRolloutSeedForHashing:"",adsNonBudgetSegmentLayer:0,adsBudgetAbMacrostateName:""}}const qh={encode(e,n=new X){return e.itemId!==0&&n.uint32(8).int32(e.itemId),e.signalToHash!==0&&n.uint32(16).int32(e.signalToHash),e.abNamespaceForHashing!==""&&n.uint32(26).string(e.abNamespaceForHashing),e.abSeedForHashing!==""&&n.uint32(34).string(e.abSeedForHashing),e.ruidType!==void 0&&n.uint32(40).int32(e.ruidType),e.cofRolloutSeedForHashing!==""&&n.uint32(50).string(e.cofRolloutSeedForHashing),e.adsNonBudgetSegmentLayer!==0&&n.uint32(56).int32(e.adsNonBudgetSegmentLayer),e.adsBudgetAbMacrostateName!==""&&n.uint32(66).string(e.adsBudgetAbMacrostateName),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=bC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.itemId=t.int32();continue}case 2:{if(i!==16)break;a.signalToHash=t.int32();continue}case 3:{if(i!==26)break;a.abNamespaceForHashing=t.string();continue}case 4:{if(i!==34)break;a.abSeedForHashing=t.string();continue}case 5:{if(i!==40)break;a.ruidType=t.int32();continue}case 6:{if(i!==50)break;a.cofRolloutSeedForHashing=t.string();continue}case 7:{if(i!==56)break;a.adsNonBudgetSegmentLayer=t.int32();continue}case 8:{if(i!==66)break;a.adsBudgetAbMacrostateName=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return qh.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u,c;const f=bC();return f.itemId=(n=e.itemId)!==null&&n!==void 0?n:0,f.signalToHash=(t=e.signalToHash)!==null&&t!==void 0?t:0,f.abNamespaceForHashing=(r=e.abNamespaceForHashing)!==null&&r!==void 0?r:"",f.abSeedForHashing=(a=e.abSeedForHashing)!==null&&a!==void 0?a:"",f.ruidType=(i=e.ruidType)!==null&&i!==void 0?i:void 0,f.cofRolloutSeedForHashing=(o=e.cofRolloutSeedForHashing)!==null&&o!==void 0?o:"",f.adsNonBudgetSegmentLayer=(u=e.adsNonBudgetSegmentLayer)!==null&&u!==void 0?u:0,f.adsBudgetAbMacrostateName=(c=e.adsBudgetAbMacrostateName)!==null&&c!==void 0?c:"",f}};function SC(){return{abResultChecksumInput:""}}const Yh={encode(e,n=new X){return e.abResultChecksumInput!==""&&n.uint32(10).string(e.abResultChecksumInput),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=SC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.abResultChecksumInput=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Yh.fromPartial(e??{})},fromPartial(e){var n;const t=SC();return t.abResultChecksumInput=(n=e.abResultChecksumInput)!==null&&n!==void 0?n:"",t}};function EC(){return{configResults:[],configResultsEtag:"",benchmarkRequest:void 0,fullResults:!1,abResultChecksum:0,iso3166Alpha2CountryCodeFromRequestIp:"",debugData:void 0,cofGrapheneContext:new Uint8Array(0)}}const Kc={encode(e,n=new X){for(const t of e.configResults)gn.encode(t,n.uint32(10).fork()).join();return e.configResultsEtag!==""&&n.uint32(18).string(e.configResultsEtag),e.benchmarkRequest!==void 0&&Lh.encode(e.benchmarkRequest,n.uint32(26).fork()).join(),e.fullResults!==!1&&n.uint32(32).bool(e.fullResults),e.abResultChecksum!==0&&n.uint32(40).int32(e.abResultChecksum),e.iso3166Alpha2CountryCodeFromRequestIp!==""&&n.uint32(50).string(e.iso3166Alpha2CountryCodeFromRequestIp),e.debugData!==void 0&&Yh.encode(e.debugData,n.uint32(58).fork()).join(),e.cofGrapheneContext.length!==0&&n.uint32(106).bytes(e.cofGrapheneContext),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=EC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.configResults.push(gn.decode(t,t.uint32()));continue}case 2:{if(i!==18)break;a.configResultsEtag=t.string();continue}case 3:{if(i!==26)break;a.benchmarkRequest=Lh.decode(t,t.uint32());continue}case 4:{if(i!==32)break;a.fullResults=t.bool();continue}case 5:{if(i!==40)break;a.abResultChecksum=t.int32();continue}case 6:{if(i!==50)break;a.iso3166Alpha2CountryCodeFromRequestIp=t.string();continue}case 7:{if(i!==58)break;a.debugData=Yh.decode(t,t.uint32());continue}case 13:{if(i!==106)break;a.cofGrapheneContext=t.bytes();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Kc.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o;const u=EC();return u.configResults=((n=e.configResults)===null||n===void 0?void 0:n.map(c=>gn.fromPartial(c)))||[],u.configResultsEtag=(t=e.configResultsEtag)!==null&&t!==void 0?t:"",u.benchmarkRequest=e.benchmarkRequest!==void 0&&e.benchmarkRequest!==null?Lh.fromPartial(e.benchmarkRequest):void 0,u.fullResults=(r=e.fullResults)!==null&&r!==void 0?r:!1,u.abResultChecksum=(a=e.abResultChecksum)!==null&&a!==void 0?a:0,u.iso3166Alpha2CountryCodeFromRequestIp=(i=e.iso3166Alpha2CountryCodeFromRequestIp)!==null&&i!==void 0?i:"",u.debugData=e.debugData!==void 0&&e.debugData!==null?Yh.fromPartial(e.debugData):void 0,u.cofGrapheneContext=(o=e.cofGrapheneContext)!==null&&o!==void 0?o:new Uint8Array(0),u}};var _C;(function(e){e[e.USER_WHITELISTED=0]="USER_WHITELISTED",e[e.USER_GROUP_WHITELISTED=1]="USER_GROUP_WHITELISTED",e[e.FILTER_CONDITIONS=2]="FILTER_CONDITIONS",e[e.SLICE_RANGE=3]="SLICE_RANGE",e[e.TRAFFIC_ALLOCATED=4]="TRAFFIC_ALLOCATED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(_C||(_C={}));var AC;(function(e){e[e.VALIDATE_REQUEST=0]="VALIDATE_REQUEST",e[e.REQUEST_ATLAS=1]="REQUEST_ATLAS",e[e.BUILD_TARGETING_INFO=2]="BUILD_TARGETING_INFO",e[e.QUERY_INDEX=3]="QUERY_INDEX",e[e.REQUEST_AB=4]="REQUEST_AB",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(AC||(AC={}));function wC(){return{abStep:0,info:""}}const $h={encode(e,n=new X){return e.abStep!==0&&n.uint32(8).int32(e.abStep),e.info!==""&&n.uint32(18).string(e.info),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=wC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.abStep=t.int32();continue}case 2:{if(i!==18)break;a.info=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return $h.fromPartial(e??{})},fromPartial(e){var n,t;const r=wC();return r.abStep=(n=e.abStep)!==null&&n!==void 0?n:0,r.info=(t=e.info)!==null&&t!==void 0?t:"",r}};function IC(){return{cofStep:0,info:""}}const jh={encode(e,n=new X){return e.cofStep!==0&&n.uint32(8).int32(e.cofStep),e.info!==""&&n.uint32(18).string(e.info),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=IC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.cofStep=t.int32();continue}case 2:{if(i!==18)break;a.info=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return jh.fromPartial(e??{})},fromPartial(e){var n,t;const r=IC();return r.cofStep=(n=e.cofStep)!==null&&n!==void 0?n:0,r.info=(t=e.info)!==null&&t!==void 0?t:"",r}};function RC(){return{lastCofStep:void 0,lastAbStep:void 0,budgetGroupId:0}}const Xh={encode(e,n=new X){return e.lastCofStep!==void 0&&jh.encode(e.lastCofStep,n.uint32(10).fork()).join(),e.lastAbStep!==void 0&&$h.encode(e.lastAbStep,n.uint32(18).fork()).join(),e.budgetGroupId!==0&&n.uint32(24).uint32(e.budgetGroupId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=RC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.lastCofStep=jh.decode(t,t.uint32());continue}case 2:{if(i!==18)break;a.lastAbStep=$h.decode(t,t.uint32());continue}case 3:{if(i!==24)break;a.budgetGroupId=t.uint32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Xh.fromPartial(e??{})},fromPartial(e){var n;const t=RC();return t.lastCofStep=e.lastCofStep!==void 0&&e.lastCofStep!==null?jh.fromPartial(e.lastCofStep):void 0,t.lastAbStep=e.lastAbStep!==void 0&&e.lastAbStep!==null?$h.fromPartial(e.lastAbStep):void 0,t.budgetGroupId=(n=e.budgetGroupId)!==null&&n!==void 0?n:0,t}};var CC;(function(e){e[e.MEDIA_QUALITY_TYPE_UNKNOWN=0]="MEDIA_QUALITY_TYPE_UNKNOWN",e[e.MEDIA_QUALITY_TYPE_LEVEL_1=100]="MEDIA_QUALITY_TYPE_LEVEL_1",e[e.MEDIA_QUALITY_TYPE_LEVEL_2=200]="MEDIA_QUALITY_TYPE_LEVEL_2",e[e.MEDIA_QUALITY_TYPE_LEVEL_3=300]="MEDIA_QUALITY_TYPE_LEVEL_3",e[e.MEDIA_QUALITY_TYPE_LEVEL_4=400]="MEDIA_QUALITY_TYPE_LEVEL_4",e[e.MEDIA_QUALITY_TYPE_LEVEL_5=500]="MEDIA_QUALITY_TYPE_LEVEL_5",e[e.MEDIA_QUALITY_TYPE_LEVEL_6=600]="MEDIA_QUALITY_TYPE_LEVEL_6",e[e.MEDIA_QUALITY_TYPE_LEVEL_7=700]="MEDIA_QUALITY_TYPE_LEVEL_7",e[e.MEDIA_QUALITY_TYPE_LEVEL_MAX=5e3]="MEDIA_QUALITY_TYPE_LEVEL_MAX",e[e.MEDIA_QUALITY_TYPE_LEVEL_4_5=450]="MEDIA_QUALITY_TYPE_LEVEL_4_5",e[e.MEDIA_QUALITY_TYPE_LEVEL_2_1=210]="MEDIA_QUALITY_TYPE_LEVEL_2_1",e[e.MEDIA_QUALITY_TYPE_LEVEL_2_2=220]="MEDIA_QUALITY_TYPE_LEVEL_2_2",e[e.MEDIA_QUALITY_TYPE_LEVEL_2_5=250]="MEDIA_QUALITY_TYPE_LEVEL_2_5",e[e.MEDIA_QUALITY_TYPE_LEVEL_3_2=320]="MEDIA_QUALITY_TYPE_LEVEL_3_2",e[e.MEDIA_QUALITY_TYPE_LEVEL_3_5=350]="MEDIA_QUALITY_TYPE_LEVEL_3_5",e[e.MEDIA_QUALITY_TYPE_LEVEL_2_7=270]="MEDIA_QUALITY_TYPE_LEVEL_2_7",e[e.MEDIA_QUALITY_TYPE_LEVEL_6_5=650]="MEDIA_QUALITY_TYPE_LEVEL_6_5",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(CC||(CC={}));var NC;(function(e){e[e.UNKNOWN_VIDEO_PLAYBACK_TYPE=0]="UNKNOWN_VIDEO_PLAYBACK_TYPE",e[e.FASTSTART_DISABLED=1]="FASTSTART_DISABLED",e[e.FASTSTART_ENABLED=2]="FASTSTART_ENABLED",e[e.HTTP_STREAMING_DASH=3]="HTTP_STREAMING_DASH",e[e.HTTP_STREAMING_HLS=4]="HTTP_STREAMING_HLS",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(NC||(NC={}));var TC;(function(e){e[e.CAN_EXTEND_MEDIA_CLAIM=0]="CAN_EXTEND_MEDIA_CLAIM",e[e.DO_NOT_CLAIM=1]="DO_NOT_CLAIM",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(TC||(TC={}));function OC(){return{mediaQualityType:0,videoPlaybackType:0}}const Zh={encode(e,n=new X){return e.mediaQualityType!==0&&n.uint32(16).int32(e.mediaQualityType),e.videoPlaybackType!==0&&n.uint32(8).int32(e.videoPlaybackType),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=OC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 2:{if(i!==16)break;a.mediaQualityType=t.int32();continue}case 1:{if(i!==8)break;a.videoPlaybackType=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Zh.fromPartial(e??{})},fromPartial(e){var n,t;const r=OC();return r.mediaQualityType=(n=e.mediaQualityType)!==null&&n!==void 0?n:0,r.videoPlaybackType=(t=e.videoPlaybackType)!==null&&t!==void 0?t:0,r}};function kC(){return{mediaListId:"0",claimBehavior:0,url:"",contentObject:new Uint8Array(0),localContentKey:"",localCacheKey:"",videoDescription:void 0,mediaType:0}}const Qh={encode(e,n=new X){return e.mediaListId!=="0"&&n.uint32(48).int64(e.mediaListId),e.claimBehavior!==0&&n.uint32(56).int32(e.claimBehavior),e.url!==""&&n.uint32(18).string(e.url),e.contentObject.length!==0&&n.uint32(26).bytes(e.contentObject),e.localContentKey!==""&&n.uint32(74).string(e.localContentKey),e.localCacheKey!==""&&n.uint32(82).string(e.localCacheKey),e.videoDescription!==void 0&&Zh.encode(e.videoDescription,n.uint32(42).fork()).join(),e.mediaType!==0&&n.uint32(64).int32(e.mediaType),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=kC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 6:{if(i!==48)break;a.mediaListId=t.int64().toString();continue}case 7:{if(i!==56)break;a.claimBehavior=t.int32();continue}case 2:{if(i!==18)break;a.url=t.string();continue}case 3:{if(i!==26)break;a.contentObject=t.bytes();continue}case 9:{if(i!==74)break;a.localContentKey=t.string();continue}case 10:{if(i!==82)break;a.localCacheKey=t.string();continue}case 5:{if(i!==42)break;a.videoDescription=Zh.decode(t,t.uint32());continue}case 8:{if(i!==64)break;a.mediaType=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Qh.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u;const c=kC();return c.mediaListId=(n=e.mediaListId)!==null&&n!==void 0?n:"0",c.claimBehavior=(t=e.claimBehavior)!==null&&t!==void 0?t:0,c.url=(r=e.url)!==null&&r!==void 0?r:"",c.contentObject=(a=e.contentObject)!==null&&a!==void 0?a:new Uint8Array(0),c.localContentKey=(i=e.localContentKey)!==null&&i!==void 0?i:"",c.localCacheKey=(o=e.localCacheKey)!==null&&o!==void 0?o:"",c.videoDescription=e.videoDescription!==void 0&&e.videoDescription!==null?Zh.fromPartial(e.videoDescription):void 0,c.mediaType=(u=e.mediaType)!==null&&u!==void 0?u:0,c}};function xC(){return{flashOn:!1,frontFacing:!1}}const Jh={encode(e,n=new X){return e.flashOn!==!1&&n.uint32(8).bool(e.flashOn),e.frontFacing!==!1&&n.uint32(16).bool(e.frontFacing),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=xC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.flashOn=t.bool();continue}case 2:{if(i!==16)break;a.frontFacing=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Jh.fromPartial(e??{})},fromPartial(e){var n,t;const r=xC();return r.flashOn=(n=e.flashOn)!==null&&n!==void 0?n:!1,r.frontFacing=(t=e.frontFacing)!==null&&t!==void 0?t:!1,r}};function DC(){return{mediaListId:"0"}}const ep={encode(e,n=new X){return e.mediaListId!=="0"&&n.uint32(8).int64(e.mediaListId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=DC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.mediaListId=t.int64().toString();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return ep.fromPartial(e??{})},fromPartial(e){var n;const t=DC();return t.mediaListId=(n=e.mediaListId)!==null&&n!==void 0?n:"0",t}};var PC;(function(e){e[e.VERTICAL=0]="VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(PC||(PC={}));var MC;(function(e){e[e.UNSET=0]="UNSET",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT",e[e.UP_MIRRORED=5]="UP_MIRRORED",e[e.DOWN_MIRRORED=6]="DOWN_MIRRORED",e[e.LEFT_MIRRORED=7]="LEFT_MIRRORED",e[e.RIGHT_MIRRORED=8]="RIGHT_MIRRORED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(MC||(MC={}));var LC;(function(e){e[e.IMAGE=0]="IMAGE",e[e.VIDEO=1]="VIDEO",e[e.GIF=2]="GIF",e[e.AUDIO=3]="AUDIO",e[e.UNKNOWN=4]="UNKNOWN",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(LC||(LC={}));var BC;(function(e){e[e.GCS=0]="GCS",e[e.S3=1]="S3",e[e.UNRECOGNIZED_VALUE=2]="UNRECOGNIZED_VALUE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(BC||(BC={}));var UC;(function(e){e[e.UNSET=0]="UNSET",e[e.NONE=1]="NONE",e[e.UNKNOWN=2]="UNKNOWN",e[e.SNAPCHAT=3]="SNAPCHAT",e[e.TIKTOK=4]="TIKTOK",e[e.INSTAGRAM=5]="INSTAGRAM",e[e.CAPCUT=6]="CAPCUT",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(UC||(UC={}));var FC;(function(e){e[e.UNSET=0]="UNSET",e[e.NONE=1]="NONE",e[e.GEN_ML=2]="GEN_ML",e[e.UCO=3]="UCO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(FC||(FC={}));function VC(){return{codecFormat:0}}const tp={encode(e,n=new X){return e.codecFormat!==0&&n.uint32(8).int32(e.codecFormat),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=VC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.codecFormat=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return tp.fromPartial(e??{})},fromPartial(e){var n;const t=VC();return t.codecFormat=(n=e.codecFormat)!==null&&n!==void 0?n:0,t}};function GC(){return{codecFormat:0}}const np={encode(e,n=new X){return e.codecFormat!==0&&n.uint32(8).int32(e.codecFormat),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=GC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.codecFormat=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return np.fromPartial(e??{})},fromPartial(e){var n;const t=GC();return t.codecFormat=(n=e.codecFormat)!==null&&n!==void 0?n:0,t}};function HC(){return{codecFormat:0,containerFormat:0}}const rp={encode(e,n=new X){return e.codecFormat!==0&&n.uint32(8).int32(e.codecFormat),e.containerFormat!==0&&n.uint32(16).int32(e.containerFormat),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=HC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.codecFormat=t.int32();continue}case 2:{if(i!==16)break;a.containerFormat=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return rp.fromPartial(e??{})},fromPartial(e){var n,t;const r=HC();return r.codecFormat=(n=e.codecFormat)!==null&&n!==void 0?n:0,r.containerFormat=(t=e.containerFormat)!==null&&t!==void 0?t:0,r}};function zC(){return{orientation:0,dimensions:void 0,mediaDurationMs:0,mediaId:void 0,encryptionInfoV1:void 0,encryptionInfoV2:void 0,masterKeyEncryptedEncryptionInfo:void 0,assetType:0,captureCharacteristics:void 0,mediaOriginCamera:void 0,mediaOriginExternalStorage:void 0,mediaOriginPixy:void 0,mediaOriginSpectacles:void 0,mediaOriginAi:void 0,dreamsMetadata:void 0,additionalOrigins:[],displayOrientation:0,audio:void 0,image:void 0,video:void 0,type:0,legacyMediaSource:void 0,contentDescriptor:void 0,mediaUrl:"",hasSound:!1,zipped:!1,frontFacing:!1,mediaReference:void 0}}const ap={encode(e,n=new X){e.orientation!==0&&n.uint32(24).int32(e.orientation),e.dimensions!==void 0&&ip.encode(e.dimensions,n.uint32(42).fork()).join(),e.mediaDurationMs!==0&&n.uint32(120).uint32(e.mediaDurationMs),e.mediaId!==void 0&&ep.encode(e.mediaId,n.uint32(146).fork()).join(),e.encryptionInfoV1!==void 0&&Ha.encode(e.encryptionInfoV1,n.uint32(34).fork()).join(),e.encryptionInfoV2!==void 0&&Ha.encode(e.encryptionInfoV2,n.uint32(154).fork()).join(),e.masterKeyEncryptedEncryptionInfo!==void 0&&Ha.encode(e.masterKeyEncryptedEncryptionInfo,n.uint32(250).fork()).join(),e.assetType!==0&&n.uint32(160).int32(e.assetType),e.captureCharacteristics!==void 0&&Jh.encode(e.captureCharacteristics,n.uint32(170).fork()).join(),e.mediaOriginCamera!==void 0&&ks.encode(e.mediaOriginCamera,n.uint32(210).fork()).join(),e.mediaOriginExternalStorage!==void 0&&Ps.encode(e.mediaOriginExternalStorage,n.uint32(218).fork()).join(),e.mediaOriginPixy!==void 0&&xs.encode(e.mediaOriginPixy,n.uint32(226).fork()).join(),e.mediaOriginSpectacles!==void 0&&Ds.encode(e.mediaOriginSpectacles,n.uint32(234).fork()).join(),e.mediaOriginAi!==void 0&&Ms.encode(e.mediaOriginAi,n.uint32(242).fork()).join(),e.dreamsMetadata!==void 0&&Ls.encode(e.dreamsMetadata,n.uint32(258).fork()).join();for(const t of e.additionalOrigins)up.encode(t,n.uint32(266).fork()).join();return e.displayOrientation!==0&&n.uint32(176).int32(e.displayOrientation),e.audio!==void 0&&tp.encode(e.audio,n.uint32(186).fork()).join(),e.image!==void 0&&np.encode(e.image,n.uint32(194).fork()).join(),e.video!==void 0&&rp.encode(e.video,n.uint32(202).fork()).join(),e.type!==0&&n.uint32(16).int32(e.type),e.legacyMediaSource!==void 0&&op.encode(e.legacyMediaSource,n.uint32(50).fork()).join(),e.contentDescriptor!==void 0&&n.uint32(58).bytes(e.contentDescriptor),e.mediaUrl!==""&&n.uint32(74).string(e.mediaUrl),e.hasSound!==!1&&n.uint32(96).bool(e.hasSound),e.zipped!==!1&&n.uint32(104).bool(e.zipped),e.frontFacing!==!1&&n.uint32(112).bool(e.frontFacing),e.mediaReference!==void 0&&Qh.encode(e.mediaReference,n.uint32(138).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=zC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 3:{if(i!==24)break;a.orientation=t.int32();continue}case 5:{if(i!==42)break;a.dimensions=ip.decode(t,t.uint32());continue}case 15:{if(i!==120)break;a.mediaDurationMs=t.uint32();continue}case 18:{if(i!==146)break;a.mediaId=ep.decode(t,t.uint32());continue}case 4:{if(i!==34)break;a.encryptionInfoV1=Ha.decode(t,t.uint32());continue}case 19:{if(i!==154)break;a.encryptionInfoV2=Ha.decode(t,t.uint32());continue}case 31:{if(i!==250)break;a.masterKeyEncryptedEncryptionInfo=Ha.decode(t,t.uint32());continue}case 20:{if(i!==160)break;a.assetType=t.int32();continue}case 21:{if(i!==170)break;a.captureCharacteristics=Jh.decode(t,t.uint32());continue}case 26:{if(i!==210)break;a.mediaOriginCamera=ks.decode(t,t.uint32());continue}case 27:{if(i!==218)break;a.mediaOriginExternalStorage=Ps.decode(t,t.uint32());continue}case 28:{if(i!==226)break;a.mediaOriginPixy=xs.decode(t,t.uint32());continue}case 29:{if(i!==234)break;a.mediaOriginSpectacles=Ds.decode(t,t.uint32());continue}case 30:{if(i!==242)break;a.mediaOriginAi=Ms.decode(t,t.uint32());continue}case 32:{if(i!==258)break;a.dreamsMetadata=Ls.decode(t,t.uint32());continue}case 33:{if(i!==266)break;a.additionalOrigins.push(up.decode(t,t.uint32()));continue}case 22:{if(i!==176)break;a.displayOrientation=t.int32();continue}case 23:{if(i!==186)break;a.audio=tp.decode(t,t.uint32());continue}case 24:{if(i!==194)break;a.image=np.decode(t,t.uint32());continue}case 25:{if(i!==202)break;a.video=rp.decode(t,t.uint32());continue}case 2:{if(i!==16)break;a.type=t.int32();continue}case 6:{if(i!==50)break;a.legacyMediaSource=op.decode(t,t.uint32());continue}case 7:{if(i!==58)break;a.contentDescriptor=t.bytes();continue}case 9:{if(i!==74)break;a.mediaUrl=t.string();continue}case 12:{if(i!==96)break;a.hasSound=t.bool();continue}case 13:{if(i!==104)break;a.zipped=t.bool();continue}case 14:{if(i!==112)break;a.frontFacing=t.bool();continue}case 17:{if(i!==138)break;a.mediaReference=Qh.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return ap.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p;const m=zC();return m.orientation=(n=e.orientation)!==null&&n!==void 0?n:0,m.dimensions=e.dimensions!==void 0&&e.dimensions!==null?ip.fromPartial(e.dimensions):void 0,m.mediaDurationMs=(t=e.mediaDurationMs)!==null&&t!==void 0?t:0,m.mediaId=e.mediaId!==void 0&&e.mediaId!==null?ep.fromPartial(e.mediaId):void 0,m.encryptionInfoV1=e.encryptionInfoV1!==void 0&&e.encryptionInfoV1!==null?Ha.fromPartial(e.encryptionInfoV1):void 0,m.encryptionInfoV2=e.encryptionInfoV2!==void 0&&e.encryptionInfoV2!==null?Ha.fromPartial(e.encryptionInfoV2):void 0,m.masterKeyEncryptedEncryptionInfo=e.masterKeyEncryptedEncryptionInfo!==void 0&&e.masterKeyEncryptedEncryptionInfo!==null?Ha.fromPartial(e.masterKeyEncryptedEncryptionInfo):void 0,m.assetType=(r=e.assetType)!==null&&r!==void 0?r:0,m.captureCharacteristics=e.captureCharacteristics!==void 0&&e.captureCharacteristics!==null?Jh.fromPartial(e.captureCharacteristics):void 0,m.mediaOriginCamera=e.mediaOriginCamera!==void 0&&e.mediaOriginCamera!==null?ks.fromPartial(e.mediaOriginCamera):void 0,m.mediaOriginExternalStorage=e.mediaOriginExternalStorage!==void 0&&e.mediaOriginExternalStorage!==null?Ps.fromPartial(e.mediaOriginExternalStorage):void 0,m.mediaOriginPixy=e.mediaOriginPixy!==void 0&&e.mediaOriginPixy!==null?xs.fromPartial(e.mediaOriginPixy):void 0,m.mediaOriginSpectacles=e.mediaOriginSpectacles!==void 0&&e.mediaOriginSpectacles!==null?Ds.fromPartial(e.mediaOriginSpectacles):void 0,m.mediaOriginAi=e.mediaOriginAi!==void 0&&e.mediaOriginAi!==null?Ms.fromPartial(e.mediaOriginAi):void 0,m.dreamsMetadata=e.dreamsMetadata!==void 0&&e.dreamsMetadata!==null?Ls.fromPartial(e.dreamsMetadata):void 0,m.additionalOrigins=((a=e.additionalOrigins)===null||a===void 0?void 0:a.map(g=>up.fromPartial(g)))||[],m.displayOrientation=(i=e.displayOrientation)!==null&&i!==void 0?i:0,m.audio=e.audio!==void 0&&e.audio!==null?tp.fromPartial(e.audio):void 0,m.image=e.image!==void 0&&e.image!==null?np.fromPartial(e.image):void 0,m.video=e.video!==void 0&&e.video!==null?rp.fromPartial(e.video):void 0,m.type=(o=e.type)!==null&&o!==void 0?o:0,m.legacyMediaSource=e.legacyMediaSource!==void 0&&e.legacyMediaSource!==null?op.fromPartial(e.legacyMediaSource):void 0,m.contentDescriptor=(u=e.contentDescriptor)!==null&&u!==void 0?u:void 0,m.mediaUrl=(c=e.mediaUrl)!==null&&c!==void 0?c:"",m.hasSound=(f=e.hasSound)!==null&&f!==void 0?f:!1,m.zipped=(h=e.zipped)!==null&&h!==void 0?h:!1,m.frontFacing=(p=e.frontFacing)!==null&&p!==void 0?p:!1,m.mediaReference=e.mediaReference!==void 0&&e.mediaReference!==null?Qh.fromPartial(e.mediaReference):void 0,m}};function WC(){return{width:0,height:0}}const ip={encode(e,n=new X){return e.width!==0&&n.uint32(8).uint32(e.width),e.height!==0&&n.uint32(16).uint32(e.height),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=WC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.width=t.uint32();continue}case 2:{if(i!==16)break;a.height=t.uint32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return ip.fromPartial(e??{})},fromPartial(e){var n,t;const r=WC();return r.width=(n=e.width)!==null&&n!==void 0?n:0,r.height=(t=e.height)!==null&&t!==void 0?t:0,r}};function KC(){return{key:new Uint8Array(0),iv:new Uint8Array(0)}}const Ha={encode(e,n=new X){return e.key.length!==0&&n.uint32(10).bytes(e.key),e.iv.length!==0&&n.uint32(18).bytes(e.iv),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=KC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.key=t.bytes();continue}case 2:{if(i!==18)break;a.iv=t.bytes();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ha.fromPartial(e??{})},fromPartial(e){var n,t;const r=KC();return r.key=(n=e.key)!==null&&n!==void 0?n:new Uint8Array(0),r.iv=(t=e.iv)!==null&&t!==void 0?t:new Uint8Array(0),r}};function qC(){return{sourceMediaId:"",directDownloadUrl:void 0}}const op={encode(e,n=new X){return e.sourceMediaId!==""&&n.uint32(10).string(e.sourceMediaId),e.directDownloadUrl!==void 0&&sp.encode(e.directDownloadUrl,n.uint32(18).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=qC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.sourceMediaId=t.string();continue}case 2:{if(i!==18)break;a.directDownloadUrl=sp.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return op.fromPartial(e??{})},fromPartial(e){var n;const t=qC();return t.sourceMediaId=(n=e.sourceMediaId)!==null&&n!==void 0?n:"",t.directDownloadUrl=e.directDownloadUrl!==void 0&&e.directDownloadUrl!==null?sp.fromPartial(e.directDownloadUrl):void 0,t}};function YC(){return{url:"",expirySeconds:"0",type:0,region:""}}const sp={encode(e,n=new X){return e.url!==""&&n.uint32(10).string(e.url),e.expirySeconds!=="0"&&n.uint32(16).uint64(e.expirySeconds),e.type!==0&&n.uint32(24).int32(e.type),e.region!==""&&n.uint32(34).string(e.region),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=YC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.url=t.string();continue}case 2:{if(i!==16)break;a.expirySeconds=t.uint64().toString();continue}case 3:{if(i!==24)break;a.type=t.int32();continue}case 4:{if(i!==34)break;a.region=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return sp.fromPartial(e??{})},fromPartial(e){var n,t,r,a;const i=YC();return i.url=(n=e.url)!==null&&n!==void 0?n:"",i.expirySeconds=(t=e.expirySeconds)!==null&&t!==void 0?t:"0",i.type=(r=e.type)!==null&&r!==void 0?r:0,i.region=(a=e.region)!==null&&a!==void 0?a:"",i}};function $C(){return{mediaOriginCamera:void 0,mediaOriginExternalStorage:void 0,mediaOriginPixy:void 0,mediaOriginSpectacles:void 0,mediaOriginAi:void 0,dreamsMetadata:void 0}}const up={encode(e,n=new X){return e.mediaOriginCamera!==void 0&&ks.encode(e.mediaOriginCamera,n.uint32(10).fork()).join(),e.mediaOriginExternalStorage!==void 0&&Ps.encode(e.mediaOriginExternalStorage,n.uint32(18).fork()).join(),e.mediaOriginPixy!==void 0&&xs.encode(e.mediaOriginPixy,n.uint32(26).fork()).join(),e.mediaOriginSpectacles!==void 0&&Ds.encode(e.mediaOriginSpectacles,n.uint32(34).fork()).join(),e.mediaOriginAi!==void 0&&Ms.encode(e.mediaOriginAi,n.uint32(42).fork()).join(),e.dreamsMetadata!==void 0&&Ls.encode(e.dreamsMetadata,n.uint32(50).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=$C();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.mediaOriginCamera=ks.decode(t,t.uint32());continue}case 2:{if(i!==18)break;a.mediaOriginExternalStorage=Ps.decode(t,t.uint32());continue}case 3:{if(i!==26)break;a.mediaOriginPixy=xs.decode(t,t.uint32());continue}case 4:{if(i!==34)break;a.mediaOriginSpectacles=Ds.decode(t,t.uint32());continue}case 5:{if(i!==42)break;a.mediaOriginAi=Ms.decode(t,t.uint32());continue}case 6:{if(i!==50)break;a.dreamsMetadata=Ls.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return up.fromPartial(e??{})},fromPartial(e){const n=$C();return n.mediaOriginCamera=e.mediaOriginCamera!==void 0&&e.mediaOriginCamera!==null?ks.fromPartial(e.mediaOriginCamera):void 0,n.mediaOriginExternalStorage=e.mediaOriginExternalStorage!==void 0&&e.mediaOriginExternalStorage!==null?Ps.fromPartial(e.mediaOriginExternalStorage):void 0,n.mediaOriginPixy=e.mediaOriginPixy!==void 0&&e.mediaOriginPixy!==null?xs.fromPartial(e.mediaOriginPixy):void 0,n.mediaOriginSpectacles=e.mediaOriginSpectacles!==void 0&&e.mediaOriginSpectacles!==null?Ds.fromPartial(e.mediaOriginSpectacles):void 0,n.mediaOriginAi=e.mediaOriginAi!==void 0&&e.mediaOriginAi!==null?Ms.fromPartial(e.mediaOriginAi):void 0,n.dreamsMetadata=e.dreamsMetadata!==void 0&&e.dreamsMetadata!==null?Ls.fromPartial(e.dreamsMetadata):void 0,n}};function jC(){return{}}const ks={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=jC();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return ks.fromPartial(e??{})},fromPartial(e){return jC()}};function XC(){return{}}const xs={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=XC();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return xs.fromPartial(e??{})},fromPartial(e){return XC()}};function ZC(){return{}}const Ds={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=ZC();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ds.fromPartial(e??{})},fromPartial(e){return ZC()}};function QC(){return{creationTimestamp:"0",mediaSource:0,insecureFileMetadata:void 0,originalLocalIds:[]}}const Ps={encode(e,n=new X){e.creationTimestamp!=="0"&&n.uint32(8).uint64(e.creationTimestamp),e.mediaSource!==0&&n.uint32(16).int32(e.mediaSource),e.insecureFileMetadata!==void 0&&lp.encode(e.insecureFileMetadata,n.uint32(42).fork()).join();for(const t of e.originalLocalIds)n.uint32(50).string(t);return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=QC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.creationTimestamp=t.uint64().toString();continue}case 2:{if(i!==16)break;a.mediaSource=t.int32();continue}case 5:{if(i!==42)break;a.insecureFileMetadata=lp.decode(t,t.uint32());continue}case 6:{if(i!==50)break;a.originalLocalIds.push(t.string());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ps.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=QC();return a.creationTimestamp=(n=e.creationTimestamp)!==null&&n!==void 0?n:"0",a.mediaSource=(t=e.mediaSource)!==null&&t!==void 0?t:0,a.insecureFileMetadata=e.insecureFileMetadata!==void 0&&e.insecureFileMetadata!==null?lp.fromPartial(e.insecureFileMetadata):void 0,a.originalLocalIds=((r=e.originalLocalIds)===null||r===void 0?void 0:r.map(i=>i))||[],a}};function JC(){return{lensId:[],musicTrackId:"0"}}const lp={encode(e,n=new X){n.uint32(10).fork();for(const t of e.lensId)n.uint64(t);return n.join(),e.musicTrackId!=="0"&&n.uint32(16).uint64(e.musicTrackId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=JC();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i===8){a.lensId.push(t.uint64().toString());continue}if(i===10){const o=t.uint32()+t.pos;for(;t.pos<o;)a.lensId.push(t.uint64().toString());continue}break}case 2:{if(i!==16)break;a.musicTrackId=t.uint64().toString();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return lp.fromPartial(e??{})},fromPartial(e){var n,t;const r=JC();return r.lensId=((n=e.lensId)===null||n===void 0?void 0:n.map(a=>a))||[],r.musicTrackId=(t=e.musicTrackId)!==null&&t!==void 0?t:"0",r}};function e3(){return{}}const Ms={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=e3();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ms.fromPartial(e??{})},fromPartial(e){return e3()}};function t3(){return{packId:"",templateId:"",contentType:[]}}const Ls={encode(e,n=new X){e.packId!==""&&n.uint32(10).string(e.packId),e.templateId!==""&&n.uint32(18).string(e.templateId),n.uint32(26).fork();for(const t of e.contentType)n.int32(t);return n.join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=t3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.packId=t.string();continue}case 2:{if(i!==18)break;a.templateId=t.string();continue}case 3:{if(i===24){a.contentType.push(t.int32());continue}if(i===26){const o=t.uint32()+t.pos;for(;t.pos<o;)a.contentType.push(t.int32());continue}break}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ls.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=t3();return a.packId=(n=e.packId)!==null&&n!==void 0?n:"",a.templateId=(t=e.templateId)!==null&&t!==void 0?t:"",a.contentType=((r=e.contentType)===null||r===void 0?void 0:r.map(i=>i))||[],a}};function n3(){return{emailVerified:!1,phoneVerified:!1,notificationPermGranted:!1,contactPermGranted:!1,mutualFriendsCount:0,groupsCount:0,hasNonTeamSnapchatConversations:!1,emailSet:!1,bitmojiSet:!1,hasAddFriendsRequest:!1,appLaunchFromPush:!1,appLaunchType:0,campaignLocalImpressionCount:0,campaignLocalLastImpressionTimeSecsToNow:"0",campaignLocalContinuousDismissCount:0,fstNumInAppWarnings:0,fstShouldChangePassword:!1,audioRecordPermGranted:!1,mutualFriendsWithBirthdayCount:0,campaignLocalDismissCount:0,memoriesCount:0,campaignLocalFirstImpressionTimeSecsToNow:"0",campaignLocalClickCount:0,campaignLocalInteractionCount:0,campaignLocalLastInteractionTimeSecsToNow:"0",lockScreenWidgetAppOpenFromPush:!1,communityCount:0,campaignLocalFirstClickTimeSecsToNow:"0",campaignLocalLastClickTimeSecsToNow:"0",campaignLocalFirstDismissTimeSecsToNow:"0",campaignLocalLastDismissTimeSecsToNow:"0",campaignLocalFirstInteractionTimeSecsToNow:"0",serverImpressionCount:0,serverClickCount:0,serverDismissCount:0,serverInteractionCount:0,serverFirstImpressionTimeSecsToNow:"0",serverLastImpressionTimeSecsToNow:"0",serverFirstClickTimeSecsToNow:"0",serverLastClickTimeSecsToNow:"0",serverFirstDismissTimeSecsToNow:"0",serverLastDismissTimeSecsToNow:"0",serverFirstInteractionTimeSecsToNow:"0",serverLastInteractionTimeSecsToNow:"0",serverContinuousDismissCount:0,contactPermOsGranted:!1,contactPermUserGranted:!1,contactPermOsAuthorizationStatus:0}}const cp={encode(e,n=new X){return e.emailVerified!==!1&&n.uint32(8).bool(e.emailVerified),e.phoneVerified!==!1&&n.uint32(16).bool(e.phoneVerified),e.notificationPermGranted!==!1&&n.uint32(24).bool(e.notificationPermGranted),e.contactPermGranted!==!1&&n.uint32(32).bool(e.contactPermGranted),e.mutualFriendsCount!==0&&n.uint32(40).int32(e.mutualFriendsCount),e.groupsCount!==0&&n.uint32(48).int32(e.groupsCount),e.hasNonTeamSnapchatConversations!==!1&&n.uint32(56).bool(e.hasNonTeamSnapchatConversations),e.emailSet!==!1&&n.uint32(64).bool(e.emailSet),e.bitmojiSet!==!1&&n.uint32(72).bool(e.bitmojiSet),e.hasAddFriendsRequest!==!1&&n.uint32(80).bool(e.hasAddFriendsRequest),e.appLaunchFromPush!==!1&&n.uint32(88).bool(e.appLaunchFromPush),e.appLaunchType!==0&&n.uint32(96).int32(e.appLaunchType),e.campaignLocalImpressionCount!==0&&n.uint32(104).int32(e.campaignLocalImpressionCount),e.campaignLocalLastImpressionTimeSecsToNow!=="0"&&n.uint32(112).int64(e.campaignLocalLastImpressionTimeSecsToNow),e.campaignLocalContinuousDismissCount!==0&&n.uint32(120).int32(e.campaignLocalContinuousDismissCount),e.fstNumInAppWarnings!==0&&n.uint32(128).int32(e.fstNumInAppWarnings),e.fstShouldChangePassword!==!1&&n.uint32(136).bool(e.fstShouldChangePassword),e.audioRecordPermGranted!==!1&&n.uint32(144).bool(e.audioRecordPermGranted),e.mutualFriendsWithBirthdayCount!==0&&n.uint32(152).int32(e.mutualFriendsWithBirthdayCount),e.campaignLocalDismissCount!==0&&n.uint32(160).int32(e.campaignLocalDismissCount),e.memoriesCount!==0&&n.uint32(168).int32(e.memoriesCount),e.campaignLocalFirstImpressionTimeSecsToNow!=="0"&&n.uint32(176).int64(e.campaignLocalFirstImpressionTimeSecsToNow),e.campaignLocalClickCount!==0&&n.uint32(184).int32(e.campaignLocalClickCount),e.campaignLocalInteractionCount!==0&&n.uint32(192).int32(e.campaignLocalInteractionCount),e.campaignLocalLastInteractionTimeSecsToNow!=="0"&&n.uint32(200).int64(e.campaignLocalLastInteractionTimeSecsToNow),e.lockScreenWidgetAppOpenFromPush!==!1&&n.uint32(208).bool(e.lockScreenWidgetAppOpenFromPush),e.communityCount!==0&&n.uint32(216).int32(e.communityCount),e.campaignLocalFirstClickTimeSecsToNow!=="0"&&n.uint32(224).int64(e.campaignLocalFirstClickTimeSecsToNow),e.campaignLocalLastClickTimeSecsToNow!=="0"&&n.uint32(232).int64(e.campaignLocalLastClickTimeSecsToNow),e.campaignLocalFirstDismissTimeSecsToNow!=="0"&&n.uint32(240).int64(e.campaignLocalFirstDismissTimeSecsToNow),e.campaignLocalLastDismissTimeSecsToNow!=="0"&&n.uint32(248).int64(e.campaignLocalLastDismissTimeSecsToNow),e.campaignLocalFirstInteractionTimeSecsToNow!=="0"&&n.uint32(256).int64(e.campaignLocalFirstInteractionTimeSecsToNow),e.serverImpressionCount!==0&&n.uint32(264).int32(e.serverImpressionCount),e.serverClickCount!==0&&n.uint32(272).int32(e.serverClickCount),e.serverDismissCount!==0&&n.uint32(280).int32(e.serverDismissCount),e.serverInteractionCount!==0&&n.uint32(288).int32(e.serverInteractionCount),e.serverFirstImpressionTimeSecsToNow!=="0"&&n.uint32(296).int64(e.serverFirstImpressionTimeSecsToNow),e.serverLastImpressionTimeSecsToNow!=="0"&&n.uint32(304).int64(e.serverLastImpressionTimeSecsToNow),e.serverFirstClickTimeSecsToNow!=="0"&&n.uint32(312).int64(e.serverFirstClickTimeSecsToNow),e.serverLastClickTimeSecsToNow!=="0"&&n.uint32(320).int64(e.serverLastClickTimeSecsToNow),e.serverFirstDismissTimeSecsToNow!=="0"&&n.uint32(328).int64(e.serverFirstDismissTimeSecsToNow),e.serverLastDismissTimeSecsToNow!=="0"&&n.uint32(336).int64(e.serverLastDismissTimeSecsToNow),e.serverFirstInteractionTimeSecsToNow!=="0"&&n.uint32(344).int64(e.serverFirstInteractionTimeSecsToNow),e.serverLastInteractionTimeSecsToNow!=="0"&&n.uint32(352).int64(e.serverLastInteractionTimeSecsToNow),e.serverContinuousDismissCount!==0&&n.uint32(360).int32(e.serverContinuousDismissCount),e.contactPermOsGranted!==!1&&n.uint32(368).bool(e.contactPermOsGranted),e.contactPermUserGranted!==!1&&n.uint32(376).bool(e.contactPermUserGranted),e.contactPermOsAuthorizationStatus!==0&&n.uint32(384).int32(e.contactPermOsAuthorizationStatus),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=n3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.emailVerified=t.bool();continue}case 2:{if(i!==16)break;a.phoneVerified=t.bool();continue}case 3:{if(i!==24)break;a.notificationPermGranted=t.bool();continue}case 4:{if(i!==32)break;a.contactPermGranted=t.bool();continue}case 5:{if(i!==40)break;a.mutualFriendsCount=t.int32();continue}case 6:{if(i!==48)break;a.groupsCount=t.int32();continue}case 7:{if(i!==56)break;a.hasNonTeamSnapchatConversations=t.bool();continue}case 8:{if(i!==64)break;a.emailSet=t.bool();continue}case 9:{if(i!==72)break;a.bitmojiSet=t.bool();continue}case 10:{if(i!==80)break;a.hasAddFriendsRequest=t.bool();continue}case 11:{if(i!==88)break;a.appLaunchFromPush=t.bool();continue}case 12:{if(i!==96)break;a.appLaunchType=t.int32();continue}case 13:{if(i!==104)break;a.campaignLocalImpressionCount=t.int32();continue}case 14:{if(i!==112)break;a.campaignLocalLastImpressionTimeSecsToNow=t.int64().toString();continue}case 15:{if(i!==120)break;a.campaignLocalContinuousDismissCount=t.int32();continue}case 16:{if(i!==128)break;a.fstNumInAppWarnings=t.int32();continue}case 17:{if(i!==136)break;a.fstShouldChangePassword=t.bool();continue}case 18:{if(i!==144)break;a.audioRecordPermGranted=t.bool();continue}case 19:{if(i!==152)break;a.mutualFriendsWithBirthdayCount=t.int32();continue}case 20:{if(i!==160)break;a.campaignLocalDismissCount=t.int32();continue}case 21:{if(i!==168)break;a.memoriesCount=t.int32();continue}case 22:{if(i!==176)break;a.campaignLocalFirstImpressionTimeSecsToNow=t.int64().toString();continue}case 23:{if(i!==184)break;a.campaignLocalClickCount=t.int32();continue}case 24:{if(i!==192)break;a.campaignLocalInteractionCount=t.int32();continue}case 25:{if(i!==200)break;a.campaignLocalLastInteractionTimeSecsToNow=t.int64().toString();continue}case 26:{if(i!==208)break;a.lockScreenWidgetAppOpenFromPush=t.bool();continue}case 27:{if(i!==216)break;a.communityCount=t.int32();continue}case 28:{if(i!==224)break;a.campaignLocalFirstClickTimeSecsToNow=t.int64().toString();continue}case 29:{if(i!==232)break;a.campaignLocalLastClickTimeSecsToNow=t.int64().toString();continue}case 30:{if(i!==240)break;a.campaignLocalFirstDismissTimeSecsToNow=t.int64().toString();continue}case 31:{if(i!==248)break;a.campaignLocalLastDismissTimeSecsToNow=t.int64().toString();continue}case 32:{if(i!==256)break;a.campaignLocalFirstInteractionTimeSecsToNow=t.int64().toString();continue}case 33:{if(i!==264)break;a.serverImpressionCount=t.int32();continue}case 34:{if(i!==272)break;a.serverClickCount=t.int32();continue}case 35:{if(i!==280)break;a.serverDismissCount=t.int32();continue}case 36:{if(i!==288)break;a.serverInteractionCount=t.int32();continue}case 37:{if(i!==296)break;a.serverFirstImpressionTimeSecsToNow=t.int64().toString();continue}case 38:{if(i!==304)break;a.serverLastImpressionTimeSecsToNow=t.int64().toString();continue}case 39:{if(i!==312)break;a.serverFirstClickTimeSecsToNow=t.int64().toString();continue}case 40:{if(i!==320)break;a.serverLastClickTimeSecsToNow=t.int64().toString();continue}case 41:{if(i!==328)break;a.serverFirstDismissTimeSecsToNow=t.int64().toString();continue}case 42:{if(i!==336)break;a.serverLastDismissTimeSecsToNow=t.int64().toString();continue}case 43:{if(i!==344)break;a.serverFirstInteractionTimeSecsToNow=t.int64().toString();continue}case 44:{if(i!==352)break;a.serverLastInteractionTimeSecsToNow=t.int64().toString();continue}case 45:{if(i!==360)break;a.serverContinuousDismissCount=t.int32();continue}case 46:{if(i!==368)break;a.contactPermOsGranted=t.bool();continue}case 47:{if(i!==376)break;a.contactPermUserGranted=t.bool();continue}case 48:{if(i!==384)break;a.contactPermOsAuthorizationStatus=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return cp.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p,m,g,y,b,E,_,w,I,R,C,O,D,P,k,N,U,V,ee,re,ne,z,Z,$,oe,L,Y,Q,de,he,Se,be,Pe,_e,Ce,Be,Le,qe;const ge=n3();return ge.emailVerified=(n=e.emailVerified)!==null&&n!==void 0?n:!1,ge.phoneVerified=(t=e.phoneVerified)!==null&&t!==void 0?t:!1,ge.notificationPermGranted=(r=e.notificationPermGranted)!==null&&r!==void 0?r:!1,ge.contactPermGranted=(a=e.contactPermGranted)!==null&&a!==void 0?a:!1,ge.mutualFriendsCount=(i=e.mutualFriendsCount)!==null&&i!==void 0?i:0,ge.groupsCount=(o=e.groupsCount)!==null&&o!==void 0?o:0,ge.hasNonTeamSnapchatConversations=(u=e.hasNonTeamSnapchatConversations)!==null&&u!==void 0?u:!1,ge.emailSet=(c=e.emailSet)!==null&&c!==void 0?c:!1,ge.bitmojiSet=(f=e.bitmojiSet)!==null&&f!==void 0?f:!1,ge.hasAddFriendsRequest=(h=e.hasAddFriendsRequest)!==null&&h!==void 0?h:!1,ge.appLaunchFromPush=(p=e.appLaunchFromPush)!==null&&p!==void 0?p:!1,ge.appLaunchType=(m=e.appLaunchType)!==null&&m!==void 0?m:0,ge.campaignLocalImpressionCount=(g=e.campaignLocalImpressionCount)!==null&&g!==void 0?g:0,ge.campaignLocalLastImpressionTimeSecsToNow=(y=e.campaignLocalLastImpressionTimeSecsToNow)!==null&&y!==void 0?y:"0",ge.campaignLocalContinuousDismissCount=(b=e.campaignLocalContinuousDismissCount)!==null&&b!==void 0?b:0,ge.fstNumInAppWarnings=(E=e.fstNumInAppWarnings)!==null&&E!==void 0?E:0,ge.fstShouldChangePassword=(_=e.fstShouldChangePassword)!==null&&_!==void 0?_:!1,ge.audioRecordPermGranted=(w=e.audioRecordPermGranted)!==null&&w!==void 0?w:!1,ge.mutualFriendsWithBirthdayCount=(I=e.mutualFriendsWithBirthdayCount)!==null&&I!==void 0?I:0,ge.campaignLocalDismissCount=(R=e.campaignLocalDismissCount)!==null&&R!==void 0?R:0,ge.memoriesCount=(C=e.memoriesCount)!==null&&C!==void 0?C:0,ge.campaignLocalFirstImpressionTimeSecsToNow=(O=e.campaignLocalFirstImpressionTimeSecsToNow)!==null&&O!==void 0?O:"0",ge.campaignLocalClickCount=(D=e.campaignLocalClickCount)!==null&&D!==void 0?D:0,ge.campaignLocalInteractionCount=(P=e.campaignLocalInteractionCount)!==null&&P!==void 0?P:0,ge.campaignLocalLastInteractionTimeSecsToNow=(k=e.campaignLocalLastInteractionTimeSecsToNow)!==null&&k!==void 0?k:"0",ge.lockScreenWidgetAppOpenFromPush=(N=e.lockScreenWidgetAppOpenFromPush)!==null&&N!==void 0?N:!1,ge.communityCount=(U=e.communityCount)!==null&&U!==void 0?U:0,ge.campaignLocalFirstClickTimeSecsToNow=(V=e.campaignLocalFirstClickTimeSecsToNow)!==null&&V!==void 0?V:"0",ge.campaignLocalLastClickTimeSecsToNow=(ee=e.campaignLocalLastClickTimeSecsToNow)!==null&&ee!==void 0?ee:"0",ge.campaignLocalFirstDismissTimeSecsToNow=(re=e.campaignLocalFirstDismissTimeSecsToNow)!==null&&re!==void 0?re:"0",ge.campaignLocalLastDismissTimeSecsToNow=(ne=e.campaignLocalLastDismissTimeSecsToNow)!==null&&ne!==void 0?ne:"0",ge.campaignLocalFirstInteractionTimeSecsToNow=(z=e.campaignLocalFirstInteractionTimeSecsToNow)!==null&&z!==void 0?z:"0",ge.serverImpressionCount=(Z=e.serverImpressionCount)!==null&&Z!==void 0?Z:0,ge.serverClickCount=($=e.serverClickCount)!==null&&$!==void 0?$:0,ge.serverDismissCount=(oe=e.serverDismissCount)!==null&&oe!==void 0?oe:0,ge.serverInteractionCount=(L=e.serverInteractionCount)!==null&&L!==void 0?L:0,ge.serverFirstImpressionTimeSecsToNow=(Y=e.serverFirstImpressionTimeSecsToNow)!==null&&Y!==void 0?Y:"0",ge.serverLastImpressionTimeSecsToNow=(Q=e.serverLastImpressionTimeSecsToNow)!==null&&Q!==void 0?Q:"0",ge.serverFirstClickTimeSecsToNow=(de=e.serverFirstClickTimeSecsToNow)!==null&&de!==void 0?de:"0",ge.serverLastClickTimeSecsToNow=(he=e.serverLastClickTimeSecsToNow)!==null&&he!==void 0?he:"0",ge.serverFirstDismissTimeSecsToNow=(Se=e.serverFirstDismissTimeSecsToNow)!==null&&Se!==void 0?Se:"0",ge.serverLastDismissTimeSecsToNow=(be=e.serverLastDismissTimeSecsToNow)!==null&&be!==void 0?be:"0",ge.serverFirstInteractionTimeSecsToNow=(Pe=e.serverFirstInteractionTimeSecsToNow)!==null&&Pe!==void 0?Pe:"0",ge.serverLastInteractionTimeSecsToNow=(_e=e.serverLastInteractionTimeSecsToNow)!==null&&_e!==void 0?_e:"0",ge.serverContinuousDismissCount=(Ce=e.serverContinuousDismissCount)!==null&&Ce!==void 0?Ce:0,ge.contactPermOsGranted=(Be=e.contactPermOsGranted)!==null&&Be!==void 0?Be:!1,ge.contactPermUserGranted=(Le=e.contactPermUserGranted)!==null&&Le!==void 0?Le:!1,ge.contactPermOsAuthorizationStatus=(qe=e.contactPermOsAuthorizationStatus)!==null&&qe!==void 0?qe:0,ge}};function r3(){return{boltUseCase:0,boltCdnExperimentationId:0,boltIsContentPopular:!1,boltClientAppState:0}}const fp={encode(e,n=new X){return e.boltUseCase!==0&&n.uint32(8).uint32(e.boltUseCase),e.boltCdnExperimentationId!==0&&n.uint32(16).uint32(e.boltCdnExperimentationId),e.boltIsContentPopular!==!1&&n.uint32(24).bool(e.boltIsContentPopular),e.boltClientAppState!==0&&n.uint32(32).int32(e.boltClientAppState),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=r3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.boltUseCase=t.uint32();continue}case 2:{if(i!==16)break;a.boltCdnExperimentationId=t.uint32();continue}case 3:{if(i!==24)break;a.boltIsContentPopular=t.bool();continue}case 4:{if(i!==32)break;a.boltClientAppState=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return fp.fromPartial(e??{})},fromPartial(e){var n,t,r,a;const i=r3();return i.boltUseCase=(n=e.boltUseCase)!==null&&n!==void 0?n:0,i.boltCdnExperimentationId=(t=e.boltCdnExperimentationId)!==null&&t!==void 0?t:0,i.boltIsContentPopular=(r=e.boltIsContentPopular)!==null&&r!==void 0?r:!1,i.boltClientAppState=(a=e.boltClientAppState)!==null&&a!==void 0?a:0,i}};var a3;(function(e){e[e.UNKNOWN_CAMERA_DIRECTION=0]="UNKNOWN_CAMERA_DIRECTION",e[e.FRONT=1]="FRONT",e[e.BACK=2]="BACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(a3||(a3={}));var i3;(function(e){e[e.UNKNOWN_CAMERA_CONTEXT=0]="UNKNOWN_CAMERA_CONTEXT",e[e.MAIN=1]="MAIN",e[e.REPLY=2]="REPLY",e[e.PROFILE=3]="PROFILE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(i3||(i3={}));var o3;(function(e){e[e.UNKNOWN_CAMERA_API=0]="UNKNOWN_CAMERA_API",e[e.CAMERA_1=1]="CAMERA_1",e[e.CAMERA_2=2]="CAMERA_2",e[e.ARCORE=3]="ARCORE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(o3||(o3={}));var s3;(function(e){e[e.UNKNOWN_FLASH_STATE=0]="UNKNOWN_FLASH_STATE",e[e.FLASH_ON=1]="FLASH_ON",e[e.FLASH_OFF=2]="FLASH_OFF",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(s3||(s3={}));var u3;(function(e){e[e.UNKNOWN_NIGHT_MODE_STATE=0]="UNKNOWN_NIGHT_MODE_STATE",e[e.NIGHT_MODE_ON=1]="NIGHT_MODE_ON",e[e.NIGHT_MODE_OFF=2]="NIGHT_MODE_OFF",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(u3||(u3={}));var l3;(function(e){e[e.UNKNOWN_PICTURE_MODE=0]="UNKNOWN_PICTURE_MODE",e[e.JPEG_PICTURE_MODE=1]="JPEG_PICTURE_MODE",e[e.GPU_PICTURE_MODE=2]="GPU_PICTURE_MODE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(l3||(l3={}));var c3;(function(e){e[e.UNKNOWN_CAPTURE_MODE=0]="UNKNOWN_CAPTURE_MODE",e[e.DEFAULT_CAPTURE_MODE=1]="DEFAULT_CAPTURE_MODE",e[e.TIMELINE_CAPTURE_MODE=2]="TIMELINE_CAPTURE_MODE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(c3||(c3={}));var f3;(function(e){e[e.UNKNOWN_CAMERA2_LEVEL=0]="UNKNOWN_CAMERA2_LEVEL",e[e.LEGACY=1]="LEGACY",e[e.LIMITED=2]="LIMITED",e[e.FULL=3]="FULL",e[e.LEVEL_3=4]="LEVEL_3",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(f3||(f3={}));function d3(){return{cameraDirection:0,cameraContext:0,cameraApi:0,flashState:0,camera2Level:0,nightModeState:0,isFirstCapture:!1,pictureMode:0,captureMode:0,hasLens:!1,isLowLight:!1,isConcurrentCameraSupported:!1}}const dp={encode(e,n=new X){return e.cameraDirection!==0&&n.uint32(8).int32(e.cameraDirection),e.cameraContext!==0&&n.uint32(16).int32(e.cameraContext),e.cameraApi!==0&&n.uint32(24).int32(e.cameraApi),e.flashState!==0&&n.uint32(32).int32(e.flashState),e.camera2Level!==0&&n.uint32(40).int32(e.camera2Level),e.nightModeState!==0&&n.uint32(48).int32(e.nightModeState),e.isFirstCapture!==!1&&n.uint32(56).bool(e.isFirstCapture),e.pictureMode!==0&&n.uint32(64).int32(e.pictureMode),e.captureMode!==0&&n.uint32(72).int32(e.captureMode),e.hasLens!==!1&&n.uint32(80).bool(e.hasLens),e.isLowLight!==!1&&n.uint32(88).bool(e.isLowLight),e.isConcurrentCameraSupported!==!1&&n.uint32(96).bool(e.isConcurrentCameraSupported),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=d3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.cameraDirection=t.int32();continue}case 2:{if(i!==16)break;a.cameraContext=t.int32();continue}case 3:{if(i!==24)break;a.cameraApi=t.int32();continue}case 4:{if(i!==32)break;a.flashState=t.int32();continue}case 5:{if(i!==40)break;a.camera2Level=t.int32();continue}case 6:{if(i!==48)break;a.nightModeState=t.int32();continue}case 7:{if(i!==56)break;a.isFirstCapture=t.bool();continue}case 8:{if(i!==64)break;a.pictureMode=t.int32();continue}case 9:{if(i!==72)break;a.captureMode=t.int32();continue}case 10:{if(i!==80)break;a.hasLens=t.bool();continue}case 11:{if(i!==88)break;a.isLowLight=t.bool();continue}case 12:{if(i!==96)break;a.isConcurrentCameraSupported=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return dp.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p,m;const g=d3();return g.cameraDirection=(n=e.cameraDirection)!==null&&n!==void 0?n:0,g.cameraContext=(t=e.cameraContext)!==null&&t!==void 0?t:0,g.cameraApi=(r=e.cameraApi)!==null&&r!==void 0?r:0,g.flashState=(a=e.flashState)!==null&&a!==void 0?a:0,g.camera2Level=(i=e.camera2Level)!==null&&i!==void 0?i:0,g.nightModeState=(o=e.nightModeState)!==null&&o!==void 0?o:0,g.isFirstCapture=(u=e.isFirstCapture)!==null&&u!==void 0?u:!1,g.pictureMode=(c=e.pictureMode)!==null&&c!==void 0?c:0,g.captureMode=(f=e.captureMode)!==null&&f!==void 0?f:0,g.hasLens=(h=e.hasLens)!==null&&h!==void 0?h:!1,g.isLowLight=(p=e.isLowLight)!==null&&p!==void 0?p:!1,g.isConcurrentCameraSupported=(m=e.isConcurrentCameraSupported)!==null&&m!==void 0?m:!1,g}};function h3(){return{cognacId:[]}}const hp={encode(e,n=new X){for(const t of e.cognacId)n.uint32(10).string(t);return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=h3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.cognacId.push(t.string());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return hp.fromPartial(e??{})},fromPartial(e){var n;const t=h3();return t.cognacId=((n=e.cognacId)===null||n===void 0?void 0:n.map(r=>r))||[],t}};var p3;(function(e){e[e.UNKNOWN_ASSET_TYPE=0]="UNKNOWN_ASSET_TYPE",e[e.GENERIC_LARGE_ASSET_TYPE=1]="GENERIC_LARGE_ASSET_TYPE",e[e.GENERIC_SMALL_ASSET_TYPE=2]="GENERIC_SMALL_ASSET_TYPE",e[e.AD_REMOTE_ASSET=3]="AD_REMOTE_ASSET",e[e.AD_SNAP=4]="AD_SNAP",e[e.AD_WEB_VIEW_RESOURCE_CONTENT=5]="AD_WEB_VIEW_RESOURCE_CONTENT",e[e.ATTACHMENT_INFO=6]="ATTACHMENT_INFO",e[e.BITMOJI=7]="BITMOJI",e[e.BITMOJI_LENS_AVATAR_ASSET=8]="BITMOJI_LENS_AVATAR_ASSET",e[e.BITMOJI_LENS_METADATA=9]="BITMOJI_LENS_METADATA",e[e.CAPTION_METADATA=10]="CAPTION_METADATA",e[e.CAPTION_TYPEFACE=11]="CAPTION_TYPEFACE",e[e.CAPTION_VIEW_BITMAP=12]="CAPTION_VIEW_BITMAP",e[e.CHAT_MEDIA_THUMBNAIL=13]="CHAT_MEDIA_THUMBNAIL",e[e.COGNAC=14]="COGNAC",e[e.COGNAC_WEBVIEW=15]="COGNAC_WEBVIEW",e[e.COMMERCE=16]="COMMERCE",e[e.CONTEXT_FILTER_METADATA=17]="CONTEXT_FILTER_METADATA",e[e.CUSTOM_STICKERS=18]="CUSTOM_STICKERS",e[e.DISCOVER_FEED_THUMBNAIL=19]="DISCOVER_FEED_THUMBNAIL",e[e.DISCOVER_PUBLISHER_SNAP=20]="DISCOVER_PUBLISHER_SNAP",e[e.DISCOVER_STORY_SNAP=21]="DISCOVER_STORY_SNAP",e[e.DISCOVER_STORY_STREAMING_SNAP=22]="DISCOVER_STORY_STREAMING_SNAP",e[e.EMOJI=23]="EMOJI",e[e.EMOJI_BRUSH=24]="EMOJI_BRUSH",e[e.EXTERNAL_GEOFILTER=25]="EXTERNAL_GEOFILTER",e[e.EXTERNAL_STICKER=26]="EXTERNAL_STICKER",e[e.GEOFILTER_OVERLAY=27]="GEOFILTER_OVERLAY",e[e.IMAGELOADING_URL=28]="IMAGELOADING_URL",e[e.HELVETICA=29]="HELVETICA",e[e.INFO_STICKER=30]="INFO_STICKER",e[e.LENS_CONTENT=31]="LENS_CONTENT",e[e.LENS_ICON=32]="LENS_ICON",e[e.LENS_OVERLAY_IMAGE=33]="LENS_OVERLAY_IMAGE",e[e.LENS_REMOTE_ASSET=34]="LENS_REMOTE_ASSET",e[e.LOGIN_KIT_PRIVACT=35]="LOGIN_KIT_PRIVACT",e[e.MAPS_EGGHUNT=36]="MAPS_EGGHUNT",e[e.MAPS_KASHMIR=37]="MAPS_KASHMIR",e[e.MAPS_WORLDEFFECTS=38]="MAPS_WORLDEFFECTS",e[e.MEDIA_PACKAGE_COMPOSITE=39]="MEDIA_PACKAGE_COMPOSITE",e[e.MEDIA_PACKAGE_THUMB=40]="MEDIA_PACKAGE_THUMB",e[e.MEMORIES_EDITS=41]="MEMORIES_EDITS",e[e.MEMORIES_MEDIA=42]="MEMORIES_MEDIA",e[e.MEMORIES_MINI_THUMBNAIL=43]="MEMORIES_MINI_THUMBNAIL",e[e.MEMORIES_OVERLAY=44]="MEMORIES_OVERLAY",e[e.MEMORIES_THUMBNAIL=45]="MEMORIES_THUMBNAIL",e[e.NON_USER_BITMOJI=46]="NON_USER_BITMOJI",e[e.PAYMENTS=47]="PAYMENTS",e[e.PUBLISHER_SNAP_MEDIA=48]="PUBLISHER_SNAP_MEDIA",e[e.SHAZAM=49]="SHAZAM",e[e.SKY_MODEL=50]="SKY_MODEL",e[e.SNAP=51]="SNAP",e[e.SNAP_FIRST_FRAME=52]="SNAP_FIRST_FRAME",e[e.SNAP_LOADING_FRAME=53]="SNAP_LOADING_FRAME",e[e.SNAP_STICKER=54]="SNAP_STICKER",e[e.SPECTACLES=55]="SPECTACLES",e[e.STICKER_TAG=56]="STICKER_TAG",e[e.STICKERS_METADATA=57]="STICKERS_METADATA",e[e.STORY_SNAP=58]="STORY_SNAP",e[e.STORY_THUMB=59]="STORY_THUMB",e[e.TRACKING_DATA=60]="TRACKING_DATA",e[e.USER_GENERATED_ASSETS=61]="USER_GENERATED_ASSETS",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(p3||(p3={}));function m3(){return{legacyMushroomContentType:0}}const pp={encode(e,n=new X){return e.legacyMushroomContentType!==0&&n.uint32(8).int32(e.legacyMushroomContentType),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=m3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.legacyMushroomContentType=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return pp.fromPartial(e??{})},fromPartial(e){var n;const t=m3();return t.legacyMushroomContentType=(n=e.legacyMushroomContentType)!==null&&n!==void 0?n:0,t}};function v3(){return{withAnimatedOverlay:!1,withMusic:!1}}const mp={encode(e,n=new X){return e.withAnimatedOverlay!==!1&&n.uint32(8).bool(e.withAnimatedOverlay),e.withMusic!==!1&&n.uint32(16).bool(e.withMusic),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=v3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.withAnimatedOverlay=t.bool();continue}case 2:{if(i!==16)break;a.withMusic=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return mp.fromPartial(e??{})},fromPartial(e){var n,t;const r=v3();return r.withAnimatedOverlay=(n=e.withAnimatedOverlay)!==null&&n!==void 0?n:!1,r.withMusic=(t=e.withMusic)!==null&&t!==void 0?t:!1,r}};function g3(){return{discoverFeedSectionCacheInfo:void 0}}const vp={encode(e,n=new X){return e.discoverFeedSectionCacheInfo!==void 0&&gp.encode(e.discoverFeedSectionCacheInfo,n.uint32(10).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=g3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.discoverFeedSectionCacheInfo=gp.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return vp.fromPartial(e??{})},fromPartial(e){const n=g3();return n.discoverFeedSectionCacheInfo=e.discoverFeedSectionCacheInfo!==void 0&&e.discoverFeedSectionCacheInfo!==null?gp.fromPartial(e.discoverFeedSectionCacheInfo):void 0,n}};function y3(){return{feedType:0}}const gp={encode(e,n=new X){return e.feedType!==0&&n.uint32(8).int32(e.feedType),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=y3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.feedType=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return gp.fromPartial(e??{})},fromPartial(e){var n;const t=y3();return t.feedType=(n=e.feedType)!==null&&n!==void 0?n:0,t}};function b3(){return{lastLensActivatedTime:"0",lastSnappableLensActivatedTime:"0",isAnyEffectApplied:!1}}const yp={encode(e,n=new X){return e.lastLensActivatedTime!=="0"&&n.uint32(8).uint64(e.lastLensActivatedTime),e.lastSnappableLensActivatedTime!=="0"&&n.uint32(16).uint64(e.lastSnappableLensActivatedTime),e.isAnyEffectApplied!==!1&&n.uint32(24).bool(e.isAnyEffectApplied),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=b3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.lastLensActivatedTime=t.uint64().toString();continue}case 2:{if(i!==16)break;a.lastSnappableLensActivatedTime=t.uint64().toString();continue}case 3:{if(i!==24)break;a.isAnyEffectApplied=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return yp.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=b3();return a.lastLensActivatedTime=(n=e.lastLensActivatedTime)!==null&&n!==void 0?n:"0",a.lastSnappableLensActivatedTime=(t=e.lastSnappableLensActivatedTime)!==null&&t!==void 0?t:"0",a.isAnyEffectApplied=(r=e.isAnyEffectApplied)!==null&&r!==void 0?r:!1,a}};function S3(){return{mediaSource:0,assetType:0}}const bp={encode(e,n=new X){return e.mediaSource!==0&&n.uint32(8).int32(e.mediaSource),e.assetType!==0&&n.uint32(16).int32(e.assetType),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=S3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.mediaSource=t.int32();continue}case 2:{if(i!==16)break;a.assetType=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return bp.fromPartial(e??{})},fromPartial(e){var n,t;const r=S3();return r.mediaSource=(n=e.mediaSource)!==null&&n!==void 0?n:0,r.assetType=(t=e.assetType)!==null&&t!==void 0?t:0,r}};var E3;(function(e){e[e.MEDIA_TYPE_UNSET=0]="MEDIA_TYPE_UNSET",e[e.IMAGE=1]="IMAGE",e[e.VIDEO=2]="VIDEO",e[e.GIF=3]="GIF",e[e.AUDIO=4]="AUDIO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(E3||(E3={}));function _3(){return{mediaDurationMs:0,mediaType:0}}const Sp={encode(e,n=new X){return e.mediaDurationMs!==0&&n.uint32(8).uint32(e.mediaDurationMs),e.mediaType!==0&&n.uint32(16).int32(e.mediaType),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=_3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.mediaDurationMs=t.uint32();continue}case 2:{if(i!==16)break;a.mediaType=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Sp.fromPartial(e??{})},fromPartial(e){var n,t;const r=_3();return r.mediaDurationMs=(n=e.mediaDurationMs)!==null&&n!==void 0?n:0,r.mediaType=(t=e.mediaType)!==null&&t!==void 0?t:0,r}};function A3(){return{contentViewSource:0,playbackItemType:0,useVerticalNavigation:!1}}const Ep={encode(e,n=new X){return e.contentViewSource!==0&&n.uint32(8).int32(e.contentViewSource),e.playbackItemType!==0&&n.uint32(16).int32(e.playbackItemType),e.useVerticalNavigation!==!1&&n.uint32(24).bool(e.useVerticalNavigation),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=A3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.contentViewSource=t.int32();continue}case 2:{if(i!==16)break;a.playbackItemType=t.int32();continue}case 3:{if(i!==24)break;a.useVerticalNavigation=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ep.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=A3();return a.contentViewSource=(n=e.contentViewSource)!==null&&n!==void 0?n:0,a.playbackItemType=(t=e.playbackItemType)!==null&&t!==void 0?t:0,a.useVerticalNavigation=(r=e.useVerticalNavigation)!==null&&r!==void 0?r:!1,a}};function w3(){return{scannedCategoryIds:[]}}const _p={encode(e,n=new X){for(const t of e.scannedCategoryIds)n.uint32(10).string(t);return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=w3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.scannedCategoryIds.push(t.string());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return _p.fromPartial(e??{})},fromPartial(e){var n;const t=w3();return t.scannedCategoryIds=((n=e.scannedCategoryIds)===null||n===void 0?void 0:n.map(r=>r))||[],t}};function I3(){return{userIds:[]}}const Ap={encode(e,n=new X){for(const t of e.userIds)n.uint32(10).string(t);return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=I3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.userIds.push(t.string());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ap.fromPartial(e??{})},fromPartial(e){var n;const t=I3();return t.userIds=((n=e.userIds)===null||n===void 0?void 0:n.map(r=>r))||[],t}};function R3(){return{url:""}}const wp={encode(e,n=new X){return e.url!==""&&n.uint32(10).string(e.url),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=R3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.url=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return wp.fromPartial(e??{})},fromPartial(e){var n;const t=R3();return t.url=(n=e.url)!==null&&n!==void 0?n:"",t}};function C3(){return{oauthClientId:""}}const Ip={encode(e,n=new X){return e.oauthClientId!==""&&n.uint32(10).string(e.oauthClientId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=C3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.oauthClientId=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Ip.fromPartial(e??{})},fromPartial(e){var n;const t=C3();return t.oauthClientId=(n=e.oauthClientId)!==null&&n!==void 0?n:"",t}};var N3;(function(e){e[e.PREFERENCE_UNSET=0]="PREFERENCE_UNSET",e[e.GCS=1]="GCS",e[e.S3=2]="S3",e[e.AUTO=3]="AUTO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(N3||(N3={}));function T3(){return{chunkUploadSupportRequired:!1,cloudfrontPop:"",gcdnPop:"",chunkUploadPreference:0}}const Rp={encode(e,n=new X){return e.chunkUploadSupportRequired!==!1&&n.uint32(8).bool(e.chunkUploadSupportRequired),e.cloudfrontPop!==""&&n.uint32(18).string(e.cloudfrontPop),e.gcdnPop!==""&&n.uint32(26).string(e.gcdnPop),e.chunkUploadPreference!==0&&n.uint32(32).int32(e.chunkUploadPreference),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=T3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.chunkUploadSupportRequired=t.bool();continue}case 2:{if(i!==18)break;a.cloudfrontPop=t.string();continue}case 3:{if(i!==26)break;a.gcdnPop=t.string();continue}case 4:{if(i!==32)break;a.chunkUploadPreference=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Rp.fromPartial(e??{})},fromPartial(e){var n,t,r,a;const i=T3();return i.chunkUploadSupportRequired=(n=e.chunkUploadSupportRequired)!==null&&n!==void 0?n:!1,i.cloudfrontPop=(t=e.cloudfrontPop)!==null&&t!==void 0?t:"",i.gcdnPop=(r=e.gcdnPop)!==null&&r!==void 0?r:"",i.chunkUploadPreference=(a=e.chunkUploadPreference)!==null&&a!==void 0?a:0,i}};var O3;(function(e){e[e.UNKNOWN_STORY_TYPE=0]="UNKNOWN_STORY_TYPE",e[e.PUBLIC_USER_STORY=1]="PUBLIC_USER_STORY",e[e.OUR_STORY=2]="OUR_STORY",e[e.PUBLISHER_STORY=3]="PUBLISHER_STORY",e[e.FRIEND_STORY=4]="FRIEND_STORY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(O3||(O3={}));var k3;(function(e){e[e.UNKNOWN_SPECTACLES_VERSION=0]="UNKNOWN_SPECTACLES_VERSION",e[e.V1=1]="V1",e[e.V2=2]="V2",e[e.V3=3]="V3",e[e.V4=4]="V4",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(k3||(k3={}));function x3(){return{mediaMetadata:void 0,storyMetadata:void 0,cameraSignals:void 0,snapSource:0,contentManagerProvidedSignals:void 0,spectacleMetadata:void 0,boltSignals:void 0,lensesSignals:void 0,creativeToolsSignals:void 0,estimatedDurationForEventMs:0,routingSignals:void 0,mdpMediaAttribution:void 0,size:0,mediaSignals:void 0,perceptionSignals:void 0,operaSignals:void 0,recipientsSignals:void 0,billboardSignals:void 0,cognacSignals:void 0,hashSignals:void 0,edgeSignals:{},snapKitSignals:void 0,uploadSignals:void 0,ruids:[],discoverFeedSignals:void 0}}const Bs={encode(e,n=new X){e.mediaMetadata!==void 0&&ap.encode(e.mediaMetadata,n.uint32(10).fork()).join(),e.storyMetadata!==void 0&&Cp.encode(e.storyMetadata,n.uint32(18).fork()).join(),e.cameraSignals!==void 0&&dp.encode(e.cameraSignals,n.uint32(26).fork()).join(),e.snapSource!==0&&n.uint32(32).int32(e.snapSource),e.contentManagerProvidedSignals!==void 0&&pp.encode(e.contentManagerProvidedSignals,n.uint32(42).fork()).join(),e.spectacleMetadata!==void 0&&Np.encode(e.spectacleMetadata,n.uint32(50).fork()).join(),e.boltSignals!==void 0&&fp.encode(e.boltSignals,n.uint32(58).fork()).join(),e.lensesSignals!==void 0&&yp.encode(e.lensesSignals,n.uint32(66).fork()).join(),e.creativeToolsSignals!==void 0&&mp.encode(e.creativeToolsSignals,n.uint32(74).fork()).join(),e.estimatedDurationForEventMs!==0&&n.uint32(80).uint32(e.estimatedDurationForEventMs),e.routingSignals!==void 0&&wp.encode(e.routingSignals,n.uint32(90).fork()).join(),e.mdpMediaAttribution!==void 0&&bp.encode(e.mdpMediaAttribution,n.uint32(98).fork()).join(),e.size!==0&&n.uint32(104).uint32(e.size),e.mediaSignals!==void 0&&Sp.encode(e.mediaSignals,n.uint32(114).fork()).join(),e.perceptionSignals!==void 0&&_p.encode(e.perceptionSignals,n.uint32(122).fork()).join(),e.operaSignals!==void 0&&Ep.encode(e.operaSignals,n.uint32(130).fork()).join(),e.recipientsSignals!==void 0&&Ap.encode(e.recipientsSignals,n.uint32(138).fork()).join(),e.billboardSignals!==void 0&&cp.encode(e.billboardSignals,n.uint32(146).fork()).join(),e.cognacSignals!==void 0&&hp.encode(e.cognacSignals,n.uint32(154).fork()).join(),e.hashSignals!==void 0&&Tp.encode(e.hashSignals,n.uint32(162).fork()).join(),Object.entries(e.edgeSignals).forEach(([t,r])=>{_y.encode({key:t,value:r},n.uint32(170).fork()).join()}),e.snapKitSignals!==void 0&&Ip.encode(e.snapKitSignals,n.uint32(178).fork()).join(),e.uploadSignals!==void 0&&Rp.encode(e.uploadSignals,n.uint32(186).fork()).join();for(const t of e.ruids)ii.encode(t,n.uint32(194).fork()).join();return e.discoverFeedSignals!==void 0&&vp.encode(e.discoverFeedSignals,n.uint32(202).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=x3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.mediaMetadata=ap.decode(t,t.uint32());continue}case 2:{if(i!==18)break;a.storyMetadata=Cp.decode(t,t.uint32());continue}case 3:{if(i!==26)break;a.cameraSignals=dp.decode(t,t.uint32());continue}case 4:{if(i!==32)break;a.snapSource=t.int32();continue}case 5:{if(i!==42)break;a.contentManagerProvidedSignals=pp.decode(t,t.uint32());continue}case 6:{if(i!==50)break;a.spectacleMetadata=Np.decode(t,t.uint32());continue}case 7:{if(i!==58)break;a.boltSignals=fp.decode(t,t.uint32());continue}case 8:{if(i!==66)break;a.lensesSignals=yp.decode(t,t.uint32());continue}case 9:{if(i!==74)break;a.creativeToolsSignals=mp.decode(t,t.uint32());continue}case 10:{if(i!==80)break;a.estimatedDurationForEventMs=t.uint32();continue}case 11:{if(i!==90)break;a.routingSignals=wp.decode(t,t.uint32());continue}case 12:{if(i!==98)break;a.mdpMediaAttribution=bp.decode(t,t.uint32());continue}case 13:{if(i!==104)break;a.size=t.uint32();continue}case 14:{if(i!==114)break;a.mediaSignals=Sp.decode(t,t.uint32());continue}case 15:{if(i!==122)break;a.perceptionSignals=_p.decode(t,t.uint32());continue}case 16:{if(i!==130)break;a.operaSignals=Ep.decode(t,t.uint32());continue}case 17:{if(i!==138)break;a.recipientsSignals=Ap.decode(t,t.uint32());continue}case 18:{if(i!==146)break;a.billboardSignals=cp.decode(t,t.uint32());continue}case 19:{if(i!==154)break;a.cognacSignals=hp.decode(t,t.uint32());continue}case 20:{if(i!==162)break;a.hashSignals=Tp.decode(t,t.uint32());continue}case 21:{if(i!==170)break;const o=_y.decode(t,t.uint32());o.value!==void 0&&(a.edgeSignals[o.key]=o.value);continue}case 22:{if(i!==178)break;a.snapKitSignals=Ip.decode(t,t.uint32());continue}case 23:{if(i!==186)break;a.uploadSignals=Rp.decode(t,t.uint32());continue}case 24:{if(i!==194)break;a.ruids.push(ii.decode(t,t.uint32()));continue}case 25:{if(i!==202)break;a.discoverFeedSignals=vp.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Bs.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i;const o=x3();return o.mediaMetadata=e.mediaMetadata!==void 0&&e.mediaMetadata!==null?ap.fromPartial(e.mediaMetadata):void 0,o.storyMetadata=e.storyMetadata!==void 0&&e.storyMetadata!==null?Cp.fromPartial(e.storyMetadata):void 0,o.cameraSignals=e.cameraSignals!==void 0&&e.cameraSignals!==null?dp.fromPartial(e.cameraSignals):void 0,o.snapSource=(n=e.snapSource)!==null&&n!==void 0?n:0,o.contentManagerProvidedSignals=e.contentManagerProvidedSignals!==void 0&&e.contentManagerProvidedSignals!==null?pp.fromPartial(e.contentManagerProvidedSignals):void 0,o.spectacleMetadata=e.spectacleMetadata!==void 0&&e.spectacleMetadata!==null?Np.fromPartial(e.spectacleMetadata):void 0,o.boltSignals=e.boltSignals!==void 0&&e.boltSignals!==null?fp.fromPartial(e.boltSignals):void 0,o.lensesSignals=e.lensesSignals!==void 0&&e.lensesSignals!==null?yp.fromPartial(e.lensesSignals):void 0,o.creativeToolsSignals=e.creativeToolsSignals!==void 0&&e.creativeToolsSignals!==null?mp.fromPartial(e.creativeToolsSignals):void 0,o.estimatedDurationForEventMs=(t=e.estimatedDurationForEventMs)!==null&&t!==void 0?t:0,o.routingSignals=e.routingSignals!==void 0&&e.routingSignals!==null?wp.fromPartial(e.routingSignals):void 0,o.mdpMediaAttribution=e.mdpMediaAttribution!==void 0&&e.mdpMediaAttribution!==null?bp.fromPartial(e.mdpMediaAttribution):void 0,o.size=(r=e.size)!==null&&r!==void 0?r:0,o.mediaSignals=e.mediaSignals!==void 0&&e.mediaSignals!==null?Sp.fromPartial(e.mediaSignals):void 0,o.perceptionSignals=e.perceptionSignals!==void 0&&e.perceptionSignals!==null?_p.fromPartial(e.perceptionSignals):void 0,o.operaSignals=e.operaSignals!==void 0&&e.operaSignals!==null?Ep.fromPartial(e.operaSignals):void 0,o.recipientsSignals=e.recipientsSignals!==void 0&&e.recipientsSignals!==null?Ap.fromPartial(e.recipientsSignals):void 0,o.billboardSignals=e.billboardSignals!==void 0&&e.billboardSignals!==null?cp.fromPartial(e.billboardSignals):void 0,o.cognacSignals=e.cognacSignals!==void 0&&e.cognacSignals!==null?hp.fromPartial(e.cognacSignals):void 0,o.hashSignals=e.hashSignals!==void 0&&e.hashSignals!==null?Tp.fromPartial(e.hashSignals):void 0,o.edgeSignals=Object.entries((a=e.edgeSignals)!==null&&a!==void 0?a:{}).reduce((u,[c,f])=>(f!==void 0&&(u[globalThis.Number(c)]=Oa.fromPartial(f)),u),{}),o.snapKitSignals=e.snapKitSignals!==void 0&&e.snapKitSignals!==null?Ip.fromPartial(e.snapKitSignals):void 0,o.uploadSignals=e.uploadSignals!==void 0&&e.uploadSignals!==null?Rp.fromPartial(e.uploadSignals):void 0,o.ruids=((i=e.ruids)===null||i===void 0?void 0:i.map(u=>ii.fromPartial(u)))||[],o.discoverFeedSignals=e.discoverFeedSignals!==void 0&&e.discoverFeedSignals!==null?vp.fromPartial(e.discoverFeedSignals):void 0,o}};function D3(){return{isPublicStory:!1,isOfficialStory:!1,storyType:0}}const Cp={encode(e,n=new X){return e.isPublicStory!==!1&&n.uint32(8).bool(e.isPublicStory),e.isOfficialStory!==!1&&n.uint32(16).bool(e.isOfficialStory),e.storyType!==0&&n.uint32(24).int32(e.storyType),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=D3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.isPublicStory=t.bool();continue}case 2:{if(i!==16)break;a.isOfficialStory=t.bool();continue}case 3:{if(i!==24)break;a.storyType=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Cp.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=D3();return a.isPublicStory=(n=e.isPublicStory)!==null&&n!==void 0?n:!1,a.isOfficialStory=(t=e.isOfficialStory)!==null&&t!==void 0?t:!1,a.storyType=(r=e.storyType)!==null&&r!==void 0?r:0,a}};function P3(){return{isSpectacle:!1,spectaclesVersion:0}}const Np={encode(e,n=new X){return e.isSpectacle!==!1&&n.uint32(8).bool(e.isSpectacle),e.spectaclesVersion!==0&&n.uint32(16).int32(e.spectaclesVersion),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=P3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.isSpectacle=t.bool();continue}case 2:{if(i!==16)break;a.spectaclesVersion=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Np.fromPartial(e??{})},fromPartial(e){var n,t;const r=P3();return r.isSpectacle=(n=e.isSpectacle)!==null&&n!==void 0?n:!1,r.spectaclesVersion=(t=e.spectaclesVersion)!==null&&t!==void 0?t:0,r}};function M3(){return{userId:new Uint8Array(0),seed:new Uint8Array(0),namespace:0}}const Tp={encode(e,n=new X){return e.userId.length!==0&&n.uint32(10).bytes(e.userId),e.seed.length!==0&&n.uint32(18).bytes(e.seed),e.namespace!==0&&n.uint32(24).int32(e.namespace),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=M3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.userId=t.bytes();continue}case 2:{if(i!==18)break;a.seed=t.bytes();continue}case 3:{if(i!==24)break;a.namespace=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Tp.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=M3();return a.userId=(n=e.userId)!==null&&n!==void 0?n:new Uint8Array(0),a.seed=(t=e.seed)!==null&&t!==void 0?t:new Uint8Array(0),a.namespace=(r=e.namespace)!==null&&r!==void 0?r:0,a}};function L3(){return{key:0,value:void 0}}const _y={encode(e,n=new X){return e.key!==0&&n.uint32(8).int32(e.key),e.value!==void 0&&Oa.encode(e.value,n.uint32(18).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=L3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.key=t.int32();continue}case 2:{if(i!==18)break;a.value=Oa.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return _y.fromPartial(e??{})},fromPartial(e){var n;const t=L3();return t.key=(n=e.key)!==null&&n!==void 0?n:0,t.value=e.value!==void 0&&e.value!==null?Oa.fromPartial(e.value):void 0,t}};function B3(){return{configNames:[],namespaces:[],cofConfigNames:[],includeAllConfigs:!1,disableExposureLogging:!1,enableDebug:!1}}const Kb={encode(e,n=new X){for(const t of e.configNames)n.uint32(10).string(t);n.uint32(18).fork();for(const t of e.namespaces)n.int32(t);n.join();for(const t of e.cofConfigNames)n.uint32(26).string(t);return e.includeAllConfigs!==!1&&n.uint32(32).bool(e.includeAllConfigs),e.disableExposureLogging!==!1&&n.uint32(40).bool(e.disableExposureLogging),e.enableDebug!==!1&&n.uint32(104).bool(e.enableDebug),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=B3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.configNames.push(t.string());continue}case 2:{if(i===16){a.namespaces.push(t.int32());continue}if(i===18){const o=t.uint32()+t.pos;for(;t.pos<o;)a.namespaces.push(t.int32());continue}break}case 3:{if(i!==26)break;a.cofConfigNames.push(t.string());continue}case 4:{if(i!==32)break;a.includeAllConfigs=t.bool();continue}case 5:{if(i!==40)break;a.disableExposureLogging=t.bool();continue}case 13:{if(i!==104)break;a.enableDebug=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Kb.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o;const u=B3();return u.configNames=((n=e.configNames)===null||n===void 0?void 0:n.map(c=>c))||[],u.namespaces=((t=e.namespaces)===null||t===void 0?void 0:t.map(c=>c))||[],u.cofConfigNames=((r=e.cofConfigNames)===null||r===void 0?void 0:r.map(c=>c))||[],u.includeAllConfigs=(a=e.includeAllConfigs)!==null&&a!==void 0?a:!1,u.disableExposureLogging=(i=e.disableExposureLogging)!==null&&i!==void 0?i:!1,u.enableDebug=(o=e.enableDebug)!==null&&o!==void 0?o:!1,u}};function U3(){return{configResults:[],debugTrace:void 0}}const FD={encode(e,n=new X){for(const t of e.configResults)gn.encode(t,n.uint32(10).fork()).join();return e.debugTrace!==void 0&&Xh.encode(e.debugTrace,n.uint32(18).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=U3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.configResults.push(gn.decode(t,t.uint32()));continue}case 2:{if(i!==18)break;a.debugTrace=Xh.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return FD.fromPartial(e??{})},fromPartial(e){var n;const t=U3();return t.configResults=((n=e.configResults)===null||n===void 0?void 0:n.map(r=>gn.fromPartial(r)))||[],t.debugTrace=e.debugTrace!==void 0&&e.debugTrace!==null?Xh.fromPartial(e.debugTrace):void 0,t}};function F3(){return{targetingParameters:void 0,overrides:[]}}const qb={encode(e,n=new X){e.targetingParameters!==void 0&&ol.encode(e.targetingParameters,n.uint32(10).fork()).join();for(const t of e.overrides)gn.encode(t,n.uint32(18).fork()).join();return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=F3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.targetingParameters=ol.decode(t,t.uint32());continue}case 2:{if(i!==18)break;a.overrides.push(gn.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return qb.fromPartial(e??{})},fromPartial(e){var n;const t=F3();return t.targetingParameters=e.targetingParameters!==void 0&&e.targetingParameters!==null?ol.fromPartial(e.targetingParameters):void 0,t.overrides=((n=e.overrides)===null||n===void 0?void 0:n.map(r=>gn.fromPartial(r)))||[],t}};function V3(){return{targetingResponse:void 0}}const VD={encode(e,n=new X){return e.targetingResponse!==void 0&&Kc.encode(e.targetingResponse,n.uint32(10).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=V3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.targetingResponse=Kc.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return VD.fromPartial(e??{})},fromPartial(e){const n=V3();return n.targetingResponse=e.targetingResponse!==void 0&&e.targetingResponse!==null?Kc.fromPartial(e.targetingResponse):void 0,n}};function G3(){return{configSetToken:"",userId:"",ttlSeconds:0}}const Yb={encode(e,n=new X){return e.configSetToken!==""&&n.uint32(10).string(e.configSetToken),e.userId!==""&&n.uint32(18).string(e.userId),e.ttlSeconds!==0&&n.uint32(24).int32(e.ttlSeconds),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=G3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.configSetToken=t.string();continue}case 2:{if(i!==18)break;a.userId=t.string();continue}case 3:{if(i!==24)break;a.ttlSeconds=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Yb.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=G3();return a.configSetToken=(n=e.configSetToken)!==null&&n!==void 0?n:"",a.userId=(t=e.userId)!==null&&t!==void 0?t:"",a.ttlSeconds=(r=e.ttlSeconds)!==null&&r!==void 0?r:0,a}};function H3(){return{debug:""}}const GD={encode(e,n=new X){return e.debug!==""&&n.uint32(10).string(e.debug),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=H3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.debug=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return GD.fromPartial(e??{})},fromPartial(e){var n;const t=H3();return t.debug=(n=e.debug)!==null&&n!==void 0?n:"",t}};function z3(){return{configSetToken:"",userId:""}}const $b={encode(e,n=new X){return e.configSetToken!==""&&n.uint32(10).string(e.configSetToken),e.userId!==""&&n.uint32(18).string(e.userId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=z3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.configSetToken=t.string();continue}case 2:{if(i!==18)break;a.userId=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return $b.fromPartial(e??{})},fromPartial(e){var n,t;const r=z3();return r.configSetToken=(n=e.configSetToken)!==null&&n!==void 0?n:"",r.userId=(t=e.userId)!==null&&t!==void 0?t:"",r}};function W3(){return{debug:""}}const HD={encode(e,n=new X){return e.debug!==""&&n.uint32(10).string(e.debug),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=W3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.debug=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return HD.fromPartial(e??{})},fromPartial(e){var n;const t=W3();return t.debug=(n=e.debug)!==null&&n!==void 0?n:"",t}};function K3(){return{userId:"",targetingProperties:void 0,ttlSeconds:0}}const jb={encode(e,n=new X){return e.userId!==""&&n.uint32(10).string(e.userId),e.targetingProperties!==void 0&&Bs.encode(e.targetingProperties,n.uint32(18).fork()).join(),e.ttlSeconds!==0&&n.uint32(24).int32(e.ttlSeconds),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=K3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.userId=t.string();continue}case 2:{if(i!==18)break;a.targetingProperties=Bs.decode(t,t.uint32());continue}case 3:{if(i!==24)break;a.ttlSeconds=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return jb.fromPartial(e??{})},fromPartial(e){var n,t;const r=K3();return r.userId=(n=e.userId)!==null&&n!==void 0?n:"",r.targetingProperties=e.targetingProperties!==void 0&&e.targetingProperties!==null?Bs.fromPartial(e.targetingProperties):void 0,r.ttlSeconds=(t=e.ttlSeconds)!==null&&t!==void 0?t:0,r}};function q3(){return{message:""}}const zD={encode(e,n=new X){return e.message!==""&&n.uint32(10).string(e.message),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=q3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.message=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return zD.fromPartial(e??{})},fromPartial(e){var n;const t=q3();return t.message=(n=e.message)!==null&&n!==void 0?n:"",t}};function Y3(){return{userId:""}}const Xb={encode(e,n=new X){return e.userId!==""&&n.uint32(10).string(e.userId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=Y3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.userId=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Xb.fromPartial(e??{})},fromPartial(e){var n;const t=Y3();return t.userId=(n=e.userId)!==null&&n!==void 0?n:"",t}};function $3(){return{message:""}}const WD={encode(e,n=new X){return e.message!==""&&n.uint32(10).string(e.message),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=$3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.message=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return WD.fromPartial(e??{})},fromPartial(e){var n;const t=$3();return t.message=(n=e.message)!==null&&n!==void 0?n:"",t}};function j3(){return{userId:""}}const Zb={encode(e,n=new X){return e.userId!==""&&n.uint32(10).string(e.userId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=j3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.userId=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Zb.fromPartial(e??{})},fromPartial(e){var n;const t=j3();return t.userId=(n=e.userId)!==null&&n!==void 0?n:"",t}};function X3(){return{targetingProperties:void 0}}const KD={encode(e,n=new X){return e.targetingProperties!==void 0&&Bs.encode(e.targetingProperties,n.uint32(10).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=X3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.targetingProperties=Bs.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return KD.fromPartial(e??{})},fromPartial(e){const n=X3();return n.targetingProperties=e.targetingProperties!==void 0&&e.targetingProperties!==null?Bs.fromPartial(e.targetingProperties):void 0,n}};function Z3(){return{configName:"",namespace:0}}const Op={encode(e,n=new X){return e.configName!==""&&n.uint32(10).string(e.configName),e.namespace!==0&&n.uint32(16).int32(e.namespace),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=Z3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.configName=t.string();continue}case 2:{if(i!==16)break;a.namespace=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Op.fromPartial(e??{})},fromPartial(e){var n,t;const r=Z3();return r.configName=(n=e.configName)!==null&&n!==void 0?n:"",r.namespace=(t=e.namespace)!==null&&t!==void 0?t:0,r}};function Q3(){return{token:"",configNames:[],namespaces:[],disableExposureLogging:!1,getAllConfigs:!1}}const Qb={encode(e,n=new X){e.token!==""&&n.uint32(10).string(e.token);for(const t of e.configNames)Op.encode(t,n.uint32(18).fork()).join();n.uint32(26).fork();for(const t of e.namespaces)n.int32(t);return n.join(),e.disableExposureLogging!==!1&&n.uint32(32).bool(e.disableExposureLogging),e.getAllConfigs!==!1&&n.uint32(40).bool(e.getAllConfigs),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=Q3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.token=t.string();continue}case 2:{if(i!==18)break;a.configNames.push(Op.decode(t,t.uint32()));continue}case 3:{if(i===24){a.namespaces.push(t.int32());continue}if(i===26){const o=t.uint32()+t.pos;for(;t.pos<o;)a.namespaces.push(t.int32());continue}break}case 4:{if(i!==32)break;a.disableExposureLogging=t.bool();continue}case 5:{if(i!==40)break;a.getAllConfigs=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Qb.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i;const o=Q3();return o.token=(n=e.token)!==null&&n!==void 0?n:"",o.configNames=((t=e.configNames)===null||t===void 0?void 0:t.map(u=>Op.fromPartial(u)))||[],o.namespaces=((r=e.namespaces)===null||r===void 0?void 0:r.map(u=>u))||[],o.disableExposureLogging=(a=e.disableExposureLogging)!==null&&a!==void 0?a:!1,o.getAllConfigs=(i=e.getAllConfigs)!==null&&i!==void 0?i:!1,o}};function J3(){return{configResults:[]}}const qD={encode(e,n=new X){for(const t of e.configResults)gn.encode(t,n.uint32(10).fork()).join();return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=J3();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.configResults.push(gn.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return qD.fromPartial(e??{})},fromPartial(e){var n;const t=J3();return t.configResults=((n=e.configResults)===null||n===void 0?void 0:n.map(r=>gn.fromPartial(r)))||[],t}};function eN(){return{}}const Jb={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=eN();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Jb.fromPartial(e??{})},fromPartial(e){return eN()}};function tN(){return{serializedBitmap:new Uint8Array(0)}}const YD={encode(e,n=new X){return e.serializedBitmap.length!==0&&n.uint32(10).bytes(e.serializedBitmap),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=tN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.serializedBitmap=t.bytes();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return YD.fromPartial(e??{})},fromPartial(e){var n;const t=tN();return t.serializedBitmap=(n=e.serializedBitmap)!==null&&n!==void 0?n:new Uint8Array(0),t}};function nN(){return{sequenceIds:[]}}const eS={encode(e,n=new X){n.uint32(10).fork();for(const t of e.sequenceIds)n.int32(t);return n.join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=nN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i===8){a.sequenceIds.push(t.int32());continue}if(i===10){const o=t.uint32()+t.pos;for(;t.pos<o;)a.sequenceIds.push(t.int32());continue}break}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return eS.fromPartial(e??{})},fromPartial(e){var n;const t=nN();return t.sequenceIds=((n=e.sequenceIds)===null||n===void 0?void 0:n.map(r=>r))||[],t}};function rN(){return{sequenceId:0,configResult:void 0}}const kp={encode(e,n=new X){return e.sequenceId!==0&&n.uint32(8).int32(e.sequenceId),e.configResult!==void 0&&gn.encode(e.configResult,n.uint32(18).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=rN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==8)break;a.sequenceId=t.int32();continue}case 2:{if(i!==18)break;a.configResult=gn.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return kp.fromPartial(e??{})},fromPartial(e){var n;const t=rN();return t.sequenceId=(n=e.sequenceId)!==null&&n!==void 0?n:0,t.configResult=e.configResult!==void 0&&e.configResult!==null?gn.fromPartial(e.configResult):void 0,t}};function aN(){return{configResultWithSequenceIds:[]}}const $D={encode(e,n=new X){for(const t of e.configResultWithSequenceIds)kp.encode(t,n.uint32(10).fork()).join();return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=aN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.configResultWithSequenceIds.push(kp.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return $D.fromPartial(e??{})},fromPartial(e){var n;const t=aN();return t.configResultWithSequenceIds=((n=e.configResultWithSequenceIds)===null||n===void 0?void 0:n.map(r=>kp.fromPartial(r)))||[],t}};function iN(){return{token:""}}const tS={encode(e,n=new X){return e.token!==""&&n.uint32(10).string(e.token),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=iN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.token=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return tS.fromPartial(e??{})},fromPartial(e){var n;const t=iN();return t.token=(n=e.token)!==null&&n!==void 0?n:"",t}};function oN(){return{idBitmap:new Uint8Array(0)}}const jD={encode(e,n=new X){return e.idBitmap.length!==0&&n.uint32(10).bytes(e.idBitmap),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=oN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.idBitmap=t.bytes();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return jD.fromPartial(e??{})},fromPartial(e){var n;const t=oN();return t.idBitmap=(n=e.idBitmap)!==null&&n!==void 0?n:new Uint8Array(0),t}};function sN(){return{namespaces:[],edgeConfigClientVersion:""}}const nS={encode(e,n=new X){n.uint32(10).fork();for(const t of e.namespaces)n.int32(t);return n.join(),e.edgeConfigClientVersion!==""&&n.uint32(18).string(e.edgeConfigClientVersion),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=sN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i===8){a.namespaces.push(t.int32());continue}if(i===10){const o=t.uint32()+t.pos;for(;t.pos<o;)a.namespaces.push(t.int32());continue}break}case 2:{if(i!==18)break;a.edgeConfigClientVersion=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return nS.fromPartial(e??{})},fromPartial(e){var n,t;const r=sN();return r.namespaces=((n=e.namespaces)===null||n===void 0?void 0:n.map(a=>a))||[],r.edgeConfigClientVersion=(t=e.edgeConfigClientVersion)!==null&&t!==void 0?t:"",r}};function uN(){return{configResults:[]}}const XD={encode(e,n=new X){for(const t of e.configResults)gn.encode(t,n.uint32(10).fork()).join();return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=uN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.configResults.push(gn.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return XD.fromPartial(e??{})},fromPartial(e){var n;const t=uN();return t.configResults=((n=e.configResults)===null||n===void 0?void 0:n.map(r=>gn.fromPartial(r)))||[],t}};function lN(){return{ruids:[],configNames:[],maxSnapshots:0}}const rS={encode(e,n=new X){for(const t of e.ruids)ii.encode(t,n.uint32(10).fork()).join();for(const t of e.configNames)n.uint32(18).string(t);return e.maxSnapshots!==0&&n.uint32(24).int32(e.maxSnapshots),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=lN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.ruids.push(ii.decode(t,t.uint32()));continue}case 2:{if(i!==18)break;a.configNames.push(t.string());continue}case 3:{if(i!==24)break;a.maxSnapshots=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return rS.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=lN();return a.ruids=((n=e.ruids)===null||n===void 0?void 0:n.map(i=>ii.fromPartial(i)))||[],a.configNames=((t=e.configNames)===null||t===void 0?void 0:t.map(i=>i))||[],a.maxSnapshots=(r=e.maxSnapshots)!==null&&r!==void 0?r:0,a}};function cN(){return{}}const ZD={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=cN();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return ZD.fromPartial(e??{})},fromPartial(e){return cN()}};class nY{constructor(n){this.rpc=n,this.targetingQuery=this.targetingQuery.bind(this),this.getAbConfigValues=this.getAbConfigValues.bind(this),this.getConfigValuesByToken=this.getConfigValuesByToken.bind(this),this.getConfigResultsBySequenceIds=this.getConfigResultsBySequenceIds.bind(this),this.getCachedConfigResultSequenceIds=this.getCachedConfigResultSequenceIds.bind(this),this.getBitmapByToken=this.getBitmapByToken.bind(this),this.generateConfigSet=this.generateConfigSet.bind(this),this.pinConfigSet=this.pinConfigSet.bind(this),this.unpinConfigSet=this.unpinConfigSet.bind(this),this.getUnevaluatedConfigResultsWithAbTargeting=this.getUnevaluatedConfigResultsWithAbTargeting.bind(this),this.addRuidsForDebugging=this.addRuidsForDebugging.bind(this),this.pinTargetingProperties=this.pinTargetingProperties.bind(this),this.unpinTargetingProperties=this.unpinTargetingProperties.bind(this),this.getPinnedTargetingProperties=this.getPinnedTargetingProperties.bind(this)}targetingQuery(n,t){return this.rpc.unary(rY,ol.fromPartial(n),t)}getAbConfigValues(n,t){return this.rpc.unary(aY,Kb.fromPartial(n),t)}getConfigValuesByToken(n,t){return this.rpc.unary(iY,Qb.fromPartial(n),t)}getConfigResultsBySequenceIds(n,t){return this.rpc.unary(oY,eS.fromPartial(n),t)}getCachedConfigResultSequenceIds(n,t){return this.rpc.unary(sY,Jb.fromPartial(n),t)}getBitmapByToken(n,t){return this.rpc.unary(uY,tS.fromPartial(n),t)}generateConfigSet(n,t){return this.rpc.unary(lY,qb.fromPartial(n),t)}pinConfigSet(n,t){return this.rpc.unary(cY,Yb.fromPartial(n),t)}unpinConfigSet(n,t){return this.rpc.unary(fY,$b.fromPartial(n),t)}getUnevaluatedConfigResultsWithAbTargeting(n,t){return this.rpc.unary(dY,nS.fromPartial(n),t)}addRuidsForDebugging(n,t){return this.rpc.unary(hY,rS.fromPartial(n),t)}pinTargetingProperties(n,t){return this.rpc.unary(pY,jb.fromPartial(n),t)}unpinTargetingProperties(n,t){return this.rpc.unary(mY,Xb.fromPartial(n),t)}getPinnedTargetingProperties(n,t){return this.rpc.unary(vY,Zb.fromPartial(n),t)}}const Cr={serviceName:"snapchat.cdp.cof.CircumstancesService"},rY={methodName:"targetingQuery",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return ol.encode(this).finish()}},responseType:{deserializeBinary(e){const n=Kc.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},aY={methodName:"getAbConfigValues",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return Kb.encode(this).finish()}},responseType:{deserializeBinary(e){const n=FD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},iY={methodName:"getConfigValuesByToken",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return Qb.encode(this).finish()}},responseType:{deserializeBinary(e){const n=qD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},oY={methodName:"getConfigResultsBySequenceIds",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return eS.encode(this).finish()}},responseType:{deserializeBinary(e){const n=$D.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},sY={methodName:"getCachedConfigResultSequenceIds",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return Jb.encode(this).finish()}},responseType:{deserializeBinary(e){const n=YD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},uY={methodName:"getBitmapByToken",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return tS.encode(this).finish()}},responseType:{deserializeBinary(e){const n=jD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},lY={methodName:"generateConfigSet",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return qb.encode(this).finish()}},responseType:{deserializeBinary(e){const n=VD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},cY={methodName:"pinConfigSet",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return Yb.encode(this).finish()}},responseType:{deserializeBinary(e){const n=GD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},fY={methodName:"unpinConfigSet",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return $b.encode(this).finish()}},responseType:{deserializeBinary(e){const n=HD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},dY={methodName:"getUnevaluatedConfigResultsWithAbTargeting",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return nS.encode(this).finish()}},responseType:{deserializeBinary(e){const n=XD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},hY={methodName:"addRuidsForDebugging",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return rS.encode(this).finish()}},responseType:{deserializeBinary(e){const n=ZD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},pY={methodName:"pinTargetingProperties",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return jb.encode(this).finish()}},responseType:{deserializeBinary(e){const n=zD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},mY={methodName:"unpinTargetingProperties",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return Xb.encode(this).finish()}},responseType:{deserializeBinary(e){const n=WD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}},vY={methodName:"getPinnedTargetingProperties",service:Cr,requestStream:!1,responseStream:!1,requestType:{serializeBinary(){return Zb.encode(this).finish()}},responseType:{deserializeBinary(e){const n=KD.decode(e);return Object.assign(Object.assign({},n),{toObject(){return n}})}}};class gY{constructor(n,t){this.host=n,this.options=t}unary(n,t,r){var a;const i=Object.assign(Object.assign({},t),n.requestType),o=r&&this.options.metadata?new UD.BrowserHeaders(Object.assign(Object.assign({},(a=this.options)===null||a===void 0?void 0:a.metadata.headersMap),r==null?void 0:r.headersMap)):r??this.options.metadata;return new Promise((u,c)=>{var f;cf.grpc.unary(n,Object.assign(Object.assign({request:i,host:this.host,metadata:o??{}},this.options.transport!==void 0?{transport:this.options.transport}:{}),{debug:(f=this.options.debug)!==null&&f!==void 0?f:!1,onEnd:function(h){if(h.status===cf.grpc.Code.OK)u(h.message.toObject());else{const p=new yY(h.statusMessage,h.status,h.trailers);c(p)}}}))})}}class yY extends globalThis.Error{constructor(n,t,r){super(n),this.code=t,this.metadata=r}}const xp=gt("responseCachingHandler"),bY=e=>MW(`Response for key ${e} not found in cache.`),SY=(e,n)=>new Error(`Network request and cache lookup for key ${e} both failed.`,{cause:n}),EY=e=>(n,t,r)=>ye(void 0,void 0,void 0,function*(){var a,i;try{const o=yield t.retrieve(n);if(!o)throw bY(n);return r({isSideEffect:!0}).then(u=>t.store(n,u)).catch(u=>{xp.warn(`staleWhileRevalidateStrategy failed to retrieve and store key ${n}.`,u)}),(a=e==null?void 0:e.onHit)===null||a===void 0||a.call(e),o}catch(o){(i=e==null?void 0:e.onMiss)===null||i===void 0||i.call(e);try{const u=yield r();return t.store(n,u).catch(c=>{xp.warn(`staleWhileRevalidateStrategy failed to store key ${n}.`,c)}),xp.debug(`staleWhileRevalidateStrategy successfully fell back to network for key ${n} after cache error.`,o),u}catch(u){const c=$o(u);throw c.cause=o,SY(n,c)}}}),_Y=(e,n,t)=>r=>(a,i)=>ye(void 0,void 0,void 0,function*(){const o=(c={})=>{const f=Object.assign(Object.assign({},i),c);return r(a,f)};let u;try{u=n(a,i)}catch(c){return xp.warn("Cache lookup failed because the cache key could not be resolved.",c),o()}return t(u,e,o)}),AY=e=>typeof e=="string"||typeof e=="number";function R1(e){const n=new Promise((t,r)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>r(e.error)});return n.request=e,n}function Ay(e){return new Promise((n,t)=>{e.onsuccess=()=>{const r=e.result;n(r?{cursor:r,continue:()=>(r.continue(),Ay(e))}:{cursor:null,continue:()=>Promise.reject()})},e.onerror=()=>t(e.error)})}class wl{constructor(n){var t;this.databaseName=`Snap.CameraKit.${n.databaseName}`,this.databaseVersion=n.databaseVersion,this.objectStore=(t=n.objectStore)!==null&&t!==void 0?t:n.databaseName,this.db=this.openDatabase(indexedDB.open(this.databaseName,this.databaseVersion)),this.size=0}retrieve(n){return this.simpleTransaction("readonly",t=>t.get(n))}retrieveAll(){return ye(this,void 0,void 0,function*(){const n=[],{store:t,done:r}=yield this.transaction("readonly");let a=yield Ay(t.openCursor());for(;a.cursor;)n.push([a.cursor.primaryKey,a.cursor.value]),a=yield a.continue();return yield r,n})}remove(n){return ye(this,void 0,void 0,function*(){yield this.simpleTransaction("readwrite",t=>t.delete(n)),this.size--})}removeAll(){return ye(this,void 0,void 0,function*(){const n=[],{store:t,done:r}=yield this.transaction("readwrite");let a=yield Ay(t.openCursor());const i=[];for(;a.cursor;)n.push(a.cursor.value),i.push(R1(t.delete(a.cursor.key))),a=yield a.continue();return yield Promise.all(i.concat(r)),this.size=0,n})}store(n,t){return ye(this,void 0,void 0,function*(){const[r,a]=t===void 0?[void 0,n]:[n,t];if(!AY(r)&&typeof r<"u")throw new TypeError(`IndexedDBPersistence failed to store a value. Invalid key type: ${typeof r}`);const i=yield this.simpleTransaction("readwrite",o=>o.put(a,r));return this.size++,i})}openDatabase(n){return ye(this,void 0,void 0,function*(){const t=R1(n);t.request.onupgradeneeded=()=>{try{t.request.result.createObjectStore(this.objectStore,{autoIncrement:!0})}catch(a){if(a instanceof DOMException&&a.name==="ConstraintError")return;throw a}};const r=yield t;return r.onclose=()=>{this.db=this.openDatabase(indexedDB.open(this.databaseName,this.databaseVersion))},r})}simpleTransaction(n,t){return ye(this,void 0,void 0,function*(){const{store:r,done:a}=yield this.transaction(n),[i]=yield Promise.all([R1(t(r)),a]);return i})}transaction(n){return ye(this,void 0,void 0,function*(){const r=(yield this.db).transaction(this.objectStore,n),a=r.objectStore(this.objectStore),i=new Promise((o,u)=>{r.oncomplete=()=>o(),r.onerror=()=>u(r.error),r.onabort=()=>u(new DOMException("The transaction was aborted","AbortError"))});return{tx:r,store:a,done:i}})}}const C1=gt("ExpiringPersistence");class mv{constructor(n,t){this.expiration=n,this.persistence=t,this.removeExpired().catch(r=>{C1.warn("Failed to cleanup expired entries on startup.",r)})}get size(){return this.persistence.size}retrieve(n){var t;return ye(this,void 0,void 0,function*(){const[r,a]=(t=yield this.persistence.retrieve(n))!==null&&t!==void 0?t:[];if(!(a===void 0||r===void 0)){if(Date.now()>r){yield this.persistence.remove(n).catch(i=>{C1.warn(`Key ${n} is expired, but removing it from persistence failed.`,i)});return}return a}})}retrieveAll(){return ye(this,void 0,void 0,function*(){const n=Date.now();return(yield this.persistence.retrieveAll()).filter(([,[t]])=>t>=n).map(([,t])=>t)})}remove(n){return this.persistence.remove(n)}removeAll(){return ye(this,void 0,void 0,function*(){return(yield this.persistence.removeAll()).map(([,t])=>t)})}removeExpired(){return ye(this,void 0,void 0,function*(){for(const[n,[t]]of yield this.persistence.retrieveAll())Date.now()>=t&&(yield this.persistence.remove(n).catch(r=>C1.warn(`Failed to remove expired key ${n}.`,r)))})}store(n,t){const[r,a]=t===void 0?[void 0,n]:[n,t],i=Date.now()+this.expiration(a)*1e3;return r===void 0?this.persistence.store([i,a]):this.persistence.store(r,[i,a])}}class wY{constructor(){this.onHiddenHandlers=new Set,this.onVisibleHandlers=new Set,this.previousVisibilityState=document.visibilityState,this.visibilityTransition=!1,this.onVisibilityChange=this.onVisibilityChange.bind(this),this.isDuringVisibilityTransition=this.isDuringVisibilityTransition.bind(this),this.onPageHidden=this.onPageHidden.bind(this),this.onPageVisible=this.onPageVisible.bind(this),this.destroy=this.destroy.bind(this),document.addEventListener("visibilitychange",this.onVisibilityChange)}isDuringVisibilityTransition(n){return n===this.visibilityTransition}onPageHidden(n){return this.onHiddenHandlers.add(n),()=>this.onHiddenHandlers.delete(n)}onPageVisible(n){return this.onVisibleHandlers.add(n),()=>this.onVisibleHandlers.delete(n)}destroy(){document.removeEventListener("visibilitychange",this.onVisibilityChange),this.onHiddenHandlers.clear(),this.onVisibleHandlers.clear()}onVisibilityChange(){const n=this.previousVisibilityState==="visible"&&document.visibilityState==="hidden"?this.onHiddenHandlers:this.previousVisibilityState==="hidden"&&document.visibilityState==="visible"?this.onVisibleHandlers:new Set;this.visibilityTransition=document.visibilityState;for(const t of n)try{t()}catch(r){typeof window<"u"&&window.dispatchEvent(new CustomEvent("error",{detail:r}))}this.previousVisibilityState=this.visibilityTransition,this.visibilityTransition=!1}}const vv=De("pageVisibility",()=>new wY),fN={encode(e,n=new X){e.serverUploadTs!==0&&n.uint32(9).double(e.serverUploadTs);for(const t of e.serverAllUpdateEvents)dN.encode(t,n.uint32(18).fork()).join();e.maxSequenceIdOnInstance!=="0"&&n.uint32(24).uint64(e.maxSequenceIdOnInstance);for(const t of e.serverEvents)wy.encode(t,n.uint32(34).fork()).join();return n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t,r,a;const i=IY();return i.serverUploadTs=(n=e.serverUploadTs)!==null&&n!==void 0?n:0,i.serverAllUpdateEvents=((t=e.serverAllUpdateEvents)===null||t===void 0?void 0:t.map(o=>dN.fromPartial(o)))||[],i.maxSequenceIdOnInstance=(r=e.maxSequenceIdOnInstance)!==null&&r!==void 0?r:"0",i.serverEvents=((a=e.serverEvents)===null||a===void 0?void 0:a.map(o=>wy.fromPartial(o)))||[],i}};function IY(){return{serverUploadTs:0,serverAllUpdateEvents:[],maxSequenceIdOnInstance:"0",serverEvents:[]}}const dN={encode(e,n=new X){return n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){return RY()}};function RY(){return{}}const wy={encode(e,n=new X){return e.eventName!==""&&n.uint32(10).string(e.eventName),e.serverTs!==0&&n.uint32(25).double(e.serverTs),e.userId!==""&&n.uint32(34).string(e.userId),e.userAgent!==""&&n.uint32(42).string(e.userAgent),e.country!==""&&n.uint32(50).string(e.country),e.city!==""&&n.uint32(58).string(e.city),e.region!==""&&n.uint32(66).string(e.region),e.eventId!==""&&n.uint32(74).string(e.eventId),e.instanceId!==""&&n.uint32(82).string(e.instanceId),e.sequenceId!=="0"&&n.uint32(88).uint64(e.sequenceId),e.osType!==""&&n.uint32(98).string(e.osType),e.osVersion!==""&&n.uint32(106).string(e.osVersion),e.appVersion!==""&&n.uint32(114).string(e.appVersion),e.appBuild!==""&&n.uint32(122).string(e.appBuild),e.serverUploadTs!==0&&n.uint32(809).double(e.serverUploadTs),e.eventTime!==0&&n.uint32(817).double(e.eventTime),e.serverReceiptTime!==0&&n.uint32(825).double(e.serverReceiptTime),e.maxSequenceIdOnInstance!=="0"&&n.uint32(832).uint64(e.maxSequenceIdOnInstance),e.userGuid!==""&&n.uint32(850).string(e.userGuid),e.collection!==0&&n.uint32(872).int32(e.collection),e.serviceId!==""&&n.uint32(890).string(e.serviceId),e.appType!==0&&n.uint32(912).int32(e.appType),e.spectrumInstanceId!==""&&n.uint32(930).string(e.spectrumInstanceId),e.spectrumSequenceId!=="0"&&n.uint32(944).uint64(e.spectrumSequenceId),e.eventData!==void 0&&hN.encode(e.eventData,n.uint32(802).fork()).join(),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p,m,g,y,b,E,_,w,I,R,C,O,D,P;const k=CY();return k.eventName=(n=e.eventName)!==null&&n!==void 0?n:"",k.serverTs=(t=e.serverTs)!==null&&t!==void 0?t:0,k.userId=(r=e.userId)!==null&&r!==void 0?r:"",k.userAgent=(a=e.userAgent)!==null&&a!==void 0?a:"",k.country=(i=e.country)!==null&&i!==void 0?i:"",k.city=(o=e.city)!==null&&o!==void 0?o:"",k.region=(u=e.region)!==null&&u!==void 0?u:"",k.eventId=(c=e.eventId)!==null&&c!==void 0?c:"",k.instanceId=(f=e.instanceId)!==null&&f!==void 0?f:"",k.sequenceId=(h=e.sequenceId)!==null&&h!==void 0?h:"0",k.osType=(p=e.osType)!==null&&p!==void 0?p:"",k.osVersion=(m=e.osVersion)!==null&&m!==void 0?m:"",k.appVersion=(g=e.appVersion)!==null&&g!==void 0?g:"",k.appBuild=(y=e.appBuild)!==null&&y!==void 0?y:"",k.serverUploadTs=(b=e.serverUploadTs)!==null&&b!==void 0?b:0,k.eventTime=(E=e.eventTime)!==null&&E!==void 0?E:0,k.serverReceiptTime=(_=e.serverReceiptTime)!==null&&_!==void 0?_:0,k.maxSequenceIdOnInstance=(w=e.maxSequenceIdOnInstance)!==null&&w!==void 0?w:"0",k.userGuid=(I=e.userGuid)!==null&&I!==void 0?I:"",k.collection=(R=e.collection)!==null&&R!==void 0?R:0,k.serviceId=(C=e.serviceId)!==null&&C!==void 0?C:"",k.appType=(O=e.appType)!==null&&O!==void 0?O:0,k.spectrumInstanceId=(D=e.spectrumInstanceId)!==null&&D!==void 0?D:"",k.spectrumSequenceId=(P=e.spectrumSequenceId)!==null&&P!==void 0?P:"0",k.eventData=e.eventData!==void 0&&e.eventData!==null?hN.fromPartial(e.eventData):void 0,k}};function CY(){return{eventName:"",serverTs:0,userId:"",userAgent:"",country:"",city:"",region:"",eventId:"",instanceId:"",sequenceId:"0",osType:"",osVersion:"",appVersion:"",appBuild:"",serverUploadTs:0,eventTime:0,serverReceiptTime:0,maxSequenceIdOnInstance:"0",userGuid:"",collection:0,serviceId:"",appType:0,spectrumInstanceId:"",spectrumSequenceId:"0",eventData:void 0}}const hN={encode(e,n=new X){return e.cameraKitException!==void 0&&Ty.encode(e.cameraKitException,n.uint32(1866).fork()).join(),e.cameraKitLensSpin!==void 0&&Iy.encode(e.cameraKitLensSpin,n.uint32(1874).fork()).join(),e.cameraKitAssetDownload!==void 0&&Ny.encode(e.cameraKitAssetDownload,n.uint32(1882).fork()).join(),e.cameraKitLensContentValidationFailed!==void 0&&ky.encode(e.cameraKitLensContentValidationFailed,n.uint32(1922).fork()).join(),e.cameraKitLensDownload!==void 0&&Cy.encode(e.cameraKitLensDownload,n.uint32(1930).fork()).join(),e.cameraKitAssetValidationFailed!==void 0&&xy.encode(e.cameraKitAssetValidationFailed,n.uint32(1938).fork()).join(),e.cameraKitSession!==void 0&&Oy.encode(e.cameraKitSession,n.uint32(2130).fork()).join(),e.cameraKitWebLensSwipe!==void 0&&Ry.encode(e.cameraKitWebLensSwipe,n.uint32(3818).fork()).join(),e.cameraKitWebBenchmarkComplete!==void 0&&Dy.encode(e.cameraKitWebBenchmarkComplete,n.uint32(3826).fork()).join(),e.cameraKitLegalPrompt!==void 0&&Py.encode(e.cameraKitLegalPrompt,n.uint32(3874).fork()).join(),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){const n=NY();return n.cameraKitException=e.cameraKitException!==void 0&&e.cameraKitException!==null?Ty.fromPartial(e.cameraKitException):void 0,n.cameraKitLensSpin=e.cameraKitLensSpin!==void 0&&e.cameraKitLensSpin!==null?Iy.fromPartial(e.cameraKitLensSpin):void 0,n.cameraKitAssetDownload=e.cameraKitAssetDownload!==void 0&&e.cameraKitAssetDownload!==null?Ny.fromPartial(e.cameraKitAssetDownload):void 0,n.cameraKitLensContentValidationFailed=e.cameraKitLensContentValidationFailed!==void 0&&e.cameraKitLensContentValidationFailed!==null?ky.fromPartial(e.cameraKitLensContentValidationFailed):void 0,n.cameraKitLensDownload=e.cameraKitLensDownload!==void 0&&e.cameraKitLensDownload!==null?Cy.fromPartial(e.cameraKitLensDownload):void 0,n.cameraKitAssetValidationFailed=e.cameraKitAssetValidationFailed!==void 0&&e.cameraKitAssetValidationFailed!==null?xy.fromPartial(e.cameraKitAssetValidationFailed):void 0,n.cameraKitSession=e.cameraKitSession!==void 0&&e.cameraKitSession!==null?Oy.fromPartial(e.cameraKitSession):void 0,n.cameraKitWebLensSwipe=e.cameraKitWebLensSwipe!==void 0&&e.cameraKitWebLensSwipe!==null?Ry.fromPartial(e.cameraKitWebLensSwipe):void 0,n.cameraKitWebBenchmarkComplete=e.cameraKitWebBenchmarkComplete!==void 0&&e.cameraKitWebBenchmarkComplete!==null?Dy.fromPartial(e.cameraKitWebBenchmarkComplete):void 0,n.cameraKitLegalPrompt=e.cameraKitLegalPrompt!==void 0&&e.cameraKitLegalPrompt!==null?Py.fromPartial(e.cameraKitLegalPrompt):void 0,n}};function NY(){return{cameraKitException:void 0,cameraKitLensSpin:void 0,cameraKitAssetDownload:void 0,cameraKitLensContentValidationFailed:void 0,cameraKitLensDownload:void 0,cameraKitAssetValidationFailed:void 0,cameraKitSession:void 0,cameraKitWebLensSwipe:void 0,cameraKitWebBenchmarkComplete:void 0,cameraKitLegalPrompt:void 0}}var pN;(function(e){e[e.IOS_NATIVE=0]="IOS_NATIVE",e[e.IOS_WEB_DESKTOP=1]="IOS_WEB_DESKTOP",e[e.IOS_WEB_MOBILE=2]="IOS_WEB_MOBILE",e[e.ANDROID_NATIVE=3]="ANDROID_NATIVE",e[e.ANDROID_WEB_DESKTOP=4]="ANDROID_WEB_DESKTOP",e[e.ANDROID_WEB_MOBILE=5]="ANDROID_WEB_MOBILE",e[e.OSX_WEB_DESKTOP=6]="OSX_WEB_DESKTOP",e[e.OSX_WEB_MOBILE=7]="OSX_WEB_MOBILE",e[e.WINDOWS_WEB_DESKTOP=8]="WINDOWS_WEB_DESKTOP",e[e.WINDOWS_WEB_MOBILE=9]="WINDOWS_WEB_MOBILE",e[e.LINUX_WEB_DESKTOP=10]="LINUX_WEB_DESKTOP",e[e.LINUX_WEB_MOBILE=11]="LINUX_WEB_MOBILE",e[e.LENSSTUDIO=12]="LENSSTUDIO",e[e.SNAPCAMERA=13]="SNAPCAMERA",e[e.WEB_DESKTOP=14]="WEB_DESKTOP",e[e.WEB_MOBILE=15]="WEB_MOBILE",e[e.LENSSTUDIO_REMAKE=16]="LENSSTUDIO_REMAKE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(pN||(pN={}));var mN;(function(e){e[e.COLLECTION_UNUSED=0]="COLLECTION_UNUSED",e[e.GAE=1]="GAE",e[e.GCE_M=2]="GCE_M",e[e.GCE_S=3]="GCE_S",e[e.GCE_T=4]="GCE_T",e[e.GKE_M=5]="GKE_M",e[e.GKE_S=6]="GKE_S",e[e.GKE_T=7]="GKE_T",e[e.LOCAL=8]="LOCAL",e[e.GCE_ST=9]="GCE_ST",e[e.GKE_ST=10]="GKE_ST",e[e.GCE_C=11]="GCE_C",e[e.GCE_SC=12]="GCE_SC",e[e.GCE_TC=13]="GCE_TC",e[e.GCE_TSC=14]="GCE_TSC",e[e.GKE_C=15]="GKE_C",e[e.GKE_SC=16]="GKE_SC",e[e.GKE_TC=17]="GKE_TC",e[e.GKE_TSC=18]="GKE_TSC",e[e.GKE_W=19]="GKE_W",e[e.GKE_WT=20]="GKE_WT",e[e.GKE_WC=21]="GKE_WC",e[e.GKE_WSC=22]="GKE_WSC",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(mN||(mN={}));const Iy={encode(e,n=new X){return e.cameraKitEventBase!==void 0&&Qt.encode(e.cameraKitEventBase,n.uint32(10).fork()).join(),e.lensId!==""&&n.uint32(18).string(e.lensId),e.viewTimeSec!==0&&n.uint32(25).double(e.viewTimeSec),e.lensGroupId!==""&&n.uint32(34).string(e.lensGroupId),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t,r;const a=TY();return a.cameraKitEventBase=e.cameraKitEventBase!==void 0&&e.cameraKitEventBase!==null?Qt.fromPartial(e.cameraKitEventBase):void 0,a.lensId=(n=e.lensId)!==null&&n!==void 0?n:"",a.viewTimeSec=(t=e.viewTimeSec)!==null&&t!==void 0?t:0,a.lensGroupId=(r=e.lensGroupId)!==null&&r!==void 0?r:"",a}};function TY(){return{cameraKitEventBase:void 0,lensId:"",viewTimeSec:0,lensGroupId:""}}const Ry={encode(e,n=new X){return e.cameraKitEventBase!==void 0&&Qt.encode(e.cameraKitEventBase,n.uint32(10).fork()).join(),e.performanceCluster!=="0"&&n.uint32(16).uint64(e.performanceCluster),e.webglRendererInfo!==""&&n.uint32(26).string(e.webglRendererInfo),e.lensId!==""&&n.uint32(34).string(e.lensId),e.lensFrameProcessingTimeMsAvg!==0&&n.uint32(41).double(e.lensFrameProcessingTimeMsAvg),e.lensFrameProcessingTimeMsStd!==0&&n.uint32(49).double(e.lensFrameProcessingTimeMsStd),e.viewTimeSec!==0&&n.uint32(57).double(e.viewTimeSec),e.recordingTimeSec!==0&&n.uint32(65).double(e.recordingTimeSec),e.applyDelaySec!==0&&n.uint32(73).double(e.applyDelaySec),e.avgFps!==0&&n.uint32(81).double(e.avgFps),e.isLensFirstWithinDay!==!1&&n.uint32(88).bool(e.isLensFirstWithinDay),e.isLensFirstWithinMonth!==!1&&n.uint32(96).bool(e.isLensFirstWithinMonth),e.lensGroupId!==""&&n.uint32(106).string(e.lensGroupId),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p,m;const g=OY();return g.cameraKitEventBase=e.cameraKitEventBase!==void 0&&e.cameraKitEventBase!==null?Qt.fromPartial(e.cameraKitEventBase):void 0,g.performanceCluster=(n=e.performanceCluster)!==null&&n!==void 0?n:"0",g.webglRendererInfo=(t=e.webglRendererInfo)!==null&&t!==void 0?t:"",g.lensId=(r=e.lensId)!==null&&r!==void 0?r:"",g.lensFrameProcessingTimeMsAvg=(a=e.lensFrameProcessingTimeMsAvg)!==null&&a!==void 0?a:0,g.lensFrameProcessingTimeMsStd=(i=e.lensFrameProcessingTimeMsStd)!==null&&i!==void 0?i:0,g.viewTimeSec=(o=e.viewTimeSec)!==null&&o!==void 0?o:0,g.recordingTimeSec=(u=e.recordingTimeSec)!==null&&u!==void 0?u:0,g.applyDelaySec=(c=e.applyDelaySec)!==null&&c!==void 0?c:0,g.avgFps=(f=e.avgFps)!==null&&f!==void 0?f:0,g.isLensFirstWithinDay=(h=e.isLensFirstWithinDay)!==null&&h!==void 0?h:!1,g.isLensFirstWithinMonth=(p=e.isLensFirstWithinMonth)!==null&&p!==void 0?p:!1,g.lensGroupId=(m=e.lensGroupId)!==null&&m!==void 0?m:"",g}};function OY(){return{cameraKitEventBase:void 0,performanceCluster:"0",webglRendererInfo:"",lensId:"",lensFrameProcessingTimeMsAvg:0,lensFrameProcessingTimeMsStd:0,viewTimeSec:0,recordingTimeSec:0,applyDelaySec:0,avgFps:0,isLensFirstWithinDay:!1,isLensFirstWithinMonth:!1,lensGroupId:""}}const Cy={encode(e,n=new X){return e.cameraKitEventBase!==void 0&&Qt.encode(e.cameraKitEventBase,n.uint32(10).fork()).join(),e.lensId!==""&&n.uint32(18).string(e.lensId),e.automaticDownload!==!1&&n.uint32(24).bool(e.automaticDownload),e.downloadTimeSec!==0&&n.uint32(33).double(e.downloadTimeSec),e.sizeByte!=="0"&&n.uint32(40).uint64(e.sizeByte),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t,r,a;const i=kY();return i.cameraKitEventBase=e.cameraKitEventBase!==void 0&&e.cameraKitEventBase!==null?Qt.fromPartial(e.cameraKitEventBase):void 0,i.lensId=(n=e.lensId)!==null&&n!==void 0?n:"",i.automaticDownload=(t=e.automaticDownload)!==null&&t!==void 0?t:!1,i.downloadTimeSec=(r=e.downloadTimeSec)!==null&&r!==void 0?r:0,i.sizeByte=(a=e.sizeByte)!==null&&a!==void 0?a:"0",i}};function kY(){return{cameraKitEventBase:void 0,lensId:"",automaticDownload:!1,downloadTimeSec:0,sizeByte:"0"}}const Ny={encode(e,n=new X){return e.cameraKitEventBase!==void 0&&Qt.encode(e.cameraKitEventBase,n.uint32(10).fork()).join(),e.automaticDownload!==!1&&n.uint32(24).bool(e.automaticDownload),e.downloadTimeSec!==0&&n.uint32(33).double(e.downloadTimeSec),e.sizeByte!=="0"&&n.uint32(40).uint64(e.sizeByte),e.assetId!==""&&n.uint32(50).string(e.assetId),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t,r,a;const i=xY();return i.cameraKitEventBase=e.cameraKitEventBase!==void 0&&e.cameraKitEventBase!==null?Qt.fromPartial(e.cameraKitEventBase):void 0,i.automaticDownload=(n=e.automaticDownload)!==null&&n!==void 0?n:!1,i.downloadTimeSec=(t=e.downloadTimeSec)!==null&&t!==void 0?t:0,i.sizeByte=(r=e.sizeByte)!==null&&r!==void 0?r:"0",i.assetId=(a=e.assetId)!==null&&a!==void 0?a:"",i}};function xY(){return{cameraKitEventBase:void 0,automaticDownload:!1,downloadTimeSec:0,sizeByte:"0",assetId:""}}const Ty={encode(e,n=new X){return e.cameraKitEventBase!==void 0&&Qt.encode(e.cameraKitEventBase,n.uint32(10).fork()).join(),e.lensId!==""&&n.uint32(18).string(e.lensId),e.type!==""&&n.uint32(26).string(e.type),e.reason!==""&&n.uint32(34).string(e.reason),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t,r;const a=DY();return a.cameraKitEventBase=e.cameraKitEventBase!==void 0&&e.cameraKitEventBase!==null?Qt.fromPartial(e.cameraKitEventBase):void 0,a.lensId=(n=e.lensId)!==null&&n!==void 0?n:"",a.type=(t=e.type)!==null&&t!==void 0?t:"",a.reason=(r=e.reason)!==null&&r!==void 0?r:"",a}};function DY(){return{cameraKitEventBase:void 0,lensId:"",type:"",reason:""}}const Oy={encode(e,n=new X){return e.cameraKitEventBase!==void 0&&Qt.encode(e.cameraKitEventBase,n.uint32(10).fork()).join(),e.dailySessionBucket!==0&&n.uint32(16).int32(e.dailySessionBucket),e.isFirstWithinMonth!==!1&&n.uint32(24).bool(e.isFirstWithinMonth),e.day!=="0"&&n.uint32(32).uint64(e.day),e.month!=="0"&&n.uint32(40).uint64(e.month),e.year!=="0"&&n.uint32(48).uint64(e.year),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t,r,a,i;const o=PY();return o.cameraKitEventBase=e.cameraKitEventBase!==void 0&&e.cameraKitEventBase!==null?Qt.fromPartial(e.cameraKitEventBase):void 0,o.dailySessionBucket=(n=e.dailySessionBucket)!==null&&n!==void 0?n:0,o.isFirstWithinMonth=(t=e.isFirstWithinMonth)!==null&&t!==void 0?t:!1,o.day=(r=e.day)!==null&&r!==void 0?r:"0",o.month=(a=e.month)!==null&&a!==void 0?a:"0",o.year=(i=e.year)!==null&&i!==void 0?i:"0",o}};function PY(){return{cameraKitEventBase:void 0,dailySessionBucket:0,isFirstWithinMonth:!1,day:"0",month:"0",year:"0"}}var yr;(function(e){e[e.NO_SESSION_BUCKET=0]="NO_SESSION_BUCKET",e[e.ONE_SESSION=1]="ONE_SESSION",e[e.TWO_SESSION=2]="TWO_SESSION",e[e.THREE_SESSION=3]="THREE_SESSION",e[e.FOUR_SESSION=4]="FOUR_SESSION",e[e.FIVE_SESSION=5]="FIVE_SESSION",e[e.SIX_SESSION=6]="SIX_SESSION",e[e.SEVEN_SESSION=7]="SEVEN_SESSION",e[e.EIGHT_SESSION=8]="EIGHT_SESSION",e[e.NINE_SESSION=9]="NINE_SESSION",e[e.TEN_OR_MORE_SESSION=10]="TEN_OR_MORE_SESSION",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(yr||(yr={}));const ky={encode(e,n=new X){return e.cameraKitEventBase!==void 0&&Qt.encode(e.cameraKitEventBase,n.uint32(10).fork()).join(),e.lensId!==""&&n.uint32(18).string(e.lensId),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n;const t=MY();return t.cameraKitEventBase=e.cameraKitEventBase!==void 0&&e.cameraKitEventBase!==null?Qt.fromPartial(e.cameraKitEventBase):void 0,t.lensId=(n=e.lensId)!==null&&n!==void 0?n:"",t}};function MY(){return{cameraKitEventBase:void 0,lensId:""}}const xy={encode(e,n=new X){return e.cameraKitEventBase!==void 0&&Qt.encode(e.cameraKitEventBase,n.uint32(10).fork()).join(),e.assetId!==""&&n.uint32(26).string(e.assetId),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n;const t=LY();return t.cameraKitEventBase=e.cameraKitEventBase!==void 0&&e.cameraKitEventBase!==null?Qt.fromPartial(e.cameraKitEventBase):void 0,t.assetId=(n=e.assetId)!==null&&n!==void 0?n:"",t}};function LY(){return{cameraKitEventBase:void 0,assetId:""}}const Dy={encode(e,n=new X){return e.cameraKitEventBase!==void 0&&Qt.encode(e.cameraKitEventBase,n.uint32(10).fork()).join(),e.benchmarkName!==""&&n.uint32(18).string(e.benchmarkName),e.benchmarkValue!==0&&n.uint32(25).double(e.benchmarkValue),e.performanceCluster!=="0"&&n.uint32(32).uint64(e.performanceCluster),e.webglRendererInfo!==""&&n.uint32(42).string(e.webglRendererInfo),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t,r,a;const i=BY();return i.cameraKitEventBase=e.cameraKitEventBase!==void 0&&e.cameraKitEventBase!==null?Qt.fromPartial(e.cameraKitEventBase):void 0,i.benchmarkName=(n=e.benchmarkName)!==null&&n!==void 0?n:"",i.benchmarkValue=(t=e.benchmarkValue)!==null&&t!==void 0?t:0,i.performanceCluster=(r=e.performanceCluster)!==null&&r!==void 0?r:"0",i.webglRendererInfo=(a=e.webglRendererInfo)!==null&&a!==void 0?a:"",i}};function BY(){return{cameraKitEventBase:void 0,benchmarkName:"",benchmarkValue:0,performanceCluster:"0",webglRendererInfo:""}}const Py={encode(e,n=new X){return e.cameraKitEventBase!==void 0&&Qt.encode(e.cameraKitEventBase,n.uint32(10).fork()).join(),e.legalPromptId!==""&&n.uint32(18).string(e.legalPromptId),e.legalPromptResult!==0&&n.uint32(24).int32(e.legalPromptResult),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t;const r=UY();return r.cameraKitEventBase=e.cameraKitEventBase!==void 0&&e.cameraKitEventBase!==null?Qt.fromPartial(e.cameraKitEventBase):void 0,r.legalPromptId=(n=e.legalPromptId)!==null&&n!==void 0?n:"",r.legalPromptResult=(t=e.legalPromptResult)!==null&&t!==void 0?t:0,r}};function UY(){return{cameraKitEventBase:void 0,legalPromptId:"",legalPromptResult:0}}const Qt={encode(e,n=new X){return e.kitEventBase!==void 0&&My.encode(e.kitEventBase,n.uint32(10).fork()).join(),e.deviceCluster!=="0"&&n.uint32(16).uint64(e.deviceCluster),e.cameraKitVersion!==""&&n.uint32(26).string(e.cameraKitVersion),e.lensCoreVersion!==""&&n.uint32(34).string(e.lensCoreVersion),e.deviceModel!==""&&n.uint32(42).string(e.deviceModel),e.cameraKitVariant!==0&&n.uint32(48).int32(e.cameraKitVariant),e.cameraKitFlavor!==0&&n.uint32(56).int32(e.cameraKitFlavor),e.appId!==""&&n.uint32(66).string(e.appId),e.deviceConnectivity!==0&&n.uint32(72).int32(e.deviceConnectivity),e.sessionId!==""&&n.uint32(82).string(e.sessionId),e.appVendorUuid!==""&&n.uint32(90).string(e.appVendorUuid),e.rankingRequestId!==""&&n.uint32(98).string(e.rankingRequestId),e.cameraKitEnvironment!==0&&n.uint32(104).int32(e.cameraKitEnvironment),e.partnerUuid!==""&&n.uint32(114).string(e.partnerUuid),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p,m,g;const y=FY();return y.kitEventBase=e.kitEventBase!==void 0&&e.kitEventBase!==null?My.fromPartial(e.kitEventBase):void 0,y.deviceCluster=(n=e.deviceCluster)!==null&&n!==void 0?n:"0",y.cameraKitVersion=(t=e.cameraKitVersion)!==null&&t!==void 0?t:"",y.lensCoreVersion=(r=e.lensCoreVersion)!==null&&r!==void 0?r:"",y.deviceModel=(a=e.deviceModel)!==null&&a!==void 0?a:"",y.cameraKitVariant=(i=e.cameraKitVariant)!==null&&i!==void 0?i:0,y.cameraKitFlavor=(o=e.cameraKitFlavor)!==null&&o!==void 0?o:0,y.appId=(u=e.appId)!==null&&u!==void 0?u:"",y.deviceConnectivity=(c=e.deviceConnectivity)!==null&&c!==void 0?c:0,y.sessionId=(f=e.sessionId)!==null&&f!==void 0?f:"",y.appVendorUuid=(h=e.appVendorUuid)!==null&&h!==void 0?h:"",y.rankingRequestId=(p=e.rankingRequestId)!==null&&p!==void 0?p:"",y.cameraKitEnvironment=(m=e.cameraKitEnvironment)!==null&&m!==void 0?m:0,y.partnerUuid=(g=e.partnerUuid)!==null&&g!==void 0?g:"",y}};function FY(){return{kitEventBase:void 0,deviceCluster:"0",cameraKitVersion:"",lensCoreVersion:"",deviceModel:"",cameraKitVariant:0,cameraKitFlavor:0,appId:"",deviceConnectivity:0,sessionId:"",appVendorUuid:"",rankingRequestId:"",cameraKitEnvironment:0,partnerUuid:""}}const My={encode(e,n=new X){return e.oauthClientId!==""&&n.uint32(10).string(e.oauthClientId),e.locale!==""&&n.uint32(18).string(e.locale),e.kitUserAgent!==""&&n.uint32(26).string(e.kitUserAgent),e.ipAddress!==""&&n.uint32(34).string(e.ipAddress),e.osMinorVersion!==""&&n.uint32(42).string(e.osMinorVersion),e.kitVariant!==0&&n.uint32(48).int32(e.kitVariant),e.kitVariantVersion!==""&&n.uint32(58).string(e.kitVariantVersion),e.kitClientTimestampMillis!=="0"&&n.uint32(64).uint64(e.kitClientTimestampMillis),e.clientSequenceId!=="0"&&n.uint32(72).uint64(e.clientSequenceId),e.maxClientSequenceIdOnInstance!=="0"&&n.uint32(80).uint64(e.maxClientSequenceIdOnInstance),e.targetArchitecture!==""&&n.uint32(90).string(e.targetArchitecture),e.runningWithDebuggerAttached!==!1&&n.uint32(96).bool(e.runningWithDebuggerAttached),e.runningInTests!==!1&&n.uint32(104).bool(e.runningInTests),e.runningInSimulator!==!1&&n.uint32(112).bool(e.runningInSimulator),e.isAppPrerelease!==!1&&n.uint32(120).bool(e.isAppPrerelease),e.kitAppId!==""&&n.uint32(130).string(e.kitAppId),e.kitSessionId!==""&&n.uint32(138).string(e.kitSessionId),e.kitPluginType!==0&&n.uint32(144).int32(e.kitPluginType),e.isFromReactNativePlugin!==!1&&n.uint32(152).bool(e.isFromReactNativePlugin),n},decode(){throw new Error("Not implemented.")},fromJSON(){throw new Error("Not implemented.")},toJSON(){throw new Error("Not implemented.")},create(){throw new Error("Not implemented.")},fromPartial(e){var n,t,r,a,i,o,u,c,f,h,p,m,g,y,b,E,_,w,I;const R=VY();return R.oauthClientId=(n=e.oauthClientId)!==null&&n!==void 0?n:"",R.locale=(t=e.locale)!==null&&t!==void 0?t:"",R.kitUserAgent=(r=e.kitUserAgent)!==null&&r!==void 0?r:"",R.ipAddress=(a=e.ipAddress)!==null&&a!==void 0?a:"",R.osMinorVersion=(i=e.osMinorVersion)!==null&&i!==void 0?i:"",R.kitVariant=(o=e.kitVariant)!==null&&o!==void 0?o:0,R.kitVariantVersion=(u=e.kitVariantVersion)!==null&&u!==void 0?u:"",R.kitClientTimestampMillis=(c=e.kitClientTimestampMillis)!==null&&c!==void 0?c:"0",R.clientSequenceId=(f=e.clientSequenceId)!==null&&f!==void 0?f:"0",R.maxClientSequenceIdOnInstance=(h=e.maxClientSequenceIdOnInstance)!==null&&h!==void 0?h:"0",R.targetArchitecture=(p=e.targetArchitecture)!==null&&p!==void 0?p:"",R.runningWithDebuggerAttached=(m=e.runningWithDebuggerAttached)!==null&&m!==void 0?m:!1,R.runningInTests=(g=e.runningInTests)!==null&&g!==void 0?g:!1,R.runningInSimulator=(y=e.runningInSimulator)!==null&&y!==void 0?y:!1,R.isAppPrerelease=(b=e.isAppPrerelease)!==null&&b!==void 0?b:!1,R.kitAppId=(E=e.kitAppId)!==null&&E!==void 0?E:"",R.kitSessionId=(_=e.kitSessionId)!==null&&_!==void 0?_:"",R.kitPluginType=(w=e.kitPluginType)!==null&&w!==void 0?w:0,R.isFromReactNativePlugin=(I=e.isFromReactNativePlugin)!==null&&I!==void 0?I:!1,R}};function VY(){return{oauthClientId:"",locale:"",kitUserAgent:"",ipAddress:"",osMinorVersion:"",kitVariant:0,kitVariantVersion:"",kitClientTimestampMillis:"0",clientSequenceId:"0",maxClientSequenceIdOnInstance:"0",targetArchitecture:"",runningWithDebuggerAttached:!1,runningInTests:!1,runningInSimulator:!1,isAppPrerelease:!1,kitAppId:"",kitSessionId:"",kitPluginType:0,isFromReactNativePlugin:!1}}var qc;(function(e){e[e.CAMERA_KIT_LEGAL_PROMPT_MISSING=0]="CAMERA_KIT_LEGAL_PROMPT_MISSING",e[e.CAMERA_KIT_LEGAL_PROMPT_ACCEPTED=1]="CAMERA_KIT_LEGAL_PROMPT_ACCEPTED",e[e.CAMERA_KIT_LEGAL_PROMPT_DISMISSED=2]="CAMERA_KIT_LEGAL_PROMPT_DISMISSED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(qc||(qc={}));var vN;(function(e){e[e.CAMERA_KIT_ENVIRONMENT_UNKNOWN=0]="CAMERA_KIT_ENVIRONMENT_UNKNOWN",e[e.CAMERA_KIT_ENVIRONMENT_STAGING=1]="CAMERA_KIT_ENVIRONMENT_STAGING",e[e.CAMERA_KIT_ENVIRONMENT_PRODUCTION=2]="CAMERA_KIT_ENVIRONMENT_PRODUCTION",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(vN||(vN={}));var To;(function(e){e[e.CAMERA_KIT_CONNECTIVITY_TYPE_UNKNOWN=0]="CAMERA_KIT_CONNECTIVITY_TYPE_UNKNOWN",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_WIFI=1]="CAMERA_KIT_CONNECTIVITY_TYPE_WIFI",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_MOBILE=2]="CAMERA_KIT_CONNECTIVITY_TYPE_MOBILE",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_UNREACHABLE=3]="CAMERA_KIT_CONNECTIVITY_TYPE_UNREACHABLE",e[e.CAMERA_KIT_CONNECTIVITY_TYPE_BLUETOOTH=4]="CAMERA_KIT_CONNECTIVITY_TYPE_BLUETOOTH",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(To||(To={}));var Ly;(function(e){e[e.CAMERA_KIT_FLAVOR_UNKNOWN=0]="CAMERA_KIT_FLAVOR_UNKNOWN",e[e.CAMERA_KIT_FLAVOR_DEBUG=1]="CAMERA_KIT_FLAVOR_DEBUG",e[e.CAMERA_KIT_FLAVOR_RELEASE=2]="CAMERA_KIT_FLAVOR_RELEASE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Ly||(Ly={}));var By;(function(e){e[e.CAMERA_KIT_VARIANT_UNKNOWN=0]="CAMERA_KIT_VARIANT_UNKNOWN",e[e.CAMERA_KIT_VARIANT_PARTNER=1]="CAMERA_KIT_VARIANT_PARTNER",e[e.CAMERA_KIT_VARIANT_PUBLIC=2]="CAMERA_KIT_VARIANT_PUBLIC",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(By||(By={}));var gN;(function(e){e[e.NO_PLUGIN=0]="NO_PLUGIN",e[e.UNITY=1]="UNITY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(gN||(gN={}));var Uy;(function(e){e[e.UNKNOWN_KIT_TYPE=0]="UNKNOWN_KIT_TYPE",e[e.BITMOJI_KIT=1]="BITMOJI_KIT",e[e.CREATIVE_KIT=2]="CREATIVE_KIT",e[e.LOGIN_KIT=3]="LOGIN_KIT",e[e.STORY_KIT=4]="STORY_KIT",e[e.CAMERA_KIT=5]="CAMERA_KIT",e[e.SHOP_KIT=6]="SHOP_KIT",e[e.EULA_KIT=7]="EULA_KIT",e[e.PAYMENTS_KIT=8]="PAYMENTS_KIT",e[e.INVITE_KIT=9]="INVITE_KIT",e[e.CAMERA_KIT_WEB=10]="CAMERA_KIT_WEB",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Uy||(Uy={}));const aS=(e,n,t=Number.POSITIVE_INFINITY)=>{const r=[];let a=0;const i=o=>ye(void 0,void 0,void 0,function*(){try{a++;const u=o.map();u instanceof Promise?o.next(yield u):u&&o.next(u)}catch(u){o.reject(u)}finally{a--}for(;r.length>0&&a<t;)i(r.shift())});return n&&n.onPageHidden(()=>{for(;r.length>0;)i(r.shift())}),o=>(u,c)=>new Promise((f,h)=>{const p={map:()=>e(u),next:m=>o(m,c).then(f).catch(h),reject:h};a<t?i(p):r.push(p)})},yN=({batchReduce:e,isBatchComplete:n,maxBatchAge:t,pageVisibility:r})=>{let a,i,o=()=>{};const u=aS(f=>ye(void 0,void 0,void 0,function*(){return i=yield e(i,f),i}),r,1),c=(f,h,p)=>{const m=h?e(i,h):i;if(!m)return;const g=m instanceof Promise?m.then(y=>f(y,p)).catch(()=>{}):f(m,p).catch(()=>{});return i=void 0,clearTimeout(a),o(),g};return f=>(h,p)=>ye(void 0,void 0,void 0,function*(){if(r&&r.isDuringVisibilityTransition("hidden")){yield c(f,h,p);return}if(i===void 0){const g=()=>c(f,void 0,p);a=setTimeout(g,t),r&&(o=r.onPageHidden(g))}return u(()=>ye(void 0,void 0,void 0,function*(){i&&n(i)&&(yield c(f,void 0,p))}))(h,p)})},GY=e=>new Promise(n=>setTimeout(n,e)),HY=(e,n)=>{let t;const r=aS(a=>ye(void 0,void 0,void 0,function*(){if(t!==void 0){const i=e-(Date.now()-t);i>0&&(yield GY(i))}return t=Date.now(),a}),n,1);return a=>(i,o)=>n&&n.isDuringVisibilityTransition("hidden")?a(i,o):r(a)(i,o)};function N1(e){var n;return((n=e.metric)===null||n===void 0?void 0:n.$case)==="count"}class ga extends Ub{static count(n,t,r={}){const a=new ga(n,r);return a.increment(t),a}constructor(n,t={}){super(n,t),this.name=n,this.count=0}increment(n){return this.count+=n,this.count}toOperationalMetric(){return[{name:`${this.name}${Fb(this.dimensions)}`,timestamp:new Date,metric:{$case:"count",count:`${Math.ceil(this.count)}`}}]}}const zY=1e3,WY=10,KY=5e3,qY=100,YY=5e3;class $Y{constructor(n,t){this.grpcClient=n;const r=HY(zY,t);this.businessEventsHandler=new jr(a=>ye(this,void 0,void 0,function*(){yield this.grpcClient.setBusinessEvents(a)})).map(r).map(aS(a=>{const i=fN.fromPartial({serverEvents:a});return{batchEvents:{typeUrl:"com.snapchat.analytics.blizzard.ServerEventBatch",value:fN.encode(i).finish()}}},t)).map(yN({batchReduce:(a,i)=>{const o=a??[];return o.push(i),o},isBatchComplete:a=>a.length>=WY,maxBatchAge:KY,pageVisibility:t})).handler,this.operationalMetricsHandler=new jr(a=>ye(this,void 0,void 0,function*(){yield this.grpcClient.setOperationalMetrics({metrics:a})})).map(r).map(yN({batchReduce:(a,i)=>{var o;const u={metrics:(o=a==null?void 0:a.metrics)!==null&&o!==void 0?o:[]};if(N1(i)){const c=u.metrics.find(f=>N1(f)&&f.name===i.name);if(c&&N1(c))return c.metric.count=`${Number(c.metric.count)+Number(i.metric.count)}`,u}return u.metrics.push(i),u},isBatchComplete:a=>a.metrics.length>=qY,maxBatchAge:YY,pageVisibility:t})).handler}setBusinessEvents(n){return ye(this,void 0,void 0,function*(){yield this.businessEventsHandler(n)})}setOperationalMetrics(n){return ye(this,void 0,void 0,function*(){yield Promise.all(n.toOperationalMetric().map(t=>this.operationalMetricsHandler(t)))})}}const jY=/^push2web_/,QD=De("externalMetricsSubject",()=>new fr),Xr=De("metricsClient",[QD.token,Df.token,vv.token],(e,n,t)=>{const r=new $Y(pv(Im,n),t);return e.pipe(Jn(a=>jY.test(a.name))).subscribe({next:a=>{r.setOperationalMetrics(a)}}),r}),Cm="cof",XY=gt("cofHandler"),JD=De("cofHandler",[Ea,jo.token,Xr.token],(e,n,t)=>{const r=new mv(()=>BD(365),new wl({databaseName:"COFCache"})),a=i=>JSON.stringify(i);return new jr((i,o)=>ye(void 0,void 0,void 0,function*(){var{signal:u,isSideEffect:c}=o,f=CW(o,["signal","isSideEffect"]);const h=new gY(`https://${e.apiHostname}`,{}),p=new nY(h);return new Promise((m,g)=>ye(void 0,void 0,void 0,function*(){var y;u&&u.addEventListener("abort",()=>g(new Error("COF request aborted by handler chain.")));const b=yield r.retrieve(a(i)).catch(w=>(XY.warn("Unable to get COF response from cache.",w),{configResultsEtag:void 0,configResults:[]})),E={requestType:Cm,delta:`${!!(b!=null&&b.configResultsEtag)}`},{requestId:_}=Vb(n,{dimensions:E});try{const w=yield p.targetingQuery(Object.assign(Object.assign({},i),{configResultsEtag:b==null?void 0:b.configResultsEtag,deltaSync:!!(b!=null&&b.configResultsEtag)}),new UD.BrowserHeaders(Object.assign({authorization:`Bearer ${e.apiToken}`,"x-snap-client-user-agent":Lb()},f)));delete w.toObject;const I=Jq("configId",(y=b==null?void 0:b.configResults)!==null&&y!==void 0?y:[],w.configResults).filter(O=>!O.delete),R=200;let C=0;try{C=new TextEncoder().encode(JSON.stringify(w)).byteLength}finally{Gb(n,{requestId:_,dimensions:E,status:R,sizeByte:C})}m(Object.assign(Object.assign({},w),{configResults:I}))}catch(w){Hb(n,{requestId:_,dimensions:E,error:$o(w)}),g(w)}}))})).map(hD({retryPredicate:i=>i instanceof Error})).map(gD({timeout:20*1e3})).map(_Y(r,a,EY({onMiss:()=>{t.setOperationalMetrics(ga.count("cache_miss",1,{request_type:Cm}))}}))).handler}),ZY={namespaces:[al.LENS_CORE,al.CAMERA_KIT_CORE,al.LENS_CORE_CONFIG]};class QY{constructor(n,t,r){const a=Promise.resolve(n).then(i=>(i==null?void 0:i.cluster)===0||i==null?void 0:i.cluster);this.configById=Er(a).pipe(ur(i=>Er(t(Object.assign(Object.assign({},ZY),{lensClusterOrig4:i})))),Ve(i=>{const o=new Map;return i.configResults.forEach(u=>{var c;const f=(c=o.get(u.configId))!==null&&c!==void 0?c:[];f.push(u),o.set(u.configId,f)}),o}),E1(1)),this.initializationConfig=Er(r.getInitializationConfig({})).pipe(Ve(i=>{if(i.ok){const o=i.unwrap();if(o.message)return o.message;throw new Error(`Failed to load initialization config. gRPC response successful, but message was null. gRPC status: ${o.statusMessage}`)}throw new Error(`Failed to load initialization config. gRPC status message: ${i.unwrapErr().statusMessage}`)}),E1(1))}get(n){return this.configById.pipe(Ve(t=>{var r;return(r=t.get(n))!==null&&r!==void 0?r:[]}))}getInitializationConfig(){return this.initializationConfig}getGpuIndexConfig(){const n="LENS_FEATURE_GPU_INDEX";return this.get(n).pipe(Ve(t=>{var r,a;if(t.length===0)throw new Error(`Cannot find '${n}' config.`);return(a=(r=t[0].value)===null||r===void 0?void 0:r.intValue)!==null&&a!==void 0?a:-1}),E1(1))}getNamespace(n){return this.configById.pipe(Ve(t=>Array.from(t.values()).filter(a=>a.some(i=>i.namespace===n)).flatMap(a=>a)))}}const Ji=De("remoteConfiguration",[Ea,JD.token,Df.token],(e,n,t)=>{const r=new QY(e.lensPerformance,n,pv(Im,t));return r.get("").pipe(ma(1)).subscribe(),r}),JY=gt("deviceDependentAssetLoader"),e$=e=>Zt(e)&&Rt(e.stringValue),t$=e=>Zt(e)&&Rt(e.url)&&(e.checksum===void 0||Rt(e.checksum)),e4=De("deviceDependentAssetLoader",[Qs.token,Ji.token],(e,n)=>{const t=new jr(e).map(uv()).handler;return function({assetDescriptor:{assetId:a},lowPriority:i}){return ye(this,void 0,void 0,function*(){const o=(u,c)=>new Error(`Cannot load device-dependent asset ${a}. ${u}`,{cause:c});return lf(n.get(a).pipe(Ho(u=>{throw o("COF config failed to load.",u)}),Ve(u=>{if(u.length===0)throw o("No COF config found corresponding to that assetId.");const[{value:c}]=u;if(!e$(c))throw o("COF config malformed (missing stringValue)");let f;try{f=JSON.parse(c.stringValue)}catch(h){throw o("COF config malformed (JSON parse error)",h)}if(!t$(f))throw o("COF config malformed (missing URL)");return JY.info(`COF request for ${a}. url: ${f.url}. checksum: ${f.checksum}.`),f}),ur(({url:u,checksum:c})=>ye(this,void 0,void 0,function*(){const[f,h]=yield t(u,fv({cache:"force-cache"},i));if(!h.ok)throw h;return{data:f,checksum:c}}))))})}}),t4=De("staticAssetLoader",[Qs.token],e=>{const n=new jr(e).map(uv()).handler;return({assetDescriptor:{assetId:t},assetManifest:r,lowPriority:a})=>ye(void 0,void 0,void 0,function*(){var i;const o=(i=r==null?void 0:r.find(f=>f.id===t))===null||i===void 0?void 0:i.assetUrl;if(!o)throw new Error(`Cannot load lens asset ${t}. Static asset URL could not be found.`);const[u,c]=yield n(o,fv({cache:"force-cache"},a));if(!c.ok)throw c;return u})}),n$={LensDeserialization:0,Validation:1,Uncategorized:2,LensExecution:3,Abort:4,Uninitialized:5},r$=Object.fromEntries(Object.entries(n$).map(e=>[e[1],e[0]]));function n4(e,n){var t,r,a,i,o;const u=$o(e),c=new Error(u.message.split(`
`)[0],{cause:u.otherExceptions||!((t=u.cause)===null||t===void 0)&&t.metadata?{otherExceptions:u.otherExceptions,metadata:(r=u.cause)===null||r===void 0?void 0:r.metadata}:void 0}),f=(i=(a=u.cause)===null||a===void 0?void 0:a.type)===null||i===void 0?void 0:i.value,h=`LensCore${(o=r$[f])!==null&&o!==void 0?o:"Unknown"}Error`;if(c.name=h,c.isFrameError=n,u.stack){const[p,...m]=u.stack.split(`
`);c.stack&&m.unshift(c.stack.split(`
`)[0]),c.stack=m.join(`
`)}return c}const a$={addLens:null,clearAllLenses:null,imageToYuvBuffer:null,pauseCanvas:null,processAudioSampleBuffer:null,processFrame:null,removeLens:null,replaceLenses:null,setAudioParameters:null,setDeviceClass:null,setGpuIndex:null,setFPSLimit:null,setInputTransform:null,setOnFrameProcessedCallback:null,setRenderLoopMode:null,setRenderSize:null,teardown:null,useMediaElement:null,yuvBufferToBitmap:null};function bN(e,n){return t=>r=>{const a=n4(r,e);t(a),n.next(a)}}function T1(e,n){return function(...t){try{return e.apply(this,t)}catch(r){const a=n4(r,!1);throw n.next(a),a}}}const i$="errors",o$=e=>{const n=new fr,t=n.asObservable(),r=bN(!1,n),a=bN(!0,n),i={initialize(o){return new Promise((u,c)=>{var f;return e.initialize(Object.assign(Object.assign({},o),{exceptionHandler:a((f=o.exceptionHandler)!==null&&f!==void 0?f:()=>{}),onSuccess:u,onFailure:r(c)}))})},provideRemoteAssetsResponse(o){var u;return e.provideRemoteAssetsResponse(Object.assign(Object.assign({},o),{onFailure:r((u=o.onFailure)!==null&&u!==void 0?u:()=>{})}))},playCanvas(o){return new Promise((u,c)=>{e.playCanvas(Object.assign(Object.assign({},o),{onReady:u,onFailure:r(c)}))})}};return new Proxy(e,{get:(o,u,c)=>{if(u===i$)return t;if(u in i)return T1(i[u],n);const f=Reflect.get(o,u,c);return f&&(u in a$?T1(function(h){return new Promise((p,m)=>f(Object.assign(Object.assign({},h),{onSuccess:p,onFailure:r(m)})))},n):typeof f=="function"?"values"in f?f:T1(f,n):f)}})};function s$(e){return new Promise((n,t)=>{const r=document.createElement("script");r.src=e,r.async=!0,Yo(Hs(r,"load").pipe(va(()=>n(r))),Hs(r,"error").pipe(va(a=>t(a)))).pipe(ma(1)).subscribe(),document.body.appendChild(r)})}const u$=()=>e=>(n,t)=>{var r;return(Rt(n)?n:(r=n==null?void 0:n.url)!==null&&r!==void 0?r:"").startsWith("https://lens-core-wasm.sc-corp.net/")?e(n,Object.assign(Object.assign({},t),{credentials:"include"})):e(n,t)},l$=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,15,1,13,0,65,1,253,15,65,2,253,15,253,128,2,11])),c$=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),SN=1024;function f$(){var e,n;const t=(e=globalThis.document)===null||e===void 0?void 0:e.createElement("canvas").getContext("webgl2");if(!t){const i=!((n=globalThis.document)===null||n===void 0)&&n.createElement("canvas").getContext("webgl")?"platform_not_supported_only_webgl1":typeof globalThis.WebGLRenderingContext=="function"?"platform_not_supported_likely_no_hw_accel":"platform_not_supported_no_webgl_browser_support";return{supported:!1,error:uf("CameraKit requires WebGL2, but this browser does not support WebGL2.",new Error(i))}}const r=t.getParameter(t.MAX_TEXTURE_SIZE),a=r>=SN;return a?{supported:a,maxTextureSize:r}:{supported:a,error:uf(`CameraKit requires WebGL's MAX_TEXTURE_SIZE exceed a minimum value of ${SN}, but the browser's reported MAX_TEXTURE_SIZE is ${r}.`)}}function d$(){return ye(this,void 0,void 0,function*(){if(globalThis.WebAssembly===void 0)return{supported:!1,error:uf("CameraKit requires WebAssembly, but this browser does not support WebAssembly.")};const[e,n]=yield Promise.all([c$().then(t=>zi().browser.brand==="Safari"?!1:t),l$()]);return{supported:!0,wasmFeatures:{simd:e,relaxedSimd:n}}})}function O1(e){return{supported:!1,error:uf("Use of this feature requires WebXR support for immersive AR sessions, but this browser does not support immersive AR sessions.",e)}}function h$(){return ye(this,void 0,void 0,function*(){try{return!isSecureContext||!navigator.xr?O1():(yield navigator.xr.isSessionSupported("immersive-ar"))?{supported:!0,sixDofSupported:!0,sceneDepthSupported:!0}:O1()}catch(e){return e instanceof Error&&e.name==="SecurityError"?{supported:!1,error:uf("Failed to check XR capabilities due to permissions or other issues.",e)}:O1(e)}})}const iS=dv(function(){return ye(this,void 0,void 0,function*(){return{webgl:f$(),wasm:yield d$(),webxr:yield h$()}})}),p$=["LensCoreWebAssembly.js","LensCoreWebAssembly.wasm"];function m$({simd:e,relaxedSimd:n},t){return parseInt(t)>=282&&n?"rel-relaxed-simd-neh":e?"rel-simd-neh":"rel-neh"}function v$(e){return ye(this,void 0,void 0,function*(){const n=e==null?void 0:e.replace(/[\/]+$/,""),{wasm:t}=yield iS();if(!t.supported)throw t.error;const{lensCore:r}=zi(),a=r.version,i=r.buildNumber,o=m$(t.wasmFeatures,a);return p$.map(u=>{if(n)return`${n}/${u}`;const{origin:c,pathname:f,search:h}=new URL(r.baseUrl);return`${c}${f}/${a}/${i}/${o}/${u}${h}`})})}const g$=gt("lensCoreFactory"),EN=(e,n)=>n.find(t=>e.test(t)),oS="lens_core_js",sS="lens_core_wasm",Ar=De("lensCore",[Qs.token,Ea,jo.token],(e,{lensCoreOverrideUrls:n,wasmEndpointOverride:t},r)=>ye(void 0,void 0,void 0,function*(){var a,i;let o,u;const c=!!(n||t);let f=new jr(e);c&&(f=f.map(u$()));const h=f.map(zb(r)).handler;if(n)o=n.js,u=n.wasm;else{const y=yield v$(t??void 0);if(o=(a=EN(/\.js/,y))!==null&&a!==void 0?a:"",u=(i=EN(/\.wasm/,y))!==null&&i!==void 0?i:"",!o||!u)throw new Error(`Cannot fetch required LensCore assets. Either the JS or WASM filename is missing from this list: ${y}.`);const b=yield h([o,{requestType:oS,customBuild:`${c}`}]).then(E=>E.blob());o=URL.createObjectURL(b)}const p=yield s$(o),m=yield new Promise((g,y)=>{let b;const E=globalThis.createLensesModule(b={mainScriptUrlOrBlob:o,instantiateWasm:(_,w)=>{WebAssembly.instantiateStreaming(h([u,{requestType:sS,customBuild:`${c}`}]),_).then(function({instance:I,module:R}){w(I,R),b.compiledModule=R,g(E)}).catch(y)}})});return p.remove(),ff.version!=`${m.getCoreVersion()}`&&g$.warn(`Loaded LensCore version (${m.getCoreVersion()}) differs from expected one (${ff.version})`),o$(m)})),y$={1:"st",2:"nd",3:"rd"};function b$(e,n,t,r){var a;let i;try{i=JSON.stringify(r)}catch{i=String(r)}return{argPosition:`${t+1}${(a=y$[t+1])!==null&&a!==void 0?a:"th"}`,methodPath:`${r4(e)}.${String(n)}()`,argString:i}}function r4(e){if(e===null)return"null";const n=typeof e;if(!["object","function"].includes(n))return n;const t=e,r=t[Symbol.toStringTag];if(typeof r=="string")return r;if(n==="function"&&Function.prototype.toString.call(t).startsWith("class"))return"class";const a=t.constructor.name;return typeof a=="string"&&a!==""?a:n}function Za(...e){return function(t,r){return function(...a){for(const[i,o]of e.entries())if(!o(a[i])){const{argPosition:u,methodPath:c,argString:f}=b$(this,r.name,i,a[i]);throw HW(`The ${u} argument to ${c} method has an invalid value: ${f}.`)}return t.apply(this,a)}}}function sr(e){const n=t=>e.error(t);return function(r,a){return function(...i){try{const o=r.apply(this,i);return o instanceof Promise&&o.catch(n),o}catch(o){throw n(o),o}}}}function Wi(e){throw new Error("Reached unreachable code at runtime.")}function Fy(e,n="Assertion failed"){if(!e)throw n instanceof Error?n:new Error(n)}function S$(e){return Hi(a4,e)}function a4(e){return Zt(e)&&Rt(e.id)&&Rt(e.name)&&(ln(e.iconUrl)||Rt(e.iconUrl))&&Zt(e.vendorData)&&xb(Rt)(e.vendorData)&&zs(e.cameraFacingPreference)&&(ln(e.preview)||E$(e.preview))&&(ln(e.lensCreator)||_$(e.lensCreator))&&(ln(e.snapcode)||A$(e.snapcode))&&I$(e.featureMetadata)}function E$(e){return Zt(e)&&Rt(e.imageUrl)}function _$(e){return Zt(e)&&Rt(e.displayName)}function A$(e){return Zt(e)&&Rt(e.imageUrl)&&Rt(e.deepLink)}function w$(e){return Zt(e)&&Rt(e.typeUrl)&&mD(e.value)}function I$(e){return Hi(w$,e)}function Vy({id:e,groupId:n,name:t,content:r,vendorData:a,cameraFacingPreference:i,lensCreator:o,scannable:u,featureMetadata:c}){var f;return Fy(XI(r==null?void 0:r.iconUrlBolt),"Unsafe icon URL"),Fy(XI((f=r==null?void 0:r.preview)===null||f===void 0?void 0:f.imageUrl),"Unsafe preview URL"),{id:e,groupId:n,name:t,iconUrl:r==null?void 0:r.iconUrlBolt,preview:r!=null&&r.preview?{imageUrl:r.preview.imageUrl}:void 0,vendorData:a,cameraFacingPreference:i,lensCreator:o,snapcode:u?{imageUrl:u.snapcodeImageUrl,deepLink:u.snapcodeDeeplink}:void 0,featureMetadata:c}}const _a=De("metricsEventTarget",()=>new Al),_N=gt("LensAssetRepository");function AN(e){return`${e.assetId}_${e.assetType.value}`}function R$(e,n){switch(n){case Hc.ASSET:return e.AssetType.Static;case Hc.DEVICE_DEPENDENT_ASSET_UNSET:case Hc.UNRECOGNIZED:return e.AssetType.DeviceDependent;default:return Wi()}}class C${constructor(n,t,r,a){this.lensCore=n,this.assetLoaders=t,this.metrics=r,this.requestStateEventTarget=a,this.cachedAssetKeys=new Set}cacheAssets(n,t,r=[vl.REQUIRED],a=!1){return ye(this,void 0,void 0,function*(){const i=new Set([vl.PRELOAD_UNSET,...r]),o=n.filter(u=>i.has(u.requestTiming)).map(({id:u,type:c})=>({assetId:u,assetType:R$(this.lensCore,c)}));if(o.length)return this.cacheAssetsByDescriptor(o,t,n,a)})}loadAsset(n){var t,r;return ye(this,void 0,void 0,function*(){const{assetDescriptor:{assetId:a,assetType:i},lens:o}=n,[u,c]=(t=this.assetLoaders.get(i))!==null&&t!==void 0?t:[],f=u??"unknown",h={requestType:"asset",assetId:a,assetType:f,lensId:(r=o==null?void 0:o.id)!==null&&r!==void 0?r:"unknown"},{requestId:p}=Vb(this.requestStateEventTarget,{dimensions:h});try{if(!c)throw new Error(`Cannot get asset ${a}. Asset type ${f} is not supported.`);const m=yield c(n),g="data"in m?m.data:m,y="checksum"in m?m.checksum:void 0;if(g.byteLength===0)throw new Error(`Got empty response for asset ${a} from ${f} loader.`);Gb(this.requestStateEventTarget,{requestId:p,dimensions:h,status:200,sizeByte:g.byteLength}),this.lensCore.provideRemoteAssetsResponse({assetId:a,assetBuffer:g,assetType:i,assetChecksum:y,onFailure:b=>{/validation failed/.test(b.message)&&this.metrics.dispatchEvent(new Hn("assetValidationFailed",{name:"assetValidationFailed",assetId:a})),_N.warn(`Failed to provide lens asset ${a}.`,b)}})}catch(m){const g=new Error(`Failed to load lens asset ${a}.`,{cause:m});throw Hb(this.requestStateEventTarget,{requestId:p,dimensions:h,error:g}),g}})}cacheAssetsByDescriptor(n,t,r,a){return ye(this,void 0,void 0,function*(){yield Promise.all(n.filter(i=>!this.cachedAssetKeys.has(AN(i))).map(i=>ye(this,void 0,void 0,function*(){var o;try{yield this.loadAsset({assetDescriptor:i,lens:t,assetManifest:r,lowPriority:a}),this.cachedAssetKeys.add(AN(i))}catch(u){const{assetId:c,assetType:f}=i,[h]=(o=this.assetLoaders.get(f))!==null&&o!==void 0?o:[];_N.warn(`Failed to cache asset ${c} of type ${h??f.value}.`,u)}})))})}}const gv=De("lensAssetRepository",[Ar.token,e4.token,yD.token,t4.token,_a.token,jo.token],(e,n,t,r,a,i)=>new C$(e,new Map([[e.AssetType.DeviceDependent,["DeviceDependent",n]],[e.AssetType.RemoteMediaByUrl,["RemoteMediaByUrl",t]],[e.AssetType.URL,["URL",t]],[e.AssetType.Static,["Static",r]]]),a,i));var wN;(function(e){e.UNSET="UNSET",e.SHOP_KIT="SHOP_KIT",e.LENS_WEB_BUILDER="LENS_WEB_BUILDER",e.UNRECOGNIZED="UNRECOGNIZED"})(wN||(wN={}));var IN;(function(e){e.UNSET="UNSET",e.UNKNOWN="UNKNOWN",e.NOT_FOUND="NOT_FOUND",e.INCOMPATIBLE_LENS_CORE_VERSION="INCOMPATIBLE_LENS_CORE_VERSION",e.ARCHIVED_OR_INVISIBLE="ARCHIVED_OR_INVISIBLE",e.CONTAINS_MUSIC="CONTAINS_MUSIC",e.UNRECOGNIZED="UNRECOGNIZED"})(IN||(IN={}));function RN(){return{userAgent:"",locale:""}}const i4={encode(e,n=new X){return e.userAgent!==""&&n.uint32(10).string(e.userAgent),e.locale!==""&&n.uint32(18).string(e.locale),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=RN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.userAgent=t.string();continue}case 2:{if(i!==18)break;a.locale=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return i4.fromPartial(e??{})},fromPartial(e){var n,t;const r=RN();return r.userAgent=(n=e.userAgent)!==null&&n!==void 0?n:"",r.locale=(t=e.locale)!==null&&t!==void 0?t:"",r}};function CN(){return{lenses:[]}}const o4={encode(){throw new Error("Not implemented.")},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=CN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.lenses.push(zr.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return o4.fromPartial(e??{})},fromPartial(e){var n;const t=CN();return t.lenses=((n=e.lenses)===null||n===void 0?void 0:n.map(r=>zr.fromPartial(r)))||[],t}},Nm=De("lensSources",()=>[]);function NN(e,n,t){return ye(this,void 0,void 0,function*(){const r=e.find(i=>i.isGroupOwner(n));if(!r)throw new Error(`Cannot load lens ${t?`${t} from `:""}group ${n}. No LensSource claimed ownership of that lens group.`);const a=t===void 0?yield r.loadLensGroup(n):yield r.loadLens(t,n);return a instanceof ArrayBuffer||ArrayBuffer.isView(a)?o4.decode(a instanceof Uint8Array?a:new Uint8Array(a)).lenses:[]})}const xc=gt("LensRepository"),s4={required:vl.REQUIRED,onDemand:vl.ON_DEMAND};function N$(e){return Rt(e)&&s4.hasOwnProperty(e)}function T$(e){return ln(e)||Hi(N$,e)}let O$=(()=>{var e;let n=[],t,r,a;return e=class{constructor(o,u,c){this.lensFetchHandler=(Of(this,n),o),this.lensSources=u,this.lensAssetRepository=c,this.metadataCache=new Map,this.binariesCache=new Map}loadLens(o,u){return ye(this,void 0,void 0,function*(){const c=(yield NN(this.lensSources,u,o))[0];if(!c)throw new Error(`Cannot load lens. No lens with id ${o} was found in lens group ${u}.`);const f=Object.assign(Object.assign({},c),{groupId:u});return this.metadataCache.set(c.id,f),Vy(f)})}loadLensGroups(o){return ye(this,void 0,void 0,function*(){return(yield Promise.all(o.map(c=>ye(this,void 0,void 0,function*(){try{return(yield NN(this.lensSources,c)).map(f=>{const h=Object.assign(Object.assign({},f),{groupId:c});return this.metadataCache.set(f.id,h),Vy(h)})}catch(f){const h=$o(f);return xc.error(new Error(`Failed to load lens group ${c}.`,{cause:h})),h}})))).reduce((c,f)=>(f instanceof Error?c.errors.push(f):c.lenses.push(...f),c),{errors:[],lenses:[]})})}cacheLensContent(o,u=["required","onDemand"]){return ye(this,void 0,void 0,function*(){const c=u.map(f=>s4[f]);yield Promise.all(o.map(f=>ye(this,void 0,void 0,function*(){try{const{lensBuffer:h}=yield this.getLensContent(f,!0),{content:p}=this.metadataCache.get(f.id);this.binariesCache.set(f.id,h),yield this.lensAssetRepository.cacheAssets(p.assetManifest,f,c,!0)}catch(h){xc.warn(`Failed to cache lens ${f.id}.`,h)}})))})}getLensMetadata(o){return this.metadataCache.get(o)}removeCachedLenses(o){o.forEach(u=>this.binariesCache.delete(u.id))}getLensContent(o,u=!1){var c;return ye(this,void 0,void 0,function*(){const{content:f}=(c=this.metadataCache.get(o.id))!==null&&c!==void 0?c:{};if(!f)throw new Error(`Cannot find metadata for lens ${o.id}.`);const h=this.binariesCache.get(o.id);if(h)return{lensBuffer:h,lensChecksum:f.lnsSha256};const[p]=yield this.lensFetchHandler([new Request(f.lnsUrlBolt,fv({cache:"force-cache"},u)),{requestType:"lens_content",lensId:o.id}]);return{lensBuffer:p,lensChecksum:f.lnsSha256}})}},t=[Za(wm,wm),sr(xc)],r=[Za(fq),sr(xc)],a=[Za(S$,T$),sr(xc)],Un(e,null,t,{kind:"method",name:"loadLens",static:!1,private:!1,access:{has:i=>"loadLens"in i,get:i=>i.loadLens}},null,n),Un(e,null,r,{kind:"method",name:"loadLensGroups",static:!1,private:!1,access:{has:i=>"loadLensGroups"in i,get:i=>i.loadLensGroups}},null,n),Un(e,null,a,{kind:"method",name:"cacheLensContent",static:!1,private:!1,access:{has:i=>"cacheLensContent"in i,get:i=>i.cacheLensContent}},null,n),e})();const Il=De("LensRepository",[jo.token,Qs.token,Nm.token,gv.token],(e,n,t,r)=>{const a=new jr(n).map(zb(e)).map(uv()).handler;return new O$(a,t,r)}),k$=e=>Object.fromEntries(e),pn=e=>()=>{const n=t=>({name:e,data:t});return Object.defineProperty(n,"name",{value:e}),n},yv=(...e)=>{const n=e.map(t=>[t.name,t]);return k$(n)};function ot(...e){return Jn(n=>e.some(t=>n[0].name===t))}function TN(e,n){return e.name===n}class uS{constructor(n,t,r,a){qn(this,"actions");qn(this,"states");qn(this,"events");qn(this,"actionsSubject");qn(this,"eventsSubject");qn(this,"state");this.actions=n,this.states=t,this.actionsSubject=new fr,this.eventsSubject=new fr,this.events=this.eventsSubject.asObservable(),this.state=new eK(r),this.actionsSubject.pipe(nq(this.state),ur(([i,o])=>zK.pipe(tq([i,o]),a,cD(Tn(o)),va(u=>{u!==o&&this.state.next(u)}),Ve(u=>[i,u]),ma(1)))).subscribe(this.eventsSubject)}dispatch(n,t){const r=typeof n=="string"?{name:n,data:t}:n;this.actionsSubject.next(r)}getState(){return this.state.getValue()}}function ws(e){return n=>new Xt(t=>{const r=e.events.subscribe(t);return r.add(n.subscribe({next:a=>e.dispatch(a),error:a=>t.error(a)})),r})}const ei=e=>()=>pn(e)(),lS=(...e)=>yv(...e);function cr(...e){return Jn(n=>e.some(t=>n[1].name===t))}function Ws(e,n){return e.name===n}function ON(){return{data:new Uint8Array(0)}}const Dp={encode(e,n=new X){return e.data.length!==0&&n.uint32(10).bytes(e.data),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=ON();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.data=t.bytes();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Dp.fromPartial(e??{})},fromPartial(e){var n;const t=ON();return t.data=(n=e.data)!==null&&n!==void 0?n:new Uint8Array(0),t}};function kN(){return{latitude:0,longitude:0}}const Pp={encode(e,n=new X){return e.latitude!==0&&n.uint32(9).double(e.latitude),e.longitude!==0&&n.uint32(17).double(e.longitude),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=kN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==9)break;a.latitude=t.double();continue}case 2:{if(i!==17)break;a.longitude=t.double();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Pp.fromPartial(e??{})},fromPartial(e){var n,t;const r=kN();return r.latitude=(n=e.latitude)!==null&&n!==void 0?n:0,r.longitude=(t=e.longitude)!==null&&t!==void 0?t:0,r}};function xN(){return{radius:0,center:void 0}}const za={encode(e,n=new X){return e.radius!==0&&n.uint32(9).double(e.radius),e.center!==void 0&&Pp.encode(e.center,n.uint32(18).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=xN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==9)break;a.radius=t.double();continue}case 2:{if(i!==18)break;a.center=Pp.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return za.fromPartial(e??{})},fromPartial(e){var n;const t=xN();return t.radius=(n=e.radius)!==null&&n!==void 0?n:0,t.center=e.center!==void 0&&e.center!==null?Pp.fromPartial(e.center):void 0,t}};function DN(){return{locations:[],activeLure:void 0,closestLure:void 0}}const Mp={encode(e,n=new X){for(const t of e.locations)za.encode(t,n.uint32(10).fork()).join();return e.activeLure!==void 0&&za.encode(e.activeLure,n.uint32(18).fork()).join(),e.closestLure!==void 0&&za.encode(e.closestLure,n.uint32(26).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=DN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.locations.push(za.decode(t,t.uint32()));continue}case 2:{if(i!==18)break;a.activeLure=za.decode(t,t.uint32());continue}case 3:{if(i!==26)break;a.closestLure=za.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Mp.fromPartial(e??{})},fromPartial(e){var n;const t=DN();return t.locations=((n=e.locations)===null||n===void 0?void 0:n.map(r=>za.fromPartial(r)))||[],t.activeLure=e.activeLure!==void 0&&e.activeLure!==null?za.fromPartial(e.activeLure):void 0,t.closestLure=e.closestLure!==void 0&&e.closestLure!==null?za.fromPartial(e.closestLure):void 0,t}};function PN(){return{store:new Uint8Array(0)}}const Lp={encode(e,n=new X){return e.store.length!==0&&n.uint32(10).bytes(e.store),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=PN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.store=t.bytes();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Lp.fromPartial(e??{})},fromPartial(e){var n;const t=PN();return t.store=(n=e.store)!==null&&n!==void 0?n:new Uint8Array(0),t}};var lr;(function(e){e.NOT_APPLICABLE="NOT_APPLICABLE",e.SPOOKEY="SPOOKEY",e.REGISTRY="REGISTRY",e.FIDELIUS="FIDELIUS",e.UNRECOGNIZED="UNRECOGNIZED"})(lr||(lr={}));function x$(e){switch(e){case 0:case"NOT_APPLICABLE":return lr.NOT_APPLICABLE;case 1:case"SPOOKEY":return lr.SPOOKEY;case 2:case"REGISTRY":return lr.REGISTRY;case 3:case"FIDELIUS":return lr.FIDELIUS;case-1:case"UNRECOGNIZED":default:return lr.UNRECOGNIZED}}function D$(e){switch(e){case lr.NOT_APPLICABLE:return 0;case lr.SPOOKEY:return 1;case lr.REGISTRY:return 2;case lr.FIDELIUS:return 3;case lr.UNRECOGNIZED:default:return-1}}var MN;(function(e){e.NOT_APPLICABLE="NOT_APPLICABLE",e.CONTEXT="CONTEXT",e.INTERSTITIAL="INTERSTITIAL",e.UNRECOGNIZED="UNRECOGNIZED"})(MN||(MN={}));function LN(){return{key:new Uint8Array(0),ivStore:{},isKeyServerEncrypted:!1,isKeyE2eEncrypted:!1,encryptionScheme:lr.NOT_APPLICABLE}}const Bp={encode(e,n=new X){return e.key.length!==0&&n.uint32(10).bytes(e.key),Object.entries(e.ivStore).forEach(([t,r])=>{Gy.encode({key:t,value:r},n.uint32(18).fork()).join()}),e.isKeyServerEncrypted!==!1&&n.uint32(24).bool(e.isKeyServerEncrypted),e.isKeyE2eEncrypted!==!1&&n.uint32(32).bool(e.isKeyE2eEncrypted),e.encryptionScheme!==lr.NOT_APPLICABLE&&n.uint32(40).int32(D$(e.encryptionScheme)),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=LN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.key=t.bytes();continue}case 2:{if(i!==18)break;const o=Gy.decode(t,t.uint32());o.value!==void 0&&(a.ivStore[o.key]=o.value);continue}case 3:{if(i!==24)break;a.isKeyServerEncrypted=t.bool();continue}case 4:{if(i!==32)break;a.isKeyE2eEncrypted=t.bool();continue}case 5:{if(i!==40)break;a.encryptionScheme=x$(t.int32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Bp.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i;const o=LN();return o.key=(n=e.key)!==null&&n!==void 0?n:new Uint8Array(0),o.ivStore=Object.entries((t=e.ivStore)!==null&&t!==void 0?t:{}).reduce((u,[c,f])=>(f!==void 0&&(u[c]=f),u),{}),o.isKeyServerEncrypted=(r=e.isKeyServerEncrypted)!==null&&r!==void 0?r:!1,o.isKeyE2eEncrypted=(a=e.isKeyE2eEncrypted)!==null&&a!==void 0?a:!1,o.encryptionScheme=(i=e.encryptionScheme)!==null&&i!==void 0?i:lr.NOT_APPLICABLE,o}};function BN(){return{key:"",value:new Uint8Array(0)}}const Gy={encode(e,n=new X){return e.key!==""&&n.uint32(10).string(e.key),e.value.length!==0&&n.uint32(18).bytes(e.value),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=BN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.key=t.string();continue}case 2:{if(i!==18)break;a.value=t.bytes();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Gy.fromPartial(e??{})},fromPartial(e){var n,t;const r=BN();return r.key=(n=e.key)!==null&&n!==void 0?n:"",r.value=(t=e.value)!==null&&t!==void 0?t:new Uint8Array(0),r}};function UN(){return{store:{},serializedStore:new Uint8Array(0)}}const Yc={encode(e,n=new X){return Object.entries(e.store).forEach(([t,r])=>{Hy.encode({key:t,value:r},n.uint32(10).fork()).join()}),e.serializedStore.length!==0&&n.uint32(18).bytes(e.serializedStore),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=UN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;const o=Hy.decode(t,t.uint32());o.value!==void 0&&(a.store[o.key]=o.value);continue}case 2:{if(i!==18)break;a.serializedStore=t.bytes();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Yc.fromPartial(e??{})},fromPartial(e){var n,t;const r=UN();return r.store=Object.entries((n=e.store)!==null&&n!==void 0?n:{}).reduce((a,[i,o])=>(o!==void 0&&(a[i]=globalThis.String(o)),a),{}),r.serializedStore=(t=e.serializedStore)!==null&&t!==void 0?t:new Uint8Array(0),r}};function FN(){return{key:"",value:""}}const Hy={encode(e,n=new X){return e.key!==""&&n.uint32(10).string(e.key),e.value!==""&&n.uint32(18).string(e.value),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=FN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.key=t.string();continue}case 2:{if(i!==18)break;a.value=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Hy.fromPartial(e??{})},fromPartial(e){var n,t;const r=FN();return r.key=(n=e.key)!==null&&n!==void 0?n:"",r.value=(t=e.value)!==null&&t!==void 0?t:"",r}};function VN(){return{playerData:{}}}const Up={encode(e,n=new X){return Object.entries(e.playerData).forEach(([t,r])=>{zy.encode({key:t,value:r},n.uint32(10).fork()).join()}),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=VN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;const o=zy.decode(t,t.uint32());o.value!==void 0&&(a.playerData[o.key]=o.value);continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Up.fromPartial(e??{})},fromPartial(e){var n;const t=VN();return t.playerData=Object.entries((n=e.playerData)!==null&&n!==void 0?n:{}).reduce((r,[a,i])=>(i!==void 0&&(r[a]=Yc.fromPartial(i)),r),{}),t}};function GN(){return{key:"",value:void 0}}const zy={encode(e,n=new X){return e.key!==""&&n.uint32(10).string(e.key),e.value!==void 0&&Yc.encode(e.value,n.uint32(18).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=GN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.key=t.string();continue}case 2:{if(i!==18)break;a.value=Yc.decode(t,t.uint32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return zy.fromPartial(e??{})},fromPartial(e){var n;const t=GN();return t.key=(n=e.key)!==null&&n!==void 0?n:"",t.value=e.value!==void 0&&e.value!==null?Yc.fromPartial(e.value):void 0,t}};function HN(){return{id:"",sessionId:"",playerId:"",sessionData:void 0,createdTime:"0",expireTime:"0",version:0,encryptionData:void 0,sessionDepth:0}}const Fp={encode(e,n=new X){return e.id!==""&&n.uint32(10).string(e.id),e.sessionId!==""&&n.uint32(18).string(e.sessionId),e.playerId!==""&&n.uint32(26).string(e.playerId),e.sessionData!==void 0&&Up.encode(e.sessionData,n.uint32(34).fork()).join(),e.createdTime!=="0"&&n.uint32(40).int64(e.createdTime),e.expireTime!=="0"&&n.uint32(48).int64(e.expireTime),e.version!==0&&n.uint32(56).int32(e.version),e.encryptionData!==void 0&&Bp.encode(e.encryptionData,n.uint32(66).fork()).join(),e.sessionDepth!==0&&n.uint32(72).int32(e.sessionDepth),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=HN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.id=t.string();continue}case 2:{if(i!==18)break;a.sessionId=t.string();continue}case 3:{if(i!==26)break;a.playerId=t.string();continue}case 4:{if(i!==34)break;a.sessionData=Up.decode(t,t.uint32());continue}case 5:{if(i!==40)break;a.createdTime=t.int64().toString();continue}case 6:{if(i!==48)break;a.expireTime=t.int64().toString();continue}case 7:{if(i!==56)break;a.version=t.int32();continue}case 8:{if(i!==66)break;a.encryptionData=Bp.decode(t,t.uint32());continue}case 9:{if(i!==72)break;a.sessionDepth=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Fp.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u;const c=HN();return c.id=(n=e.id)!==null&&n!==void 0?n:"",c.sessionId=(t=e.sessionId)!==null&&t!==void 0?t:"",c.playerId=(r=e.playerId)!==null&&r!==void 0?r:"",c.sessionData=e.sessionData!==void 0&&e.sessionData!==null?Up.fromPartial(e.sessionData):void 0,c.createdTime=(a=e.createdTime)!==null&&a!==void 0?a:"0",c.expireTime=(i=e.expireTime)!==null&&i!==void 0?i:"0",c.version=(o=e.version)!==null&&o!==void 0?o:0,c.encryptionData=e.encryptionData!==void 0&&e.encryptionData!==null?Bp.fromPartial(e.encryptionData):void 0,c.sessionDepth=(u=e.sessionDepth)!==null&&u!==void 0?u:0,c}};var Ge;(function(e){e.Invalid="Invalid",e.Aquarius="Aquarius",e.Aries="Aries",e.Cancer="Cancer",e.Capricorn="Capricorn",e.Gemini="Gemini",e.Leo="Leo",e.Libra="Libra",e.Pisces="Pisces",e.Sagittarius="Sagittarius",e.Scorpio="Scorpio",e.Taurus="Taurus",e.Virgo="Virgo",e.UNRECOGNIZED="UNRECOGNIZED"})(Ge||(Ge={}));function P$(e){switch(e){case 0:case"Invalid":return Ge.Invalid;case 1:case"Aquarius":return Ge.Aquarius;case 2:case"Aries":return Ge.Aries;case 3:case"Cancer":return Ge.Cancer;case 4:case"Capricorn":return Ge.Capricorn;case 5:case"Gemini":return Ge.Gemini;case 6:case"Leo":return Ge.Leo;case 7:case"Libra":return Ge.Libra;case 8:case"Pisces":return Ge.Pisces;case 9:case"Sagittarius":return Ge.Sagittarius;case 10:case"Scorpio":return Ge.Scorpio;case 11:case"Taurus":return Ge.Taurus;case 12:case"Virgo":return Ge.Virgo;case-1:case"UNRECOGNIZED":default:return Ge.UNRECOGNIZED}}function M$(e){switch(e){case Ge.Invalid:return 0;case Ge.Aquarius:return 1;case Ge.Aries:return 2;case Ge.Cancer:return 3;case Ge.Capricorn:return 4;case Ge.Gemini:return 5;case Ge.Leo:return 6;case Ge.Libra:return 7;case Ge.Pisces:return 8;case Ge.Sagittarius:return 9;case Ge.Scorpio:return 10;case Ge.Taurus:return 11;case Ge.Virgo:return 12;case Ge.UNRECOGNIZED:default:return-1}}function zN(){return{avatarId:"",selfieId:""}}const Vp={encode(e,n=new X){return e.avatarId!==""&&n.uint32(10).string(e.avatarId),e.selfieId!==""&&n.uint32(18).string(e.selfieId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=zN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.avatarId=t.string();continue}case 2:{if(i!==18)break;a.selfieId=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Vp.fromPartial(e??{})},fromPartial(e){var n,t;const r=zN();return r.avatarId=(n=e.avatarId)!==null&&n!==void 0?n:"",r.selfieId=(t=e.selfieId)!==null&&t!==void 0?t:"",r}};function WN(){return{friendshipStart:void 0,lastInteraction:void 0,streak:0}}const Gp={encode(e,n=new X){return e.friendshipStart!==void 0&&Hr.encode(qN(e.friendshipStart),n.uint32(10).fork()).join(),e.lastInteraction!==void 0&&Hr.encode(qN(e.lastInteraction),n.uint32(18).fork()).join(),e.streak!==0&&n.uint32(24).uint32(e.streak),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=WN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.friendshipStart=YN(Hr.decode(t,t.uint32()));continue}case 2:{if(i!==18)break;a.lastInteraction=YN(Hr.decode(t,t.uint32()));continue}case 3:{if(i!==24)break;a.streak=t.uint32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Gp.fromPartial(e??{})},fromPartial(e){var n,t,r;const a=WN();return a.friendshipStart=(n=e.friendshipStart)!==null&&n!==void 0?n:void 0,a.lastInteraction=(t=e.lastInteraction)!==null&&t!==void 0?t:void 0,a.streak=(r=e.streak)!==null&&r!==void 0?r:0,a}};function KN(){return{userId:"",username:"",birthdate:"",displayName:"",countrycode:"",score:"0",bitmojiInfo:void 0,friendInfo:void 0,zodiac:Ge.Invalid}}const Hp={encode(e,n=new X){return e.userId!==""&&n.uint32(10).string(e.userId),e.username!==""&&n.uint32(18).string(e.username),e.birthdate!==""&&n.uint32(26).string(e.birthdate),e.displayName!==""&&n.uint32(34).string(e.displayName),e.countrycode!==""&&n.uint32(42).string(e.countrycode),e.score!=="0"&&n.uint32(56).uint64(e.score),e.bitmojiInfo!==void 0&&Vp.encode(e.bitmojiInfo,n.uint32(66).fork()).join(),e.friendInfo!==void 0&&Gp.encode(e.friendInfo,n.uint32(74).fork()).join(),e.zodiac!==Ge.Invalid&&n.uint32(80).int32(M$(e.zodiac)),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=KN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.userId=t.string();continue}case 2:{if(i!==18)break;a.username=t.string();continue}case 3:{if(i!==26)break;a.birthdate=t.string();continue}case 4:{if(i!==34)break;a.displayName=t.string();continue}case 5:{if(i!==42)break;a.countrycode=t.string();continue}case 7:{if(i!==56)break;a.score=t.uint64().toString();continue}case 8:{if(i!==66)break;a.bitmojiInfo=Vp.decode(t,t.uint32());continue}case 9:{if(i!==74)break;a.friendInfo=Gp.decode(t,t.uint32());continue}case 10:{if(i!==80)break;a.zodiac=P$(t.int32());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Hp.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u;const c=KN();return c.userId=(n=e.userId)!==null&&n!==void 0?n:"",c.username=(t=e.username)!==null&&t!==void 0?t:"",c.birthdate=(r=e.birthdate)!==null&&r!==void 0?r:"",c.displayName=(a=e.displayName)!==null&&a!==void 0?a:"",c.countrycode=(i=e.countrycode)!==null&&i!==void 0?i:"",c.score=(o=e.score)!==null&&o!==void 0?o:"0",c.bitmojiInfo=e.bitmojiInfo!==void 0&&e.bitmojiInfo!==null?Vp.fromPartial(e.bitmojiInfo):void 0,c.friendInfo=e.friendInfo!==void 0&&e.friendInfo!==null?Gp.fromPartial(e.friendInfo):void 0,c.zodiac=(u=e.zodiac)!==null&&u!==void 0?u:Ge.Invalid,c}};function qN(e){const n=Math.trunc(e.getTime()/1e3).toString(),t=e.getTime()%1e3*1e6;return{seconds:n,nanos:t}}function YN(e){let n=(globalThis.Number(e.seconds)||0)*1e3;return n+=(e.nanos||0)/1e6,new globalThis.Date(n)}var xt;(function(e){e.LIVE_CAMERA="LIVE_CAMERA",e.STORY_REPLY="STORY_REPLY",e.CHAT_REPLY="CHAT_REPLY",e.RESTART="RESTART",e.PREVIEW_CANCEL="PREVIEW_CANCEL",e.MAP="MAP",e.BITMOJI_STICKERS="BITMOJI_STICKERS",e.POST_CAPTURE_PREVIEW="POST_CAPTURE_PREVIEW",e.POST_CAPTURE_TRANSCODING="POST_CAPTURE_TRANSCODING",e.UNRECOGNIZED="UNRECOGNIZED"})(xt||(xt={}));function L$(e){switch(e){case 0:case"LIVE_CAMERA":return xt.LIVE_CAMERA;case 1:case"STORY_REPLY":return xt.STORY_REPLY;case 2:case"CHAT_REPLY":return xt.CHAT_REPLY;case 3:case"RESTART":return xt.RESTART;case 4:case"PREVIEW_CANCEL":return xt.PREVIEW_CANCEL;case 5:case"MAP":return xt.MAP;case 6:case"BITMOJI_STICKERS":return xt.BITMOJI_STICKERS;case 7:case"POST_CAPTURE_PREVIEW":return xt.POST_CAPTURE_PREVIEW;case 8:case"POST_CAPTURE_TRANSCODING":return xt.POST_CAPTURE_TRANSCODING;case-1:case"UNRECOGNIZED":default:return xt.UNRECOGNIZED}}function B$(e){switch(e){case xt.LIVE_CAMERA:return 0;case xt.STORY_REPLY:return 1;case xt.CHAT_REPLY:return 2;case xt.RESTART:return 3;case xt.PREVIEW_CANCEL:return 4;case xt.MAP:return 5;case xt.BITMOJI_STICKERS:return 6;case xt.POST_CAPTURE_PREVIEW:return 7;case xt.POST_CAPTURE_TRANSCODING:return 8;case xt.UNRECOGNIZED:default:return-1}}var Bo;(function(e){e.NONE="NONE",e.EXPERIMENTAL="EXPERIMENTAL",e.UNRECOGNIZED="UNRECOGNIZED"})(Bo||(Bo={}));function $N(e){switch(e){case 0:case"NONE":return Bo.NONE;case 1:case"EXPERIMENTAL":return Bo.EXPERIMENTAL;case-1:case"UNRECOGNIZED":default:return Bo.UNRECOGNIZED}}function U$(e){switch(e){case Bo.NONE:return 0;case Bo.EXPERIMENTAL:return 1;case Bo.UNRECOGNIZED:default:return-1}}var ka;(function(e){e.DEFAULT="DEFAULT",e.REPLAY_STREAM="REPLAY_STREAM",e.UNRECOGNIZED="UNRECOGNIZED"})(ka||(ka={}));function F$(e){switch(e){case 0:case"DEFAULT":return ka.DEFAULT;case 1:case"REPLAY_STREAM":return ka.REPLAY_STREAM;case-1:case"UNRECOGNIZED":default:return ka.UNRECOGNIZED}}function V$(e){switch(e){case ka.DEFAULT:return 0;case ka.REPLAY_STREAM:return 1;case ka.UNRECOGNIZED:default:return-1}}var it;(function(e){e.ACTIVATION_SOURCE_UNSET="ACTIVATION_SOURCE_UNSET",e.ACTIVATION_SOURCE_DEFAULT="ACTIVATION_SOURCE_DEFAULT",e.CREATIVE="CREATIVE",e.SCAN="SCAN",e.SCAN_HISTORY="SCAN_HISTORY",e.CHAT_FEED_PSA="CHAT_FEED_PSA",e.GROWTH_NOTIFICATION="GROWTH_NOTIFICATION",e.MASS_SNAP="MASS_SNAP",e.SMART_CTA="SMART_CTA",e.MASS_CHAT="MASS_CHAT",e.BILLBOARD_FHP="BILLBOARD_FHP",e.LENS_ACTIVITY_CENTER="LENS_ACTIVITY_CENTER",e.AR_BAR="AR_BAR",e.UNRECOGNIZED="UNRECOGNIZED"})(it||(it={}));function G$(e){switch(e){case 0:case"ACTIVATION_SOURCE_UNSET":return it.ACTIVATION_SOURCE_UNSET;case 1:case"ACTIVATION_SOURCE_DEFAULT":return it.ACTIVATION_SOURCE_DEFAULT;case 2:case"CREATIVE":return it.CREATIVE;case 3:case"SCAN":return it.SCAN;case 4:case"SCAN_HISTORY":return it.SCAN_HISTORY;case 5:case"CHAT_FEED_PSA":return it.CHAT_FEED_PSA;case 6:case"GROWTH_NOTIFICATION":return it.GROWTH_NOTIFICATION;case 7:case"MASS_SNAP":return it.MASS_SNAP;case 8:case"SMART_CTA":return it.SMART_CTA;case 9:case"MASS_CHAT":return it.MASS_CHAT;case 10:case"BILLBOARD_FHP":return it.BILLBOARD_FHP;case 11:case"LENS_ACTIVITY_CENTER":return it.LENS_ACTIVITY_CENTER;case 12:case"AR_BAR":return it.AR_BAR;case-1:case"UNRECOGNIZED":default:return it.UNRECOGNIZED}}function H$(e){switch(e){case it.ACTIVATION_SOURCE_UNSET:return 0;case it.ACTIVATION_SOURCE_DEFAULT:return 1;case it.CREATIVE:return 2;case it.SCAN:return 3;case it.SCAN_HISTORY:return 4;case it.CHAT_FEED_PSA:return 5;case it.GROWTH_NOTIFICATION:return 6;case it.MASS_SNAP:return 7;case it.SMART_CTA:return 8;case it.MASS_CHAT:return 9;case it.BILLBOARD_FHP:return 10;case it.LENS_ACTIVITY_CENTER:return 11;case it.AR_BAR:return 12;case it.UNRECOGNIZED:default:return-1}}function jN(){return{snappable:void 0,lures:void 0,userId:"",entryPoint:xt.LIVE_CAMERA,userData:void 0,persistentStore:void 0,launchParams:void 0,apiDescriptors:[],renderConfig:ka.DEFAULT,activationSource:it.ACTIVATION_SOURCE_UNSET,overridenLaunchTime:void 0}}const Wy={encode(e,n=new X){e.snappable!==void 0&&Fp.encode(e.snappable,n.uint32(10).fork()).join(),e.lures!==void 0&&Mp.encode(e.lures,n.uint32(18).fork()).join(),e.userId!==""&&n.uint32(26).string(e.userId),e.entryPoint!==xt.LIVE_CAMERA&&n.uint32(32).int32(B$(e.entryPoint)),e.userData!==void 0&&Hp.encode(e.userData,n.uint32(42).fork()).join(),e.persistentStore!==void 0&&Lp.encode(e.persistentStore,n.uint32(50).fork()).join(),e.launchParams!==void 0&&Dp.encode(e.launchParams,n.uint32(58).fork()).join(),n.uint32(66).fork();for(const t of e.apiDescriptors)n.int32(U$(t));return n.join(),e.renderConfig!==ka.DEFAULT&&n.uint32(72).int32(V$(e.renderConfig)),e.activationSource!==it.ACTIVATION_SOURCE_UNSET&&n.uint32(80).int32(H$(e.activationSource)),e.overridenLaunchTime!==void 0&&Hr.encode(z$(e.overridenLaunchTime),n.uint32(90).fork()).join(),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=jN();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.snappable=Fp.decode(t,t.uint32());continue}case 2:{if(i!==18)break;a.lures=Mp.decode(t,t.uint32());continue}case 3:{if(i!==26)break;a.userId=t.string();continue}case 4:{if(i!==32)break;a.entryPoint=L$(t.int32());continue}case 5:{if(i!==42)break;a.userData=Hp.decode(t,t.uint32());continue}case 6:{if(i!==50)break;a.persistentStore=Lp.decode(t,t.uint32());continue}case 7:{if(i!==58)break;a.launchParams=Dp.decode(t,t.uint32());continue}case 8:{if(i===64){a.apiDescriptors.push($N(t.int32()));continue}if(i===66){const o=t.uint32()+t.pos;for(;t.pos<o;)a.apiDescriptors.push($N(t.int32()));continue}break}case 9:{if(i!==72)break;a.renderConfig=F$(t.int32());continue}case 10:{if(i!==80)break;a.activationSource=G$(t.int32());continue}case 11:{if(i!==90)break;a.overridenLaunchTime=W$(Hr.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Wy.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o;const u=jN();return u.snappable=e.snappable!==void 0&&e.snappable!==null?Fp.fromPartial(e.snappable):void 0,u.lures=e.lures!==void 0&&e.lures!==null?Mp.fromPartial(e.lures):void 0,u.userId=(n=e.userId)!==null&&n!==void 0?n:"",u.entryPoint=(t=e.entryPoint)!==null&&t!==void 0?t:xt.LIVE_CAMERA,u.userData=e.userData!==void 0&&e.userData!==null?Hp.fromPartial(e.userData):void 0,u.persistentStore=e.persistentStore!==void 0&&e.persistentStore!==null?Lp.fromPartial(e.persistentStore):void 0,u.launchParams=e.launchParams!==void 0&&e.launchParams!==null?Dp.fromPartial(e.launchParams):void 0,u.apiDescriptors=((r=e.apiDescriptors)===null||r===void 0?void 0:r.map(c=>c))||[],u.renderConfig=(a=e.renderConfig)!==null&&a!==void 0?a:ka.DEFAULT,u.activationSource=(i=e.activationSource)!==null&&i!==void 0?i:it.ACTIVATION_SOURCE_UNSET,u.overridenLaunchTime=(o=e.overridenLaunchTime)!==null&&o!==void 0?o:void 0,u}};function z$(e){const n=Math.trunc(e.getTime()/1e3).toString(),t=e.getTime()%1e3*1e6;return{seconds:n,nanos:t}}function W$(e){let n=(globalThis.Number(e.seconds)||0)*1e3;return n+=(e.nanos||0)/1e6,new globalThis.Date(n)}const u4={aquarius:Ge.Aquarius,aries:Ge.Aries,cancer:Ge.Cancer,capricorn:Ge.Capricorn,gemini:Ge.Gemini,leo:Ge.Leo,libra:Ge.Libra,pisces:Ge.Pisces,sagittarius:Ge.Sagittarius,scorpio:Ge.Scorpio,taurus:Ge.Taurus,virgo:Ge.Virgo},K$=new Set(Object.keys(u4));function q$(e){return K$.has(e)}function Y$(e){return ln(e)||$$(e)}function $$(e){return Zt(e)&&Li(e.userId)&&j$(e.userData)&&nj(e.launchParams)}function j$(e){return ln(e)||X$(e)}function X$(e){return Zt(e)&&Li(e.userId)&&Li(e.username)&&Li(e.birthdate)&&Li(e.displayName)&&Li(e.countrycode)&&Li(e.score)&&Z$(e.bitmojiInfo)&&J$(e.friendInfo)&&tj(e.zodiac)}function Z$(e){return ln(e)||Q$(e)}function Q$(e){return Zt(e)&&Li(e.avatarId)&&Li(e.selfieId)}function J$(e){return ln(e)||ej(e)}function ej(e){return Zt(e)&&jI(e.friendshipStart)&&jI(e.lastInteraction)&&pD(e.streak)}function tj(e){return ln(e)||q$(e)}function nj(e){return ln(e)||rj(e)}function rj(e){return Zt(e)&&xb(aj)(e)}function aj(e){return Rt(e)||ml(e)||Hi(Rt,e)||Hi(ml,e)}const ij=(e,n)=>{var t;return Wy.encode(Wy.fromPartial(Object.assign(Object.assign({},e),{userData:e.userData?Object.assign(Object.assign({},e.userData),{zodiac:!((t=e.userData)===null||t===void 0)&&t.zodiac?u4[e.userData.zodiac]:void 0}):void 0,launchParams:e.launchParams?oj(e.launchParams):void 0,persistentStore:{store:new Uint8Array(n)}}))).finish().slice()};function oj(e){return{data:new TextEncoder().encode(JSON.stringify(e))}}class Ki{constructor(n){this.matrix=n}}Ki.MirrorX=new Ki([-1,0,0,0,1,0,1,0,1]);Ki.MirrorY=new Ki([1,0,0,0,-1,0,0,1,1]);Ki.Identity=new Ki([1,0,0,0,1,0,0,0,1]);function sj(e){return e instanceof Ki}const cS={cameraType:"user",fpsLimit:Number.POSITIVE_INFINITY},k1=e=>new Error(`${e}. This CameraKitSource is not attached to a CameraKitSession.`),uj=new Set(Object.keys({user:0,environment:0}));function lj(e){return e instanceof fS}function cj(e){return ln(e)||fj(e)}function fj(e){return Zt(e)&&hj(e.cameraType)&&pD(e.fpsLimit)}function dj(e){return uj.has(e)}function hj(e){return ln(e)||dj(e)}let fS=(()=>{var e;let n=[],t,r;return e=class l4{constructor(i,o={},u={}){this.sourceInfo=(Of(this,n),i),this.subscriber=o,this.deviceInfo=Object.assign(Object.assign({},cS),Gs(u))}attach(i,o,u){return ye(this,void 0,void 0,function*(){if(this.lensCore)throw new Error("This CameraKitSource has already been attached to this CameraKitSession and cannot be reattached, even after detachment.");this.lensCore=i,yield i.useMediaElement({autoplayNewMedia:!1,autoplayPreviewCanvas:!1,media:this.sourceInfo.media,pauseExistingMedia:!1,replayTrackingData:this.sourceInfo.replayTrackingData,requestWebcam:!1,startOnFrontCamera:["user","front"].includes(this.deviceInfo.cameraType),useManualFrameProcessing:this.sourceInfo.useManualFrameProcessing});const c=this.deviceInfo.fpsLimit<Number.POSITIVE_INFINITY?this.deviceInfo.fpsLimit:0;yield i.setFPSLimit({fps:c}),yield i.setRenderSize({mode:"matchInputResolution"}),this.subscriber.onAttach&&(yield this.subscriber.onAttach(this,i,u,o))})}copy(i={}){return new l4(this.sourceInfo,this.subscriber,Object.assign(Object.assign({},this.deviceInfo),i))}detach(i){if(!this.lensCore)return Promise.reject(k1("Cannot detach"));if(this.subscriber.onDetach)return this.subscriber.onDetach(i)}setRenderSize(i,o){if(!this.lensCore)return Promise.reject(k1("Cannot setRenderSize"));const u={width:i,height:o};return this.lensCore.setRenderSize({mode:"explicit",target:u})}setTransform(i){if(!this.lensCore)return Promise.reject(k1("Cannot setTransform"));const o=new Float32Array(i.matrix);return this.lensCore.setInputTransform({matrix:o})}},t=[Za(ml,ml)],r=[Za(sj)],Un(e,null,t,{kind:"method",name:"setRenderSize",static:!1,private:!1,access:{has:a=>"setRenderSize"in a,get:a=>a.setRenderSize}},null,n),Un(e,null,r,{kind:"method",name:"setTransform",static:!1,private:!1,access:{has:a=>"setTransform"in a,get:a=>a.setTransform}},null,n),e})();function pj(e,n,t=Cb){return r=>new Xt(a=>{let i=0;return r.pipe(va(o=>{i++,i<=e&&a.next({type:"initial",value:o})}),YK(r.pipe(jK(n,t))),va(o=>{i>e&&a.next({type:"debounced",values:o.slice(e)}),i=0})).subscribe()})}const mj=Object.assign(Object.assign({},cS),{transform:Ki.Identity,disableSourceAudio:!1});function XN(e){e&&(e.port.close(),e.port.onmessage=null,e.disconnect())}function ZN(e){return ye(this,void 0,void 0,function*(){if(!(!e||e.state==="closed"))return e.close()})}function vj(e,n){return e.pipe(pj(1,1e3),Ve(t=>{if(t.type==="initial")n(new Error("The first audio processing error before debouncing.",{cause:t.value}));else if(t.type==="debounced"){const r=[...new Set(t.values.map(Bb))].join(`
`);n(new Error(`Debounced ${t.values.length} audio processing errors.`,{cause:new Error(r)}))}})).subscribe()}function c4(e,n={}){var t;const{facingMode:r}=e.getVideoTracks().length>0?e.getVideoTracks()[0].getSettings():{facingMode:void 0},a=r==="user"||r==="environment"?r:void 0,i=Object.assign(Object.assign(Object.assign({},mj),Gs(n)),{cameraType:(t=n.cameraType)!==null&&t!==void 0?t:a}),o=e.getAudioTracks().length>0&&!i.disableSourceAudio,u=44100;let c,f,h,p;if(o){const g=`
        class MicrophoneWorkletProcessor extends AudioWorkletProcessor {
            process(inputs, outputs, parameters) {
                this.port.postMessage({
                    eventType: 'data',
                    buffer: inputs
                });
                return true;
            }
        }
        registerProcessor('microphone-worklet', MicrophoneWorkletProcessor);`,y=new Blob([g],{type:"application/javascript"});p=URL.createObjectURL(y)}let m;return new fS({media:e},{onAttach:(g,y,b)=>ye(this,void 0,void 0,function*(){if(yield g.setTransform(i.transform),o){const E=new fr;m=vj(E,b),yield y.setAudioParameters({parameters:{numChannels:2,sampleRate:u}});try{XN(h),f==null||f.disconnect(),yield ZN(c)}catch(w){b($o(w))}c=new AudioContext,f=c.createMediaStreamSource(e);const _=f;c.audioWorklet.addModule(p).then(()=>{c&&(h=new AudioWorkletNode(c,"microphone-worklet"),_.connect(h),h.connect(c.destination),h.port.onmessage=w=>{if(w.data.eventType==="data"){const I=w.data.buffer[0][0];if(!I)return;let R=[I];{const C=w.data.buffer[0].length>1?w.data.buffer[0][1]:I.slice();R.push(C)}y.processAudioSampleBuffer({input:R}).catch(C=>E.next(C))}})}).catch(w=>{b(w)})}}),onDetach:g=>ye(this,void 0,void 0,function*(){h&&(XN(h),h=void 0),f&&(f.disconnect(),f=void 0),c&&(yield ZN(c).catch(g),c=void 0),m&&(m.unsubscribe(),m=void 0)})},i)}const gj=Object.assign(Object.assign({},cS),{trackingData:new ArrayBuffer(0)});function yj(e,n={}){const{trackingData:t}=Object.assign(Object.assign({},gj),Gs(n)),r=t.byteLength>0?{buffer:t}:void 0;return new fS({media:e,replayTrackingData:r},{},n)}const bv=De("logEntries",()=>dD().asObservable()),QN=()=>({avgFps:0,averageProcessingTime:0,n:0,processingTimeBuckets:new Uint32Array(f4+1),procFrameCount:0,procFrameMean:0,procFrameD2:0}),bj=1,f4=200;class Sj{constructor(n){this.instances=n,this.state=Object.assign({},QN()),this.instances.add(this)}update(n){this.computeRunningStats(n)}measure(){let n=0,t=0;for(;n<this.state.processingTimeBuckets.length&&(t+=this.state.processingTimeBuckets[n],!(t>=(this.state.n+1)/2));n++);return{avgFps:this.state.avgFps,lensFrameProcessingTimeMsAvg:this.state.procFrameMean,lensFrameProcessingTimeMsStd:Math.sqrt(this.state.procFrameD2/this.state.procFrameCount),lensFrameProcessingTimeMsMedian:this.state.n>0?n:0,lensFrameProcessingN:this.state.n}}reset(){this.state=Object.assign({},QN())}end(){this.instances.delete(this)}computeRunningStats(n){const t=n-this.state.procFrameMean;this.state.procFrameCount+=1,this.state.procFrameMean+=t/this.state.procFrameCount;const r=n-this.state.procFrameMean;if(this.state.procFrameD2+=t*r,this.priorFrameCompletedTime===void 0)this.priorFrameCompletedTime=performance.now();else{const a=(performance.now()-this.priorFrameCompletedTime)/1e3;a<bj&&(this.state.avgFps=(this.state.avgFps+1/a)/2),this.priorFrameCompletedTime=performance.now()}this.state.n++,this.state.processingTimeBuckets[Math.min(Math.round(n),f4)]++}}const x1=gt("RenderingMetrics");let Ej=(()=>{var e;let n=[],t;return e=class{constructor(a){this.measurementInstances=(Of(this,n),void 0),this.measurementInstances=new Set,this.subscription=a.subscribe({next:i=>{try{for(const o of this.measurementInstances.values())o.update(i.processingTimeMs)}catch(o){x1.error(o)}},error:i=>{x1.error(i)}})}beginMeasurement(){return new Sj(this.measurementInstances)}destroy(){this.subscription.unsubscribe()}},t=[sr(x1)],Un(e,null,t,{kind:"method",name:"beginMeasurement",static:!1,private:!1,access:{has:r=>"beginMeasurement"in r,get:r=>r.beginMeasurement}},null,n),e})();const _j=gt("LensPersistenceStore"),d4=De("lensPersistenceStore",[Ar.token],e=>{const n=new wl({databaseName:"lensPersistenceStore"});return e.registerSavePersistentStoreCallback((t,r)=>ye(void 0,void 0,void 0,function*(){try{yield n.store(t,r)}catch(a){_j.error(FW(`Error occurred while storing data for lens ${t}.`,a))}})),n});function Aj(e){return n=>t=>n(a=>{const i=a.slice();return[i.shift()].concat(e.map(o=>{var u;return`${(u=t[o])!==null&&u!==void 0?u:""}${i.shift()}`})).concat(i).join("")})}const Ke=Aj(["privacyPolicyUrl","termsOfServiceUrl","learnMoreUrl"]),Tm={"en-US":{legalPromptMessage:Ke(e=>e`By using Lenses, you acknowledge reading Snaps <a href="${0}" target="_blank">Privacy Policy</a> and agree to Snaps <a href="${0}" target="_blank">Terms of Service</a>. Some lenses use information about your face, hands and voice to work. <a href="${0}" target="_blank">Learn More</a>, and if you want to agree and continue, tap below.`),legalPromptAccept:"I Agree",legalPromptReject:"Dismiss",legalPromptTermsOfService:"Terms of Service",legalPromptVariantGMessage:"This feature uses information about face(s), hands and voice(s) detected by the camera and microphone to work. With this feature, you can apply fun and useful augmented reality effects on top of selfies and images. Our camera uses technology to locate certain features (like where your hands, eyes, and nose are) and uses that information to accurately position the feature with the image sensed by the camera. Any information that is collected will be deleted as soon as possible (typically soon after the app is closed) and always within no more than three years.<br/><br/>If you want to agree and continue, tap below.",legalPromptVariantGAdultOrChild:"Are you an adult or child?",legalPromptVariantGFindYourParent:"Please find your parent or legal guardian.",legalPromptVariantGIAmGuardian:"I am the child's guardian",legalPromptVariantGCancel:"Cancel",legalPromptVariantGAdult:"Adult",legalPromptVariantGChild:"Child"},ar:{legalPromptMessage:Ke(e=>e`     <a href="${0}" target="_blank"> </a>   <a href="${0}" target="_blank"> </a>  .          . <a href="${0}" target="_blank">    </a>      .`),legalPromptAccept:" ",legalPromptReject:"",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"     ()  ()    .              .         (     )            .           (     )        .<br/><br/>      .",legalPromptVariantGAdultOrChild:"     ",legalPromptVariantGFindYourParent:"       .",legalPromptVariantGIAmGuardian:"   ",legalPromptVariantGCancel:"",legalPromptVariantGAdult:" ",legalPromptVariantGChild:""},"bn-BD":{legalPromptMessage:Ke(e=>e`     Snap- <a href="${0}" target="_blank"> </a>   Snap- <a href="${0}" target="_blank"> </a>-             ,      <a href="${0}" target="_blank"> </a>             `),legalPromptAccept:"  ",legalPromptReject:" ",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"          ,                             (  ,    )                              (    )          <br/><br/>            ",legalPromptVariantGAdultOrChild:"    ?",legalPromptVariantGFindYourParent:"       ",legalPromptVariantGIAmGuardian:"  ",legalPromptVariantGCancel:" ",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"bn-IN":{legalPromptMessage:Ke(e=>e`  ,  Snap\' \"<a href="${0}" target="_blank">\" </a>   Snap\' <a href="${0}" target="_blank"> </a>-             ,       <a href="${0}" target="_blank"> </a>           `),legalPromptAccept:" ",legalPromptReject:" ",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"           (),   ()       ,                         (  ,    )                    <br/><br/>       ,   ",legalPromptVariantGAdultOrChild:"     ?",legalPromptVariantGFindYourParent:"   -    ",legalPromptVariantGIAmGuardian:"  ",legalPromptVariantGCancel:" ",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"da-DK":{legalPromptMessage:Ke(e=>e`Nr du anvender Linser, bekrfter du, at du har lst Snaps <a href="${0}" target="_blank">privatlivspolitik</a> og accepterer Snaps <a href="${0}" target="_blank">servicevilkr</a>. Nogle Linser bruger information om dit ansigt, dine hnder og din stemme for at fungere. <a href="${0}" target="_blank">F mere at vide</a>, og tryk nedenfor, hvis du vil acceptere og fortstte.`),legalPromptAccept:"Jeg er enig",legalPromptReject:"Afvis",legalPromptTermsOfService:"Servicevilkr",legalPromptVariantGMessage:"Denne funktion bruger oplysninger om ansigt(er), hnder og stemme(r), der registreres af kameraet og mikrofonen, for at kunne fungere. Med denne funktion kan du anvende sjove og nyttige augmented reality-effekter p selfies og billeder. Vores kamera bruger teknologi til at finde bestemte trk (f.eks. hvor dine hnder, jne og nse er) og bruger disse oplysninger til njagtigt at placere trkket i billedet, der opfanges af kameraet. Alle oplysninger, der indsamles, slettes s hurtigst som muligt (typisk kort efter, at appen lukkes) og altid inden for hjst tre r.<br/><br/>Tryk herunder, hvis du accepterer og vil fortstte.",legalPromptVariantGAdultOrChild:"Er du voksen eller barn?",legalPromptVariantGFindYourParent:"Find din forlder eller vrge.",legalPromptVariantGIAmGuardian:"Jeg er barnets vrge",legalPromptVariantGCancel:"Annuller",legalPromptVariantGAdult:"Voksen",legalPromptVariantGChild:"Barn"},"de-DE":{legalPromptMessage:Ke(e=>e`Wenn du Linsen verwendet, versicherst du, dass du die <a href="${0}" target="_blank">Datenschutzbestimmungen</a> von Snap gelesen hast und den <a href="${0}" target="_blank">Servicebestimmungen</a> von Snap zustimmst. Manche Linsen verarbeiten Informationen zu deinem Gesicht, deinen Hnden und deiner Stimme, um zu funktionieren. <a href="${0}" target="_blank">Hier erfhrst du mehr.</a> Tippe unten, wenn du zustimmen und fortfahren mchtest.`),legalPromptAccept:"Zustimmen",legalPromptReject:"Ablehnen",legalPromptTermsOfService:"Servicebestimmungen",legalPromptVariantGMessage:"Diese Funktion verwendet Informationen ber Gesichter, Hnde und Stimmen, die von der Kamera und dem Mikrofon erkannt werden. Mit dieser Funktion kannst du lustige und ntzliche Augmented Reality-Effekte auf Selfies und Bilder anwenden. Unsere Kamera nutzt Technologien, um bestimmte Merkmale zu lokalisieren (z. B. wo sich deine Hnde, Augen und Nase befinden), und verwendet diese Informationen, um dieses Merkmal dann exakt ber das von der Kamera erfasste Bild zu positionieren. Alle gesammelten Informationen werden so schnell wie mglich gelscht (in der Regel kurz nach dem Schlieen der App), sptestens aber innerhalb von dreiJahren.<br/><br/>Tippe unten, um zuzustimmen und fortzufahren.",legalPromptVariantGAdultOrChild:"Bist du erwachsen oder minderjhrig?",legalPromptVariantGFindYourParent:"Bitte hole ein Elternteil oder Erziehungsberechtigten.",legalPromptVariantGIAmGuardian:"Ich bin der Erziehungsberechtigte des Kindes.",legalPromptVariantGCancel:"Abbrechen",legalPromptVariantGAdult:"Erwachsen",legalPromptVariantGChild:"Minderjhrig"},"el-GR":{legalPromptMessage:Ke(e=>e`  ,      <a href="${0}" target="_blank"> </a>  Snap      <a href="${0}" target="_blank"> </a>  Snap.        ,         . <a href="${0}" target="_blank"> </a>        ,  .`),legalPromptAccept:"",legalPromptReject:"",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"        ,             ,   .                 .            (    ,      )                   .          (      )          .<br/><br/>     ,  .",legalPromptVariantGAdultOrChild:"   ;",legalPromptVariantGFindYourParent:"       .",legalPromptVariantGIAmGuardian:"    ",legalPromptVariantGCancel:"",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"en-GB":{legalPromptMessage:Ke(e=>e`By using Lenses, you acknowledge reading Snap\s <a href="${0}" target="_blank">Privacy Policy</a> and agree to Snap\s <a href="${0}" target="_blank">Terms of Service</a>. Some Lenses use information about your face, hands and voice to work. <a href="${0}" target="_blank">Learn More</a>, and if you want to agree and continue, tap below.`),legalPromptAccept:"I agree",legalPromptReject:"Dismiss",legalPromptTermsOfService:"Terms of Service",legalPromptVariantGMessage:"This feature uses information about face(s), hands and voice(s) detected by the camera and microphone to work. With this feature, you can apply fun and useful augmented reality effects on top of selfies and images. Our camera uses technology to locate certain features (like where your hands, eyes and nose are) and uses that information to accurately position the feature with the image sensed by the camera. Any information that is collected will be deleted as soon as possible (typically soon after the app is closed) and always within no more than three years.<br/><br/>If you want to agree and continue, tap below.",legalPromptVariantGAdultOrChild:"Are you an adult or child?",legalPromptVariantGFindYourParent:"Please find your parent or legal guardian.",legalPromptVariantGIAmGuardian:"I am the childs guardian",legalPromptVariantGCancel:"Cancel",legalPromptVariantGAdult:"Adult",legalPromptVariantGChild:"Child"},es:{legalPromptMessage:Ke(e=>e`Al usar Lentes, confirmas que leste la <a href="${0}" target="_blank">Poltica de privacidad</a> de Snap y aceptas las <a href="${0}" target="_blank">Condiciones de servicio</a>. Algunos Lentes funcionan usando informacin acerca de tu cara, tus manos y tu voz. <a href="${0}" target="_blank">Obtn ms informacin</a> y, si quieres aceptar y continuar, toca a continuacin.`),legalPromptAccept:"Acepto",legalPromptReject:"Ignorar",legalPromptTermsOfService:"Condiciones de servicio",legalPromptVariantGMessage:"Esta funcin utiliza informacin sobre caras, manos y voces detectadas por la cmara y el micrfono para funcionar. Con esta funcin, puedes aplicar divertidos y tiles efectos de realidad aumentada sobre selfies e imgenes. Nuestra cmara utiliza tecnologa para localizar ciertos rasgos (como dnde estn las manos, los ojos y la nariz) y utiliza dicha informacin para posicionar correctamente el rasgo sobre la imagen detectada por la cmara. Toda la informacin recopilada se eliminar tan pronto como sea posible (por lo general, poco despus de que se cierre la app), siempre en un plazo menor a tres aos.<br/><br/>Para aceptar y continuar, toca a continuacin.",legalPromptVariantGAdultOrChild:"Eres mayor o menor de edad?",legalPromptVariantGFindYourParent:"Busca a tu padre, madre o tutor legal.",legalPromptVariantGIAmGuardian:"Soy el tutor legal del menor",legalPromptVariantGCancel:"Cancelar",legalPromptVariantGAdult:"Mayor de edad",legalPromptVariantGChild:"Menor de edad"},"es-AR":{legalPromptMessage:Ke(e=>e`Al usar los Lentes, confirms que leste la <a href="${0}" target="_blank">Poltica de privacidad</a> de Snap y que acepts sus <a href="${0}" target="_blank">Condiciones de servicio</a>. Algunos Lentes usan informacin sobre tu cara, tus manos y tu voz para funcionar. <a href="${0}" target="_blank">Obten ms informacin</a>, y si quers aceptar y continuar, toc el botn que aparece ms abajo.`),legalPromptAccept:"Acepto",legalPromptReject:"Omitir",legalPromptTermsOfService:"Condiciones de servicio",legalPromptVariantGMessage:"Esta funcin utiliza la informacin sobre caras, manos y voces detectadas por la cmara y el micrfono. Con esta funcin, pods aplicar divertidos y tiles efectos de realidad aumentada sobre selfies e imgenes. Nuestra cmara utiliza tecnologa para localizar ciertos rasgos (como dnde estn las manos, los ojos y la nariz) y utiliza esa informacin para posicionar con precisin el rasgo con la imagen detectada por la cmara. Toda la informacin recopilada se eliminar lo antes posible (normalmente poco despus de cerrar la aplicacin) y siempre en un plazo mximo de tresaos.<br/><br/>Si deseas aceptar y continuar, toc a continuacin.",legalPromptVariantGAdultOrChild:"Sos mayor o menor de edad?",legalPromptVariantGFindYourParent:"Busc a tu padre, madre o tutor legal.",legalPromptVariantGIAmGuardian:"Soy el tutor legal del menor",legalPromptVariantGCancel:"Cancelar",legalPromptVariantGAdult:"Mayor de edad",legalPromptVariantGChild:"Menor de edad"},"es-ES":{legalPromptMessage:Ke(e=>e`Al usar las Lentes, reconoces haber ledo la <a href="${0}" target="_blank">Poltica de privacidad</a> y aceptas los <a href="${0}" target="_blank">Trminos del servicio</a> de Snap. Algunas Lentes funcionan utilizando informacin de tu cara, tus manos o tu voz. Puedes obtener <a href="${0}" target="_blank">ms informacin</a>, y si quieres aceptar y continuar, toca el botn a continuacin.`),legalPromptAccept:"Acepto",legalPromptReject:"Descartar",legalPromptTermsOfService:"Trminos del servicio",legalPromptVariantGMessage:"Para su funcionamiento, esta funcin hace uso de los datos sobre la cara, las manos y las voces detectados por la cmara y el micrfono. Con ella, puedes aplicar efectos de realidad aumentada, tanto tiles como divertidos, en selfies e imgenes. Nuestra cmara utiliza la tecnologa para localizar determinados elementos (como la posicin de las manos, los ojos o la nariz) y utiliza esta informacin para colocar el elemento sobre la imagen de forma fiel, segn lo detectado por la cmara. Cualquier informacin que se recopile se eliminar lo antes posible (normalmente, al cerrar la aplicacin) y nunca se almacenar durante ms de tres aos.<br/><br/>Si quieres aceptar y continuar, toca a continuacin.",legalPromptVariantGAdultOrChild:"Eres una persona adulta o eres menor?",legalPromptVariantGFindYourParent:"Habla con tu padre, madre o tutor/a legal.",legalPromptVariantGIAmGuardian:"Soy el tutor o tutora legal del menor",legalPromptVariantGCancel:"Cancelar",legalPromptVariantGAdult:"Adulto",legalPromptVariantGChild:"Menor"},"es-MX":{legalPromptMessage:Ke(e=>e`Al usar Lentes, confirmas que leste la <a href="${0}" target="_blank">Poltica de privacidad</a> y aceptas los <a href="${0}" target="_blank">Trminos y condiciones de servicio</a> de Snap. Algunos lentes usan informacin sobre tu cara, manos o voz para funcionar. <a href="${0}" target="_blank">Obtn ms informacin</a> y, si quieres aceptarlo, toca a continuacin.`),legalPromptAccept:"Acepto",legalPromptReject:"Ignorar",legalPromptTermsOfService:"Trminos y condiciones de servicio",legalPromptVariantGMessage:"Esta caracterstica utiliza informacin sobre la(s) cara(s), manos y voz o voces detectadas por la cmara y el micrfono para funcionar. Con ella, puedes aplicar efectos de realidad aumentada tiles y divertidos a selfies e imgenes. Nuestra cmara usa tecnologa para localizar ciertos rasgos (como dnde estn tus manos, ojos y nariz) y utiliza esa informacin para posicionar con precisin esta caracterstica con la imagen que la cmara percibi. Toda la informacin que se recopile se eliminar lo ms pronto posible (por lo general, poco despus de cerrar la app) y nunca exceder los tres das.<br/><br/>Si quieres aceptar y proseguir, toca a continuacin.",legalPromptVariantGAdultOrChild:"Eres mayor o menor de edad?",legalPromptVariantGFindYourParent:"Busca a tu madre, padre o quien tenga tu custodia legal.",legalPromptVariantGIAmGuardian:"Tengo la custodia de la persona menor",legalPromptVariantGCancel:"Cancelar",legalPromptVariantGAdult:"Persona adulta",legalPromptVariantGChild:"Persona menor"},"fi-FI":{legalPromptMessage:Ke(e=>e`Kyttmll tehosteita ilmaiset lukeneesi Snapin <a href="${0}" target="_blank">tietosuojaselosteen</a> ja hyvksyvsi Snapin <a href="${0}" target="_blank">palveluehdot</a>. Jotkin tehosteet kyttvt toimintaan tietoja kasvoistasi, ksistsi ja nestsi. <a href="${0}" target="_blank">Listietoja saat tlt</a>. Hyvksy ja jatka napauttamalla alla olevaa painiketta.`),legalPromptAccept:"Hyvksyn",legalPromptReject:"Hylk",legalPromptTermsOfService:"Palveluehdot",legalPromptVariantGMessage:"Tm ominaisuus kytt toimiakseen tietoja kameran ja mikrofonin havaitsemista kasvoista, ksist ja nist. Ominaisuudella voit list hauskoja ja hydyllisi listyn todellisuuden efektej selfieiden ja kuvien plle. Kameramme kytt teknologiaa tiettyjen piirteiden paikallistamiseen (kuten ksiesi, silmiesi ja nensi sijaintiin) ja kytt nit tietoja ominaisuuden asettamiseen oikeaan kohtaan kameran havaitsemassa kuvassa. Kaikki kertyt tiedot poistetaan mahdollisimman pian (yleens pian sovelluksen sulkemisen jlkeen) ja aina viimeistn kolmen vuoden kuluttua.<br/><br/>Jos haluat hyvksy ja jatkaa, napauta painiketta alla. ",legalPromptVariantGAdultOrChild:"Oletko aikuinen vai lapsi?",legalPromptVariantGFindYourParent:"Etsi vanhempasi tai huoltajasi.",legalPromptVariantGIAmGuardian:"Olen lapsen huoltaja",legalPromptVariantGCancel:"Peruuta",legalPromptVariantGAdult:"Aikuinen",legalPromptVariantGChild:"Lapsi"},"fil-PH":{legalPromptMessage:Ke(e=>e`Sa pamamagitan ng paggamit sa Lenses, kinikilala mong binasa mo ang <a href="${0}" target="_blank">Privacy Policy</a> ng Snap at sumasang-ayon ka sa <a href="${0}" target="_blank">Terms of Service</a> ng Snap. Ang ilang lens ay gumagamit ng impormasyon tungkol sa iyong mukha , mga kamay at boses para gumana. <a href="${0}" target="_blank">Alamin Pa</a>, at kung gusto mong sumang-ayon at magpatuloy, mag-tap sa ibaba.`),legalPromptAccept:"Sang-ayon Ako",legalPromptReject:"I-dismiss",legalPromptTermsOfService:"Terms of Service",legalPromptVariantGMessage:"Ang feature na ito ay gumagamit ng impormasyon tungkol sa (mga) mukha, mga kamay at (mga) boses na nade-detect ng camera at microphone para gumana ito. Gamit ang feature na ito, pwede kang mag-apply ng nakakatuwa at kapaki-pakinabang na augmented reality effects sa ibabaw ng mga selfie at image. Gumagamit ang camera namin ng technology para matukoy ang mga partikular na anyo (tulad ng kung nasaan ang iyong mga kamay, mga mata, at ilong) at ginagamit nito ang impormasyong iyon para eksaktong mapwesto ang anyong iyon sa image na nase-sense ng camera. Ang anumang impormasyong kinokolekta ay ide-delete sa lalong madaling panahon (karaniwan ay maikling panahon lang matapos isara ang app) at palaging hindi lalampas nang tatlong taon.<br/><br/>Kung gusto mong sumang-ayon at magpatuloy, mag-tap sa ibaba.",legalPromptVariantGAdultOrChild:"Isa ka bang adult o bata?",legalPromptVariantGFindYourParent:"Pakihanap ang iyong magulang o legal guardian.",legalPromptVariantGIAmGuardian:"Ako ang guardian ng bata",legalPromptVariantGCancel:"I-cancel",legalPromptVariantGAdult:"Adult",legalPromptVariantGChild:"Bata"},"fr-FR":{legalPromptMessage:Ke(e=>e`En utilisant les Lenses, vous reconnaissez avoir lu la <a href="${0}" target="_blank">Politique de confidentialit</a> de Snap et vous acceptez les <a href="${0}" target="_blank">Conditions d\'utilisation du service</a> de Snap. Le fonctionnement de certaines Lenses requiert l\'utilisation d\'informations sur votre visage, vos mains et votre voix. <a href="${0}" target="_blank">En savoir plus</a>. Si vous acceptez ces conditions et souhaitez continuer, appuyez ci-dessous.`),legalPromptAccept:"J'accepte",legalPromptReject:"Ignorer",legalPromptTermsOfService:"Conditions d'utilisation du service",legalPromptVariantGMessage:"Pour fonctionner, cette fonctionnalit utilise des informations sur le ou les visages, les mains et la ou les voix dtects par l'appareil photo et le micro. Elle vous permet d'appliquer des effets en ralit augmente amusants et utiles sur vos selfies et vos images. Notre appareil photo utilise une technologie qui localise certaines caractristiques (comme l'emplacement de vos mains, de vos yeux et de votre nez) afin de positionner avec prcision la fonctionnalit sur l'image dtecte par l'appareil photo. Toutes les informations collectes sont supprimes ds que possible (gnralement peu aprs la fermeture de l'application) et toujours dans un dlai maximum de trois ans.<br/><br/>Si vous souhaitez accepter et continuer, appuyez ci-dessous.",legalPromptVariantGAdultOrChild:"tes-vous adulte ou mineur?",legalPromptVariantGFindYourParent:"Veuillez appeler votre parent ou votre tuteurrice.",legalPromptVariantGIAmGuardian:"Je suis le ou la tuteurrice de l'enfant.",legalPromptVariantGCancel:"Annuler",legalPromptVariantGAdult:"Adulte",legalPromptVariantGChild:"Mineur"},"gu-IN":{legalPromptMessage:Ke(e=>e`  ,      Snap <a href="${0}" target="_blank"> </a>    Snap <a href="${0}" target="_blank"> </a>   .          ,      . <a href="${0}" target="_blank"> </a>,       ,    .`),legalPromptAccept:"  ",legalPromptReject:" ",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"            (),   ()     .                  .     (   ,      )                       .          (       )        .<br/><br/>        ,    .",legalPromptVariantGAdultOrChild:"    ?",legalPromptVariantGFindYourParent:"   -    .",legalPromptVariantGIAmGuardian:"   .",legalPromptVariantGCancel:" ",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"hi-IN":{legalPromptMessage:Ke(e=>e`   ,       Snap  <a href="${0}" target="_blank"> </a>       Snap  <a href="${0}" target="_blank"> </a>           ,        <a href="${0}" target="_blank"> </a>,           ,    `),legalPromptAccept:"  ",legalPromptReject:" ",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"          ,   ()                                   ( ,  ,     )                                         (     )            <br/><br/>        ,    ",legalPromptVariantGAdultOrChild:"     ?",legalPromptVariantGFindYourParent:"  -      ",legalPromptVariantGIAmGuardian:"    ",legalPromptVariantGCancel:" ",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"id-ID":{legalPromptMessage:Ke(e=>e`Dengan menggunakan Lensa, kamu menyatakan bahwa kamu sudah membaca <a href="${0}" target="_blank">Kebijakan Privasi</a> Snap dan menyetujui <a href="${0}" target="_blank">Ketentuan Layanan</a> Snap. Beberapa lensa menggunakan informasi tentang wajah, tangan, dan suaramu agar bisa berfungsi dengan baik. <a href="${0}" target="_blank">Pelajari Selengkapnya</a>, dan silakan ketuk tombol di bawah jika kamu ingin menyetujuinya dan melanjutkan.`),legalPromptAccept:"Saya setuju",legalPromptReject:"Tutup",legalPromptTermsOfService:"Ketentuan Layanan",legalPromptVariantGMessage:"Agar bisa berfungsi, fitur ini menggunakan informasi terkait wajah, tangan, dan suara yang dideteksi oleh kamera serta mikrofon. Dengan fitur ini, efek augmented reality yang menyenangkan dan berguna dapat diterapkan ke selfie dan gambar. Kamera kami menggunakan teknologi untuk menemukan lokasi fitur tertentu (misalnya menemukan bagian tangan, mata, dan hidung), lalu menggunakan informasi tersebut untuk menempatkan fitur secara akurat di gambar yang dideteksi oleh kamera. Informasi apa pun yang dikumpulkan akan segera dihapus (biasanya setelah aplikasi ditutup) dan selalu disimpan tidak lebih dari tiga tahun.<br/><br/>Jika ingin menyetujui dan melanjutkan, ketuk tombol di bawah ini.",legalPromptVariantGAdultOrChild:"Apakah kamu orang dewasa atau anak-anak?",legalPromptVariantGFindYourParent:"Panggil orang tua atau wali resmi.",legalPromptVariantGIAmGuardian:"Saya wali si anak",legalPromptVariantGCancel:"Batal",legalPromptVariantGAdult:"Orang Dewasa",legalPromptVariantGChild:"Anak-Anak"},"it-IT":{legalPromptMessage:Ke(e=>e`Usando le Lenti, confermi di aver letto l\'<a href="${0}" target="_blank">Informativa sulla Privacy</a> di Snap Inc. e di accettare i <a href="${0}" target="_blank">Termini di Servizio</a> di Snap Inc. Alcune Lenti utilizzano informazioni sul tuo viso, le tue mani e la tua voce per funzionare. <a href="${0}" target="_blank">Scopri di pi</a> e, se sei d\'accordo e vuoi continuare, tocca qui sotto.`),legalPromptAccept:"Accetto",legalPromptReject:"Ignora",legalPromptTermsOfService:"Termini di Servizio",legalPromptVariantGMessage:"Questa funzionalit utilizza le informazioni su viso, mani e voce rilevate dalla fotocamera e dal microfono per funzionare. Ti consente di applicare effetti in realt aumentata divertenti e utili ai selfie e alle immagini. La nostra Fotocamera sfrutta una tecnologia specifica per individuare certe parti del corpo (ad esempio mani, occhi e naso) e usa questi dati per posizionarle in modo accurato sull'immagine rilevata. Qualsiasi informazione raccolta viene eliminata appena possibile (di solito poco dopo la chiusura dell'app) e, in ogni caso, entro 3 anni.<br/><br/>Se sei d'accordo e vuoi continuare, tocca qui sotto.",legalPromptVariantGAdultOrChild:"Sei un adulto o un minore?",legalPromptVariantGFindYourParent:"C' bisogno di un genitore o tutore legale.",legalPromptVariantGIAmGuardian:"Sono il tutore del minore",legalPromptVariantGCancel:"Annulla",legalPromptVariantGAdult:"Adulto",legalPromptVariantGChild:"Minore"},"ja-JP":{legalPromptMessage:Ke(e=>e`Snap<a href="${0}" target="_blank"></a><a href="${0}" target="_blank"></a><a href="${0}" target="_blank"></a>`),legalPromptAccept:"",legalPromptReject:"",legalPromptTermsOfService:"",legalPromptVariantGMessage:"Snap3<br/><br/>",legalPromptVariantGAdultOrChild:"",legalPromptVariantGFindYourParent:"",legalPromptVariantGIAmGuardian:"",legalPromptVariantGCancel:"",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"kn-IN":{legalPromptMessage:Ke(e=>e`  , Snap  <a href="${0}" target="_blank"> </a>       Snap  <a href="${0}" target="_blank"> </a>  .     ,     . <a href="${0}" target="_blank"> </a>,       ,   .`),legalPromptAccept:" ",legalPromptReject:"",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"       (),   ()   .  ,            .     ( ,     )             .       (    )      . <br/><br/>     ,   .",legalPromptVariantGAdultOrChild:"   ?",legalPromptVariantGFindYourParent:"      .",legalPromptVariantGIAmGuardian:"  ",legalPromptVariantGCancel:"",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"ko-KR":{legalPromptMessage:Ke(e=>e`  Snap <a href="${0}" target="_blank"> </a>  Snap <a href="${0}" target="_blank"> </a>   .    ,     . <a href="${0}" target="_blank"> </a>,     .`),legalPromptAccept:"",legalPromptReject:"",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"     , ,     .              . Snapchat   (: ,    )   ,          .      (   ) ,  3  .<br/><br/>   .",legalPromptVariantGAdultOrChild:", ?",legalPromptVariantGFindYourParent:"     .",legalPromptVariantGIAmGuardian:" ",legalPromptVariantGCancel:"",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"ml-IN":{legalPromptMessage:Ke(e=>e`   Snap- <a href="${0}" target="_blank"> </a>   Snap- <a href="${0}" target="_blank"> </a>  .     , ,    . <a href="${0}" target="_blank"></a>,     .`),legalPromptAccept:" ",legalPromptReject:" ",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"   ,    (),  ()    .       ,     .       (  , ,   )  ,             .      (   )   () .<br/><br/>    .",legalPromptVariantGAdultOrChild:"     ?",legalPromptVariantGFindYourParent:"    .",legalPromptVariantGIAmGuardian:"   ",legalPromptVariantGCancel:"",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"mr-IN":{legalPromptMessage:Ke(e=>e` ,      Snap  <a href="${0}" target="_blank"> </a>    Snap  <a href="${0}" target="_blank"> </a>  .      ,      . <a href="${0}" target="_blank">  </a>          .`),legalPromptAccept:"  ",legalPromptReject:" ",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"        (),     .  ,             .     (   ,     )              .        (    )       .<br/><br/>       ,   .",legalPromptVariantGAdultOrChild:"      ?",legalPromptVariantGFindYourParent:"      .",legalPromptVariantGIAmGuardian:"   ",legalPromptVariantGCancel:" ",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"ms-MY":{legalPromptMessage:Ke(e=>e`Dengan menggunakan Lensa, anda mengakui membaca <a href="${0}" target="_blank">Dasar Privasi</a> Snap dan bersetuju dengan <a href="${0}" target="_blank">Syarat Perkhidmatan</a> Snap. Sesetengan lensa menggunakan maklumat tentang muka anda, tangan dan suara untuk berfungsi. <a href="${0}" target="_blank">Ketahui Lebih Lanjut</a>, dan jika anda mahu bersetuju dan teruskan, ketik di bawah.`),legalPromptAccept:"Saya Setuju",legalPromptReject:"Abaikan",legalPromptTermsOfService:"Syarat Perkhidmatan",legalPromptVariantGMessage:"Ciri ini menggunakan maklumat muka, tangan dan suara yang dikesan oleh kamera dan mikrofon untuk berfungsi. Dengan ciri ini, anda boleh menggunakan kesan realiti tambahan yang menyeronokkan dan berguna selain swafoto dan gambar. Kamera kami menggunakan teknologi untuk mengesan ciri tertentu (seperti di mana tangan, mata dan hidung anda) dan menggunakan maklumat tersebut untuk meletakkan ciri dengan tepat dengan imej yang dikesan oleh kamera. Sebarang maklumat yang dikumpul akan dipadamkan dengan segera (kebiasaannya sejurus aplikasi ditutup) dan sentiasa dalam tempoh tidak lebih daripada tiga tahun.<br/><br/>Jika anda bersetuju dan ingin teruskan, ketik dibawah.",legalPromptVariantGAdultOrChild:"Adakah anda seorang dewasa atau kanak-kanak?",legalPromptVariantGFindYourParent:"Sila cari ibu bapa atau penjaga anda yang sah.",legalPromptVariantGIAmGuardian:"Saya penjaga kanak-kanak ini",legalPromptVariantGCancel:"Batal",legalPromptVariantGAdult:"Dewasa",legalPromptVariantGChild:"Kanak-kanak"},"nb-NO":{legalPromptMessage:Ke(e=>e`Ved  ta i bruk Linser bekrefter du at du har lest <a href="${0}" target="_blank">personvernbetingelsene</a> og at du godtar <a href="${0}" target="_blank">tjenestevilkrene</a> til Snap. Noen Linser bruker informasjon om ansiktet ditt, hendene dine og stemmen din for  fungere. <a href="${0}" target="_blank">Finn ut mer</a>. Hvis du godtar dette og vil g videre, klikker du nedenfor.`),legalPromptAccept:"Jeg godtar",legalPromptReject:"Avvis",legalPromptTermsOfService:"Tjenestevilkr",legalPromptVariantGMessage:"Denne funksjonen bruker informasjon om ansikter, hender og stemmer som oppdages av kameraet og mikrofonen, for  fungere. Med denne funksjonen kan du legge til artige og nyttige effekter i utvidet virkelighet p selfier og bilder. Kameraet vrt bruker teknologi for  oppdage visse trekk (som hvor hendene, ynene og nesen er), og bruker denne informasjonen til  plassere funksjonen opp bildet som kameraet har fanget opp. All informasjon som samles inn, blir slettet s snart som mulig (vanligvis rett etter at appen lukkes) og alltid innen maks trer.<br/><br/>Hvis du nsker  godta og fortsette, trykker du nedenfor.",legalPromptVariantGAdultOrChild:"Er du en voksen eller et barn?",legalPromptVariantGFindYourParent:"Finn en forelder eller foresatt.",legalPromptVariantGIAmGuardian:"Jeg er barnets foresatt",legalPromptVariantGCancel:"Avbryt",legalPromptVariantGAdult:"Voksen",legalPromptVariantGChild:"Barn"},"nl-NL":{legalPromptMessage:Ke(e=>e`Door Lenzen te gebruiken, geef je aan dat je het <a href="${0}" target="_blank">Privacybeleid</a> van Snap hebt gelezen en dat je akkoord gaat met de <a href="${0}" target="_blank">Servicevoorwaarden</a> van Snap. Sommige Lenzen gebruiken informatie over je gezicht, handen en stem om te functioneren. Lees <a href="${0}" target="_blank">meer informatie</a> en tik hieronder als je akkoord gaat en wilt doorgaan.`),legalPromptAccept:"Ik ga akkoord",legalPromptReject:"Annuleren",legalPromptTermsOfService:"Servicevoorwaarden",legalPromptVariantGMessage:"Voor de werking van deze functie wordt informatie over gezicht(en), handen en stem(men) gebruikt die door camera en microfoon worden gedetecteerd. Je kunt met deze functie leuke en nuttige augmented reality-effecten op selfies en afbeeldingen plaatsen. Onze camera gebruikt technologie om de locatie te bepalen van bepaalde kenmerken (bijvoorbeeld waar je handen, ogen en neus zich bevinden) en gebruikt die informatie om het kenmerk nauwkeurig te positioneren in de afbeelding die is gedetecteerd met de camera. De verzamelde informatie wordt zo snel mogelijk verwijderd (gewoonlijk kort nadat de app is gesloten) en altijd binnen een periode van maximaal drie jaar.<br/><br/>Tik hieronder als je hiermee akkoord gaat en wilt doorgaan.",legalPromptVariantGAdultOrChild:"Ben je een volwassene of een kind?",legalPromptVariantGFindYourParent:"Vraag toestemming aan een ouder of wettelijke voogd.",legalPromptVariantGIAmGuardian:"Ik ben de voogd van het kind",legalPromptVariantGCancel:"Annuleren",legalPromptVariantGAdult:"Volwassene",legalPromptVariantGChild:"Kind"},pa:{legalPromptMessage:Ke(e=>e`   ,          Snap  <a href="${0}" target="_blank">  </a>       Snap  <a href="${0}" target="_blank">  </a>          ,           <a href="${0}" target="_blank"> </a>          ,    `),legalPromptAccept:"  ",legalPromptReject:" ",legalPromptTermsOfService:"  ",legalPromptVariantGMessage:"         (),   ()           ,                      (   ,     )                                          (  '      )      <br/><br/>        ,    ",legalPromptVariantGAdultOrChild:"      ?",legalPromptVariantGFindYourParent:"   -    ",legalPromptVariantGIAmGuardian:"    ",legalPromptVariantGCancel:" ",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"pl-PL":{legalPromptMessage:Ke(e=>e`Korzystajc z nakadek, potwierdzasz zapoznanie si z <a href="${0}" target="_blank">Polityk prywatnoci</a> i akceptujesz <a href="${0}" target="_blank">Regulamin usugi</a>. Niektre nakadki wykorzystuj informacje o Twojej twarzy, doniach i gosie, aby dziaa poprawnie. <a href="${0}" target="_blank">Dowiedz si wicej</a>, a jeli chcesz wyrazi zgod i kontynuowa, stuknij poniej.`),legalPromptAccept:"Zgadzam si",legalPromptReject:"Odrzu",legalPromptTermsOfService:"Regulamin",legalPromptVariantGMessage:"Ta funkcja wykorzystuje do dziaania informacje o twarzy (twarzach), rkach i gosie (gosach) wykrytych przez kamer i mikrofon. Dziki niej moesz nakada na selfie i zdjcia zabawne i przydatne efekty rozszerzonej rzeczywistoci. Nasza kamera wykorzystuje technologi do lokalizowania okrelonych cech (takich jak miejsce, w ktrym znajduj si Twoje rce, oczy i nos) i wykorzystuje te informacje do dokadnego umiejscowienia danej cechy na obrazie wykrywanym przez kamer. Wszelkie zebrane informacje zostan usunite moliwie jak najszybciej (zazwyczaj wkrtce po zamkniciu aplikacji) i zawsze nie pniej ni w cigu trzech lat.<br/><br/>Jeli chcesz wyrazi zgod i kontynuowa, stuknij poniej.",legalPromptVariantGAdultOrChild:"Jeste osob doros czy dzieckiem?",legalPromptVariantGFindYourParent:"Zwr si do swojego rodzica lub opiekuna prawnego.",legalPromptVariantGIAmGuardian:"Jestem opiekunem prawnym dziecka",legalPromptVariantGCancel:"Anuluj",legalPromptVariantGAdult:"Osoba dorosa",legalPromptVariantGChild:"Dziecko"},"pt-BR":{legalPromptMessage:Ke(e=>e`Ao usar as Lentes, voc reconhece ter lido a <a href="${0}" target="_blank">Poltica de Privacidade</a> da Snap e concorda com os <a href="${0}" target="_blank">Termos de Servio</a> da Snap. Algumas Lentes usam informaes sobre seu rosto, mos e voz para funcionar. <a href="${0}" target="_blank">Saiba mais</a> e, se quiser concordar e continuar, toque abaixo.`),legalPromptAccept:"Eu concordo",legalPromptReject:"Recusar",legalPromptTermsOfService:"Termos de Servio",legalPromptVariantGMessage:"Este recurso usa informaes sobre rosto(s), mos e voz(es) detectados pela cmera e pelo microfone para funcionar. Com este recurso, voc pode aplicar efeitos divertidos e teis de realidade aumentada em selfies e imagens. Nossa cmera usa tecnologia para localizar certos recursos (como onde esto suas mos, olhos e nariz) e usa esta informao para posicionar corretamente o recurso na imagem detectada pela cmera. Qualquer informao coletada ser apagada o mais rpido possvel (geralmente logo depois que o aplicativo  fechado) e sempre antes de trs dias.<br/><br/>Se voc quiser concordar e continuar, toque abaixo.",legalPromptVariantGAdultOrChild:"Voc  adulto ou criana?",legalPromptVariantGFindYourParent:"Localize seu pai/me ou representante legal.",legalPromptVariantGIAmGuardian:"Sou representante da criana",legalPromptVariantGCancel:"Cancelar",legalPromptVariantGAdult:"Adulto",legalPromptVariantGChild:"Criana"},"pt-PT":{legalPromptMessage:Ke(e=>e`Ao utilizares as Lentes, confirmas a leitura da <a href="${0}" target="_blank">Poltica de Privacidade</a> da Snap e aceitas as <a href="${0}" target="_blank">Condies de Servio</a> da Snap. Algumas Lentes utilizam informaes sobre a tua cara, mos e voz para funcionarem. <a href="${0}" target="_blank">Obtm mais informaes</a> e, se quiseres aceitar e continuar, toca abaixo.`),legalPromptAccept:"Aceito",legalPromptReject:"Fechar",legalPromptTermsOfService:"Condies de Servio",legalPromptVariantGMessage:"Esta funcionalidade utiliza informaes relacionadas com caras, mos e vozes detetadas pela cmara e o microfone para poder funcionar. Com esta funcionalidade, pode aplicar efeitos de realidade aumentada de forma divertida e til a selfies e imagens. A nossa cmara recorre a tecnologia para localizar determinadas caratersticas (como a localizao das tuas mos, dos olhos e do nariz) e utiliza essas informaes para posicionar de forma precisa a caraterstica na imagem captada pela cmara. Quaisquer informaes recolhidas sero eliminadas logo que possvel (normalmente pouco depois de a app ser fechada) e nunca aps um mximo de trs anos. <br/><br/>Se quiser aceitar e continuar, toque abaixo.",legalPromptVariantGAdultOrChild:"s um adulto ou uma criana?",legalPromptVariantGFindYourParent:"Recorre ao teus pais ou ao() teu(tua) representante legal",legalPromptVariantGIAmGuardian:"Sou o(a) representante da criana",legalPromptVariantGCancel:"Cancelar",legalPromptVariantGAdult:"Adulto",legalPromptVariantGChild:"Criana"},"ro-RO":{legalPromptMessage:Ke(e=>e`Dac foloseti lentile, confirmi c ai citit <a href="${0}" target="_blank">Politica de confidenialitate</a> Snap i c eti de acord cu <a href="${0}" target="_blank">Condiiile de utilizare</a> Snap. Unele lentile folosesc informaii despre faa ta, despre minile tale i despre vocea ta pentru a funciona. <a href="${0}" target="_blank">Afl mai multe</a>, iar dac doreti s accepi i s continui, atinge dedesubt.`),legalPromptAccept:"Accept",legalPromptReject:"Respinge",legalPromptTermsOfService:"Termeni de utilizare",legalPromptVariantGMessage:"Pentru a rula, funcia utilizeaz informaii despre chipul tu, minile tale i vocea ta detectate de camer i microfon. Cu ajutorul acestei funcii, poi s aplici efecte de realitate augumentat amuzante i utile peste selfie-uri i imagini. Camera noastr folosete tehnologia pentru a gsi anumite caracteristici (de exemplu, unde se afl minile, ochii i nasul tu) i utilizeaz aceste informaii pentru a poziiona corect funcia n imaginea detectat de camer. Toate informaiile colectate sunt terse ct mai curnd posibil (de obicei, la scurt timp dup ce se nchide aplicaia), limita maxim fiind de trei ani.<br/><br/>Dac eti de acord i doreti s continui, atinge mai jos.",legalPromptVariantGAdultOrChild:"Eti adult sau copil?",legalPromptVariantGFindYourParent:"Este necesar prezena printelui sau a tutorelui.",legalPromptVariantGIAmGuardian:"Sunt tutorele copilului",legalPromptVariantGCancel:"Anuleaz",legalPromptVariantGAdult:"Adult",legalPromptVariantGChild:"Copil"},"ru-RU":{legalPromptMessage:Ke(e=>e` ,  ,   <a href="${0}" target="_blank"> </a> Snap   <a href="${0}" target="_blank">  </a>.         ,   . <a href="${0}" target="_blank"></a>.    ,  .`),legalPromptAccept:"",legalPromptReject:"",legalPromptTermsOfService:"  ",legalPromptVariantGMessage:"           ,   .               .    ,      (,  ,   ),          ,   .        ( ,    ),   ,    .<br/><br/>     ,  .",legalPromptVariantGAdultOrChild:"   ?",legalPromptVariantGFindYourParent:"    .",legalPromptVariantGIAmGuardian:"   ",legalPromptVariantGCancel:"",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"sv-SE":{legalPromptMessage:Ke(e=>e`Genom att anvnda linser intygar du att du har lst Snaps <a href="${0}" target="_blank">sekretessvillkor</a> och godknner Snaps <a href="${0}" target="_blank">anvndarvillkor</a>. Vissa linser anvnder information om ditt ansikte, dina hnder och din rst fr att fungera. <a href="${0}" target="_blank">Ls mer</a> och om du vill godknna och fortstta s trycker du nedan.`),legalPromptAccept:"Jag godknner",legalPromptReject:"Avvisa",legalPromptTermsOfService:"Anvndarvillkor",legalPromptVariantGMessage:"Fr att fungera anvnder funktionen information om ansikte(n), hnder och rst(er) som upptckts av kameran och mikrofonen. Funktionen gr att du kan tillmpa roliga och anvndbara AR-effekter ver selfies och bilder. Med hjlp av teknik kan vr kamera lokalisera vissa srdrag (som dina hnder, gon och din nsa). Informationen anvnds sedan fr att korrekt positionera funktionen ver bilden som kameran fngat upp. All information som samlats in raderas s snart som mjligt (vanligtvis inom kort efter att appen stngts) och alltid inom tre r.<br/><br/>Tryck nedan om du vill godknna och fortstta.",legalPromptVariantGAdultOrChild:"r du vuxen eller ett barn?",legalPromptVariantGFindYourParent:"Leta upp din frlder eller vrdnadshavare",legalPromptVariantGIAmGuardian:"Jag r barnets vrdnadshavare",legalPromptVariantGCancel:"Avbryt",legalPromptVariantGAdult:"Vuxen",legalPromptVariantGChild:"Barn"},"ta-IN":{legalPromptMessage:Ke(e=>e`  ,  Snap  <a href="${0}" target="_blank"> </a>    Snap  <a href="${0}" target="_blank"> </a> .      ,      . <a href="${0}" target="_blank"> </a>,    ,  .`),legalPromptAccept:"",legalPromptReject:"",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"         (),   ()   .             .      (,  , ,      )  ,         .       (,  ). ,      .<br/><br/>   ,  .",legalPromptVariantGAdultOrChild:"   ?",legalPromptVariantGFindYourParent:"     .",legalPromptVariantGIAmGuardian:"  ",legalPromptVariantGCancel:"",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"te-IN":{legalPromptMessage:Ke(e=>e`  ,  Snap  <a href="${0}" target="_blank"> </a>    Snap <a href="${0}" target="_blank"> </a> .      ,      . <a href="${0}" target="_blank"> </a>,   ,   .`),legalPromptAccept:" ",legalPromptReject:" ",legalPromptTermsOfService:" ",legalPromptVariantGMessage:"         (),   ()   .  ,  ,         .     ( ,     )              .      (   )      .<br/><br/>  ,   .",legalPromptVariantGAdultOrChild:"   ?",legalPromptVariantGFindYourParent:"      .",legalPromptVariantGIAmGuardian:"  ",legalPromptVariantGCancel:"",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"th-TH":{legalPromptMessage:Ke(e=>e` <a href="${0}" target="_blank"></a>  Snap  <a href="${0}" target="_blank"></a>  Snap    <a href="${0}" target="_blank"></a>  `),legalPromptAccept:"",legalPromptReject:"",legalPromptTermsOfService:"",legalPromptVariantGMessage:"     (AR)   (   )     () <br/><br/> ",legalPromptVariantGAdultOrChild:"?",legalPromptVariantGFindYourParent:"",legalPromptVariantGIAmGuardian:"",legalPromptVariantGCancel:"",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"tr-TR":{legalPromptMessage:Ke(e=>e`Lensleri kullanarak, Snap\'in <a href="${0}" target="_blank">Gizlilik Politikas</a> ieriini okuduunu dorulam ve Snap\'in <a href="${0}" target="_blank">Kullanm artlar</a> ieriini kabul etmi olursun. Baz lenslerin almas iin yzn, ellerin ve sesinle ilgili bilgiler kullanlr. <a href="${0}" target="_blank">Daha Fazlasn ren</a> ve kabul edip devam etmek istiyorsan aaya dokun.`),legalPromptAccept:"Kabul Ediyorum",legalPromptReject:"Yoksay",legalPromptTermsOfService:"Kullanm artlar",legalPromptVariantGMessage:"Bu zelliin almas iin kamera ve mikrofon tarafndan alglanan yzler, eller ve sesler hakkndaki bilgiler kullanlr. Bu zellik sayesinde selfie'lerin ve grntlerin zerine elenceli ve kullanl artrlm gereklik efektleri uygulayabilirsin. Kameramz, belirli zellikleri (ellerinin, gzlerinin ve burnunun nerede olduu gibi) bulmak iin teknolojiden yararlanr ve bu bilgileri, kamera tarafndan alglanan grntyle zellii doru ekilde konumlandrmak iin kullanr. Toplanan tm bilgiler mmkn olan en ksa srede (genellikle uygulama kapatldktan ksa sre sonra) ve mutlaka en fazla  yl iinde silinir.<br/><br/>Kabul edip devam etmek istiyorsan aaya dokun.",legalPromptVariantGAdultOrChild:"Yetikin mi yoksa ocuk musun?",legalPromptVariantGFindYourParent:"Ltfen ebeveynini veya yasal vasini bul.",legalPromptVariantGIAmGuardian:"Ben ocuun vasisiyim",legalPromptVariantGCancel:"ptal Et",legalPromptVariantGAdult:"Yetikin",legalPromptVariantGChild:"ocuk"},"ur-PK":{legalPromptMessage:Ke(e=>e`        Snap  <a href="${0}" target="_blank"> </a>       Snap  <a href="${0}" target="_blank">  </a>                      <a href="${0}" target="_blank"> </a>               `),legalPromptAccept:"  ",legalPromptReject:" ",legalPromptTermsOfService:"  ",legalPromptVariantGMessage:"      ()                                                     (         )                                           (      )            <br/><br/>             ",legalPromptVariantGAdultOrChild:"      ",legalPromptVariantGFindYourParent:"   /      ",legalPromptVariantGIAmGuardian:"  /  ",legalPromptVariantGCancel:" ",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"vi-VN":{legalPromptMessage:Ke(e=>e`Bng cch s dng ng Knh, bn xc nhn  c <a href="${0}" target="_blank">Chnh Sch Bo Mt</a> ca Snap v ng  vi <a href="${0}" target="_blank">iu Khon Dch V</a>ca Snap. Mt s ng knh s dng thng tin v khun mt, bn tay v ging ni ca bn  hot ng. Bn c th <a href="${0}" target="_blank">Tm Hiu Thm</a>, cn nu bn mun ng  v tip tc, hy chm vo bn di.`),legalPromptAccept:"Ti ng ",legalPromptReject:"B Qua",legalPromptTermsOfService:"iu Khon Dch V",legalPromptVariantGMessage:"Tnh nng ny hot ng da trn vic s dng thng tin v khun mt, bn tay v ging ni m camera v micr pht hin c. Bn c th s dng tnh nng ny  p dng cc hiu ng thc t tng cng th v v hu ch ln nh t sng v hnh nh. Camera ca chng ti p dng cng ngh  tm nhng c im nht nh (chng hn nh v tr bn tay, mt v mi ca bn), ri s dng thng tin   xc nh chnh xc v tr ca c im trong hnh nh m camera chp c. Chng ti s xa mi thng tin c thu thp sm nht c th (thng ngay sau khi bn ng ng dng) v lun xa trong khong thi gian khng qu ba nm.<br/><br/>Nu bn mun ng  v tip tc, hy chm vo bn di.",legalPromptVariantGAdultOrChild:"Bn l ngi ln hay tr em?",legalPromptVariantGFindYourParent:"Vui lng tm ph huynh hoc ngi gim h hp php.",legalPromptVariantGIAmGuardian:"Ti l ngi gim h ca tr",legalPromptVariantGCancel:"Hy B",legalPromptVariantGAdult:"Ngi ln",legalPromptVariantGChild:"Tr em"},"zh-Hans":{legalPromptMessage:Ke(e=>e` Snap <a href="${0}" target="_blank"></a> Snap <a href="${0}" target="_blank"></a><a href="${0}" target="_blank"></a>`),legalPromptAccept:"",legalPromptReject:"",legalPromptTermsOfService:"",legalPromptVariantGMessage:"<br/><br/>",legalPromptVariantGAdultOrChild:"",legalPromptVariantGFindYourParent:"",legalPromptVariantGIAmGuardian:"",legalPromptVariantGCancel:"",legalPromptVariantGAdult:"",legalPromptVariantGChild:""},"zh-Hant":{legalPromptMessage:Ke(e=>e` Snap <a href="${0}" target="_blank"></a> Snap <a href="${0}" target="_blank"></a><a href="${0}" target="_blank"></a>`),legalPromptAccept:"",legalPromptReject:"",legalPromptTermsOfService:"",legalPromptVariantGMessage:" () ()<br/><br/>",legalPromptVariantGAdultOrChild:"",legalPromptVariantGFindYourParent:"",legalPromptVariantGIAmGuardian:"",legalPromptVariantGCancel:"",legalPromptVariantGAdult:"",legalPromptVariantGChild:""}},JN={bn:"bn-BD",da:"da-DK",de:"de-DE",el:"el-GR",en:"en-US",es:"es-ES",fi:"fi-FI",fil:"fil-PH",fr:"fr-FR",gu:"gu-IN",hi:"hi-IN",id:"id-ID",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ro:"ro-RO",ru:"ru-RU",sv:"sv-SE",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",ur:"ur-PK",vi:"vi-VN",zh:"zh-Hans"},wj={"zh-TW":"zh-Hant","zh-CN":"zh-Hans"},Ij=e=>e in Tm,Rj="en-US";function Cj(){const e=zi().locale;if(Ij(e))return e;const n=wj[e];if(n&&n in Tm)return n;const t=e.split("-")[0];return t&&t in Tm?t:t&&t in JN?JN[t]:Rj}const Sv=Cj();function xa(e){return Tm[Sv][e]}const Nj=`
dialog {
    display: flex;
    flex-direction: column;

    background-color: #fff;
    border: #efefef 1px solid;
    border-radius: 20px;
    box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.3);

    max-width: 80vw;
    max-height: 80vh;
    padding: 44px 0 24px 0;

    font-size: 16px;
    font-family: sans-serif;
    font-style: normal;
    font-weight: 600;
    line-height: 24px;
}

dialog::backdrop {
    background-color: rgba(0, 0, 0, 0.4);
}

.title {
    color: #16191C;
    padding: 0 32px;
    text-align: center;
}

.body {
    color: #656D78;
    font-size: 14px;
    font-weight: 500;
    margin-top: 16px;
    max-width: 350px;
    padding: 0 32px;
    overflow: auto;
}

a {
    color: rgb(78, 171, 248);
}

button {
    cursor: pointer;
}

button.dismiss {
    position: absolute;
    top: 7px;
    right: 7px;
    padding: 0;
    height: 36px;
    width: 36px;
    margin: 0;
    background-color: transparent;
    border: 0;
}

button.dismiss svg {
    fill: black;
}

.buttons {
    margin-top: 8px;
    padding: 0 32px;
}

.buttons button {
    background: #0FADFF;
    border: 0;
    border-radius: 25px;

    width: 100%;
    padding: 1rem;
    margin-top: 8px;

    color: #fff;
    font-weight: inherit;
    font-family: inherit;
    font-size: inherit;
    font-style: inherit;
}

.buttons button.secondary {
    background-color: transparent;
    color: #656D78;
}

// Proper filling of X button in High Contrast themes
@media (forced-colors: active) {
    button.dismiss svg {
        fill: ButtonText;
    }
}
`;function Tj(e){return`
        <button class="dismiss" autofocus data-key=${e.key}>
            <svg xmlns="http://www.w3.org/2000/svg" role="img" width="36" height="36" viewBox="0 0 36 36">
                <title>${e.text}</title>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M12.6763 11.2621C12.2858 10.8716 11.6527 10.8716 11.2621 11.2621C10.8716 11.6527 10.8716 12.2858 11.2621 12.6763L16.5858 18L11.2621 23.3237C10.8716 23.7142 10.8716 24.3474 11.2621 24.7379C11.6527 25.1284 12.2858 25.1284 12.6764 24.7379L18 19.4142L23.3237 24.7379C23.7142 25.1284 24.3474 25.1284 24.7379 24.7379C25.1284 24.3474 25.1284 23.7142 24.7379 23.3237L19.4142 18L24.7379 12.6763C25.1284 12.2858 25.1284 11.6527 24.7379 11.2621C24.3474 10.8716 23.7142 10.8716 23.3237 11.2621L18 16.5858L12.6763 11.2621Z" fill-opacity="0.4"/>
            </svg>
        </button>`}function Oj(e){return e?`<div class="title" role="heading">${e}</div>`:""}function kj(e){return e?`<div class="body">${e}</div>`:""}function xj(e){return`<button data-key="${e.key}"${e.isSecondary?' class="secondary"':""}>${e.text}</button>`}function Dj(e){return e.length===0?"":`
        <div class="buttons">
        ${e.map(n=>xj(n)).join(`
`)}
        </div>`}function ch(e,n,t){t&&e.setAttribute(n,t)}function dS(e){return new Promise(n=>{var t,r,a;const i=document.createElement("div");ch(i,"data-testid",e.dataTestId);const o=i.attachShadow({mode:"open"}),u=document.createElement("style");o.appendChild(u),u.innerHTML=Nj;const c=document.createElement("dialog");ch(c,"aria-label",(t=e.titleText)!==null&&t!==void 0?t:e.title),ch(c,"lang",e.lang),ch(c,"dir","auto"),o.appendChild(c),c.innerHTML=`
            ${Tj({key:"dismiss",text:(r=e.dismissButtonText)!==null&&r!==void 0?r:"Dismiss"})}
            ${Oj(e.title)}
            ${kj(e.body)}
            ${Dj((a=e.buttons)!==null&&a!==void 0?a:[])}
        `;const f=Array.from(c.querySelectorAll("button"));Yo(...f.map(h=>Hs(h,"click").pipe(Ve(()=>h.dataset.key))),Hs(c,"cancel").pipe(Ve(()=>"dismiss"))).pipe(ma(1)).subscribe({next:n,complete:()=>i.remove()}),e.container.appendChild(i),c.showModal()})}const Pj=e=>{let n=3735928559,t=1103547991;for(let r=0;r<e.length;r++){const a=e.charCodeAt(r);n=Math.imul(n^a,2654435761),t=Math.imul(t^a,1597334677)}return n=Math.imul(n^n>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),t=Math.imul(t^t>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),(4294967296*(2097151&t)+(n>>>0)).toString(16)},Mj=`
<svg xmlns="http://www.w3.org/2000/svg" role="img" viewBox="0 0 32 32" height="48px">
    <g>
        <path
            d="M 30.898 23.477 C 30.77 23.045 30.148 22.743 30.148 22.743 C 30.092 22.71 30.039 22.684 29.994 22.663 C 28.962 22.161 28.048 21.561 27.277 20.876 C 26.659 20.325 26.128 19.719 25.701 19.074 C 25.182 18.288 24.937 17.632 24.831 17.275 C 24.773 17.043 24.782 16.951 24.831 16.832 C 24.873 16.731 24.99 16.632 25.049 16.588 C 25.397 16.341 25.96 15.976 26.303 15.75 C 26.602 15.556 26.859 15.389 27.009 15.283 C 27.494 14.944 27.824 14.596 28.02 14.223 C 28.275 13.74 28.303 13.208 28.107 12.684 C 27.84 11.978 27.184 11.556 26.35 11.556 C 26.163 11.556 25.974 11.577 25.785 11.62 C 25.308 11.723 24.852 11.894 24.474 12.042 C 24.446 12.054 24.416 12.032 24.418 12.002 C 24.457 11.059 24.502 9.79 24.399 8.584 C 24.306 7.493 24.082 6.576 23.717 5.776 C 23.351 4.972 22.874 4.376 22.5 3.947 C 22.143 3.536 21.519 2.936 20.577 2.394 C 19.251 1.631 17.742 1.244 16.09 1.244 C 14.443 1.244 12.934 1.631 11.605 2.394 C 10.607 2.966 9.97 3.614 9.678 3.947 C 9.304 4.376 8.827 4.972 8.46 5.776 C 8.096 6.576 7.872 7.496 7.778 8.584 C 7.673 9.792 7.715 10.96 7.76 11.999 C 7.762 12.03 7.732 12.051 7.704 12.039 C 7.325 11.892 6.87 11.72 6.393 11.617 C 6.204 11.575 6.012 11.554 5.828 11.554 C 4.994 11.554 4.337 11.976 4.071 12.682 C 3.875 13.205 3.903 13.738 4.157 14.221 C 4.354 14.594 4.685 14.941 5.169 15.281 C 5.318 15.387 5.575 15.553 5.874 15.748 C 6.211 15.968 6.758 16.323 7.108 16.569 C 7.152 16.599 7.299 16.712 7.346 16.827 C 7.397 16.951 7.404 17.045 7.341 17.289 C 7.234 17.648 6.989 18.298 6.479 19.069 C 6.052 19.715 5.522 20.32 4.902 20.871 C 4.132 21.556 3.218 22.157 2.186 22.658 C 2.137 22.682 2.078 22.712 2.015 22.748 C 2.015 22.748 1.399 23.064 1.282 23.472 C 1.109 24.075 1.567 24.64 2.036 24.943 C 2.8 25.438 3.732 25.703 4.272 25.849 C 4.421 25.889 4.559 25.926 4.683 25.964 C 4.76 25.989 4.956 26.062 5.038 26.17 C 5.143 26.306 5.155 26.473 5.192 26.66 C 5.253 26.977 5.384 27.373 5.774 27.643 C 6.204 27.941 6.75 27.962 7.444 27.99 C 8.168 28.018 9.07 28.054 10.1 28.394 C 10.579 28.553 11.011 28.818 11.514 29.128 C 12.56 29.773 13.864 30.578 16.09 30.578 C 18.318 30.578 19.629 29.768 20.685 29.119 C 21.183 28.811 21.612 28.546 22.08 28.391 C 23.11 28.049 24.011 28.014 24.735 27.988 C 25.427 27.962 25.974 27.941 26.404 27.641 C 26.822 27.35 26.943 26.918 26.997 26.59 C 27.027 26.428 27.046 26.285 27.14 26.165 C 27.219 26.064 27.399 25.992 27.483 25.964 C 27.609 25.924 27.751 25.886 27.906 25.844 C 28.445 25.698 29.123 25.527 29.945 25.061 C 30.933 24.511 31.001 23.82 30.898 23.477"
            fill="#ffffff"
            stroke="#00000000"
            stroke-width="1"
        />
    </g>
    <g>
        <path
            d="M 29.56 24.299 C 28.21 25.045 27.312 24.965 26.613 25.414 C 26.021 25.795 26.37 26.618 25.939 26.915 C 25.411 27.279 23.843 26.889 21.822 27.555 C 20.155 28.107 19.09 29.689 16.089 29.689 C 13.081 29.689 12.047 28.114 10.357 27.555 C 8.335 26.889 6.768 27.279 6.24 26.915 C 5.809 26.618 6.16 25.795 5.566 25.414 C 4.869 24.965 3.969 25.045 2.619 24.299 C 1.758 23.825 2.247 23.53 2.532 23.393 C 7.426 21.027 8.204 17.372 8.24 17.096 C 8.282 16.769 8.328 16.509 7.966 16.175 C 7.615 15.853 6.066 14.895 5.636 14.593 C 4.925 14.098 4.612 13.6 4.841 12.99 C 5 12.569 5.395 12.41 5.812 12.41 C 5.94 12.41 6.071 12.426 6.2 12.452 C 6.981 12.623 7.741 13.013 8.179 13.118 C 8.24 13.132 8.293 13.139 8.34 13.139 C 8.574 13.139 8.656 13.022 8.639 12.754 C 8.59 11.9 8.469 10.234 8.602 8.677 C 8.787 6.536 9.477 5.476 10.298 4.538 C 10.693 4.087 12.543 2.133 16.082 2.133 C 19.633 2.133 21.474 4.087 21.867 4.538 C 22.688 5.478 23.378 6.536 23.563 8.677 C 23.698 10.234 23.581 11.898 23.525 12.754 C 23.506 13.034 23.591 13.139 23.825 13.139 C 23.872 13.139 23.925 13.132 23.986 13.118 C 24.426 13.013 25.184 12.62 25.965 12.452 C 26.091 12.424 26.222 12.41 26.353 12.41 C 26.77 12.41 27.165 12.569 27.324 12.99 C 27.555 13.6 27.242 14.095 26.529 14.593 C 26.098 14.892 24.547 15.85 24.199 16.175 C 23.836 16.509 23.883 16.767 23.925 17.096 C 23.96 17.372 24.739 21.025 29.633 23.393 C 29.932 23.53 30.421 23.825 29.56 24.299 M 31.709 23.12 C 31.489 22.523 31.07 22.203 30.594 21.939 C 30.505 21.887 30.423 21.845 30.355 21.812 C 30.212 21.74 30.067 21.667 29.922 21.592 C 28.435 20.806 27.275 19.812 26.469 18.635 C 26.198 18.238 26.008 17.88 25.877 17.587 C 25.809 17.391 25.811 17.281 25.86 17.178 C 25.898 17.101 25.996 17.019 26.05 16.979 C 26.305 16.811 26.57 16.64 26.748 16.525 C 27.067 16.319 27.317 16.156 27.481 16.043 C 28.093 15.617 28.519 15.164 28.786 14.658 C 29.163 13.945 29.21 13.131 28.919 12.363 C 28.517 11.301 27.509 10.642 26.291 10.642 C 26.038 10.642 25.783 10.67 25.527 10.726 C 25.46 10.74 25.394 10.756 25.328 10.773 C 25.34 10.05 25.324 9.278 25.258 8.524 C 25.029 5.872 24.099 4.48 23.129 3.371 C 22.724 2.908 22.021 2.232 20.964 1.628 C 19.491 0.781 17.821 0.356 16 0.356 C 14.185 0.356 12.518 0.781 11.044 1.623 C 9.983 2.229 9.278 2.905 8.875 3.366 C 7.905 4.475 6.975 5.867 6.746 8.52 C 6.68 9.273 6.663 10.045 6.675 10.768 C 6.61 10.752 6.544 10.735 6.476 10.721 C 6.221 10.665 5.965 10.637 5.713 10.637 C 4.494 10.637 3.487 11.297 3.084 12.359 C 2.794 13.126 2.841 13.94 3.218 14.654 C 3.485 15.159 3.911 15.613 4.522 16.039 C 4.686 16.153 4.937 16.314 5.256 16.52 C 5.427 16.633 5.68 16.794 5.926 16.958 C 5.963 16.984 6.097 17.082 6.141 17.173 C 6.193 17.279 6.195 17.393 6.118 17.604 C 5.987 17.891 5.801 18.242 5.535 18.631 C 4.747 19.782 3.62 20.757 2.18 21.536 C 1.419 21.941 0.54 22.355 0.29 23.118 C 0.039 23.88 0.203 24.582 0.842 25.239 C 1.053 25.466 1.318 25.665 1.653 25.85 C 2.438 26.283 3.105 26.496 3.63 26.641 C 3.721 26.669 3.937 26.736 4.031 26.819 C 4.265 27.022 4.23 27.331 4.543 27.78 C 4.731 28.061 4.949 28.25 5.129 28.374 C 5.783 28.826 6.516 28.854 7.294 28.881 C 7.997 28.908 8.793 28.94 9.702 29.24 C 10.079 29.364 10.47 29.605 10.922 29.883 C 12.011 30.552 13.501 31.467 15.998 31.467 C 18.493 31.467 19.995 30.547 21.091 29.876 C 21.541 29.6 21.93 29.361 22.297 29.242 C 23.206 28.942 24.003 28.912 24.706 28.884 C 25.483 28.854 26.216 28.826 26.87 28.377 C 27.076 28.234 27.331 28.004 27.535 27.651 C 27.76 27.272 27.753 27.003 27.964 26.821 C 28.05 26.746 28.238 26.68 28.338 26.65 C 28.868 26.505 29.545 26.292 30.344 25.852 C 30.697 25.658 30.976 25.443 31.192 25.2 C 31.194 25.197 31.196 25.192 31.199 25.19 C 31.805 24.544 31.955 23.787 31.709 23.12"
            fill="#000000"
            stroke="#00000000"
            stroke-width="1"
        />
    </g>
</svg>`;function D1(e,n,t){return ye(this,void 0,void 0,function*(){return(yield dS({container:document.body,dataTestId:"tos-dialog",lang:Sv,title:e,titleText:n,body:t,dismissButtonText:xa("legalPromptReject"),buttons:[{text:xa("legalPromptAccept"),key:"accept"}]}))==="accept"})}function Lj(){return dS({container:document.body,dataTestId:"adult-or-child-dialog",lang:Sv,title:xa("legalPromptVariantGAdultOrChild"),buttons:[{text:xa("legalPromptVariantGAdult"),key:"adult"},{text:xa("legalPromptVariantGChild"),key:"child"}]})}function Bj(){return dS({container:document.body,dataTestId:"find-guardian-dialog",lang:Sv,title:xa("legalPromptVariantGFindYourParent"),buttons:[{text:xa("legalPromptVariantGIAmGuardian"),key:"guardian"},{text:xa("legalPromptVariantGCancel"),key:"cancel",isSecondary:!0}]})}const h4=De("legalPrompt",()=>function(n,t,r,a){const i=a?xa("legalPromptVariantGMessage"):xa("legalPromptMessage")({privacyPolicyUrl:n.webUrl,termsOfServiceUrl:t.webUrl,learnMoreUrl:r.webUrl}),o=xa("legalPromptTermsOfService"),u=a?o:Mj;return{contentHash:Pj(i),show(){return ye(this,void 0,void 0,function*(){if(!a)return D1(u,o,i);for(;;)switch(yield Lj()){case"child":switch(yield Bj()){case"cancel":continue;case"guardian":return D1(u,o,i);case"dismiss":return!1;default:Wi()}case"adult":return D1(u,o,i);case"dismiss":return!1;default:Wi()}})}}}),Dc=gt("LegalState"),Uj=12*60*60,eT="lastAcceptedTosContentHash",Fj=()=>{const e=lS(ei("unknown")(),ei("accepted")(),ei("rejected")()),n=yv(pn("requestLegalPrompt")(),pn("accept")(),pn("reject")());return new uS(n,e,e.unknown(),t=>Yo(t.pipe(cr("unknown"),ot("accept"),Ve(()=>e.accepted())),t.pipe(cr("unknown"),ot("reject"),Ve(()=>e.rejected())),t.pipe(cr("rejected"),ot("requestLegalPrompt"),Ve(()=>e.unknown()))))},P1=new Date("2021-09-30T00:00:00+00:00"),Ky=il.fromPartial({documents:[Ts.fromPartial({type:Lo.PRIVACY_POLICY,webUrl:"https://values.snap.com/privacy/privacy-policy",version:"1",timestamp:P1}),Ts.fromPartial({type:Lo.TERMS_OF_SERVICE,webUrl:"https://snap.com/terms",version:"1",timestamp:P1}),Ts.fromPartial({type:Lo.LEARN_MORE,webUrl:"https://support.snapchat.com/article/camera-information-use",version:"1",timestamp:P1})],disabled:!0}),Vj=Pb.fromPartial({}),Gj=e=>{var n,t;return((t=(n=e.value)===null||n===void 0?void 0:n.anyValue)===null||t===void 0?void 0:t.value)instanceof Uint8Array},Hj=e=>n=>{var t;return(t=e.find(r=>r.type===n))!==null&&t!==void 0?t:Ky.documents.find(r=>r.type===n)},hS=De("legalState",[Ji.token,h4.token],(e,n)=>{const t=new mv(()=>Uj,new wl({databaseName:"Legal"})),r=()=>Er(t.retrieve(eT).catch(o=>Dc.warn(o))),a=o=>t.store(eT,o).catch(u=>Dc.warn(u)),i=Fj();return i.events.pipe(cr("unknown"),ot("requestLegalPrompt"),Ns(()=>sD({cofConfig:e.get("CAMERA_KIT_LEGAL_PROMPT").pipe(Ve(o=>{const u=o.find(Gj);return u?il.decode(u.value.anyValue.value):Ky}),Ho(o=>(Dc.error(o),Tn(Ky)))),initConfig:e.getInitializationConfig().pipe(Ho(o=>(Dc.error(o),Tn(Vj))))})),Ns(({cofConfig:o,initConfig:u})=>{var c;if(!((c=u.legalPrompt)===null||c===void 0)&&c.disabled||o.disabled)return Tn(i.actions.accept("disabled"));const f=Hj(o.documents),h=n(f(Lo.PRIVACY_POLICY),f(Lo.TERMS_OF_SERVICE),f(Lo.LEARN_MORE),u.childrenProtectionActRestricted);return r().pipe(Ns(p=>h.contentHash===p?Tn(!0):h.show()),Ve(p=>p?(a(h.contentHash),i.actions.accept(h.contentHash)):i.actions.reject(h.contentHash)))}),ws(i)).subscribe({error:Dc.error}),i});function zj(e){return n=>MK(()=>{let t=!1;return n.pipe(va({complete:()=>t=!0,error:()=>t=!0}),ZK(()=>{t||e()}))})}const Wj=gt("fetchWatermarkLens"),pS="watermarks",Kj=De("fetchWatermarkLens",[Ji.token,Il.token],(e,n)=>{e.getInitializationConfig().pipe(ma(1)).subscribe({next:t=>ye(void 0,void 0,void 0,function*(){if(t.watermarkEnabled){const r=yield n.loadLens("",pS);yield n.cacheLensContent([r])}}),error:Wj.error})}),p4=De("userDataAccessResolver",()=>()=>"unrestricted"),fh=gt("LensState"),qj=()=>{const e=yv(pn("applyLens")(),pn("downloadComplete")(),pn("turnedOn")(),pn("resourcesLoaded")(),pn("firstFrameProcessed")(),pn("applyLensComplete")(),pn("applyLensFailed")(),pn("applyLensAborted")(),pn("removeLens")(),pn("turnedOff")(),pn("removeLensComplete")(),pn("removeLensFailed")()),n=lS(ei("noLensApplied")(),ei("applyingLens")(),ei("lensApplied")());return new uS(e,n,n.noLensApplied(),t=>Yo(t.pipe(cr("noLensApplied","applyingLens","lensApplied"),ot("applyLens"),Ve(([r])=>n.applyingLens(r.data.lens))),t.pipe(cr("applyingLens"),ot("applyLensComplete"),Ve(([r])=>n.lensApplied(r.data))),t.pipe(cr("applyingLens"),ot("applyLensFailed"),Ve(()=>n.noLensApplied())),t.pipe(cr("lensApplied"),ot("removeLensComplete"),Ve(()=>n.noLensApplied()))))},eo=De("lensState",[Ar.token,Il.token,gv.token,d4.token,hS.token,Xr.token,Ji.token,p4.token],(e,n,t,r,a,i,o,u)=>{const c=qj();let f=!0;return c.events.pipe(ot("applyLens"),XK(([h])=>Tn(a.actions.requestLegalPrompt()).pipe(ws(a),cr("accepted","rejected"),ma(1),Ve(([,{name:p}])=>p==="accepted"?h:c.actions.applyLensFailed({error:kW(`Failed to apply lens ${h.data.lens.id}. Required legal terms were not accepted.`),lens:h.data.lens})))),Ns(h=>{if(h.name==="applyLensFailed")return Tn(h);const{lens:p}=h.data,m=y=>{c.dispatch(y,p)},g=new xf("lens").mark("apply",{first:`${f}`});return f=!1,sD({watermarkInput:o.getInitializationConfig().pipe(ur(y=>y.watermarkEnabled?Er(n.loadLens("",pS)).pipe(ur(b=>Er(n.getLensContent(b)).pipe(Ve(({lensBuffer:E,lensChecksum:_})=>({lensId:b.id,lensDataBuffer:E.slice(0),lensChecksum:_,launchData:new ArrayBuffer(0)}))))):Tn(void 0))),lensInput:Tn(h.data).pipe(ur(({lens:y,launchData:b})=>Er(r.retrieve(y.id).catch(()=>{})).pipe(Ve(E=>({lens:y,launchData:b,persistentStore:E})))),Ve(({lens:y,launchData:b,persistentStore:E})=>{const _=n.getLensMetadata(y.id);if(!_)throw new Error(`Cannot apply lens ${y.id}. It has not been loaded by the Lens repository. Use CameraKit.lensRepository.loadLens (or loadLensGroups) to load lens metadata before calling CameraKitSession.applyLens.`);const{content:w,isThirdParty:I}=_;if(!w)throw new Error(`Cannot apply lens ${y.id}. Metadata retrieved for this lens does not include the lens content URL.`);return{lens:y,launchData:ij(b??{},E??new ArrayBuffer(0)),content:w,isThirdParty:I}}),ur(({lens:y,launchData:b,content:E,isThirdParty:_})=>{const w=g.mark("network");return Er(Promise.all([n.getLensContent(y).finally(()=>w.measure("lens")),_?u(y):void 0,E.assetManifest.length>0?t.cacheAssets(E.assetManifest,y).finally(()=>w.measure("assets")):Promise.resolve()])).pipe(va(()=>{w.measure(),c.dispatch("downloadComplete",y)}),Ve(([{lensBuffer:I,lensChecksum:R},C])=>{const O=I.slice(0);return{lensId:y.id,lensDataBuffer:O,lensChecksum:R,launchData:b,apiVisibility:_?e.LensApiVisibility.Public:e.LensApiVisibility.Private,publicApiUserDataAccess:C==="restricted"?e.UserDataAccess.Restricted:e.UserDataAccess.Unrestricted}}))}))}).pipe(zo(c.events.pipe(ot("removeLens"))),ur(({lensInput:y,watermarkInput:b})=>new Xt(E=>{const _=g.mark("core");e.replaceLenses({lenses:[Object.assign(Object.assign({},y),{onTurnOn:()=>m("turnedOn"),onResourcesLoaded:()=>m("resourcesLoaded"),onFirstFrameProcessed:()=>{_.measure("first-frame"),g.measure("success"),g.stopAndReport(i),m("firstFrameProcessed")},onTurnOff:()=>m("turnedOff")}),...b?[b]:[]]}).then(()=>{_.measure("success"),E.next(c.actions.applyLensComplete(p)),E.complete()}).catch(w=>{_.measure("failure"),g.measure("failure"),g.stopAndReport(i);const I=`Failed to apply lens ${y.lensId}.`,R=/validation failed/.test(w.message)?xW(I,w):DW(I,w);E.next(c.actions.applyLensFailed({error:R,lens:p})),E.complete()})})),Ho(y=>(g.measure("failure"),g.stopAndReport(i),Tn(c.actions.applyLensFailed({error:y,lens:p})))),zj(()=>{g.measure("abort"),g.stopAndReport(i)}))}),ws(c)).subscribe({error:fh.error}),c.events.pipe(cr("lensApplied","noLensApplied"),ot("removeLens"),ur(()=>new Xt(h=>{e.clearAllLenses().then(()=>{h.next(c.actions.removeLensComplete()),h.complete()}).catch(p=>{const m=new Error("Failed to remove lenses.",{cause:p});h.next(c.actions.removeLensFailed(m)),h.complete()})})),ws(c)).subscribe({error:fh.error}),c.events.pipe(cr("applyingLens"),ot("removeLens"),Ns(([h])=>c.events.pipe(cr("lensApplied"),zo(c.events.pipe(ot("applyLens"))),Ve(()=>h))),ws(c)).subscribe({error:fh.error}),c.events.subscribe(([h,p])=>{const m=Yj(h);fh.debug(`Action: "${h.name}", state: "${p.name}"${m?", data: "+JSON.stringify(m):""}`)}),c});function Yj(e){switch(e.name){case"applyLens":return{lensId:e.data.lens.id};case"applyLensFailed":return{lensId:e.data.lens.id,error:e.data.error.message};case"downloadComplete":case"turnedOn":case"resourcesLoaded":case"firstFrameProcessed":case"applyLensComplete":case"applyLensAborted":case"turnedOff":return{lensId:e.data.id};case"removeLens":case"removeLensComplete":return;case"removeLensFailed":return{error:e.data.message};default:Wi()}}const $j=()=>{const e=yv(pn("suspend")(),pn("resume")(),pn("destroy")()),n=lS(ei("inactive")(),ei("active")(),ei("destroyed")());return new uS(e,n,ei("inactive")()(),t=>Yo(t.pipe(ot("resume"),Ve(([r])=>n.active(r.data))),t.pipe(ot("suspend"),Ve(()=>n.inactive())),t.pipe(ot("destroy"),Ve(()=>n.destroyed()))))},Ev=De("sessionState",()=>$j()),jj=gt("LensKeyboard");class Xj{constructor(n){this.lensState=n,this.active=!1,this.text=void 0,this.reply=()=>{},this.onElementKeyPress=this.onElementKeyPress.bind(this),this.events=new Al,this.element=document.createElement("textarea"),this.element.addEventListener("keypress",this.onElementKeyPress),this.uriHandler={uri:"app://textInput/",handleRequest:(t,r)=>{if(t.uri==="app://textInput/requestKeyboard"){const a=JSON.parse(new TextDecoder().decode(t.data));this.element.value=a.text,this.text=a.text,this.reply=r,this.active=!0,this.notifyClient(),this.element.focus()}else t.uri==="app://textInput/dismissKeyboard"?(this.active=!1,this.sendReply({keyboardOpen:!1}),this.notifyClient()):jj.error(new Error(`Unhandled lens keyboard request '${t.uri}'.`))}},n.events.pipe(ot("turnedOff")).subscribe(()=>{this.dismiss()})}dismiss(){this.active=!1,this.element.value="",this.text="",this.sendReply({keyboardOpen:!1}),this.notifyClient()}getElement(){return this.element}sendInputToLens(n){this.element.value=n,this.text=n,this.sendReply({text:n,start:n.length,end:n.length,done:!0,shouldNotify:!0})}addEventListener(n,t,r){this.events.addEventListener(n,t,r)}removeEventListener(n,t){this.events.removeEventListener(n,t)}toPublicInterface(){return{addEventListener:this.addEventListener.bind(this),removeEventListener:this.removeEventListener.bind(this),sendInputToLens:this.sendInputToLens.bind(this),dismiss:this.dismiss.bind(this),getElement:this.getElement.bind(this)}}destroy(){this.element.removeEventListener("keypress",this.onElementKeyPress)}sendReply(n){this.reply({code:200,description:"",contentType:"application/json",data:new TextEncoder().encode(JSON.stringify(n))})}notifyClient(){var n;const t=this.lensState.getState();Ws(t,"noLensApplied")||this.events.dispatchEvent(new Hn("active",{element:this.element,active:this.active,text:(n=this.text)!==null&&n!==void 0?n:"",lens:t.data}))}onElementKeyPress(n){n.code==="Enter"&&!n.shiftKey&&(n.preventDefault(),this.sendInputToLens(this.element.value))}}const mS=De("lensKeyboard",[eo.token],e=>new Xj(e)),Zj=e=>!1;function Qj(e){if(!(e instanceof Error))return!1;switch(e.name){case"LensAbortError":case"LensExecutionError":case"LensImagePickerError":return!0;default:return Zj()}}const Jj=gt("FrameEvents"),m4=De("frameEvents",[Ar.token],e=>{const n=new fr;return e.setOnFrameProcessedCallback({onFrameProcessed:t=>{n.next(t)}}).catch(t=>Jj.error(`Failed registering setOnFrameProcessedCallback with error: ${t.message}`)),n.asObservable()}),gr=gt("CameraKitSession");function eX(e){return lj(e)||v4(e)||g4(e)}function v4(e){return e instanceof MediaStream}function g4(e){return e instanceof HTMLVideoElement}function tT(e){return ln(e)||e==="live"||e==="capture"}let tX=(()=>{var e;let n=[],t,r,a,i,o,u,c,f,h;return e=class{constructor(m,g,y,b,E,_,w){this.innerKeyboard=(Of(this,n),m),this.lensCore=g,this.sessionState=y,this.lensState=b,this.frameEvents=w,this.events=new Al,this.keyboard=m.toPublicInterface();const I=this.lensCore.getOutputCanvases();this.output={live:I[this.lensCore.CanvasType.Preview.value],capture:I[this.lensCore.CanvasType.Capture.value]},this.playing={live:!1,capture:!1},this.metrics=new Ej(w);const R=_.onPageHidden(()=>this.sessionState.dispatch("suspend",this)),C=_.onPageVisible(()=>this.sessionState.dispatch("resume",this));this.removePageVisibilityHandlers=()=>{R(),C()},this.subscriptions=[g.errors.pipe(Jn(O=>O.name==="LensCoreAbortError")).subscribe(()=>this.destroy()),g.errors.pipe(Jn(O=>O.name!=="LensCoreAbortError"&&O.isFrameError)).subscribe(()=>this.removeLens()),E.pipe(Jn(O=>O.level==="error"),Ve(O=>O.messages.find(D=>D instanceof Error)),Jn(Qj)).subscribe(O=>{const D=b.getState();Ws(D,"noLensApplied")?gr.warn("Lens error occurred even though there is no active lens.",O):this.events.dispatchEvent(new Hn("error",{error:O,lens:D.data}))})]}applyLens(m,g){return ye(this,void 0,void 0,function*(){const y=this.lensState.actions.applyLens({lens:m,launchData:g});return lf(Tn(y).pipe(ws(this.lensState),zo(this.lensState.events.pipe(ot("applyLens"),Jn(([b])=>b!==y))),va(([b])=>{if(TN(b,"applyLensFailed")&&b.data.lens.id===m.id)throw b.data.error}),cr("lensApplied"),Ve(()=>!0)),{defaultValue:!1})})}removeLens(){return ye(this,void 0,void 0,function*(){return Ws(this.lensState.getState(),"noLensApplied")?!0:lf(Tn(this.lensState.actions.removeLens()).pipe(ws(this.lensState),va(([m])=>{if(TN(m,"removeLensFailed"))throw m.data}),cr("noLensApplied"),zo(this.lensState.events.pipe(ot("applyLens"))),Ve(()=>!0)),{defaultValue:!1})})}play(m="live"){return ye(this,void 0,void 0,function*(){if(this.playing[m])return;this.playing[m]=!0;const g=this.renderTargetToCanvasType(m);return this.lensCore.playCanvas({type:g}).catch(y=>{throw this.playing[m]=!1,y})})}pause(m="live"){return ye(this,void 0,void 0,function*(){if(this.playing[m]===!1)return;this.playing[m]=!1;const g=this.renderTargetToCanvasType(m);return this.lensCore.pauseCanvas({type:g}).catch(y=>{throw this.playing[m]=!0,y})})}mute(m=!1){this.lensCore.setAllSoundsMuted({muted:!0,fade:m})}unmute(m=!1){this.lensCore.setAllSoundsMuted({muted:!1,fade:m})}setSource(m,g={}){return ye(this,void 0,void 0,function*(){yield this.safelyDetachSource();const y=v4(m)?c4(m,g):g4(m)?yj(m,g):m,b=this.playing;return this.playing={live:!1,capture:!1},yield y.attach(this.lensCore,this.frameEvents,E=>{gr.error(y1("Error occurred during source attachment.",E))}),this.source=y,b.live&&(yield this.play("live")),b.capture&&(yield this.play("capture")),y})}setFPSLimit(m){return ye(this,void 0,void 0,function*(){const g=m<Number.POSITIVE_INFINITY?m:0;return this.lensCore.setFPSLimit({fps:g})})}destroy(){return ye(this,void 0,void 0,function*(){try{yield this.lensCore.clearAllLenses(),yield this.lensCore.teardown()}catch(m){gr.warn("An error occurred in LensCore during the session termination process.",m)}this.subscriptions.forEach(m=>m.unsubscribe()),yield this.safelyDetachSource(),this.removePageVisibilityHandlers(),this.sessionState.dispatch("destroy",void 0),this.innerKeyboard.destroy(),this.metrics.destroy()})}renderTargetToCanvasType(m){return m==="capture"?this.lensCore.CanvasType.Capture:this.lensCore.CanvasType.Preview}safelyDetachSource(){return ye(this,void 0,void 0,function*(){if(this.source)try{yield this.source.detach(m=>{gr.error(y1("Error occurred during source detachment.",m))})}catch(m){gr.error(y1(`Detaching prior source of type ${r4(this.source)} failed.`,m))}})}},t=[Za(a4,Y$),sr(gr)],r=[sr(gr)],a=[Za(tT),sr(gr)],i=[Za(tT),sr(gr)],o=[sr(gr)],u=[sr(gr)],c=[Za(eX,cj),sr(gr)],f=[Za(ml),sr(gr)],h=[sr(gr)],Un(e,null,t,{kind:"method",name:"applyLens",static:!1,private:!1,access:{has:p=>"applyLens"in p,get:p=>p.applyLens}},null,n),Un(e,null,r,{kind:"method",name:"removeLens",static:!1,private:!1,access:{has:p=>"removeLens"in p,get:p=>p.removeLens}},null,n),Un(e,null,a,{kind:"method",name:"play",static:!1,private:!1,access:{has:p=>"play"in p,get:p=>p.play}},null,n),Un(e,null,i,{kind:"method",name:"pause",static:!1,private:!1,access:{has:p=>"pause"in p,get:p=>p.pause}},null,n),Un(e,null,o,{kind:"method",name:"mute",static:!1,private:!1,access:{has:p=>"mute"in p,get:p=>p.mute}},null,n),Un(e,null,u,{kind:"method",name:"unmute",static:!1,private:!1,access:{has:p=>"unmute"in p,get:p=>p.unmute}},null,n),Un(e,null,c,{kind:"method",name:"setSource",static:!1,private:!1,access:{has:p=>"setSource"in p,get:p=>p.setSource}},null,n),Un(e,null,f,{kind:"method",name:"setFPSLimit",static:!1,private:!1,access:{has:p=>"setFPSLimit"in p,get:p=>p.setFPSLimit}},null,n),Un(e,null,h,{kind:"method",name:"destroy",static:!1,private:!1,access:{has:p=>"destroy"in p,get:p=>p.destroy}},null,n),e})();const qy=De("CameraKitSession",[Ar.token,bv.token,mS.token,Ev.token,eo.token,vv.token,m4.token],(e,n,t,r,a,i,o)=>new tX(t,e,r,a,n,i,o)),nT=gt("LensAssetProvider"),rT=3,nX=De("registerLensAssetsProvider",[Ar.token,Il.token,gv.token,eo.token],(e,n,t,r)=>{const a=new Map;e.setRemoteAssetsProvider(i=>ye(void 0,void 0,void 0,function*(){var o,u,c,f,h;const{assetId:p,assetType:m,lensId:g}=i;try{if(((o=a.get(p))!==null&&o!==void 0?o:0)>rT)throw new Error(`Maximum consecutive asset load errors reached for asset ${p}`);const y=g??((u=r.getState().data)===null||u===void 0?void 0:u.id),b=y?n.getLensMetadata(y):void 0;yield t.loadAsset({assetDescriptor:i,lens:b&&Vy(b),assetManifest:(f=(c=b==null?void 0:b.content)===null||c===void 0?void 0:c.assetManifest)!==null&&f!==void 0?f:[],lowPriority:!1}),a.set(p,0)}catch(y){e.provideRemoteAssetsResponse({assetId:p,assetType:m});const b=((h=a.get(p))!==null&&h!==void 0?h:0)+1;a.set(p,b),b<=rT?nT.error(VW(`Error occurred while handling lens asset ${p} request.`,y)):nT.warn(`Maximum consecutive asset load errors reached for asset ${p}`)}}))});var Om;(function(e){e[e.METHOD_UNSET=0]="METHOD_UNSET",e[e.GET=1]="GET",e[e.POST=2]="POST",e[e.PUT=3]="PUT",e[e.DELETE=4]="DELETE",e[e.PATCH=5]="PATCH",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Om||(Om={}));var df;(function(e){e[e.LOCATION_UNSET=0]="LOCATION_UNSET",e[e.QUERY=1]="QUERY",e[e.HEADER=2]="HEADER",e[e.PATH=3]="PATH",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(df||(df={}));function aT(){return{}}const y4={encode(e,n=new X){return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=aT();for(;t.pos<r;){const i=t.uint32();if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return y4.fromPartial(e??{})},fromPartial(e){return aT()}};function iT(){return{remoteApiSpecs:[]}}const b4={encode(e,n=new X){for(const t of e.remoteApiSpecs)zp.encode(t,n.uint32(10).fork()).join();return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=iT();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.remoteApiSpecs.push(zp.decode(t,t.uint32()));continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return b4.fromPartial(e??{})},fromPartial(e){var n;const t=iT();return t.remoteApiSpecs=((n=e.remoteApiSpecs)===null||n===void 0?void 0:n.map(r=>zp.fromPartial(r)))||[],t}};function oT(){return{id:"",host:"",endpoints:[],tlsRequired:!1,maxRequestSizeBytes:0,maxResponseSizeBytes:0,maxResponseTimeMillis:0}}const zp={encode(e,n=new X){e.id!==""&&n.uint32(10).string(e.id),e.host!==""&&n.uint32(18).string(e.host);for(const t of e.endpoints)Wp.encode(t,n.uint32(26).fork()).join();return e.tlsRequired!==!1&&n.uint32(32).bool(e.tlsRequired),e.maxRequestSizeBytes!==0&&n.uint32(40).int32(e.maxRequestSizeBytes),e.maxResponseSizeBytes!==0&&n.uint32(48).int32(e.maxResponseSizeBytes),e.maxResponseTimeMillis!==0&&n.uint32(56).int32(e.maxResponseTimeMillis),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=oT();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.id=t.string();continue}case 2:{if(i!==18)break;a.host=t.string();continue}case 3:{if(i!==26)break;a.endpoints.push(Wp.decode(t,t.uint32()));continue}case 4:{if(i!==32)break;a.tlsRequired=t.bool();continue}case 5:{if(i!==40)break;a.maxRequestSizeBytes=t.int32();continue}case 6:{if(i!==48)break;a.maxResponseSizeBytes=t.int32();continue}case 7:{if(i!==56)break;a.maxResponseTimeMillis=t.int32();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return zp.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o,u;const c=oT();return c.id=(n=e.id)!==null&&n!==void 0?n:"",c.host=(t=e.host)!==null&&t!==void 0?t:"",c.endpoints=((r=e.endpoints)===null||r===void 0?void 0:r.map(f=>Wp.fromPartial(f)))||[],c.tlsRequired=(a=e.tlsRequired)!==null&&a!==void 0?a:!1,c.maxRequestSizeBytes=(i=e.maxRequestSizeBytes)!==null&&i!==void 0?i:0,c.maxResponseSizeBytes=(o=e.maxResponseSizeBytes)!==null&&o!==void 0?o:0,c.maxResponseTimeMillis=(u=e.maxResponseTimeMillis)!==null&&u!==void 0?u:0,c}};function sT(){return{path:"",methods:[],parameters:[],refId:""}}const Wp={encode(e,n=new X){e.path!==""&&n.uint32(10).string(e.path),n.uint32(18).fork();for(const t of e.methods)n.int32(t);n.join();for(const t of e.parameters)Kp.encode(t,n.uint32(26).fork()).join();return e.refId!==""&&n.uint32(34).string(e.refId),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=sT();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.path=t.string();continue}case 2:{if(i===16){a.methods.push(t.int32());continue}if(i===18){const o=t.uint32()+t.pos;for(;t.pos<o;)a.methods.push(t.int32());continue}break}case 3:{if(i!==26)break;a.parameters.push(Kp.decode(t,t.uint32()));continue}case 4:{if(i!==34)break;a.refId=t.string();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Wp.fromPartial(e??{})},fromPartial(e){var n,t,r,a;const i=sT();return i.path=(n=e.path)!==null&&n!==void 0?n:"",i.methods=((t=e.methods)===null||t===void 0?void 0:t.map(o=>o))||[],i.parameters=((r=e.parameters)===null||r===void 0?void 0:r.map(o=>Kp.fromPartial(o)))||[],i.refId=(a=e.refId)!==null&&a!==void 0?a:"",i}};function uT(){return{name:"",location:0,optional:!1,externalName:"",defaultValue:"",constant:!1}}const Kp={encode(e,n=new X){return e.name!==""&&n.uint32(10).string(e.name),e.location!==0&&n.uint32(16).int32(e.location),e.optional!==!1&&n.uint32(24).bool(e.optional),e.externalName!==""&&n.uint32(34).string(e.externalName),e.defaultValue!==""&&n.uint32(42).string(e.defaultValue),e.constant!==!1&&n.uint32(48).bool(e.constant),n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=uT();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.name=t.string();continue}case 2:{if(i!==16)break;a.location=t.int32();continue}case 3:{if(i!==24)break;a.optional=t.bool();continue}case 4:{if(i!==34)break;a.externalName=t.string();continue}case 5:{if(i!==42)break;a.defaultValue=t.string();continue}case 6:{if(i!==48)break;a.constant=t.bool();continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return Kp.fromPartial(e??{})},fromPartial(e){var n,t,r,a,i,o;const u=uT();return u.name=(n=e.name)!==null&&n!==void 0?n:"",u.location=(t=e.location)!==null&&t!==void 0?t:0,u.optional=(r=e.optional)!==null&&r!==void 0?r:!1,u.externalName=(a=e.externalName)!==null&&a!==void 0?a:"",u.defaultValue=(i=e.defaultValue)!==null&&i!==void 0?i:"",u.constant=(o=e.constant)!==null&&o!==void 0?o:!1,u}},rX={fullName:"com.snap.camerakit.v3.RemoteApiSpecs",methods:{getRemoteApiSpecs:{name:"GetRemoteApiSpecs",requestType:y4,requestStream:!1,responseType:b4,responseStream:!1,options:{idempotencyLevel:"NO_SIDE_EFFECTS"}}}},S4=De("remoteApiSpecsClient",[Df.token],e=>pv(rX,e));function E4(e,...n){var t;for(const r of n)(t=e.get(r))===null||t===void 0||t(),e.delete(r)}function lT(e,...n){for(const t of n){const r=e.get(t);r&&(E4(r.cancellationHandlers,...r.cancellationHandlers.keys()),e.delete(t))}}function _4({uri:e,lensState:n,sessionState:t,createLensRequestState:r,processRequest:a,processInternalError:i}){const o=new fr,u=new fr,c=new Map,f=n.events.pipe(ot("turnedOff"),va(([m])=>lT(c,m.data.id))),h=o.pipe(Ve(({request:m,lens:g,reply:y})=>{if(!c.has(g.id)){const E=r==null?void 0:r(m,g),_={cancellationHandlers:new Map,custom:E};c.set(g.id,_)}const b=c.get(g.id);return{request:m,reply:y,lens:g,state:b.custom,setCancellationHandler:E=>{b.cancellationHandlers.set(m.identifier,E)}}}),va(a)),p=u.pipe(va(m=>{var g;const y=(g=c.get(m.lens.id))===null||g===void 0?void 0:g.cancellationHandlers;y&&E4(y,m.request.requestId)}));return Yo(f,h,p).pipe(Ho((m,g)=>(i(m),g)),QK(),zo(t.events.pipe(ot("destroy")))).subscribe({complete:()=>lT(c,...c.keys())}),{uri:e,handleRequest(m,g,y){o.next({request:m,reply:g,lens:y})},cancelRequest(m,g){u.next({request:m,lens:g})}}}const A4="RequestValidationError",Uo=nr(A4);function aX(e,n){var t;const r=new URL(e.uri);for(const a of n){if(r.host!==a.host||r.protocol!==(a.tlsRequired?"https:":"http:"))continue;const i=r.pathname.replace(/^\/|\/$/g,"");for(const o of a.endpoints){const u=o.path.replace(/^\/|\/$/g,"");if(!i.startsWith(u))continue;const c=(t=Om[e.method])!==null&&t!==void 0?t:Om.UNRECOGNIZED;if(o.methods.includes(c)){iX(i.split(u)[1],o.parameters),oX(e.metadata,o.parameters),sX(r.searchParams,o.parameters);return}}}throw Uo("The request does not match any of the Remote API specifications.")}function iX(e,n){const t=e.split("/").filter(Boolean);let r=0;for(const a of n){if(a.location!==df.PATH)continue;const i=t[r],o=t[r+1];if(a.constant)if(i===a.name&&o===a.defaultValue)r+=2;else throw Uo(`Expected constant parameter '${a.name}' with value '${a.defaultValue}' at position ${r}, but found '${i}' and '${o}'.`);else if(a.optional)i===a.name&&(o!==void 0?r+=2:r+=1);else if(i===a.name&&o!==void 0)r+=2;else throw Uo(`Expected parameter '${a.name}' with a value at position ${r}, but found '${i}' and '${o}'.`)}if(r!==t.length){const a=t.slice(r).join("/");throw Uo(`Unexpected extra path components starting at position ${r}: '${a}'.`)}}function oX(e,n){for(const t of n){if(t.location!==df.HEADER)continue;const r=e[t.name];if(t.constant){if(r!==t.defaultValue)throw Uo(`Expected constant header '${t.name}' with value '${t.defaultValue}', but found '${r??"undefined"}'.`)}else if(!t.optional){if(r==null||vD(r))throw Uo(`Required header '${t.name}' is missing or empty.`)}}}function sX(e,n){for(const t of n){if(t.location!==df.QUERY)continue;const r=e.get(t.name);if(t.constant){if(r!==t.defaultValue)throw Uo(`Expected constant query parameter '${t.name}' with value '${t.defaultValue}', but found '${r??"undefined"}'.`)}else if(!t.optional){if(r==null||vD(r))throw Uo(`Required query parameter '${t.name}' is missing or empty.`)}}}const qp=gt("lensHttpHandler"),Yy="LensHttpHandlerError",cT=nr(Yy),uX=["Accept-Ranges","Cache-Control","Content-Language","Content-Length","Content-Type","Date","ETag","Expires","Last-Modified","Location"],lX=["x-sc-lenses-remote-api-spec-id"];function cX(e,n,t,r){let a;return _4({uri:["http://","https://"],lensState:e,sessionState:n,processRequest({request:i,lens:o,reply:u,setCancellationHandler:c}){return ye(this,void 0,void 0,function*(){a=a??fX(t);const f=yield a;dX(i,o,u,c,f,r)})},processInternalError(i){qp.error(i)}})}function fX(e){var n,t;return ye(this,void 0,void 0,function*(){const r=yield e.getRemoteApiSpecs({});if(!r.ok)throw new Error("Failed getting Remote API specs.",{cause:r.unwrapErr()});return(t=(n=r.unwrap().message)===null||n===void 0?void 0:n.remoteApiSpecs)!==null&&t!==void 0?t:[]})}function dX(e,n,t,r,a,i){return ye(this,void 0,void 0,function*(){try{aX(e,a);const{url:o,init:u}=hX(e),c=new AbortController;u.signal=c.signal,r(()=>c.abort());let f;if(i){const h="lensHttpHandler";try{const{uri:p,identifier:m,method:g,metadata:y,data:b}=e,E=i(o,u,{url:p,identifier:m,method:g,data:b,headers:y,lens:n});if(!pq(E))throw cT(`The '${h}' callback provided to Camera Kit must return a Promise.`);f=yield E}catch(p){throw p=p instanceof Error&&p.name===Yy?p:cT(`The '${h}' callback provided to Camera Kit configuration failed.`,p),p}}else f=yield fetch(o,u);t(yield pX(f))}catch(o){o instanceof Error&&o.name===Yy?(qp.warn(o),t(M1("LensHttpHandlerError","The lens HTTP request handler provided to Camera Kit failed."))):o instanceof Error&&o.name===A4?(qp.warn(o),t(M1("RequestValidationError",o.message))):(qp.error(o),t(M1("UnknownError","An unknown error occurred.")))}})}function M1(e,n){return{code:400,description:"",contentType:"text/plain",metadata:{"x-camera-kit-error-type":e},data:new TextEncoder().encode(n)}}function hX({uri:e,method:n,metadata:t,data:r}){const a=new Headers(t);for(const i of lX)a.delete(i);return{url:e,init:{headers:Object.fromEntries(a.entries()),body:n!=="GET"&&n!=="HEAD"&&n!==void 0?r:void 0,method:n}}}function pX(e){var n;return ye(this,void 0,void 0,function*(){const t={};for(const r of uX){const a=e.headers.get(r);a&&(t[r.toLowerCase()]=a)}return{code:e.status,description:"",contentType:(n=e.headers.get("Content-Type"))!==null&&n!==void 0?n:"",metadata:t,data:yield e.arrayBuffer()}})}const $y="://";function w4(e){const n=e.indexOf($y),t=e.slice(0,n),r=e.slice(n+$y.length);return{scheme:t,route:r}}function fT(e){return Rt(e)&&e.includes($y)}function mX(e){return Zt(e)&&(fT(e.uri)||Hi(fT,e.uri))&&$I(e.handleRequest)&&(ln(e.cancelRequest)||$I(e.cancelRequest))}function vX(e){return Hi(mX,e)}function gX(e){return Zt(e)&&zs(e.code)&&Rt(e.description)&&Rt(e.contentType)&&(dq(e.data)||mD(e.data))&&(ln(e.metadata)||xb(Rt)(e.metadata))}const I4=De("UriHandlers",()=>[]);function dT(){return{apiSpecIds:[]}}const R4={encode(e,n=new X){for(const t of e.apiSpecIds)n.uint32(10).string(t);return n},decode(e,n){const t=e instanceof B?e:new B(e);let r=n===void 0?t.len:t.pos+n;const a=dT();for(;t.pos<r;){const i=t.uint32();switch(i>>>3){case 1:{if(i!==10)break;a.apiSpecIds.push(t.string());continue}}if((i&7)===4||i===0)break;t.skip(i&7)}return a},create(e){return R4.fromPartial(e??{})},fromPartial(e){var n;const t=dT();return t.apiSpecIds=((n=e.apiSpecIds)===null||n===void 0?void 0:n.map(r=>r))||[],t}};var hT;(function(e){e.HTTP_METHOD_UNSET="HTTP_METHOD_UNSET",e.HTTP_METHOD_GET="HTTP_METHOD_GET",e.HTTP_METHOD_POST="HTTP_METHOD_POST",e.HTTP_METHOD_PUT="HTTP_METHOD_PUT",e.HTTP_METHOD_DELETE="HTTP_METHOD_DELETE",e.HTTP_METHOD_PATCH="HTTP_METHOD_PATCH",e.UNRECOGNIZED="UNRECOGNIZED"})(hT||(hT={}));var kt;(function(e){e.RESPONSE_CODE_UNSET="RESPONSE_CODE_UNSET",e.SUCCESS="SUCCESS",e.REDIRECTED="REDIRECTED",e.BAD_REQUEST="BAD_REQUEST",e.ACCESS_DENIED="ACCESS_DENIED",e.NOT_FOUND="NOT_FOUND",e.TIMEOUT="TIMEOUT",e.REQUEST_TOO_LARGE="REQUEST_TOO_LARGE",e.SERVER_ERROR="SERVER_ERROR",e.CANCELLED="CANCELLED",e.PROXY_ERROR="PROXY_ERROR",e.UNRECOGNIZED="UNRECOGNIZED"})(kt||(kt={}));function yX(e){switch(e){case kt.RESPONSE_CODE_UNSET:return 0;case kt.SUCCESS:return 1;case kt.REDIRECTED:return 2;case kt.BAD_REQUEST:return 3;case kt.ACCESS_DENIED:return 4;case kt.NOT_FOUND:return 5;case kt.TIMEOUT:return 6;case kt.REQUEST_TOO_LARGE:return 7;case kt.SERVER_ERROR:return 8;case kt.CANCELLED:return 9;case kt.PROXY_ERROR:return 10;case kt.UNRECOGNIZED:default:return-1}}var pT;(function(e){e.GRANT_TYPE_UNSET="GRANT_TYPE_UNSET",e.AUTHORIZATION_CODE="AUTHORIZATION_CODE",e.AUTHORIZATION_CODE_WITH_PKCE="AUTHORIZATION_CODE_WITH_PKCE",e.IMPLICIT="IMPLICIT",e.CLIENT_CREDENTIALS="CLIENT_CREDENTIALS",e.UNRECOGNIZED="UNRECOGNIZED"})(pT||(pT={}));var mT;(function(e){e.ERROR_TYPE_UNSET="ERROR_TYPE_UNSET",e.INVALID_REQUEST="INVALID_REQUEST",e.INVALID_CLIENT="INVALID_CLIENT",e.INVALID_GRANT="INVALID_GRANT",e.UNAUTHORIZED_CLIENT="UNAUTHORIZED_CLIENT",e.UNSUPPORTED_GRANT_TYPE="UNSUPPORTED_GRANT_TYPE",e.INVALID_SCOPE="INVALID_SCOPE",e.UNRECOGNIZED="UNRECOGNIZED"})(mT||(mT={}));const Yp=gt("RemoteApiServices"),bX=200,SX=":sc_lens_api_status",EX="application/octet-stream",_X="type.googleapis.com/com.snap.camerakit.v3.features.RemoteApiInfo",AX="af3f69c8-2e62-441f-8b1c-d3956f7b336c",wX={success:kt.SUCCESS,redirected:kt.REDIRECTED,badRequest:kt.BAD_REQUEST,accessDenied:kt.ACCESS_DENIED,notFound:kt.NOT_FOUND,timeout:kt.TIMEOUT,requestTooLarge:kt.REQUEST_TOO_LARGE,serverError:kt.SERVER_ERROR,cancelled:kt.CANCELLED,proxyError:kt.PROXY_ERROR},C4=De("remoteApiServices",()=>[]);function IX(e,n,t){for(const r of e)try{return r.getRequestHandler(n,t)}catch(a){Yp.warn("Client's Remote API request handler factory threw an error.",a)}}function RX(e,n,t,r,a){const i=new Map;for(const o of e){const u=i.get(o.apiSpecId)||[];i.set(o.apiSpecId,[...u,o])}return _4({uri:"app://remote-api/performApiRequest",lensState:t,sessionState:n,createLensRequestState(o,u){var c,f;return{supportedSpecIds:new Set([...((f=(c=r.getLensMetadata(u.id))===null||c===void 0?void 0:c.featureMetadata)!==null&&f!==void 0?f:[]).filter(h=>h.typeUrl===_X).flatMap(h=>R4.decode(h.value).apiSpecIds),AX])}},processRequest({request:o,reply:u,lens:c,setCancellationHandler:f,state:h}){var p;const{route:m}=w4(o.uri),[g,y]=m.split("/").slice(2),[b]=y.split("?"),E={specId:g},_=C=>{a.setOperationalMetrics(ga.count(Os(["lens","remote-api",C]),1,E))};if(_("requests"),!(h!=null&&h.supportedSpecIds.has(g)))return;const w={apiSpecId:g,body:o.data,endpointId:b,parameters:o.metadata};let I=IX((p=i.get(g))!==null&&p!==void 0?p:[],w,c);if(!I)return;_("handled-requests");let R;try{R=I(C=>{var O;_("responses");const D=(O=wX[C.status])!==null&&O!==void 0?O:kt.UNRECOGNIZED,P={code:bX,description:"",contentType:EX,data:C.body,metadata:Object.assign(Object.assign({},C.metadata),{[SX]:yX(D).toString()})};u(P)})}catch(C){Yp.warn("Client's Remote API request handler threw an error.",C)}typeof R=="function"&&f(()=>{try{R()}catch(C){Yp.warn("Client's Remote API request cancellation handler threw an error.",C)}})},processInternalError(o){Yp.error(o),a.setOperationalMetrics(ga.count(Os(["lens","remote-api","errors"]),1))}})}const vT=gt("uriHandlersRegister"),CX=De("registerUriHandlers",[Ea,Ar.token,eo.token,I4.token,mS.token,C4.token,Il.token,Ev.token,Xr.token,S4.token],(e,n,t,r,a,i,o,u,c,f)=>{if(!vX(r))throw new Error("Expected an array of UriHandler objects");const h=[cX(t,u,f,e.lensHttpHandler),...r,a.uriHandler,RX(i,u,t,o,c)];for(const{uri:p,handleRequest:m,cancelRequest:g}of h){const y=Array.isArray(p)?p:[p];for(const{scheme:b,route:E}of y.map(w4))n.registerUriListener(b,E,{handleRequest:_=>{const w=R=>{if(!gX(R))throw new Error("Expected UriResponse object");n.provideUriResponse(_.identifier,R)},I=t.getState();if(Ws(I,"noLensApplied")){vT.warn(`Got a URI request for ${_.uri}, but there is no active lens. The request will not be processed.`);return}m(_,w,I.data)},cancelRequest:_=>{if(g){const w=t.getState();if(Ws(w,"noLensApplied")){vT.warn(`Got a URI cancel request for ${_.uri}, but there is no active lens. The cancel request will not be processed.`);return}g(_,w.data)}}})}}),NX=cv(Am).map(([e])=>e),TX=`

----------------- Context -----------------

`,OX=NX.reduce((e,n)=>Math.max(e,n.length),0);function kX(e){const n=[];for(const{entry:t,count:r,lastTime:a}of e){const i=t.time.toISOString(),o=t.level.padStart(OX),u=t.messages.map(xX).join(" ");let c=r>1?` (Repeated ${r} times with the last occurrence at ${a.toISOString()})`:"";n.push(`${i} [${t.module}] ${o}: ${u}${c}`)}return n.join(`
`)}function xX(e){return e instanceof Error?Bb(e):e instanceof Date?e.toISOString():e+""}function gT(e,n,t,r){e.pipe(JK(({entries:a},i)=>{const o=a[a.length-1];return o&&o.entry.messages.join()===i.messages.join()&&o.entry.level===i.level?(o.count+=1,o.lastTime=i.time):a.push({entry:i,count:1,lastTime:i.time}),{entries:a.slice(-15),recent:i}},{entries:[],recent:{time:new Date,module:"any",level:"debug",messages:[]}}),Jn(({recent:a})=>a.level==="error"),Ve(({entries:a,recent:i})=>({context:a,error:i.messages.find(o=>o instanceof Error)})),Jn(({error:a})=>!!a)).subscribe(({error:a,context:i})=>{const o=r==null?void 0:r.getState(),u=o&&!Ws(o,"noLensApplied")?o.data.id:"none";n.dispatchEvent(new Hn("exception",{name:"exception",lensId:u,type:a.name,reason:`${hv(a)}${TX}${kX(i)}`})),t.setOperationalMetrics(ga.count("handled_exception",1,{type:a.name}))})}const jy=De("reportGlobalException",[bv.token,_a.token,Xr.token],(e,n,t)=>{const r=new fr;return gT(e.pipe(zo(r)),n,t),{attachLensContext:a=>{r.next(),gT(e,n,t,a)}}}),DX=De("reportSessionException",[jy.token,eo.token],(e,n)=>{e.attachLensContext(n)});class gl extends Ub{static level(n,t,r={}){const a=new gl(n,r);return a.add(t),a}constructor(n,t={}){super(n,t),this.name=n,this.levels=[]}add(n){this.levels.push(n)}toOperationalMetric(){const n=new Date,t=`${this.name}${Fb(this.dimensions)}`;return this.levels.map(r=>({name:t,timestamp:n,metric:{$case:"histogram",histogram:`${Math.ceil(r)}`}}))}}const PX=["gflops"],MX=De("reportBenchmarks",[_a.token,Xr.token,Ea],(e,n,t)=>ye(void 0,void 0,void 0,function*(){if(t.lensPerformance===void 0)return;const r=yield t.lensPerformance,a={name:"benchmarkComplete",performanceCluster:`${r.cluster}`,webglRendererInfo:r.webglRendererInfo},i={performance_cluster:r.cluster.toString()};for(const o of r.benchmarks){if(!PX.includes(o.name))continue;const u=Object.assign(Object.assign({},a),{benchmarkName:o.name,benchmarkValue:o.value});e.dispatchEvent(new Hn("benchmarkComplete",u)),n.setOperationalMetrics(gl.level(`benchmark.${o.name}`,o.value,i))}})),N4=e=>(n,t,r)=>{let a=e;const i=new Al,o=c=>{a=r(a,c),i.dispatchEvent(new Hn("state",a))};let u=!1;return i.addEventListener=new Proxy(i.addEventListener,{apply:(c,f,h)=>{if(u)throw new Error("Cannot add another event listener. The TypedEventTarget returned by scan only supports a single listener, and one has already been added.");u=!0,t.forEach(p=>n.addEventListener(p,o)),c.apply(f,h)}}),i.removeEventListener=new Proxy(i.removeEventListener,{apply:(c,f,h)=>{t.forEach(p=>n.removeEventListener(p,o)),c.apply(f,h)}}),i},LX=["asset","lens_content",oS,sS,Cm,Wb],BX=e=>{switch(e.requestType){case Cm:return[["delta",e.delta]];case Wb:return[["method",e.methodName]];case oS:case sS:return[["custom",e.customBuild]];default:return[]}},UX=e=>e.requestType==="asset"?e.assetType:e.requestType,FX=e=>{switch(e.type){case"started":case"errored":return 0;case"completed":return e.detail.sizeByte/1024;default:Wi()}},VX=e=>{switch(e.type){case"started":case"errored":return"0";case"completed":return e.detail.status.toString();default:Wi()}},GX=e=>{const n=e;return LX.includes(n.requestType)},HX=De("reportHttpMetrics",[Xr.token,jo.token],(e,n)=>{N4({name:"inProgress",inProgress:new Map})(n,["started","completed","errored"],(t,r)=>{var a;const{inProgress:i}=t,{dimensions:o,requestId:u}=r.detail;if(!GX(o))return t;switch(r.type){case"started":const c=r.detail.timer;return i.set(u,{timer:c}),{name:"inProgress",inProgress:i};case"completed":case"errored":const f=i.get(u);if(!f)return t;i.delete(u);const h=FX(r),p=VX(r),m={content_type:UX(o),network_type:(a=zi().connectionType)!==null&&a!==void 0?a:"unknown",status:p};for(const[g,y]of BX(o))m[g]=y;return f.timer.measure(m),{name:"completed",inProgress:t.inProgress,dimensions:m,downloadSizeKb:h,timer:f.timer};default:Wi()}}).addEventListener("state",({detail:t})=>{if(t.name!=="completed")return;const{dimensions:r,timer:a,downloadSizeKb:i}=t;e.setOperationalMetrics(ga.count("download_finished",1,r)),e.setOperationalMetrics(gl.level("download_size_kb",i,r)),e.setOperationalMetrics(a)})}),zX=De("reportLegalState",[hS.token,_a.token,Xr.token],(e,n,t)=>{e.events.pipe(ot("accept","reject"),Ve(([{data:r,name:a}])=>({name:"legalPrompt",legalPromptId:r,legalPromptResult:a==="accept"?qc.CAMERA_KIT_LEGAL_PROMPT_ACCEPTED:qc.CAMERA_KIT_LEGAL_PROMPT_DISMISSED}))).subscribe({next:r=>{n.dispatchEvent(new Hn("legalPrompt",r)),t.setOperationalMetrics(ga.count("legal_prompt_interaction",1,{accepted:(r.legalPromptResult===qc.CAMERA_KIT_LEGAL_PROMPT_ACCEPTED).toString()}))}})}),WX=["lens_content","asset"],KX=e=>{const n=e.requestType;return typeof n=="string"&&WX.includes(n)},qX=De("reportLensAndAssetDownload",[_a.token,Xr.token,jo.token],(e,n,t)=>{N4({name:"inProgress",inProgress:new Map})(t,["started","completed","errored"],(r,a)=>{var i;const{inProgress:o}=r,{dimensions:u,requestId:c}=a.detail;if(!KX(u))return r;switch(a.type){case"started":const f=a.detail.timer;return o.set(c,{timer:f}),{name:"inProgress",inProgress:o};case"completed":const h=o.get(c);if(!h)return r;o.delete(c);const{duration:p}=(i=h.timer.measure())!==null&&i!==void 0?i:{duration:0},m=p/1e3,{sizeByte:g}=a.detail;switch(u.requestType){case"lens_content":return{name:"completed",inProgress:o,event:new Hn("lensDownload",{name:"lensDownload",lensId:u.lensId,automaticDownload:!1,sizeByte:`${Math.ceil(g)}`,downloadTimeSec:m})};case"asset":return{name:"completed",inProgress:o,event:new Hn("assetDownload",{name:"assetDownload",assetId:u.assetId,automaticDownload:!1,sizeByte:`${Math.ceil(g)}`,downloadTimeSec:m})};default:Wi()}case"errored":if(!o.get(c))return r;o.delete(c);const b=a.detail.error;return{name:"completed",inProgress:o,event:new Hn("exception",{name:"exception",lensId:u.lensId,type:u.requestType==="lens_content"?"lens":"asset",reason:hv(b)})};default:Wi()}}).addEventListener("state",({detail:r})=>{r.name==="completed"&&(e.dispatchEvent(r.event),r.event.detail.name==="exception"&&n.setOperationalMetrics(ga.count("handled_exception",1,{type:r.event.detail.type})))})}),YX=De("reportLensValidationFailed",[eo.token,_a.token],(e,n)=>{e.events.pipe(ot("applyLensFailed"),Jn(([t])=>t.data.error.name==="LensContentValidationError")).subscribe({next:([{data:t}])=>{const{lens:r}=t,a={name:"lensContentValidationFailed",lensId:r.id};n.dispatchEvent(new Hn("lensContentValidationFailed",a))}})}),T4="America/Los_Angeles",$c=new Intl.DateTimeFormat("en-US",{timeZone:T4,year:"numeric",month:"numeric",day:"numeric"}),km=new Intl.DateTimeFormat("en-US",{timeZone:T4,year:"numeric",month:"numeric"}),$X=.1;function jX(e,n){return ye(this,void 0,void 0,function*(){let t=!1,r=!1;try{const a=yield n.retrieve(e),i=new Date;a?(t=$c.format(a)!==$c.format(i),r=km.format(a)!==km.format(i)):(t=!0,r=!0),yield n.store(e,i)}catch(a){console.error(`Error handling persistence for lensId ${e}: ${a}`),t=!1,r=!1}return{isLensFirstWithinDay:t,isLensFirstWithinMonth:r}})}const XX=De("reportLensView",[qy.token,eo.token,Ev.token,_a.token,Xr.token,Ea],(e,n,t,r,a,i)=>ye(void 0,void 0,void 0,function*(){var o;const{cluster:u,webglRendererInfo:c}=(o=yield i.lensPerformance)!==null&&o!==void 0?o:{cluster:0,webglRendererInfo:"unknown"},f=new mv(()=>60*24*60*60,new wl({databaseName:"recentLensViews"}));Yo(n.events.pipe(ot("downloadComplete"),Ve(([h])=>h.data)),n.events.pipe(cr("lensApplied"),Ns(([,h])=>t.events.pipe(ot("resume"),zo(n.events.pipe(ot("removeLens"))),Ve(()=>h.data))))).pipe(Ve(h=>[Ui(),h.id,h.groupId]),ur(([h,p,m])=>{const g=Ws(n.getState(),"lensApplied"),y=g?Tn(0):n.events.pipe(ot("resourcesLoaded"),Jn(([E])=>E.data.id===p),ma(1),Ve(()=>(Ui()-h)/1e3)),b=(g?Tn([Ui(),e.metrics.beginMeasurement()]):n.events.pipe(ot("turnedOn"),Jn(([E])=>E.data.id===p),Ve(()=>[Ui(),e.metrics.beginMeasurement()]))).pipe(ma(1),ur(([E,_])=>n.events.pipe(ot("turnedOff"),Jn(([w])=>w.data.id===p),cD(t.events.pipe(ot("suspend"))),Ve(()=>(_.end(),Object.assign({viewTimeSec:(Ui()-E)/1e3},_.measure()))))));return y.pipe(lD(b,Er(jX(p,f))),zo(n.events.pipe(ot("turnedOn"),Jn(([E])=>E.data.id!==p))),ma(1),Ve(([E,_,w])=>Object.assign(Object.assign({applyDelaySec:E,lensId:p,lensGroupId:m},_),w)))})).subscribe({next:({applyDelaySec:h,lensId:p,lensGroupId:m,viewTimeSec:g,avgFps:y,lensFrameProcessingTimeMsAvg:b,lensFrameProcessingTimeMsStd:E,lensFrameProcessingTimeMsMedian:_,lensFrameProcessingN:w,isLensFirstWithinDay:I,isLensFirstWithinMonth:R})=>ye(void 0,void 0,void 0,function*(){if(g<$X)return;const C={name:"lensView",applyDelaySec:h,avgFps:y,lensId:p,lensGroupId:m,lensFrameProcessingTimeMsAvg:b,lensFrameProcessingTimeMsStd:E,recordingTimeSec:0,viewTimeSec:g,isLensFirstWithinDay:I,isLensFirstWithinMonth:R,performanceCluster:`${u}`,webglRendererInfo:c};r.dispatchEvent(new Hn("lensView",C)),a.setOperationalMetrics(gl.level("lens_view",g*1e3)),w>=30&&a.setOperationalMetrics(gl.level("lens_view_frame-processing-time",_,{performance_cluster:u.toString()}))})})})),ZX=.1,QX=De("reportLensWait",[eo.token,_a.token],(e,n)=>{e.events.pipe(ot("applyLens"),ur(([t])=>{const r=t.data.lens.id,a=t.data.lens.groupId,i=Ui();return e.events.pipe(ot("firstFrameProcessed","applyLens"),ma(1),Ve(()=>[(Ui()-i)/1e3,r,a]))})).subscribe({next:([t,r,a])=>{if(t<ZX)return;const i={name:"lensWait",lensId:r,viewTimeSec:t,lensGroupId:a};n.dispatchEvent(new Hn("lensWait",i))}})}),JX=De("reportUserSession",[_a.token],e=>ye(void 0,void 0,void 0,function*(){var n,t;const r="userSessionInfo",a=new wl({databaseName:"SessionHistory"}),i=new Date,o=$c.format(i),u=$c.formatToParts(i),{day:c,month:f,year:h}=u.reduce((w,{type:I,value:R})=>Object.assign(Object.assign({},w),{[I]:parseInt(R)}),{}),p=yield a.retrieve(r),m=p==null?void 0:p.mostRecentSessionStartDate,g=m?$c.format(m):null,y=new Map([[1,yr.ONE_SESSION],[2,yr.TWO_SESSION],[3,yr.THREE_SESSION],[4,yr.FOUR_SESSION],[5,yr.FIVE_SESSION],[6,yr.SIX_SESSION],[7,yr.SEVEN_SESSION],[8,yr.EIGHT_SESSION],[9,yr.NINE_SESSION]]);let b=(n=p==null?void 0:p.dailySessionBucket)!==null&&n!==void 0?n:yr.NO_SESSION_BUCKET,E=!1;g===o?(b=(t=y.get(b+1))!==null&&t!==void 0?t:yr.TEN_OR_MORE_SESSION,yield a.store(r,{mostRecentSessionStartDate:i,dailySessionBucket:b})):(E=!m||km.format(m)!==km.format(i),yield a.store(r,{mostRecentSessionStartDate:i,dailySessionBucket:b=yr.ONE_SESSION}));const _={name:"session",dailySessionBucket:b,isFirstWithinMonth:E,month:`${f}`,day:`${c}`,year:`${h}`};e.dispatchEvent(new Hn("session",_))})),eZ=De("reportPlatformCapabilities",[Xr.token],e=>ye(void 0,void 0,void 0,function*(){const{webgl:n,wasm:t,webxr:r}=yield iS();e.setOperationalMetrics(ga.count(Os(["platform","webgl"]),n.supported?1:0)),e.setOperationalMetrics(ga.count(Os(["platform","wasm"]),t.supported?1:0)),e.setOperationalMetrics(ga.count(Os(["platform","webxr"]),r.supported?1:0))})),tZ=new xo({}).provides(HX).provides(MX).provides(qX).provides(zX).provides(eZ),nZ=new xo({}).provides(JX).provides(XX).provides(QX).provides(DX).provides(YX),vS=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),rZ=vS?Promise.resolve().then(function(){return sZ}):Promise.resolve().then(function(){return hZ});async function aZ(...e){return(await rZ).default(...e)}vS?Promise.resolve().then(function(){return lZ}):Promise.resolve().then(function(){return mZ});vS?Promise.resolve().then(function(){return fZ}):Promise.resolve().then(function(){return gZ});const iZ=async e=>{const n=await e.getFile();return n.handle=e,n};var oZ=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const n=[];e.forEach((a,i)=>{n[i]={description:a.description||"Files",accept:{}},a.mimeTypes?a.mimeTypes.map(o=>{n[i].accept[o]=a.extensions||[]}):n[i].accept["*/*"]=a.extensions||[]});const t=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:n,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),r=await Promise.all(t.map(iZ));return e[0].multiple?r:r[0]},sZ={__proto__:null,default:oZ};function $p(e){function n(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var r=t.done;return Promise.resolve(t.value).then(function(a){return{value:a,done:r}})}return $p=function(t){this.s=t,this.n=t.next},$p.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return r===void 0?Promise.resolve({value:t,done:!0}):n(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return r===void 0?Promise.reject(t):n(r.apply(this.s,arguments))}},new $p(e)}const O4=async(e,n,t=e.name,r)=>{const a=[],i=[];var o,u=!1,c=!1;try{for(var f,h=function(p){var m,g,y,b=2;for(typeof Symbol<"u"&&(g=Symbol.asyncIterator,y=Symbol.iterator);b--;){if(g&&(m=p[g])!=null)return m.call(p);if(y&&(m=p[y])!=null)return new $p(m.call(p));g="@@asyncIterator",y="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());u=!(f=await h.next()).done;u=!1){const p=f.value,m=`${t}/${p.name}`;p.kind==="file"?i.push(p.getFile().then(g=>(g.directoryHandle=e,g.handle=p,Object.defineProperty(g,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>m})))):p.kind!=="directory"||!n||r&&r(p)||a.push(O4(p,n,m,r))}}catch(p){c=!0,o=p}finally{try{u&&h.return!=null&&await h.return()}finally{if(c)throw o}}return[...(await Promise.all(a)).flat(),...await Promise.all(i)]};var uZ=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const n=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await n.values()).next()).done?[n]:O4(n,e.recursive,void 0,e.skipDirectory)},lZ={__proto__:null,default:uZ},cZ=async(e,n=[{}],t=null,r=!1,a=null)=>{Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled";const i=[];let o=null;if(e instanceof Blob&&e.type?o=e.type:e.headers&&e.headers.get("content-type")&&(o=e.headers.get("content-type")),n.forEach((f,h)=>{i[h]={description:f.description||"Files",accept:{}},f.mimeTypes?(h===0&&o&&f.mimeTypes.push(o),f.mimeTypes.map(p=>{i[h].accept[p]=f.extensions||[]})):o?i[h].accept[o]=f.extensions||[]:i[h].accept["*/*"]=f.extensions||[]}),t)try{await t.getFile()}catch(f){if(t=null,r)throw f}const u=t||await window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:i,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1});!t&&a&&a(u);const c=await u.createWritable();return"stream"in e?(await e.stream().pipeTo(c),u):"body"in e?(await e.body.pipeTo(c),u):(await c.write(await e),await c.close(),u)},fZ={__proto__:null,default:cZ},dZ=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((n,t)=>{const r=document.createElement("input");r.type="file";const a=[...e.map(c=>c.mimeTypes||[]),...e.map(c=>c.extensions||[])].join();r.multiple=e[0].multiple||!1,r.accept=a||"",r.style.display="none",document.body.append(r);const i=c=>{typeof o=="function"&&o(),n(c)},o=e[0].legacySetup&&e[0].legacySetup(i,()=>o(t),r),u=()=>{window.removeEventListener("focus",u),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",u)}),r.addEventListener("change",()=>{window.removeEventListener("focus",u),r.remove(),i(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),hZ={__proto__:null,default:dZ},pZ=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((n,t)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const a=o=>{typeof i=="function"&&i(),n(o)},i=e[0].legacySetup&&e[0].legacySetup(a,()=>i(t),r);r.addEventListener("change",()=>{let o=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(o=o.filter(u=>u.webkitRelativePath.split("/").every(c=>!e[0].skipDirectory({name:c,kind:"directory"})))):o=o.filter(u=>u.webkitRelativePath.split("/").length===2),a(o)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),mZ={__proto__:null,default:pZ},vZ=async(e,n={})=>{Array.isArray(n)&&(n=n[0]);const t=document.createElement("a");let r=e;"body"in e&&(r=await async function(o,u){const c=o.getReader(),f=new ReadableStream({start:m=>async function g(){return c.read().then(({done:y,value:b})=>{if(!y)return m.enqueue(b),g();m.close()})}()}),h=new Response(f),p=await h.blob();return c.releaseLock(),new Blob([p],{type:u})}(e.body,e.headers.get("content-type"))),t.download=n.fileName||"Untitled",t.href=URL.createObjectURL(await r);const a=()=>{typeof i=="function"&&i()},i=n.legacySetup&&n.legacySetup(a,()=>i(),t);return t.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(t.href),3e4),a()}),t.click(),null},gZ={__proto__:null,default:vZ};const yZ=65496,bZ=65505,SZ=1165519206,EZ=18761,_Z=274;var yT;(function(e){e[e.TopLeft=1]="TopLeft",e[e.TopRight=2]="TopRight",e[e.BottomRight=3]="BottomRight",e[e.BottomLeft=4]="BottomLeft",e[e.LeftTop=5]="LeftTop",e[e.RightTop=6]="RightTop",e[e.RightBottom=7]="RightBottom",e[e.LeftBottom=8]="LeftBottom"})(yT||(yT={}));function AZ(e){const n=new DataView(e);if(n.getUint16(0,!1)!==yZ)return;const t=n.byteLength;let r=2;for(;r<t;){if(n.getUint16(r+2,!1)<=8)return;let a=n.getUint16(r,!1);if(r+=2,a===bZ){if(n.getUint32(r+=2,!1)!==SZ)return;let i=n.getUint16(r+=6,!1)===EZ;r+=n.getUint32(r+4,i);let o=n.getUint16(r,i);r+=2;for(let u=0;u<o;u++)if(n.getUint16(r+u*12,i)===_Z)return n.getUint16(r+u*12+8,i)}else{if((a&65280)!==65280)break;r+=n.getUint16(r,!1)}}}const Xy=gt("lensClientInterfaceImagePicker"),bT={image:["image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/tiff","image/webp"],video:["video/3gpp","video/3gpp2","video/mp2t","video/mp4","video/mpeg","video/ogg","video/quicktime","video/webm","video/x-msvideo"]};function*wZ(e){const n=typeof document<"u"?document.createElement("video"):void 0;for(const t of e)n!=null&&n.canPlayType(t)&&(yield t)}function IZ(e){return new Promise((n,t)=>{const r=new FileReader;r.addEventListener("load",a=>{n(a.target.result)}),r.addEventListener("error",a=>{t(a.target.error)}),r.readAsArrayBuffer(e)})}function RZ({ImageEnabled:e,VideoEnabled:n}){const t=[];if(e==="1"&&t.push(...bT.image),n==="1"&&t.push(...wZ(bT.video)),t.length===0)throw new Error("Unknown media type requested.");return t}function CZ(e,n){var t;const r={1:n.ExternalMediaOrientation.CW0,2:n.ExternalMediaOrientation.CW0,3:n.ExternalMediaOrientation.CW180,4:n.ExternalMediaOrientation.CW180,5:n.ExternalMediaOrientation.CW90,6:n.ExternalMediaOrientation.CW90,7:n.ExternalMediaOrientation.CW270,8:n.ExternalMediaOrientation.CW270};try{return r[(t=AZ(e))!==null&&t!==void 0?t:1]}catch(a){return Xy.info("Error occurred while reading EXIF orientation tag.",a),n.ExternalMediaOrientation.CW0}}function NZ(e,n,t){return ye(this,void 0,void 0,function*(){const r=RZ(e);Xy.debug(`Opening file dialog for MIME types: ${r}`);const a=yield t({mimeTypes:r},aZ);if(Array.isArray(a))throw new Error("Multiple files are not supported.");Xy.debug(`Selected file MIME type: ${a.type}`);const i=yield IZ(a);a.type.startsWith("image/")?n.provideExternalImage({data:i,orientation:CZ(i,n),faceRects:[{origin:{x:0,y:0},size:{width:1,height:1}}]}):n.provideExternalVideo({data:i,orientation:n.ExternalMediaOrientation.CW0})})}const k4=De("filePicker",()=>(e,n)=>n(e)),ST=gt("lensClientInterface"),TZ=De("registerLensClientInterfaceHandler",[Ar.token,k4.token],(e,n)=>{if(!e.setClientInterfaceRequestHandler){ST.warn("Current LensCore version doesn't support lens client interface requests");return}e.setClientInterfaceRequestHandler(({data:t,interfaceControl:r,interfaceAction:a})=>ye(void 0,void 0,void 0,function*(){r===e.InterfaceControl.ImagePicker&&a===e.InterfaceAction.Show&&(yield NZ(t,e,n).catch(i=>{ST.error(PW("Error occurred while attempting to select an image file for the lens request.",i))}))}))}),OZ=gt("setPreloadedConfiguration"),kZ=De("setPreloadedConfiguration",[Ar.token,Ji.token],(e,n)=>{n.getNamespace(al.LENS_CORE_CONFIG).pipe(ma(1)).subscribe({next:t=>{const r=t.map(({configId:a,value:i})=>({configId:a,value:i}));e.setPreloadedConfiguration(r)},error:OZ.error})});function xZ(e){return Zt(e)&&DZ(e.weather)}function DZ(e){return Zt(e)&&Rt(e.locationName)&&zs(e.celsius)&&zs(e.fahrenheit)&&!ln(e.hourlyForecasts)&&Hi(PZ,e.hourlyForecasts)}function PZ(e){return Zt(e)&&zs(e.celsius)&&zs(e.fahrenheit)&&Rt(e.displayTime)&&Rt(e.weatherCondition)&&Rt(e.localizedWeatherCondition)}const x4=De("geoDataProvider",()=>()=>{}),MZ=gt("registerGeoDataProvider"),LZ=De("registerGeoDataProvider",[Ar.token,x4.token],(e,n)=>{if(!e.setGeoDataProvider){MZ.warn("setGeoDataProvider is not defined.");return}e.setGeoDataProvider(()=>{const t=n();if(t){if(!xZ(t))throw new Error("Expected GeoData object.");e.provideGeoData({geoData:t})}})}),Pc=gt("CameraKit"),BZ=["lensView","lensWait"];let UZ=(()=>{var e;let n=[],t,r;return e=class{constructor(i,o,u,c,f,h){this.lensRepository=(Of(this,n),i),this.lensCore=o,this.pageVisibility=u,this.container=c,this.remoteConfig=f,this.metrics=new Al,this.sessions=[],this.lenses={repository:this.lensRepository},BZ.forEach(p=>{h.addEventListener(p,m=>this.metrics.dispatchEvent(m))})}createSession({liveRenderTarget:i,renderWhileTabHidden:o}={}){return ye(this,void 0,void 0,function*(){const u=p=>{p.name==="LensCoreAbortError"?Pc.error(UW("Unrecoverable error occurred during lens execution. The CameraKitSession will be destroyed.",p)):Pc.error(BW("Error occurred during lens execution. The lens cannot be rendered and will be removed from the CameraKitSession.",p))},c=this.container.get(Ea);if(yield this.lensCore.initialize({canvas:i,shouldUseWorker:!o&&c.shouldUseWorker,exceptionHandler:u}),this.lensCore.setGpuIndex)try{yield this.lensCore.setGpuIndex({gpuIndex:yield lf(this.remoteConfig.getGpuIndexConfig())})}catch(p){Pc.error(new Error("Cannot set GPU index.",{cause:p}))}c.fonts.length>0&&this.lensCore.setSystemFonts({fonts:c.fonts}),yield this.lensCore.setRenderLoopMode({mode:o?this.lensCore.RenderLoopMode.SetTimeout:this.lensCore.RenderLoopMode.RequestAnimationFrame});const h=this.container.copy().provides(Ev).provides(eo).provides(mS).provides(m4).provides(qy).run(nX).run(TZ).run(LZ).run(kZ).run(nZ).run(CX).get(qy.token);return this.sessions.push(h),h})}destroy(){return ye(this,void 0,void 0,function*(){dD(),this.pageVisibility.destroy(),yield Promise.all(this.sessions.map(i=>i.destroy())),this.sessions=[]})}},t=[sr(Pc)],r=[sr(Pc)],Un(e,null,t,{kind:"method",name:"createSession",static:!1,private:!1,access:{has:a=>"createSession"in a,get:a=>a.createSession}},null,n),Un(e,null,r,{kind:"method",name:"destroy",static:!1,private:!1,access:{has:a=>"destroy"in a,get:a=>a.destroy}},null,n),e})();const ET=De("CameraKit",[Il.token,_a.token,Ar.token,vv.token,Ji.token,Gx],(e,n,t,r,a,i)=>new UZ(e,t,r,i,a,n));function FZ(){return ye(this,void 0,void 0,function*(){const{wasm:e,webgl:n}=yield iS();if(!e.supported)throw e.error;if(!n.supported)throw n.error})}var Ln=[];for(var L1=0;L1<256;++L1)Ln.push((L1+256).toString(16).slice(1));function VZ(e,n=0){return(Ln[e[n+0]]+Ln[e[n+1]]+Ln[e[n+2]]+Ln[e[n+3]]+"-"+Ln[e[n+4]]+Ln[e[n+5]]+"-"+Ln[e[n+6]]+Ln[e[n+7]]+"-"+Ln[e[n+8]]+Ln[e[n+9]]+"-"+Ln[e[n+10]]+Ln[e[n+11]]+Ln[e[n+12]]+Ln[e[n+13]]+Ln[e[n+14]]+Ln[e[n+15]]).toLowerCase()}var dh,GZ=new Uint8Array(16);function HZ(){if(!dh&&(dh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dh(GZ)}var zZ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const _T={randomUUID:zZ};function D4(e,n,t){if(_T.randomUUID&&!e)return _T.randomUUID();e=e||{};var r=e.random||(e.rng||HZ)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,VZ(r)}const P4=gt("BusinessEventsReporter"),WZ={cellular:To.CAMERA_KIT_CONNECTIVITY_TYPE_MOBILE,bluetooth:To.CAMERA_KIT_CONNECTIVITY_TYPE_BLUETOOTH,wifi:To.CAMERA_KIT_CONNECTIVITY_TYPE_WIFI,unknown:To.CAMERA_KIT_CONNECTIVITY_TYPE_UNKNOWN,none:To.CAMERA_KIT_CONNECTIVITY_TYPE_UNREACHABLE},AT="vendorUuid",KZ=BD(60),qZ=e=>ye(void 0,void 0,void 0,function*(){try{const n=yield e.retrieve(AT);if(n)return n;const t=D4();return yield e.store(AT,t),t}catch{throw new Error("Failed to generate vendor UUID")}});function YZ(e,n,t,r){const a=D4();P4.log(`Session ID: ${a}`);let i=1;const o=(f,h,p)=>{var m;const{sdkShortVersion:g,sdkLongVersion:y,lensCore:b,locale:E,origin:_,deviceModel:w,connectionType:I}=zi(),R=(m=WZ[I])!==null&&m!==void 0?m:To.CAMERA_KIT_CONNECTIVITY_TYPE_UNKNOWN;return Object.assign(Object.assign({},f),{cameraKitEventBase:Qt.fromPartial({kitEventBase:My.fromPartial({locale:E,kitVariant:Uy.CAMERA_KIT_WEB,kitVariantVersion:g,kitClientTimestampMillis:`${Date.now()}`}),deviceCluster:"0",cameraKitVersion:y,lensCoreVersion:b.version,deviceModel:w,cameraKitVariant:By.CAMERA_KIT_VARIANT_PARTNER,cameraKitFlavor:Ly.CAMERA_KIT_FLAVOR_DEBUG,appId:_,deviceConnectivity:R,sessionId:a,appVendorUuid:h,partnerUuid:p})})},u=(f,h)=>{const{osName:p,osVersion:m}=zi();return n.setBusinessEvents(wy.fromPartial({eventName:f,osType:p,osVersion:m,maxSequenceIdOnInstance:"0",sequenceId:`${i++}`,eventData:h}))},c=cv(t).map(([f,h])=>Hs(e,f).pipe(Ve(p=>({event:p,createEventData:h}))));Yo(...c).pipe(lD(r)).subscribe(([{event:f,createEventData:h},{appVendorUuid:p,partnerUuid:m}])=>{const[g,y]=h(o(f.detail,p,m));u(g,y)})}function $Z(e,n){const t=new mv(()=>KZ,new wl({databaseName:"VendorAnalytics"}));return n.getInitializationConfig().pipe(ma(1),Ns(({appVendorUuidOptIn:r})=>{const a=e.analyticsId;return r?Er(qZ(t)).pipe(Ve(i=>({appVendorUuid:i,partnerUuid:a}))):Tn({appVendorUuid:void 0,partnerUuid:a})}),Ho(r=>(P4.warn("Failed to retrieve or generate vendor UUID.",r),Tn({appVendorUuid:void 0,partnerUuid:e.analyticsId}))))}const jZ=De("businessEventsReporter",[_a.token,Xr.token,Ea,Ji.token],(e,n,t,r)=>{const a=$Z(t,r);YZ(e,n,{assetDownload:i=>["CAMERA_KIT_ASSET_DOWNLOAD",{cameraKitAssetDownload:Ny.fromPartial(i)}],assetValidationFailed:i=>["CAMERA_KIT_ASSET_VALIDATION_FAILED",{cameraKitAssetValidationFailed:xy.fromPartial(i)}],benchmarkComplete:i=>["CAMERA_KIT_WEB_BENCHMARK_COMPLETE",{cameraKitWebBenchmarkComplete:Dy.fromPartial(i)}],exception:i=>["CAMERA_KIT_EXCEPTION",{cameraKitException:Ty.fromPartial(i)}],legalPrompt:i=>["CAMERA_KIT_LEGAL_PROMPT",{cameraKitLegalPrompt:Py.fromPartial(i)}],lensDownload:i=>["CAMERA_KIT_LENS_DOWNLOAD",{cameraKitLensDownload:Cy.fromPartial(i)}],lensView:i=>["CAMERA_KIT_WEB_LENS_SWIPE",{cameraKitWebLensSwipe:Ry.fromPartial(i)}],lensWait:i=>["CAMERA_KIT_LENS_SPIN",{cameraKitLensSpin:Iy.fromPartial(i)}],lensContentValidationFailed:i=>["CAMERA_KIT_LENS_CONTENT_VALIDATION_FAILED",{cameraKitLensContentValidationFailed:ky.fromPartial(i)}],session:i=>["CAMERA_KIT_SESSION",{cameraKitSession:Oy.fromPartial(i)}]},a)}),XZ=De("registerLogEntriesSubscriber",[Ea,bv.token],(e,n)=>{n.pipe(Jn(t=>Am[t.level]>=Am[e.logLevel])).subscribe(t=>{switch(e.logger){case"console":const r=zi().browser.brand==="Chrome"?t.messages.map(a=>(a instanceof Error&&(a.stack=hv(a)),a)):t.messages;console[t.level](`[CameraKit.${t.module}]`,...r);break}})}),M4=De("lensesClient",[Df.token],e=>pv(xq,e)),ZZ=gt("CameraKitLensSource"),QZ=e=>{var n,t;return((t=(n=e.value)===null||n===void 0?void 0:n.anyValue)===null||t===void 0?void 0:t.value)instanceof Uint8Array},JZ={id:"60515300902",name:"Watermark",content:{lnsSha256:"3EDEAEBCD51A547FF4D1F5708FBD6F4D628AD736BEE07AB3844B14E6C69EC510",lnsUrlBolt:"https://bolt-gcdn.sc-cdn.net/3/L6uAe5Fhyg0ZFf3RLsCVZ?bo=EhgaABoAMgF9OgEEQgYIkbHPpgZIAlASYAE%3D&uc=18"}},eQ=De(Nm.token,[Nm.token,M4.token,Ji.token],(e,n,t)=>[{isGroupOwner(r){return r===pS},loadLens(){return ye(this,void 0,void 0,function*(){const r=yield lf(t.get("CAMERA_KIT_WATERMARK_LENS").pipe(Ve(a=>{var i;const o=(i=a.find(QZ))===null||i===void 0?void 0:i.value.anyValue.value;if(!o)throw new Error("Failed to read watermark Lens from COF response.");return o}),Ho(a=>(ZZ.error(a),Tn(zr.encode(zr.fromPartial(JZ)).finish())))));return new X().uint32(10).bytes(r).finish()})},loadLensGroup(){return ye(this,void 0,void 0,function*(){throw new Error("Not implemented.")})}},...e,{isGroupOwner(){return!0},loadLens(r,a){var i;return ye(this,void 0,void 0,function*(){const o=yield n.getGroupLens({lensId:r,groupId:a});if(!o.ok){const c=o.unwrapErr();throw new Error(`Cannot load lens lens ${r} from group ${a}. An error occured in the gRPC client:
	[${c.status}] ${c.statusMessage}`)}const u=o.unwrap();if(!(!((i=u.message)===null||i===void 0)&&i.lens))throw new Error(`Cannot load lens ${r} from group ${a}. The response did not contain a lens.
	${JSON.stringify(o)} for requestId ${u.headers.get("x-request-id")}`);return zr.encode(u.message.lens,new X().uint32(10).fork()).join().finish()})},loadLensGroup(r){var a;return ye(this,void 0,void 0,function*(){const i=yield n.getGroup({id:r});if(!i.ok){const c=i.unwrapErr();throw new Error(`Cannot load lens group ${r}. An error occurred in the gRPC client:
	[${c.status}] ${c.statusMessage}`)}const o=i.unwrap();if(!(!((a=o.message)===null||a===void 0)&&a.lenses))throw new Error(`Cannot load lens group ${r}. The response contained no lenses 
	${JSON.stringify(o)} for requestId ${o.headers.get("x-request-id")}`);const u=new X;return o.message.lenses.forEach(c=>zr.encode(c,u.uint32(10).fork()).join()),u.finish()})}}]),tQ=gt("bootstrapCameraKit"),nQ=["ConfigurationError","PlatformNotSupportedError"];function rQ(e){return e instanceof Error?!nQ.some(n=>e.name===n):!0}function aQ(e,n){return ye(this,void 0,void 0,function*(){console.info(`Camera Kit SDK: ${Sy.PACKAGE_VERSION} (${ff.version}/${ff.buildNumber})`);try{const t=new xf("bootstrap_time");Fy(wm(e.apiToken),LW("Invalid or unsafe apiToken provided."));const r=RW(e),a=Mr.provides(r).provides(p4).provides(k4).provides(Qs).provides(yD).provides(Nm).provides(C4).provides(I4).provides(x4).provides(QD),i=n?n(a):a,o=Mr.provides(i).provides(vv).provides(LD).provides(jo).provides(Df).provides(Xr).provides(bv).run(XZ).provides(_a).provides(jy).provides(JD).provides(Ji).provides(h4).provides(hS).run(tZ).run(jZ);o.get(jy.token),yield FZ();const u=yield o.provides(Ar).get(Ar.token),c=o.provides(De(Ar.token,()=>u)).provides(M4).provides(S4).provides(eQ).provides(d4).provides(e4).provides(t4).provides(gv).provides(Il).provides(ET).run(Kj),f=c.get(ET.token);return t.measure(),c.get(Xr.token).setOperationalMetrics(t),f}catch(t){throw rQ(t)&&(t=GW("Error occurred during Camera Kit bootstrapping.",t)),tQ.error(t),t}})}const iQ=dv(function(){return i4.encode({userAgent:Lb(),locale:zi().fullLocale}).finish()});iQ();function oQ(){const e=J.useRef(null),n=J.useRef(null),t=J.useRef(null);return J.useEffect(()=>{let r=!0;async function a(){try{const o=await aQ({apiToken:"eyJhbGciOiJIUzI1NiIsImtpZCI6IkNhbnZhc1MyU0hNQUNQcm9kIiwidHlwIjoiSldUIn0.eyJhdWQiOiJjYW52YXMtY2FudmFzYXBpIiwiaXNzIjoiY2FudmFzLXMyc3Rva2VuIiwibmJmIjoxNzQ0Mzg1MDgzLCJzdWIiOiI5ZDE1OWYwMy1jMjBiLTRmZTEtYmFjOS02OWRhMDkzZDZmNjd-U1RBR0lOR35hMzkwYzkyZS0zOGRmLTQ5OTctYTE5OS1hZTY4YTQ5NzIzOWYifQ.n4psf_y60e6yTvWlqSek2ogdJ_1efi-UafQ1oPVS69E"});if(!r)return;const u=await o.createSession({liveRenderTarget:e.current});n.current=u;const c=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});t.current=c;const f=c4(c,{transform:Ki.MirrorX,cameraType:"user"});await u.setSource(f),await u.play();const h=await o.lensRepository.loadLens("3897e0e1-d636-4305-af3e-984b4b22d2f5","289d2c41-08a4-488f-badf-4764a0d20573");await u.applyLens(h)}catch(i){console.error("Error inicializando cmara:",i)}}return a(),()=>{r=!1,t.current&&t.current.getTracks().forEach(i=>i.stop()),n.current=null}},[]),nt.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},children:nt.jsx("canvas",{ref:e,id:"canvas",style:{width:"100%",height:"100%",objectFit:"cover"}})})}function sQ(){return nt.jsx(sB,{location,children:nt.jsx(MT,{path:"/",element:nt.jsx(oQ,{})})})}const uQ=y2({palette:{primary:{main:"#196DCC"},secondary:{main:"#e30d7c"},text:{primary:"#4A4A4A",secondary:"#6D6D6D"},background:{default:"transparent",paper:"#FFFFFF"}},typography:{fontFamily:"Arial, sans-serif",h4:{color:"#4A4A4A",fontWeight:"bold"},h6:{color:"#30478b",fontWeight:"bold"},button:{textTransform:"none",fontWeight:"bold",color:"#FFFFFF"}},components:{MuiButton:{styleOverrides:{root:{borderRadius:"8px",padding:"8px 16px"}}}}});mL.createRoot(document.getElementById("root")).render(nt.jsx(J.StrictMode,{children:nt.jsx(q6,{theme:uQ,children:nt.jsxs(kB,{children:[nt.jsx(J6,{}),nt.jsx(sQ,{})]})})}))});export default lQ();
